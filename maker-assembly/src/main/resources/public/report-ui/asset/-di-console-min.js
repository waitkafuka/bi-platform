!function(a,b){function c(a){var b,c,d=L[a]={};for(a=a.split(/\s+/),b=0,c=a.length;c>b;b++)d[a[b]]=!0;return d}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(O,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:K.isNumeric(d)?parseFloat(d):N.test(d)?K.parseJSON(d):d}catch(f){}K.data(a,c,d)}else d=b}return d}function e(a){for(var b in a)if(("data"!==b||!K.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=K._data(a,d);!g||"queue"!==c&&K._data(a,e)||"mark"!==c&&K._data(a,f)||setTimeout(function(){K._data(a,e)||K._data(a,f)||(K.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function h(){return!0}function i(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function j(a,b,c){if(b=b||0,K.isFunction(b))return K.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return K.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=K.grep(a,function(a){return 1===a.nodeType});if(lb.test(b))return K.filter(b,d,!c);b=K.filter(b,d)}return K.grep(a,function(a){return K.inArray(a,b)>=0===c})}function k(a){var b=pb.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a){return K.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,b){if(1===b.nodeType&&K.hasData(a)){var c,d,e,f=K._data(a),g=K._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)K.event.add(b,c+(h[c][d].namespace?".":"")+h[c][d].namespace,h[c][d],h[c][d].data)}g.data&&(g.data=K.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(K.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){("checkbox"===a.type||"radio"===a.type)&&(a.defaultChecked=a.checked)}function q(a){var b=(a.nodeName||"").toLowerCase();"input"===b?p(a):"script"!==b&&"undefined"!=typeof a.getElementsByTagName&&K.grep(a.getElementsByTagName("input"),p)}function r(a){var b=H.createElement("div");return Db.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a,b){b.src?K.ajax({url:b.src,async:!1,dataType:"script"}):K.globalEval((b.text||b.textContent||b.innerHTML||"").replace(Bb,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function t(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?Ob:Pb,f=0,g=e.length;if(d>0){if("border"!==c)for(;g>f;f++)c||(d-=parseFloat(K.css(a,"padding"+e[f]))||0),"margin"===c?d+=parseFloat(K.css(a,c+e[f]))||0:d-=parseFloat(K.css(a,"border"+e[f]+"Width"))||0;return d+"px"}if(d=Eb(a,b,b),(0>d||null==d)&&(d=a.style[b]||0),d=parseFloat(d)||0,c)for(;g>f;f++)d+=parseFloat(K.css(a,"padding"+e[f]))||0,"padding"!==c&&(d+=parseFloat(K.css(a,"border"+e[f]+"Width"))||0),"margin"===c&&(d+=parseFloat(K.css(a,c+e[f]))||0);return d+"px"}function u(a){return function(b,c){if("string"!=typeof b&&(c=b,b="*"),K.isFunction(c))for(var d,e,f,g=b.toLowerCase().split(cc),h=0,i=g.length;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function v(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===gc;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=v(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=v(a,c,d,e,"*",g)),h}function w(a,c){var d,e,f=K.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&K.extend(!0,a,e)}function x(a,b,c,d){if(K.isArray(b))K.each(b,function(b,e){c||Tb.test(a)?d(a,e):x(a+"["+("object"==typeof e||K.isArray(e)?b:"")+"]",e,c,d)});else if(c||null==b||"object"!=typeof b)d(a,b);else for(var e in b)x(a+"["+e+"]",b[e],c,d)}function y(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function z(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d,e,f,g,h,i,j,k,l=a.dataTypes,m={},n=l.length,o=l[0];for(d=1;n>d;d++){if(1===d)for(e in a.converters)"string"==typeof e&&(m[e.toLowerCase()]=a.converters[e]);if(g=o,o=l[d],"*"===o)o=g;else if("*"!==g&&g!==o){if(h=g+" "+o,i=m[h]||m["* "+o],!i){k=b;for(j in m)if(f=j.split(" "),(f[0]===g||"*"===f[0])&&(k=m[f[1]+" "+o])){j=m[j],j===!0?i=k:k===!0&&(i=j);break}}i||k||K.error("No conversion from "+h.replace(" "," to ")),i!==!0&&(c=i?i(c):k(j(c)))}}return c}function A(){try{return new a.XMLHttpRequest}catch(b){}}function B(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function C(){return setTimeout(D,0),sc=K.now()}function D(){sc=b}function E(a,b){var c={};return K.each(wc.concat.apply([],wc.slice(0,b)),function(){c[this]=a}),c}function F(a){if(!tc[a]){var b=H.body,c=K("<"+a+">").appendTo(b),d=c.css("display");c.remove(),("none"===d||""===d)&&(pc||(pc=H.createElement("iframe"),pc.frameBorder=pc.width=pc.height=0),b.appendChild(pc),qc&&pc.createElement||(qc=(pc.contentWindow||pc.contentDocument).document,qc.write(("CSS1Compat"===H.compatMode?"<!doctype html>":"")+"<html><body>"),qc.close()),c=qc.createElement(a),qc.body.appendChild(c),d=K.css(c,"display"),b.removeChild(pc)),tc[a]=d}return tc[a]}function G(a){return K.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var H=a.document,I=a.navigator,J=a.location,K=function(){function c(){if(!h.isReady){try{H.documentElement.doScroll("left")}catch(a){return setTimeout(c,1),void 0}h.ready()}}var d,e,f,g,h=function(a,b){return new h.fn.init(a,b,d)},i=a.jQuery,j=a.$,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,m=/^\s+/,n=/\s+$/,o=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,q=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,t=/(webkit)[ \/]([\w.]+)/,u=/(opera)(?:.*version)?[ \/]([\w.]+)/,v=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,x=/-([a-z]|[0-9])/gi,y=/^-ms-/,z=function(a,b){return(b+"").toUpperCase()},A=I.userAgent,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,G=Array.prototype.indexOf,J={};return h.fn=h.prototype={constructor:h,init:function(a,c,d){var e,f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!c&&H.body)return this.context=H,this[0]=H.body,this.selector=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:k.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof h?c[0]:c,i=c?c.ownerDocument||c:H,g=o.exec(a),g?h.isPlainObject(c)?(a=[H.createElement(g[1])],h.fn.attr.call(a,c,!0)):a=[i.createElement(g[1])]:(g=h.buildFragment([e[1]],[i]),a=(g.cacheable?h.clone(g.fragment):g.fragment).childNodes),h.merge(this,a);if(f=H.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=H,this.selector=a,this}return h.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),h.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return h.isArray(a)?D.apply(d,a):h.merge(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return h.each(this,a,b)},ready:function(a){return h.bindReady(),f.add(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(h.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},h.fn.init.prototype=h.fn,h.extend=h.fn.extend=function(){var a,c,d,e,f,g,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"==typeof i||h.isFunction(i)||(i={}),k===j&&(i=this,--j);k>j;j++)if(null!=(a=arguments[j]))for(c in a)d=i[c],e=a[c],i!==e&&(l&&e&&(h.isPlainObject(e)||(f=h.isArray(e)))?(f?(f=!1,g=d&&h.isArray(d)?d:[]):g=d&&h.isPlainObject(d)?d:{},i[c]=h.extend(l,g,e)):e!==b&&(i[c]=e));return i},h.extend({noConflict:function(b){return a.$===h&&(a.$=j),b&&a.jQuery===h&&(a.jQuery=i),h},isReady:!1,readyWait:1,holdReady:function(a){a?h.readyWait++:h.ready(!0)},ready:function(a){if(a===!0&&!--h.readyWait||a!==!0&&!h.isReady){if(!H.body)return setTimeout(h.ready,1);if(h.isReady=!0,a!==!0&&--h.readyWait>0)return;f.fireWith(H,[h]),h.fn.trigger&&h(H).trigger("ready").off("ready")}},bindReady:function(){if(!f){if(f=h.Callbacks("once memory"),"complete"===H.readyState)return setTimeout(h.ready,1);if(H.addEventListener)H.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",h.ready,!1);else if(H.attachEvent){H.attachEvent("onreadystatechange",g),a.attachEvent("onload",h.ready);var b=!1;try{b=null==a.frameElement}catch(d){}H.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return"function"===h.type(a)},isArray:Array.isArray||function(a){return"array"===h.type(a)},isWindow:function(a){return a&&"object"==typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==h.type(a)||a.nodeType||h.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||C.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){return"string"==typeof b&&b?(b=h.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):p.test(b.replace(q,"@").replace(r,"]").replace(s,""))?new Function("return "+b)():(h.error("Invalid JSON: "+b),void 0)):null},parseXML:function(c){var d,e;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||h.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&l.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(y,"ms-").replace(x,z)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,i=g===b||h.isFunction(a);if(d)if(i){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(i){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:F?function(a){return null==a?"":F.call(a)}:function(a){return null==a?"":a.toString().replace(m,"").replace(n,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var d=h.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||h.isWindow(a)?D.call(c,a):h.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(G)return G.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;f>e;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d,e=[];c=!!c;for(var f=0,g=a.length;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],i=0,j=a.length,k=a instanceof h||j!==b&&"number"==typeof j&&(j>0&&a[0]&&a[j-1]||0===j||h.isArray(a));if(k)for(;j>i;i++)e=c(a[i],i,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){if("string"==typeof c){var d=a[c];c=a,a=d}if(!h.isFunction(a))return b;var e=E.call(arguments,2),f=function(){return a.apply(c,e.concat(E.call(arguments)))};return f.guid=a.guid=a.guid||f.guid||h.guid++,f},access:function(a,c,d,e,f,g){var i=a.length;if("object"==typeof c){for(var j in c)h.access(a,j,c[j],e,f,d);return a}if(d!==b){e=!g&&e&&h.isFunction(d);for(var k=0;i>k;k++)f(a[k],c,e?d.call(a[k],k,f(a[k],c)):d,g);return a}return i?f(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=t.exec(a)||u.exec(a)||v.exec(a)||a.indexOf("compatible")<0&&w.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}h.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof h&&!(d instanceof a)&&(d=a(d)),h.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(H);return a},browser:{}}),h.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),e=h.uaMatch(A),e.browser&&(h.browser[e.browser]=!0,h.browser.version=e.version),h.browser.webkit&&(h.browser.safari=!0),l.test("Â ")&&(m=/^[\s\xA0]+/,n=/[\s\xA0]+$/),d=h(H),H.addEventListener?g=function(){H.removeEventListener("DOMContentLoaded",g,!1),h.ready()}:H.attachEvent&&(g=function(){"complete"===H.readyState&&(H.detachEvent("onreadystatechange",g),h.ready())}),h}(),L={};K.Callbacks=function(a){a=a?L[a]||c(a):{};var d,e,f,g,h,i=[],j=[],k=function(b){var c,d,e,f;for(c=0,d=b.length;d>c;c++)e=b[c],f=K.type(e),"array"===f?k(e):"function"===f&&(a.unique&&m.has(e)||i.push(e))},l=function(b,c){for(c=c||[],d=!a.memory||[b,c],e=!0,h=f||0,f=0,g=i.length;i&&g>h;h++)if(i[h].apply(b,c)===!1&&a.stopOnFalse){d=!0;break}e=!1,i&&(a.once?d===!0?m.disable():i=[]:j&&j.length&&(d=j.shift(),m.fireWith(d[0],d[1])))},m={add:function(){if(i){var a=i.length;k(arguments),e?g=i.length:d&&d!==!0&&(f=a,l(d[0],d[1]))}return this},remove:function(){if(i)for(var b=arguments,c=0,d=b.length;d>c;c++)for(var f=0;f<i.length&&(b[c]!==i[f]||(e&&g>=f&&(g--,h>=f&&h--),i.splice(f--,1),!a.unique));f++);return this},has:function(a){if(i)for(var b=0,c=i.length;c>b;b++)if(a===i[b])return!0;return!1},empty:function(){return i=[],this},disable:function(){return i=j=d=b,this},disabled:function(){return!i},lock:function(){return j=b,d&&d!==!0||m.disable(),this},locked:function(){return!j},fireWith:function(b,c){return j&&(e?a.once||j.push([b,c]):a.once&&d||l(b,c)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!d}};return m};var M=[].slice;K.extend({Deferred:function(a){var b,c=K.Callbacks("once memory"),d=K.Callbacks("once memory"),e=K.Callbacks("memory"),f="pending",g={resolve:c,reject:d,notify:e},h={done:c.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:c.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return K.Deferred(function(d){K.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c,e=b[0],f=b[1];K.isFunction(e)?i[a](function(){c=e.apply(this,arguments),c&&K.isFunction(c.promise)?c.promise().then(d.resolve,d.reject,d.notify):d[f+"With"](this===i?d:this,[c])}):i[a](d[f])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(b in g)i[b]=g[b].fire,i[b+"With"]=g[b].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},c.disable,e.lock),a&&a.call(i,i),i},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?M.call(arguments,0):b,--h||i.resolveWith(i,d)}}function c(a){return function(b){g[a]=arguments.length>1?M.call(arguments,0):b,i.notifyWith(j,g)}}var d=M.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,i=1>=f&&a&&K.isFunction(a.promise)?a:K.Deferred(),j=i.promise();if(f>1){for(;f>e;e++)d[e]&&d[e].promise&&K.isFunction(d[e].promise)?d[e].promise().then(b(e),i.reject,c(e)):--h;h||i.resolveWith(i,d)}else i!==a&&i.resolveWith(i,f?[a]:[]);return j}}),K.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n=H.createElement("div");if(H.documentElement,n.setAttribute("className","t"),n.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],!c||!c.length||!d)return{};e=H.createElement("select"),f=e.appendChild(H.createElement("option")),g=n.getElementsByTagName("input")[0],b={leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==n.className,enctype:!!H.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==H.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete n.test}catch(o){b.deleteExpando=!1}if(!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),g=H.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),n.appendChild(g),i=H.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,i.removeChild(g),i.appendChild(n),n.innerHTML="",a.getComputedStyle&&(h=H.createElement("div"),h.style.width="0",h.style.marginRight="0",n.style.width="2px",n.appendChild(h),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(h,null)||{marginRight:0}).marginRight,10)||0)),n.attachEvent)for(l in{submit:1,change:1,focusin:1})k="on"+l,m=k in n,m||(n.setAttribute(k,"return;"),m="function"==typeof n[k]),b[l+"Bubbles"]=m;return i.removeChild(n),i=e=f=h=n=g=null,K(function(){var a,c,d,e,f,g,h,i,k,l,o=H.getElementsByTagName("body")[0];o&&(g=1,h="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",i="visibility:hidden;border:0;",k="style='"+h+"border:5px solid #000;padding:0;'",l="<div "+k+"><div></div></div>"+"<table "+k+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",a=H.createElement("div"),a.style.cssText=i+"width:0;height:0;position:static;top:0;margin-top:"+g+"px",o.insertBefore(a,o.firstChild),n=H.createElement("div"),a.appendChild(n),n.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",j=n.getElementsByTagName("td"),m=0===j[0].offsetHeight,j[0].style.display="",j[1].style.display="none",b.reliableHiddenOffsets=m&&0===j[0].offsetHeight,n.innerHTML="",n.style.width=n.style.paddingLeft="1px",K.boxModel=b.boxModel=2===n.offsetWidth,"undefined"!=typeof n.style.zoom&&(n.style.display="inline",n.style.zoom=1,b.inlineBlockNeedsLayout=2===n.offsetWidth,n.style.display="",n.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=2!==n.offsetWidth),n.style.cssText=h+i,n.innerHTML=l,c=n.firstChild,d=c.firstChild,e=c.nextSibling.firstChild.firstChild,f={doesNotAddBorder:5!==d.offsetTop,doesAddBorderForTableAndCells:5===e.offsetTop},d.style.position="fixed",d.style.top="20px",f.fixedPosition=20===d.offsetTop||15===d.offsetTop,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",f.subtractsBorderForOverflowNotVisible=-5===d.offsetTop,f.doesNotIncludeMarginInBodyOffset=o.offsetTop!==g,o.removeChild(a),n=a=null,K.extend(b,f))}),b}();var N=/^(?:\{.*\}|\[.*\])$/,O=/([A-Z])/g;K.extend({cache:{},uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?K.cache[a[K.expando]]:a[K.expando],!!a&&!e(a)},data:function(a,c,d,e){if(K.acceptData(a)){var f,g,h,i=K.expando,j="string"==typeof c,k=a.nodeType,l=k?K.cache:a,m=k?a[i]:a[i]&&i,n="events"===c;if(m&&l[m]&&(n||e||l[m].data)||!j||d!==b)return m||(k?a[i]=m=++K.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=K.noop)),("object"==typeof c||"function"==typeof c)&&(e?l[m]=K.extend(l[m],c):l[m].data=K.extend(l[m].data,c)),f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[K.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],null==h&&(h=g[K.camelCase(c)])):h=g,h)}},removeData:function(a,b,c){if(K.acceptData(a)){var d,f,g,h=K.expando,i=a.nodeType,j=i?K.cache:a,k=i?a[h]:h;if(j[k]){if(b&&(d=c?j[k]:j[k].data)){K.isArray(b)||(b in d?b=[b]:(b=K.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:K.isEmptyObject)(d))return}(c||(delete j[k].data,e(j[k])))&&(K.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(K.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null))}}},_data:function(a,b,c){return K.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=K.noData[a.nodeName.toLowerCase()];if(b)return!(b===!0||a.getAttribute("classid")!==b)}return!0}}),K.fn.extend({data:function(a,c){var e,f,g,h=null;if("undefined"==typeof a){if(this.length&&(h=K.data(this[0]),1===this[0].nodeType&&!K._data(this[0],"parsedAttrs"))){f=this[0].attributes;for(var i=0,j=f.length;j>i;i++)g=f[i].name,0===g.indexOf("data-")&&(g=K.camelCase(g.substring(5)),d(this[0],g,h[g]));K._data(this[0],"parsedAttrs",!0)}return h}return"object"==typeof a?this.each(function(){K.data(this,a)}):(e=a.split("."),e[1]=e[1]?"."+e[1]:"",c===b?(h=this.triggerHandler("getData"+e[1]+"!",[e[0]]),h===b&&this.length&&(h=K.data(this[0],a),h=d(this[0],a,h)),h===b&&e[1]?this.data(e[0]):h):this.each(function(){var b=K(this),d=[e[0],c];b.triggerHandler("setData"+e[1]+"!",d),K.data(this,a,c),b.triggerHandler("changeData"+e[1]+"!",d)}))},removeData:function(a){return this.each(function(){K.removeData(this,a)})}}),K.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",K._data(a,b,(K._data(a,b)||0)+1))},_unmark:function(a,b,c){if(a!==!0&&(c=b,b=a,a=!1),b){c=c||"fx";var d=c+"mark",e=a?0:(K._data(b,d)||1)-1;e?K._data(b,d,e):(K.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=K._data(a,b),c&&(!d||K.isArray(c)?d=K._data(a,b,K.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=K.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),K._data(a,b+".run",e),d.call(a,function(){K.dequeue(a,b)},e)),c.length||(K.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}}),K.fn.extend({queue:function(a,c){return"string"!=typeof a&&(c=a,a="fx"),c===b?K.queue(this[0],a):this.each(function(){var b=K.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&K.dequeue(this,a)})},dequeue:function(a){return this.each(function(){K.dequeue(this,a)})},delay:function(a,b){return a=K.fx?K.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--i||f.resolveWith(g,[g])}"string"!=typeof a&&(c=a,a=b),a=a||"fx";for(var e,f=K.Deferred(),g=this,h=g.length,i=1,j=a+"defer",k=a+"queue",l=a+"mark";h--;)(e=K.data(g[h],j,b,!0)||(K.data(g[h],k,b,!0)||K.data(g[h],l,b,!0))&&K.data(g[h],j,K.Callbacks("once memory"),!0))&&(i++,e.add(d));return d(),f.promise()}});var P,Q,R,S=/[\n\t\r]/g,T=/\s+/,U=/\r/g,V=/^(?:button|input)$/i,W=/^(?:button|input|object|select|textarea)$/i,X=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Z=K.support.getSetAttribute;K.fn.extend({attr:function(a,b){return K.access(this,a,b,!0,K.attr)},removeAttr:function(a){return this.each(function(){K.removeAttr(this,a)})},prop:function(a,b){return K.access(this,a,b,!0,K.prop)},removeProp:function(a){return a=K.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(K.isFunction(a))return this.each(function(b){K(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(T),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=K.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(K.isFunction(a))return this.each(function(b){K(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(T),d=0,e=this.length;e>d;d++)if(f=this[d],1===f.nodeType&&f.className)if(a){for(g=(" "+f.className+" ").replace(S," "),h=0,i=c.length;i>h;h++)g=g.replace(" "+c[h]+" "," ");f.className=K.trim(g)}else f.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return K.isFunction(a)?this.each(function(c){K(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=K(this),h=b,i=a.split(T);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||a===!1?"":K._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(S," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=K.isFunction(a),this.each(function(d){var f,g=K(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":K.isArray(f)&&(f=K.map(f,function(a){return null==a?"":a+""})),c=K.valHooks[this.nodeName.toLowerCase()]||K.valHooks[this.type],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=K.valHooks[f.nodeName.toLowerCase()]||K.valHooks[f.type],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(U,""):null==d?"":d)}}}),K.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||(K.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&K.nodeName(e.parentNode,"optgroup"))){if(b=K(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?K(h[f]).val():g},set:function(a,b){var c=K.makeArray(b);return K(a).find("option").each(function(){this.selected=K.inArray(K(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&c in K.attrFn?K(a)[c](d):"undefined"==typeof a.getAttribute?K.prop(a,c,d):(h=1!==i||!K.isXMLDoc(a),h&&(c=c.toLowerCase(),g=K.attrHooks[c]||(Y.test(c)?Q:P)),d!==b?null===d?(K.removeAttr(a,c),void 0):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(T),f=d.length;f>g;g++)e=d[g],e&&(c=K.propFix[e]||e,K.attr(a,e,""),a.removeAttribute(Z?e:c),Y.test(e)&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(V.test(a.nodeName)&&a.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===b&&K.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return P&&K.nodeName(a,"button")?P.get(a,b):b in a?a.value:null},set:function(a,b,c){return P&&K.nodeName(a,"button")?P.set(a,b,c):(a.value=b,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!K.isXMLDoc(a),g&&(c=K.propFix[c]||c,f=K.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):W.test(a.nodeName)||X.test(a.nodeName)&&a.href?0:b}}}}),K.attrHooks.tabindex=K.propHooks.tabIndex,Q={get:function(a,c){var d,e=K.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?K.removeAttr(a,c):(d=K.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Z||(R={name:!0,id:!0},P=K.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(R[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=H.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},K.attrHooks.tabindex.set=P.set,K.each(["width","height"],function(a,b){K.attrHooks[b]=K.extend(K.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),K.attrHooks.contenteditable={get:P.get,set:function(a,b,c){""===b&&(b="false"),P.set(a,b,c)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(a,c){K.attrHooks[c]=K.extend(K.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),K.support.style||(K.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(a,b){return K.isArray(b)?a.checked=K.inArray(K(a).val(),b)>=0:void 0}})});var $=/^(?:textarea|input|select)$/i,_=/^([^\.]*)?(?:\.(.+))?$/,ab=/\bhover(\.\S+)?\b/,bb=/^key/,cb=/^(?:mouse|contextmenu)|click/,db=/^(?:focusinfocus|focusoutblur)$/,eb=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,fb=function(a){var b=eb.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},gb=function(a,b){var c=a.attributes||{};return!(b[1]&&a.nodeName.toLowerCase()!==b[1]||b[2]&&(c.id||{}).value!==b[2]||b[3]&&!b[3].test((c["class"]||{}).value))},hb=function(a){return K.event.special.hover?a:a.replace(ab,"mouseenter$1 mouseleave$1")
};K.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=K._data(a))){for(d.handler&&(o=d,d=o.handler),d.guid||(d.guid=K.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof K||a&&K.event.triggered===a.type?b:K.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=K.trim(hb(c)).split(" "),j=0;j<c.length;j++)k=_.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=K.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=K.event.special[l]||{},n=K.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:fb(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),K.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r=K.hasData(a)&&K._data(a);if(r&&(m=r.events)){for(b=K.trim(hb(b||"")).split(" "),f=0;f<b.length;f++)if(g=_.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=K.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,p=m[h]||[],k=p.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=0;l<p.length;l++)q=p[l],!e&&i!==q.origType||c&&c.guid!==q.guid||j&&!j.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(p.splice(l--,1),q.selector&&p.delegateCount--,n.remove&&n.remove.call(a,q));0===p.length&&k!==p.length&&(n.teardown&&n.teardown.call(a,j)!==!1||K.removeEvent(a,h,r.handle),delete m[h])}else for(h in m)K.event.remove(a,h+b[f],c,d,!0);K.isEmptyObject(m)&&(o=r.handle,o&&(o.elem=null),K.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!db.test(q+K.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!K.event.customEvent[q]||K.event.global[q]))if(c="object"==typeof c?c[K.expando]?c:new K.Event(q,c):new K.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?K.makeArray(d):[],d.unshift(c),m=K.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!K.isWindow(e)){for(p=m.delegateType||q,j=db.test(p+q)?e:e.parentNode,k=null;j;j=j.parentNode)o.push([j,p]),k=j;k&&k===e.ownerDocument&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=(K._data(j,"events")||{})[c.type]&&K._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&K.acceptData(j)&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&K.nodeName(e,"a")||!K.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!K.isWindow(e)&&(k=e[l],k&&(e[l]=null),K.event.triggered=q,e[q](),K.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=K.cache;for(i in g)g[i].events&&g[i].events[q]&&K.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=K.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,n=(K._data(this,"events")||{})[c.type]||[],o=n.delegateCount,p=[].slice.call(arguments,0),q=!c.exclusive&&!c.namespace,r=[];if(p[0]=c,c.delegateTarget=this,o&&!c.target.disabled&&(!c.button||"click"!==c.type))for(g=K(this),g.context=this.ownerDocument||this,f=c.target;f!=this;f=f.parentNode||this){for(i={},k=[],g[0]=f,d=0;o>d;d++)l=n[d],m=l.selector,i[m]===b&&(i[m]=l.quick?gb(f,l.quick):g.is(m)),i[m]&&k.push(l);k.length&&r.push({elem:f,matches:k})}for(n.length>o&&r.push({elem:this,matches:n.slice(o)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(j=r[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(q||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,h=((K.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,p),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation())));return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||H,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[K.expando])return a;var c,d,e=a,f=K.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;for(a=K.Event(e),c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||H),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:K.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){K.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=K.extend(new K.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?K.event.trigger(e,null,b):K.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=H.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},K.Event=function(a,b){return this instanceof K.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:g):this.type=a,b&&K.extend(this,b),this.timeStamp=a&&a.timeStamp||K.now(),this[K.expando]=!0,void 0):new K.Event(a,b)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){K.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return f.selector,(!e||e!==d&&!K.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:(K.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=K.nodeName(c,"input")||K.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(K.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&K.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)}),void 0)},teardown:function(){return K.nodeName(this,"form")?!1:(K.event.remove(this,"._submit"),void 0)}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return $.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,K.event.simulate("change",this,a,!0))})),!1):(K.event.add(this,"beforeactivate._change",function(a){var b=a.target;$.test(b.nodeName)&&!b._change_attached&&(K.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||K.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)}),void 0)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return K.event.remove(this,"._change"),$.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){K.event.simulate(b,a.target,K.event.fix(a),!0)};K.event.special[b]={setup:function(){0===c++&&H.addEventListener(a,d,!0)},teardown:function(){0===--c&&H.removeEventListener(a,d,!0)}}}),K.fn.extend({on:function(a,c,d,e,f){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=g;else if(!e)return this;return 1===f&&(h=e,e=function(a){return K().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=K.guid++)),this.each(function(){K.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return K(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if("object"==typeof a){for(var f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=g),this.each(function(){K.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return K(this.context).on(a,this.selector,b,c),this},die:function(a,b){return K(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){K.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?K.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||K.guid++,d=0,e=function(c){var e=(K._data(this,"lastToggle"+a.guid)||0)%d;return K._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){K.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},K.attrFn&&(K.attrFn[b]=!0),bb.test(b)&&(K.event.fixHooks[b]=K.event.keyHooks),cb.test(b)&&(K.event.fixHooks[b]=K.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1!==j.nodeType||g||(j[e]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(j){var k=!1;for(j=j[a];j;){if(j[e]===c){k=d[j.sizset];break}if(1===j.nodeType)if(g||(j[e]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||H;var f=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do if(d.exec(""),h=d.exec(x),h&&(x=h[3],v.push(h[1]),h[2])){k=h[3];break}while(h);if(v.length>1&&p.exec(a))if(2===v.length&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else for(i=o.relative[v[0]]?[b]:m(v.shift(),b);v.length;)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e);else if(!e&&v.length>1&&9===b.nodeType&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]),b)for(l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),1!==v.length||"~"!==v[0]&&"+"!==v[0]||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;v.length;)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",null==q&&(q=b),o.relative[n](j,q,u);else j=v=[];if(j||(j=i),j||m.error(n||a),"[object Array]"===g.call(j))if(t)if(b&&1===b.nodeType)for(r=0;null!=j[r];r++)j[r]&&(j[r]===!0||1===j[r].nodeType&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;null!=j[r];r++)j[r]&&1===j[r].nodeType&&c.push(i[r]);else c.push.apply(c,j);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u&&(h=i,a.sort(u),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;f>e;e++)if(h=o.order[e],(g=o.leftMatch[h].exec(a))&&(i=g[1],g.splice(1,1),"\\"!==i.substr(i.length-1)&&(g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c),null!=d))){a=a.replace(o.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){for(var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);a&&c.length;){for(h in o.filter)if(null!=(f=o.leftMatch[h].exec(a))&&f[2]){if(k=o.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"===l.substr(l.length-1))continue;if(s===r&&(r=[]),o.preFilter[h])if(f=o.preFilter[h](f,s,d,r,e,t)){if(f===!0)continue}else g=i=!0;if(f)for(n=0;null!=(j=s[n]);n++)j&&(i=k(j,f,n,s),p=e^i,d&&null!=i?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){if(d||(s=r),a=a.replace(o.match[h],""),!g)return[];break}}if(a===q){if(null!=g)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,h=a.length;h>g;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!l.test(b)){for(b=b.toLowerCase();f>e;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}else{for(;f>e;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=c;"string"!=typeof d||l.test(d)||(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a[1]):void 0}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(j,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if("not"===a[1]){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=m(a[3],null,null,b)}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;i>h;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j=b[1],k=a;switch(j){case"only":case"first":for(;k=k.previousSibling;)if(1===k.nodeType)return!1;if("first"===j)return!0;k=a;case"last":for(;k=k.nextSibling;)if(1===k.nodeType)return!1;return!0;case"nth":if(c=b[2],d=b[3],1===c&&0===d)return!0;if(f=b[0],g=a.parentNode,g&&(g[e]!==f||!a.nodeIndex)){for(h=0,k=g.firstChild;k;k=k.nextSibling)1===k.nodeType&&(k.nodeIndex=++h);g[e]=f}return i=a.nodeIndex-d,0===c?0===i:0===i%c&&i/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&m.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];return f?f(a,c,b,d):void 0}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(H.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;e>c;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;H.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=H.createElement("div"),c="script"+(new Date).getTime(),d=H.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),H.getElementById(c)&&(o.find.ID=function(a,c,d){if("undefined"!=typeof c.getElementById&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||"undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=H.createElement("div");a.appendChild(H.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),H.querySelectorAll&&function(){var a=m,b=H.createElement("div"),c="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){m=function(b,d,e,f){if(d=d||H,!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(1===d.nodeType||9===d.nodeType)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(9===d.nodeType){if("body"===b&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}}(),function(){var a=H.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(H.createElement("div"),"div"),d=!1;try{b.call(H.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){if(e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&11!==a.document.nodeType)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=H.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}(),m.contains=H.documentElement.contains?function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:H.documentElement.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?"HTML"!==b.nodeName:!1};var w=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=o.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;i>h;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=K.attr,m.selectors.attrMap={},K.find=m,K.expr=m.selectors,K.expr[":"]=K.expr.filters,K.unique=m.uniqueSort,K.text=m.getText,K.isXMLDoc=m.isXML,K.contains=m.contains}();var ib=/Until$/,jb=/^(?:parents|prevUntil|prevAll)/,kb=/,/,lb=/^.[^:#\[\.,]*$/,mb=Array.prototype.slice,nb=K.expr.match.POS,ob={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(a){var b,c,d=this;if("string"!=typeof a)return K(a).filter(function(){for(b=0,c=d.length;c>b;b++)if(K.contains(d[b],this))return!0});var e,f,g,h=this.pushStack("","find",a);for(b=0,c=this.length;c>b;b++)if(e=h.length,K.find(a,this[b],h),b>0)for(f=e;f<h.length;f++)for(g=0;e>g;g++)if(h[g]===h[f]){h.splice(f--,1);break}return h},has:function(a){var b=K(a);return this.filter(function(){for(var a=0,c=b.length;c>a;a++)if(K.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?nb.test(a)?K(a,this.context).index(this[0])>=0:K.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d,e=[],f=this[0];if(K.isArray(a)){for(var g=1;f&&f.ownerDocument&&f!==b;){for(c=0;c<a.length;c++)K(f).is(a[c])&&e.push({selector:a[c],elem:f,level:g});f=f.parentNode,g++}return e}var h=nb.test(a)||"string"!=typeof a?K(a,b||this.context):0;for(c=0,d=this.length;d>c;c++)for(f=this[c];f;){if(h?h.index(f)>-1:K.find.matchesSelector(f,a)){e.push(f);break}if(f=f.parentNode,!f||!f.ownerDocument||f===b||11===f.nodeType)break}return e=e.length>1?K.unique(e):e,this.pushStack(e,"closest",a)},index:function(a){return a?"string"==typeof a?K.inArray(this[0],K(a)):K.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?K(a,b):K.makeArray(a&&a.nodeType?[a]:a),d=K.merge(this.get(),c);return this.pushStack(i(c[0])||i(d[0])?d:K.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),K.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return K.dir(a,"parentNode")},parentsUntil:function(a,b,c){return K.dir(a,"parentNode",c)},next:function(a){return K.nth(a,2,"nextSibling")},prev:function(a){return K.nth(a,2,"previousSibling")},nextAll:function(a){return K.dir(a,"nextSibling")},prevAll:function(a){return K.dir(a,"previousSibling")},nextUntil:function(a,b,c){return K.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return K.dir(a,"previousSibling",c)},siblings:function(a){return K.sibling(a.parentNode.firstChild,a)},children:function(a){return K.sibling(a.firstChild)},contents:function(a){return K.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:K.makeArray(a.childNodes)}},function(a,b){K.fn[a]=function(c,d){var e=K.map(this,b,c);return ib.test(a)||(d=c),d&&"string"==typeof d&&(e=K.filter(d,e)),e=this.length>1&&!ob[a]?K.unique(e):e,(this.length>1||kb.test(d))&&jb.test(a)&&(e=e.reverse()),this.pushStack(e,a,mb.call(arguments).join(","))}}),K.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?K.find.matchesSelector(b[0],a)?[b[0]]:[]:K.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!K(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},nth:function(a,b,c){b=b||1;for(var d=0;a&&(1!==a.nodeType||++d!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var pb="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qb=/ jQuery\d+="(?:\d+|null)"/g,rb=/^\s+/,sb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,tb=/<([\w:]+)/,ub=/<tbody/i,vb=/<|&#?\w+;/,wb=/<(?:script|style)/i,xb=/<(?:script|object|embed|option|style)/i,yb=new RegExp("<(?:"+pb+")","i"),zb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ab=/\/(java|ecma)script/i,Bb=/^\s*<!(?:\[CDATA\[|\-\-)/,Cb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Db=k(H);Cb.optgroup=Cb.option,Cb.tbody=Cb.tfoot=Cb.colgroup=Cb.caption=Cb.thead,Cb.th=Cb.td,K.support.htmlSerialize||(Cb._default=[1,"div<div>","</div>"]),K.fn.extend({text:function(a){return K.isFunction(a)?this.each(function(b){var c=K(this);c.text(a.call(this,b,c.text()))}):"object"!=typeof a&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||H).createTextNode(a)):K.text(this)},wrapAll:function(a){if(K.isFunction(a))return this.each(function(b){K(this).wrapAll(a.call(this,b))});if(this[0]){var b=K(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return K.isFunction(a)?this.each(function(b){K(this).wrapInner(a.call(this,b))}):this.each(function(){var b=K(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=K.isFunction(a);return this.each(function(c){K(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=K.clean(arguments);
return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,K.clean(arguments)),a}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||K.filter(a,[c]).length)&&(b||1!==c.nodeType||(K.cleanData(c.getElementsByTagName("*")),K.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&K.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return K.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(qb,""):null;if("string"!=typeof a||wb.test(a)||!K.support.leadingWhitespace&&rb.test(a)||Cb[(tb.exec(a)||["",""])[1].toLowerCase()])K.isFunction(a)?this.each(function(b){var c=K(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(sb,"<$1></$2>");try{for(var c=0,d=this.length;d>c;c++)1===this[c].nodeType&&(K.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}return this},replaceWith:function(a){return this[0]&&this[0].parentNode?K.isFunction(a)?this.each(function(b){var c=K(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=K(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;K(this).remove(),b?K(b).before(a):K(c).append(a)})):this.length?this.pushStack(K(K.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!K.support.checkClone&&3===arguments.length&&"string"==typeof i&&zb.test(i))return this.each(function(){K(this).domManip(a,c,d,!0)});if(K.isFunction(i))return this.each(function(e){var f=K(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(h=i&&i.parentNode,e=K.support.parentNode&&h&&11===h.nodeType&&h.childNodes.length===this.length?{fragment:h}:K.buildFragment(a,this,j),g=e.fragment,f=1===g.childNodes.length?g=g.firstChild:g.firstChild){c=c&&K.nodeName(f,"tr");for(var k=0,m=this.length,n=m-1;m>k;k++)d.call(c?l(this[k],f):this[k],e.cacheable||m>1&&n>k?K.clone(g,!0,!0):g)}j.length&&K.each(j,s)}return this}}),K.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=H),!(1===a.length&&"string"==typeof h&&h.length<512&&g===H&&"<"===h.charAt(0))||xb.test(h)||!K.support.checkClone&&zb.test(h)||!K.support.html5Clone&&yb.test(h)||(e=!0,f=K.fragments[h],f&&1!==f&&(d=f)),d||(d=g.createDocumentFragment(),K.clean(a,g,d,c)),e&&(K.fragments[h]=f?d:1),{fragment:d,cacheable:e}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){K.fn[a]=function(c){var d=[],e=K(c),f=1===this.length&&this[0].parentNode;if(f&&11===f.nodeType&&1===f.childNodes.length&&1===e.length)return e[b](this[0]),this;for(var g=0,h=e.length;h>g;g++){var i=(g>0?this.clone(!0):this).get();K(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),K.extend({clone:function(a,b,c){var d,e,f,g=K.support.html5Clone||!yb.test("<"+a.nodeName)?a.cloneNode(!0):r(a);if(!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||K.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e;b=b||H,"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||H);for(var f,g,h=[],i=0;null!=(g=a[i]);i++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(vb.test(g)){g=g.replace(sb,"<$1></$2>");var j=(tb.exec(g)||["",""])[1].toLowerCase(),l=Cb[j]||Cb._default,m=l[0],n=b.createElement("div");for(b===H?Db.appendChild(n):k(b).appendChild(n),n.innerHTML=l[1]+g+l[2];m--;)n=n.lastChild;if(!K.support.tbody){var o=ub.test(g),p="table"!==j||o?"<table>"!==l[1]||o?[]:n.childNodes:n.firstChild&&n.firstChild.childNodes;for(f=p.length-1;f>=0;--f)K.nodeName(p[f],"tbody")&&!p[f].childNodes.length&&p[f].parentNode.removeChild(p[f])}!K.support.leadingWhitespace&&rb.test(g)&&n.insertBefore(b.createTextNode(rb.exec(g)[0]),n.firstChild),g=n.childNodes}else g=b.createTextNode(g);var r;if(!K.support.appendChecked)if(g[0]&&"number"==typeof(r=g.length))for(f=0;r>f;f++)q(g[f]);else q(g);g.nodeType?h.push(g):h=K.merge(h,g)}if(c)for(e=function(a){return!a.type||Ab.test(a.type)},i=0;h[i];i++)if(!d||!K.nodeName(h[i],"script")||h[i].type&&"text/javascript"!==h[i].type.toLowerCase()){if(1===h[i].nodeType){var s=K.grep(h[i].getElementsByTagName("script"),e);h.splice.apply(h,[i+1,0].concat(s))}c.appendChild(h[i])}else d.push(h[i].parentNode?h[i].parentNode.removeChild(h[i]):h[i]);return h},cleanData:function(a){for(var b,c,d,e=K.cache,f=K.event.special,g=K.support.deleteExpando,h=0;null!=(d=a[h]);h++)if((!d.nodeName||!K.noData[d.nodeName.toLowerCase()])&&(c=d[K.expando])){if(b=e[c],b&&b.events){for(var i in b.events)f[i]?K.event.remove(d,i):K.removeEvent(d,i,b.handle);b.handle&&(b.handle.elem=null)}g?delete d[K.expando]:d.removeAttribute&&d.removeAttribute(K.expando),delete e[c]}}});var Eb,Fb,Gb,Hb=/alpha\([^)]*\)/i,Ib=/opacity=([^)]*)/,Jb=/([A-Z]|^ms)/g,Kb=/^-?\d+(?:px)?$/i,Lb=/^-?\d/,Mb=/^([\-+])=([\-+.\de]+)/,Nb={position:"absolute",visibility:"hidden",display:"block"},Ob=["Left","Right"],Pb=["Top","Bottom"];K.fn.css=function(a,c){return 2===arguments.length&&c===b?this:K.access(this,a,c,!0,function(a,c,d){return d!==b?K.style(a,c,d):K.css(a,c)})},K.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Eb(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h=K.camelCase(c),i=a.style,j=K.cssHooks[h];if(c=K.cssProps[h]||h,d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];if(g=typeof d,"string"===g&&(f=Mb.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(K.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||K.cssNumber[h]||(d+="px"),j&&"set"in j&&(d=j.set(a,d))===b)))try{i[c]=d}catch(k){}}},css:function(a,c,d){var e,f;return c=K.camelCase(c),f=K.cssHooks[c],c=K.cssProps[c]||c,"cssFloat"===c&&(c="float"),f&&"get"in f&&(e=f.get(a,!0,d))!==b?e:Eb?Eb(a,c):void 0},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),K.curCSS=K.css,K.each(["height","width"],function(a,b){K.cssHooks[b]={get:function(a,c,d){var e;return c?0!==a.offsetWidth?t(a,b,d):(K.swap(a,Nb,function(){e=t(a,b,d)}),e):void 0},set:function(a,b){return Kb.test(b)?(b=parseFloat(b),b>=0?b+"px":void 0):b}}}),K.support.opacity||(K.cssHooks.opacity={get:function(a,b){return Ib.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=K.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===K.trim(f.replace(Hb,""))&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=Hb.test(f)?f.replace(Hb,e):f+" "+e)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(a,b){var c;return K.swap(a,{display:"inline-block"},function(){c=b?Eb(a,"margin-right","marginRight"):a.style.marginRight}),c}})}),H.defaultView&&H.defaultView.getComputedStyle&&(Fb=function(a,b){var c,d,e;return b=b.replace(Jb,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""!==c||K.contains(a.ownerDocument.documentElement,a)||(c=K.style(a,b))),c}),H.documentElement.currentStyle&&(Gb=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return null===f&&g&&(e=g[b])&&(f=e),!Kb.test(f)&&Lb.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),""===f?"auto":f}),Eb=Fb||Gb,K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return 0===b&&0===c||!K.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||K.css(a,"display"))},K.expr.filters.visible=function(a){return!K.expr.filters.hidden(a)});var Qb,Rb,Sb=/%20/g,Tb=/\[\]$/,Ub=/\r?\n/g,Vb=/#.*$/,Wb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Xb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Yb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Zb=/^(?:GET|HEAD)$/,$b=/^\/\//,_b=/\?/,ac=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bc=/^(?:select|textarea)/i,cc=/\s+/,dc=/([?&])_=[^&]*/,ec=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,fc=K.fn.load,gc={},hc={},ic=["*/"]+["*"];try{Qb=J.href}catch(jc){Qb=H.createElement("a"),Qb.href="",Qb=Qb.href}Rb=ec.exec(Qb.toLowerCase())||[],K.fn.extend({load:function(a,c,d){if("string"!=typeof a&&fc)return fc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(K.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=K.param(c,K.ajaxSettings.traditional),g="POST"));var h=this;return K.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?K("<div>").append(c.replace(ac,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bc.test(this.nodeName)||Xb.test(this.type))}).map(function(a,b){var c=K(this).val();return null==c?null:K.isArray(c)?K.map(c,function(a){return{name:b.name,value:a.replace(Ub,"\r\n")}}):{name:b.name,value:c.replace(Ub,"\r\n")}}).get()}}),K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){K.fn[b]=function(a){return this.on(b,a)}}),K.each(["get","post"],function(a,c){K[c]=function(a,d,e,f){return K.isFunction(d)&&(f=f||e,e=d,d=b),K.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),K.extend({getScript:function(a,c){return K.get(a,b,c,"script")},getJSON:function(a,b,c){return K.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?w(a,K.ajaxSettings):(b=a,a=K.ajaxSettings),w(a,b),a},ajaxSettings:{url:Qb,isLocal:Yb.test(Rb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ic},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:u(gc),ajaxTransport:u(hc),ajax:function(a,c){function d(a,c,d,g){if(2!==u){u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0;var j,l,s,t,v,x=c,A=d?y(m,w,d):b;if(a>=200&&300>a||304===a)if(m.ifModified&&((t=w.getResponseHeader("Last-Modified"))&&(K.lastModified[e]=t),(v=w.getResponseHeader("Etag"))&&(K.etag[e]=v)),304===a)x="notmodified",j=!0;else try{l=z(m,A),x="success",j=!0}catch(B){x="parsererror",s=B}else s=x,(!x||a)&&(x="error",0>a&&(a=0));w.status=a,w.statusText=""+(c||x),j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--K.active||K.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=K.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof K)?K(n):K.event,p=K.Deferred(),q=K.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Wb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||"abort",h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.then(b,b)}return this},m.url=((a||m.url)+"").replace(Vb,"").replace($b,Rb[1]+"//"),m.dataTypes=K.trim(m.dataType||"*").toLowerCase().split(cc),null==m.crossDomain&&(j=ec.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]==Rb[1]&&j[2]==Rb[2]&&(j[3]||("http:"===j[1]?80:443))==(Rb[3]||("http:"===Rb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=K.param(m.data,m.traditional)),v(gc,m,c,w),2===u)return!1;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Zb.test(m.type),k&&0===K.active++&&K.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(_b.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=K.now(),A=m.url.replace(dc,"$1_="+x);m.url=A+(A===m.url?(_b.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,K.lastModified[e]&&w.setRequestHeader("If-Modified-Since",K.lastModified[e]),K.etag[e]&&w.setRequestHeader("If-None-Match",K.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ic+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort(),!1;for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=v(hc,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(B){if(!(2>u))throw B;d(-1,B)}}else d(-1,"No Transport");return w},param:function(a,c){var d=[],e=function(a,b){b=K.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=K.ajaxSettings.traditional),K.isArray(a)||a.jquery&&!K.isPlainObject(a))K.each(a,function(){e(this.name,this.value)});else for(var f in a)x(f,a[f],c,e);return d.join("&").replace(Sb,"+")}}),K.extend({active:0,lastModified:{},etag:{}});var kc=K.now(),lc=/(\=)\?(&|$)|\?\?/i;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return K.expando+"_"+kc++}}),K.ajaxPrefilter("json jsonp",function(b,c,d){var e="application/x-www-form-urlencoded"===b.contentType&&"string"==typeof b.data;if("jsonp"===b.dataTypes[0]||b.jsonp!==!1&&(lc.test(b.url)||e&&lc.test(b.data))){var f,g=b.jsonpCallback=K.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(lc,k),b.url===i&&(e&&(j=j.replace(lc,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&K.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||K.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return K.globalEval(a),a}}}),K.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),K.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=H.head||H.getElementsByTagName("head")[0]||H.documentElement;return{send:function(e,f){c=H.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var mc,nc=a.ActiveXObject?function(){for(var a in mc)mc[a](0,1)}:!1,oc=0;K.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&A()||B()}:A,function(a){K.extend(K.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(c){if(!c.crossDomain||K.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=K.noop,nc&&delete mc[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m),l.text=i.responseText;try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async&&4!==i.readyState?(g=++oc,nc&&(mc||(mc={},K(a).unload(nc)),mc[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var pc,qc,rc,sc,tc={},uc=/^(?:toggle|show|hide)$/,vc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,wc=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];K.fn.extend({show:function(a,b,c){var d,e;if(a||0===a)return this.animate(E("show",3),a,b,c);for(var f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=d.style.display,K._data(d,"olddisplay")||"none"!==e||(e=d.style.display=""),""===e&&"none"===K.css(d,"display")&&K._data(d,"olddisplay",F(d.nodeName)));for(f=0;g>f;f++)d=this[f],d.style&&(e=d.style.display,(""===e||"none"===e)&&(d.style.display=K._data(d,"olddisplay")||""));return this},hide:function(a,b,c){if(a||0===a)return this.animate(E("hide",3),a,b,c);for(var d,e,f=0,g=this.length;g>f;f++)d=this[f],d.style&&(e=K.css(d,"display"),"none"===e||K._data(d,"olddisplay")||K._data(d,"olddisplay",e));for(f=0;g>f;f++)this[f].style&&(this[f].style.display="none");return this},_toggle:K.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;return K.isFunction(a)&&K.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:K(this).is(":hidden");K(this)[b?"show":"hide"]()}):this.animate(E("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){f.queue===!1&&K._mark(this);var b,c,d,e,g,h,i,j,k,l=K.extend({},f),m=1===this.nodeType,n=m&&K(this).is(":hidden");l.animatedProperties={};for(d in a){if(b=K.camelCase(d),d!==b&&(a[b]=a[d],delete a[d]),c=a[b],K.isArray(c)?(l.animatedProperties[b]=c[1],c=a[b]=c[0]):l.animatedProperties[b]=l.specialEasing&&l.specialEasing[b]||l.easing||"swing","hide"===c&&n||"show"===c&&!n)return l.complete.call(this);!m||"height"!==b&&"width"!==b||(l.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===K.css(this,"display")&&"none"===K.css(this,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==F(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=l.overflow&&(this.style.overflow="hidden");for(d in a)e=new K.fx(this,l,d),c=a[d],uc.test(c)?(k=K._data(this,"toggle"+d)||("toggle"===c?n?"show":"hide":0),k?(K._data(this,"toggle"+d,"show"===k?"hide":"show"),e[k]()):e[c]()):(g=vc.exec(c),h=e.cur(),g?(i=parseFloat(g[2]),j=g[3]||(K.cssNumber[d]?"":"px"),"px"!==j&&(K.style(this,d,(i||1)+j),h=(i||1)/e.cur()*h,K.style(this,d,h+j)),g[1]&&(i=("-="===g[1]?-1:1)*i+h),e.custom(h,i,j)):e.custom(h,c,""));return!0}var f=K.speed(b,c,d);return K.isEmptyObject(a)?this.each(f.complete,[!1]):(a=K.extend({},a),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(a,c,d){return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];K.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=K.timers,g=K._data(this);if(d||K._unmark(!0,this),null==a)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));d&&e||K.dequeue(this,a)})}}),K.each({slideDown:E("show",1),slideUp:E("hide",1),slideToggle:E("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){K.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),K.extend({speed:function(a,b,c){var d=a&&"object"==typeof a?K.extend({},a):{complete:c||!c&&b||K.isFunction(a)&&a,duration:a,easing:c&&b||b&&!K.isFunction(b)&&b};return d.duration=K.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in K.fx.speeds?K.fx.speeds[d.duration]:K.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(a){K.isFunction(d.old)&&d.old.call(this),d.queue?K.dequeue(this,d.queue):a!==!1&&K._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),K.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(K.fx.step[this.prop]||K.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=K.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=K.fx;this.startTime=sc||C(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(K.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){f.options.hide&&K._data(f.elem,"fxshow"+f.prop)===b&&K._data(f.elem,"fxshow"+f.prop,f.start)},e()&&K.timers.push(e)&&!rc&&(rc=setInterval(g.tick,g.interval))},show:function(){var a=K._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||K.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),K(this.elem).show()},hide:function(){this.options.orig[this.prop]=K._data(this.elem,"fxshow"+this.prop)||K.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=sc||C(),f=!0,g=this.elem,h=this.options;if(a||e>=h.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),h.animatedProperties[this.prop]=!0;for(b in h.animatedProperties)h.animatedProperties[b]!==!0&&(f=!1);if(f){if(null==h.overflow||K.support.shrinkWrapBlocks||K.each(["","X","Y"],function(a,b){g.style["overflow"+b]=h.overflow[a]}),h.hide&&K(g).hide(),h.hide||h.show)for(b in h.animatedProperties)K.style(g,b,h.orig[b]),K.removeData(g,"fxshow"+b,!0),K.removeData(g,"toggle"+b,!0);d=h.complete,d&&(h.complete=!1,d.call(g))}return!1}return 1/0==h.duration?this.now=e:(c=e-this.startTime,this.state=c/h.duration,this.pos=K.easing[h.animatedProperties[this.prop]](this.state,c,0,1,h.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},K.extend(K.fx,{tick:function(){for(var a,b=K.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||K.fx.stop()},interval:13,stop:function(){clearInterval(rc),rc=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){K.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),K.each(["width","height"],function(a,b){K.fx.step[b]=function(a){K.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),K.expr&&K.expr.filters&&(K.expr.filters.animated=function(a){return K.grep(K.timers,function(b){return a===b.elem}).length});var xc=/^t(?:able|d|h)$/i,yc=/^(?:body|html)$/i;K.fn.offset="getBoundingClientRect"in H.documentElement?function(a){var b,c=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!c||!c.ownerDocument)return null;if(c===c.ownerDocument.body)return K.offset.bodyOffset(c);try{b=c.getBoundingClientRect()}catch(d){}var e=c.ownerDocument,f=e.documentElement;if(!b||!K.contains(f,c))return b?{top:b.top,left:b.left}:{top:0,left:0};var g=e.body,h=G(e),i=f.clientTop||g.clientTop||0,j=f.clientLeft||g.clientLeft||0,k=h.pageYOffset||K.support.boxModel&&f.scrollTop||g.scrollTop,l=h.pageXOffset||K.support.boxModel&&f.scrollLeft||g.scrollLeft,m=b.top+k-i,n=b.left+l-j;return{top:m,left:n}}:function(a){var b=this[0];if(a)return this.each(function(b){K.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return K.offset.bodyOffset(b);for(var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;(b=b.parentNode)&&b!==h&&b!==g&&(!K.support.fixedPosition||"fixed"!==j.position);)c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,!K.support.doesNotAddBorder||K.support.doesAddBorderForTableAndCells&&xc.test(b.nodeName)||(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),K.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c;return("relative"===j.position||"static"===j.position)&&(k+=h.offsetTop,l+=h.offsetLeft),K.support.fixedPosition&&"fixed"===j.position&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},K.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(K.css(a,"marginTop"))||0,c+=parseFloat(K.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=K.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=K(a),h=g.offset(),i=K.css(a,"top"),j=K.css(a,"left"),k=("absolute"===d||"fixed"===d)&&K.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),K.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},K.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=yc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(K.css(a,"marginTop"))||0,c.left-=parseFloat(K.css(a,"marginLeft"))||0,d.top+=parseFloat(K.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(K.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||H.body;a&&!yc.test(a.nodeName)&&"static"===K.css(a,"position");)a=a.offsetParent;return a})}}),K.each(["Left","Top"],function(a,c){var d="scroll"+c;K.fn[d]=function(c){var e,f;return c===b?(e=this[0])?(f=G(e),f?"pageXOffset"in f?f[a?"pageYOffset":"pageXOffset"]:K.support.boxModel&&f.document.documentElement[d]||f.document.body[d]:e[d]):null:this.each(function(){f=G(this),f?f.scrollTo(a?K(f).scrollLeft():c,a?c:K(f).scrollTop()):this[d]=c})}}),K.each(["Height","Width"],function(a,c){var d=c.toLowerCase();K.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(K.css(a,d,"padding")):this[d]():null},K.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(K.css(b,d,a?"margin":"border")):this[d]():null},K.fn[d]=function(a){var e=this[0];if(!e)return null==a?null:this;if(K.isFunction(a))return this.each(function(b){var c=K(this);c[d](a.call(this,b,c[d]()))});if(K.isWindow(e)){var f=e.document.documentElement["client"+c],g=e.document.body;return"CSS1Compat"===e.document.compatMode&&f||g&&g["client"+c]||f}if(9===e.nodeType)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var h=K.css(e,d),i=parseFloat(h);return K.isNumeric(i)?i:h}return this.css(d,"string"==typeof a?a:a+"px")}}),a.jQuery=a.$=K,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return K})}(window),function(a){function b(a,b,c,d){if(!a.tag.isInline&&c.length>0)for(c.push("\n"),i=0;d>i;i++)c.push("	")}function c(d,e){var f,g=[],h=0==d.attributes.length;if(d.tag.isComment)e.allowComments&&(g.push("<!--"),g.push(d.tag.rawAttributes),g.push(">"),e.format&&b(d,e,g,f-1));else{this.name.concat(void 0==d.tag.rawAttributes?"":d.tag.rawAttributes);var i=d.tag.render&&(0==e.allowedTags.length||a.inArray(d.tag.name,e.allowedTags)>-1)&&(0==e.removeTags.length||-1==a.inArray(d.tag.name,e.removeTags));if(!d.isRoot&&i&&(g.push("<"),g.push(d.tag.name),a.each(d.attributes,function(){if(-1==a.inArray(this.name,e.removeAttrs)){var b=RegExp(/^(['"]?)(.*?)['"]?$/).exec(this.value),c=b[2],f=b[1]||"'";"class"==this.name&&e.allowedClasses.length>0&&(c=a.grep(c.split(" "),function(b){return a.grep(e.allowedClasses,function(c){return c==b||c[0]==b&&(1==c.length||a.inArray(d.tag.name,c[1])>-1)}).length>0}).join(" ")),null!=c&&(c.length>0||a.inArray(this.name,d.tag.requiredAttributes)>-1)&&(g.push(" "),g.push(this.name),g.push("="),g.push(f),g.push(c),g.push(f))}})),d.tag.isSelfClosing)i&&g.push(" />"),h=!1;else if(d.tag.isNonClosing)h=!1;else{!d.isRoot&&i&&g.push(">");var f=e.formatIndent++;if(d.tag.toProtect){var j=a.htmlClean.trim(d.children.join("")).replace(/<br>/gi,"\n");g.push(j),h=0==j.length}else{for(var j=[],o=0;o<d.children.length;o++){var q=d.children[o],r=a.htmlClean.trim(p(m(q)?q:q.childrenToString()));n(q)&&o>0&&r.length>0&&(k(q)||l(d.children[o-1]))&&j.push(" "),m(q)?r.length>0&&j.push(r):(o!=d.children.length-1||"br"!=q.tag.name)&&(e.format&&b(q,e,j,f),j=j.concat(c(q,e)))}e.formatIndent--,j.length>0&&(e.format&&"\n"!=j[0]&&b(d,e,g,f),g=g.concat(j),h=!1)}!d.isRoot&&i&&(e.format&&b(d,e,g,f-1),g.push("</"),g.push(d.tag.name),g.push(">"))}if(!d.tag.allowEmpty&&h)return[]}return g}function d(b,c){return f(b,function(b){return a.inArray(b.tag.nameOriginal,c)>-1})}function e(a){return f(a,function(a){return a.isRoot||!a.tag.isInline})}function f(a,b,c){c=c||1;var d=a[a.length-c];return b(d)?!0:a.length-c>0&&f(a,b,c+1)?(a.pop(),!0):!1}function g(a){return a?(this.tag=a,this.isRoot=!1):(this.tag=new j("root"),this.isRoot=!0),this.attributes=[],this.children=[],this.hasAttribute=function(a){for(var b=0;b<this.attributes.length;b++)if(this.attributes[b].name==a)return!0;return!1},this.childrenToString=function(){return this.children.join("")},this}function h(a,b){return this.name=a,this.value=b,this}function j(b,c,d,e){return this.name=b.toLowerCase(),this.nameOriginal=this.name,this.render=!0,this.init=function(){if("--"==this.name?(this.isComment=!0,this.isSelfClosing=!0):(this.isComment=!1,this.isSelfClosing=a.inArray(this.name,v)>-1,this.isNonClosing=a.inArray(this.name,w)>-1,this.isClosing=void 0!=c&&c.length>0,this.isInline=a.inArray(this.name,q)>-1,this.disallowNest=a.inArray(this.name,r)>-1,this.requiredParent=t[a.inArray(this.name,t)+1],this.allowEmpty=a.inArray(this.name,s)>-1,this.toProtect=a.inArray(this.name,u)>-1),this.rawAttributes=d,this.requiredAttributes=y[a.inArray(this.name,y)+1],e){if(e.tagAttributesCache||(e.tagAttributesCache=[]),-1==a.inArray(this.name,e.tagAttributesCache)){for(var b=x[a.inArray(this.name,x)+1].slice(0),f=0;f<e.allowedAttributes.length;f++){var g=e.allowedAttributes[f][0];
(1==e.allowedAttributes[f].length||a.inArray(this.name,e.allowedAttributes[f][1])>-1)&&-1==a.inArray(g,b)&&b.push(g)}e.tagAttributesCache.push(this.name),e.tagAttributesCache.push(b)}this.allowedAttributes=e.tagAttributesCache[a.inArray(this.name,e.tagAttributesCache)+1]}},this.init(),this.rename=function(a){this.name=a,this.init()},this}function k(b){for(;o(b)&&b.children.length>0;)b=b.children[0];if(!m(b))return!1;var c=p(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(0))}function l(b){for(;o(b)&&b.children.length>0;)b=b.children[b.children.length-1];if(!m(b))return!1;var c=p(b);return c.length>0&&a.htmlClean.isWhitespace(c.charAt(c.length-1))}function m(a){return a.constructor==String}function n(a){return m(a)||a.tag.isInline}function o(a){return a.constructor==g}function p(a){return a.replace(/&nbsp;|\n/g," ").replace(/\s\s+/g," ")}a.fn.htmlClean=function(b){return this.each(function(){a(this),this.value?this.value=a.htmlClean(this.value,b):this.innerHTML=a.htmlClean(this.innerHTML,b)})},a.htmlClean=function(b,f){f=a.extend({},a.htmlClean.defaults,f);var i,k=/(<(\/)?(\w+:)?([\w]+)([^>]*)>)|<!--(.*?--)>/gi,l=/([\w\-]+)=(".*?"|'.*?'|[^\s>]*)/gi,n=new g,o=[n],p=n;f.bodyOnly&&(i=/<body[^>]*>((\n|.)*)<\/body>/i.exec(b))&&(b=i[1]),b=b.concat("<xxx>");for(var q;i=k.exec(b);){var r=i[6]?new j("--",null,i[6],f):new j(i[4],i[2],i[5],f),s=b.substring(q,i.index);if(s.length>0){var t=p.children[p.children.length-1];p.children.length>0&&m(t=p.children[p.children.length-1])?p.children[p.children.length-1]=t.concat(s):p.children.push(s)}if(q=k.lastIndex,r.isClosing)d(o,[r.name])&&(o.pop(),p=o[o.length-1]);else{for(var u,v=new g(r);u=l.exec(r.rawAttributes);){if("style"==u[1].toLowerCase()&&f.replaceStyles)for(var w=!r.isInline,x=0;x<f.replaceStyles.length;x++)f.replaceStyles[x][0].test(u[2])&&(w||(r.render=!1,w=!0),p.children.push(v),o.push(v),p=v,r=new j(f.replaceStyles[x][1],"","",f),v=new g(r));null!=r.allowedAttributes&&(0==r.allowedAttributes.length||a.inArray(u[1],r.allowedAttributes)>-1)&&v.attributes.push(new h(u[1],u[2]))}a.each(r.requiredAttributes,function(){var a=this.toString();v.hasAttribute(a)||v.attributes.push(new h(a,""))});for(var y=0;y<f.replace.length;y++)for(var z=0;z<f.replace[y][0].length;z++){var A="string"==typeof f.replace[y][0][z];if(A&&f.replace[y][0][z]==r.name||!A&&f.replace[y][0][z].test(i)){r.rename(f.replace[y][1]),y=f.replace.length;break}}var B=!0;if(p.isRoot||(p.tag.isInline&&!r.isInline?(B=e(o))&&(p=o[o.length-1]):p.tag.disallowNest&&r.disallowNest&&!r.requiredParent?B=!1:r.requiredParent&&(B=d(o,r.requiredParent))&&(p=o[o.length-1])),B)if(p.children.push(v),r.toProtect)for(;tagMatch2=k.exec(b);){var C=new j(tagMatch2[3],tagMatch2[1],tagMatch2[4],f);if(C.isClosing&&C.name==r.name){v.children.push(RegExp.leftContext.substring(q)),q=k.lastIndex;break}}else r.isSelfClosing||r.isNonClosing||(o.push(v),p=v)}}return a.htmlClean.trim(c(n,f).join(""))},a.htmlClean.defaults={bodyOnly:!0,allowedTags:[],removeTags:["basefont","center","dir","font","frame","frameset","iframe","isindex","menu","noframes","s","strike","u"],allowedAttributes:[],removeAttrs:[],allowedClasses:[],format:!1,formatIndent:0,replace:[[["b","big"],"strong"],[["i"],"em"]],replaceStyles:[[/font-weight:\s*bold/i,"strong"],[/font-style:\s*italic/i,"em"],[/vertical-align:\s*super/i,"sup"],[/vertical-align:\s*sub/i,"sub"]],allowComments:!1},a.htmlClean.trim=function(b){return a.htmlClean.trimStart(a.htmlClean.trimEnd(b))},a.htmlClean.trimStart=function(b){return b.substring(a.htmlClean.trimStartIndex(b))},a.htmlClean.trimStartIndex=function(b){for(var c=0;c<b.length-1&&a.htmlClean.isWhitespace(b.charAt(c));c++);return c},a.htmlClean.trimEnd=function(b){return b.substring(0,a.htmlClean.trimEndIndex(b))},a.htmlClean.trimEndIndex=function(b){for(var c=b.length-1;c>=0&&a.htmlClean.isWhitespace(b.charAt(c));c--);return c+1},a.htmlClean.isWhitespace=function(b){return-1!=a.inArray(b,z)};var q=["a","abbr","acronym","address","b","big","br","button","caption","cite","code","del","em","font","hr","i","input","img","ins","label","legend","map","q","s","samp","select","option","param","small","span","strike","strong","sub","sup","tt","u","var"],r=["h1","h2","h3","h4","h5","h6","p","th","td","object"],s=["th","td"],t=[null,"li",["ul","ol"],"dt",["dl"],"dd",["dl"],"td",["tr"],"th",["tr"],"tr",["table","thead","tbody","tfoot"],"thead",["table"],"tbody",["table"],"tfoot",["table"],"param",["object"]],u=["script","style","pre","code"],v=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],w=["!doctype","?xml"],x=[["class"],"?xml",[],"!doctype",[],"a",["accesskey","class","href","name","title","rel","rev","type","tabindex"],"abbr",["class","title"],"acronym",["class","title"],"blockquote",["cite","class"],"button",["class","disabled","name","type","value"],"del",["cite","class","datetime"],"form",["accept","action","class","enctype","method","name"],"input",["accept","accesskey","alt","checked","class","disabled","ismap","maxlength","name","size","readonly","src","tabindex","type","usemap","value"],"img",["alt","class","height","src","width"],"ins",["cite","class","datetime"],"label",["accesskey","class","for"],"legend",["accesskey","class"],"link",["href","rel","type"],"meta",["content","http-equiv","name","scheme","charset"],"map",["name"],"optgroup",["class","disabled","label"],"option",["class","disabled","label","selected","value"],"q",["class","cite"],"script",["src","type"],"select",["class","disabled","multiple","name","size","tabindex"],"style",["type"],"table",["class","summary"],"th",["class","colspan","rowspan"],"td",["class","colspan","rowspan"],"textarea",["accesskey","class","cols","disabled","name","readonly","rows","tabindex"],"param",["name","value"],"embed",["height","src","type","width"]],y=[[],"img",["alt"]],z=["Â "," ","	","\n","\r","\f"]}(jQuery);var jsl="undefined"==typeof jsl?{}:jsl;jsl.parser=function(){var a=!0,b=!1,c={},d=function(){var a={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONObject:13,EOF:14,JSONArray:15,JSONValue:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[12,2],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[13,2],[13,3],[20,3],[19,1],[19,3],[15,2],[15,3],[25,1],[25,3]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:this.$=a;break;case 2:this.$=Number(a);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=f[g-1];case 7:return this.$=f[g-1];case 8:this.$=f[g];break;case 9:this.$=f[g];break;case 10:this.$=f[g];break;case 11:this.$=f[g];break;case 12:this.$=f[g];break;case 13:this.$=f[g];break;case 14:this.$={};break;case 15:this.$=f[g-1];break;case 16:this.$=[f[g-2],f[g]];break;case 17:this.$={},this.$[f[g][0]]=f[g][1];break;case 18:this.$=f[g-2],f[g-2][f[g][0]]=f[g][1];break;case 19:this.$=[];break;case 20:this.$=f[g-1];break;case 21:this.$=[f[g]];break;case 22:this.$=f[g-2],f[g-2].push(f[g])}},table:[{12:1,13:2,15:3,17:[1,4],23:[1,5]},{1:[3]},{14:[1,6]},{14:[1,7]},{3:11,4:[1,12],18:[1,8],19:9,20:10},{3:18,4:[1,12],5:19,6:[1,25],7:16,8:[1,22],9:17,10:[1,23],11:[1,24],13:20,15:21,16:15,17:[1,4],23:[1,5],24:[1,13],25:14},{1:[2,6]},{1:[2,7]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{18:[1,26],22:[1,27]},{18:[2,17],22:[2,17]},{21:[1,28]},{18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{22:[1,30],24:[1,29]},{22:[2,21],24:[2,21]},{18:[2,8],22:[2,8],24:[2,8]},{18:[2,9],22:[2,9],24:[2,9]},{18:[2,10],22:[2,10],24:[2,10]},{18:[2,11],22:[2,11],24:[2,11]},{18:[2,12],22:[2,12],24:[2,12]},{18:[2,13],22:[2,13],24:[2,13]},{18:[2,3],22:[2,3],24:[2,3]},{18:[2,4],22:[2,4],24:[2,4]},{18:[2,5],22:[2,5],24:[2,5]},{18:[2,2],22:[2,2],24:[2,2]},{14:[2,15],18:[2,15],22:[2,15],24:[2,15]},{3:11,4:[1,12],20:31},{3:18,4:[1,12],5:19,6:[1,25],7:16,8:[1,22],9:17,10:[1,23],11:[1,24],13:20,15:21,16:32,17:[1,4],23:[1,5]},{14:[2,20],18:[2,20],22:[2,20],24:[2,20]},{3:18,4:[1,12],5:19,6:[1,25],7:16,8:[1,22],9:17,10:[1,23],11:[1,24],13:20,15:21,16:33,17:[1,4],23:[1,5]},{18:[2,18],22:[2,18]},{18:[2,16],22:[2,16]},{22:[2,22],24:[2,22]}],defaultActions:{6:[2,6],7:[2,7]},parseError:function(a){throw new Error(a)},parse:function(a){function b(){var a;return a=d.lexer.lex()||1,"number"!=typeof a&&(a=d.symbols_[a]||a),a}function c(a){e.length=e.length-2*a,f.length=f.length-a,g.length=g.length-a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var o=this.lexer.yylloc;g.push(o),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,q,r,s,t,u,v,w,x,y={};;){if(r=e[e.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(null==p&&(p=b()),s=h[r]&&h[r][p]),"undefined"==typeof s||!s.length||!s[0]){if(!l){x=[];for(u in h[r])this.terminals_[u]&&u>2&&x.push("'"+this.terminals_[u]+"'");var z="";z=this.lexer.showPosition?"Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", "):"Parse error on line "+(j+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(z,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:o,expected:x})}if(3==l){if(p==n)throw new Error(z||"Parsing halted.");k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,p=b()}for(;!(m.toString()in h[r]);){if(0==r)throw new Error(z||"Parsing halted.");c(1),r=e[e.length-1]}q=p,p=m,r=e[e.length-1],s=h[r]&&h[r][m],l=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:e.push(p),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(s[1]),p=null,q?(p=q,q=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,l>0&&l--);break;case 2:if(v=this.productions_[s[1]][1],y.$=f[f.length-v],y._$={first_line:g[g.length-(v||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(v||1)].first_column,last_column:g[g.length-1].last_column},t=this.performAction.call(y,i,k,j,this.yy,s[1],f,g),"undefined"!=typeof t)return t;v&&(e=e.slice(0,2*-1*v),f=f.slice(0,-1*v),g=g.slice(0,-1*v)),e.push(this.productions_[s[1]][0]),f.push(y.$),g.push(y._$),w=h[e[e.length-2]][e[e.length-1]],e.push(w);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parseError)throw new Error(a);this.yy.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),e=0;e<d.length;e++)if(b=this._input.match(this.rules[d[e]])){if(c=b[0].match(/\n.*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,d[e],this.conditionStack[this.conditionStack.length-1]),a)return a;return}return""===this._input?this.EOF:(this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno}),void 0)},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};return a.performAction=function(a,b,c,d){switch(c){case 0:break;case 1:return 6;case 2:return b.yytext=b.yytext.substr(1,b.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},a.rules=[/^\s+/,/^-?([0-9]|[1-9][0-9]+)(\.[0-9]+)?([eE][-+]?[0-9]+)?\b/,/^"(\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^\0-\x09\x0a-\x1f"\\])*"/,/^\{/,/^\}/,/^\[/,/^\]/,/^,/,/^:/,/^true\b/,/^false\b/,/^null\b/,/^$/,/^./],a.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},a}();return a.lexer=b,a}();return"undefined"!=typeof a&&"undefined"!=typeof c&&(c.parser=d,c.parse=function(){return d.parse.apply(d,arguments)},c.main=function(b){if(!b[1])throw new Error("Usage: "+b[0]+" FILE");if("undefined"!=typeof process)var d=a("fs").readFileSync(a("path").join(process.cwd(),b[1]),"utf8");else var e=a("file").path(a("file").cwd()),d=e.join(b[1]).read({charset:"utf-8"});return c.parser.parse(d)},"undefined"!=typeof b&&a.main===b&&c.main("undefined"!=typeof process?process.argv.slice(1):a("system").args)),c}();var jsl="undefined"==typeof jsl?{}:jsl;jsl.format=function(){function a(a,b){return new Array(b+1).join(a)}function b(b){var c=0,d=0,e="    ",f="",g=0,h=!1,i=null;for(c=0,d=b.length;d>c;c+=1)switch(i=b.charAt(c)){case"{":case"[":h?f+=i:(f+=i+"\n"+a(e,g+1),g+=1);break;case"}":case"]":h?f+=i:(g-=1,f+="\n"+a(e,g)+i);break;case",":f+=h?i:",\n"+a(e,g);break;case":":f+=h?i:": ";break;case" ":case"\n":case"	":h&&(f+=i);break;case'"':c>0&&"\\"!==b.charAt(c-1)&&(h=!h),f+=i;break;default:f+=i}return f}return{formatJson:b}}(),window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in bf)!d.hasOwnProperty(e)&&bf.hasOwnProperty(e)&&(d[e]=bf[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Je&&mb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Rd},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new of(d.value,d.mode)),eb(this,jd)(this,i),we&&setTimeout($d(lb,this,!0),20),ob(this);var k;try{k=document.activeElement==g.input}catch(l){}k||d.autofocus&&!Je?setTimeout($d(Eb,this),20):Fb(this),eb(this,function(){for(var a in af)af.propertyIsEnumerable(a)&&af[a](this,d[a],cf);for(var b=0;b<gf.length;++b)gf[b](this)})()}function b(a,b){var c={},d=c.input=be("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return ze?d.style.width="1000px":d.setAttribute("wrap","off"),Ie&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=be("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=be("div",[be("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=be("div",[be("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=be("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=be("div",null,"CodeMirror-gutter-filler"),c.lineDiv=be("div",null,"CodeMirror-code"),c.selectionDiv=be("div",null,null,"position: relative; z-index: 1"),c.cursor=be("div","Â ","CodeMirror-cursor"),c.otherCursor=be("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=be("div",null,"CodeMirror-measure"),c.lineSpace=be("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=be("div",[be("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=be("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=be("div",null,null,"position: absolute; height: "+tf+"px; width: 1px;"),c.gutters=be("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=be("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=be("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),xe&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Ie&&(d.style.width="0px"),ze||(c.scroller.draggable=!0),Ee?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):xe&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Rd,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,F(b,100),b.state.modeGen++,b.curOp&&hb(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),hb(a),S(a),setTimeout(function(){n(a)},100)}function e(a){var b=ab(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/bb(a.display)-3);return function(e){return Mc(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&nd(a,b)})}function g(a){var b=jf[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:""),a.state.disableInput=b.disableInput}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),S(a)}function i(a){j(a),hb(a),setTimeout(function(){p(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;ce(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(be("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Jc(e);){var f=c.find();e=kd(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Kc(e);){var f=c.find();d-=e.text.length-f.from.ch,e=kd(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=kd(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function n(a){var b=a.display,c=a.doc.height,d=c+K(b);b.sizer.style.minHeight=b.heightForcer.style.top=d+"px",b.gutters.style.height=Math.max(d,b.scroller.clientHeight-tf)+"px";var e=Math.max(d,b.scroller.scrollHeight),f=b.scroller.scrollWidth>b.scroller.clientWidth+1,g=e>b.scroller.clientHeight+1;g?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=f?he(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=e-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):b.scrollbarV.style.display="",f?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=g?he(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):b.scrollbarH.style.display="",f&&g?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=he(b.measure)+"px"):b.scrollbarFiller.style.display="",f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=he(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="",Fe&&0===he(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=Ge?"18px":"12px")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-J(a));var f=Math.ceil(d+e);return{from:pd(b,d),to:pd(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(be("div",[be("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return fe(a.scroller).left-fe(a.sizer).left}function t(a,b,c){for(var d,e=a.display.showingFrom,f=a.display.showingTo,g=o(a.display,a.doc,c);u(a,b,g)&&(d=!0,B(a),n(a),c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),g=o(a.display,a.doc,c),!(g.from>=a.display.showingFrom&&g.to<=a.display.showingTo));)b=[];return d&&(Nd(a,"update",a),(a.display.showingFrom!=e||a.display.showingTo!=f)&&Nd(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo)),d}function u(a,b,c){var d=a.display,e=a.doc;if(!d.wrapper.clientWidth)return d.showingFrom=d.showingTo=e.first,d.viewOffset=0,void 0;if(!(0==b.length&&c.from>d.showingFrom&&c.to<d.showingTo)){q(a)&&(b=[{from:e.first,to:e.first+e.size}]);var f=d.sizer.style.marginLeft=d.gutters.offsetWidth+"px";d.scrollbarH.style.left=a.options.fixedGutter?f:"0";var g=1/0;if(a.options.lineNumbers)for(var h=0;h<b.length;++h)if(b[h].diff){g=b[h].from;break}var i=e.first+e.size,j=Math.max(c.from-a.options.viewportMargin,e.first),k=Math.min(i,c.to+a.options.viewportMargin);if(d.showingFrom<j&&j-d.showingFrom<20&&(j=Math.max(e.first,d.showingFrom)),d.showingTo>k&&d.showingTo-k<20&&(k=Math.min(i,d.showingTo)),Te)for(j=od(Lc(e,kd(e,j)));i>k&&Mc(e,kd(e,k));)++k;var l=[{from:Math.max(d.showingFrom,e.first),to:Math.min(d.showingTo,i)}];if(l=l[0].from>=l[0].to?[]:w(l,b),Te)for(var h=0;h<l.length;++h)for(var m,n=l[h];m=Kc(kd(e,n.to-1));){var o=m.find().from.line;if(!(o>n.from)){l.splice(h--,1);break}n.to=o}for(var p=0,h=0;h<l.length;++h){var n=l[h];n.from<j&&(n.from=j),n.to>k&&(n.to=k),n.from>=n.to?l.splice(h--,1):p+=n.to-n.from}if(p==k-j&&j==d.showingFrom&&k==d.showingTo)return v(a),void 0;l.sort(function(a,b){return a.from-b.from});try{var r=document.activeElement}catch(s){}.7*(k-j)>p&&(d.lineDiv.style.display="none"),y(a,j,k,l,g),d.lineDiv.style.display="",r&&document.activeElement!=r&&r.offsetHeight&&r.focus();var t=j!=d.showingFrom||k!=d.showingTo||d.lastSizeC!=d.wrapper.clientHeight;t&&(d.lastSizeC=d.wrapper.clientHeight,F(a,400)),d.showingFrom=j,d.showingTo=k;for(var u,x=d.lineDiv.offsetTop,z=d.lineDiv.firstChild;z;z=z.nextSibling)if(z.lineObj){if(xe){var A=z.offsetTop+z.offsetHeight;u=A-x,x=A}else{var B=fe(z);u=B.bottom-B.top}var C=z.lineObj.height-u;if(2>u&&(u=ab(d)),C>.001||-.001>C){nd(z.lineObj,u);var D=z.lineObj.widgets;if(D)for(var h=0;h<D.length;++h)D[h].height=D[h].node.offsetHeight}}return v(a),!0}}function v(a){var b=a.display.viewOffset=qd(a,kd(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function w(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function x(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function y(a,b,c,d,e){function f(b){var c=b.nextSibling;return ze&&Ke&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=x(a),h=a.display,i=a.options.lineNumbers;d.length||ze&&a.display.currentWheelTarget||ce(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Mc(a.doc,b)){if(0!=b.height&&nd(b,0),b.widgets&&k.previousSibling)for(var c=0;c<b.widgets.length;++c){var h=b.widgets[c];if(h.showIfHidden){var n=k.previousSibling;if(/pre/i.test(n.nodeName)){var o=be("div",null,null,"position: relative");n.parentNode.replaceChild(o,n),o.appendChild(n),n=o}var p=n.appendChild(be("div",[h.node],"CodeMirror-linewidget"));h.handleMouseEvents||(p.ignoreEvents=!0),A(h,p,n,g)}}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&m>=e&&k.lineNumber&&ee(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var q,s=0,t=k;t&&20>s;++s,t=t.nextSibling)if(t.lineObj==b&&/div/i.test(t.nodeName)){q=t;break}var u=z(a,b,m,g,q);if(u!=q)j.insertBefore(u,k);else{for(;k!=q;)k=f(k);k=k.nextSibling}u.lineObj=b}++m});k;)k=f(k)}function z(a,b,c,d,e){var f,g=_c(a,b),h=b.gutterMarkers,i=a.display;if(!(a.options.lineNumbers||h||b.bgClass||b.wrapClass||b.widgets))return g;if(e){e.alignable=null;for(var j,k=!0,l=0,m=null,n=e.firstChild;n;n=j)if(j=n.nextSibling,/\bCodeMirror-linewidget\b/.test(n.className)){for(var o=0,p=!0;o<b.widgets.length;++o){var q=b.widgets[o];if(q.above||(m=n,p=!1),q.node==n.firstChild){A(q,n,e,d),++l;break}}if(o==b.widgets.length){k=!1;break}}else e.removeChild(n);e.insertBefore(g,m),k&&l==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=be("div",null,b.wrapClass,"position: relative"),f.appendChild(g)),b.bgClass&&f.insertBefore(be("div",null,b.bgClass+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||h){var s=f.insertBefore(be("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(s),!a.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(f.lineNumber=s.appendChild(be("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.lineNumInnerWidth+"px"))),h)for(var t=0;t<a.options.gutters.length;++t){var u=a.options.gutters[t],v=h.hasOwnProperty(u)&&h[u];v&&s.appendChild(be("div",[v],"CodeMirror-gutter-elt","left: "+d.gutterLeft[u]+"px; width: "+d.gutterWidth[u]+"px"))}}if(xe&&(f.style.zIndex=2),b.widgets&&f!=e)for(var o=0,w=b.widgets;o<w.length;++o){var q=w[o],x=be("div",[q.node],"CodeMirror-linewidget");q.handleMouseEvents||(x.ignoreEvents=!0),A(q,x,f,d),q.above?f.insertBefore(x,a.options.lineNumbers&&0!=b.height?s:g):f.appendChild(x),Nd(q,"redraw")}return f}function A(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function B(a){var b=a.display,c=Sb(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?C(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":D(a),a.options.moveInputWithCursor){var d=Y(a,a.doc.sel.head,"div"),e=fe(b.wrapper),f=fe(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function C(a){var b=a.display,c=Y(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function D(a){function b(a,b,c,d){0>b&&(b=0),g.appendChild(be("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f){function g(b,d){return X(a,Rb(c,b),"div",l,d)}var j,k,l=kd(e,c),m=l.text.length;return je(rd(l),d||0,null==f?m:f,function(a,c,e){var l,n,o,p=g(a,"left");if(a==c)l=p,n=o=p.left;else{if(l=g(c-1,"right"),"rtl"==e){var q=p;p=l,l=q}n=p.left,o=l.right}null==d&&0==a&&(n=i),l.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<l.top&&b(n,p.bottom,null,l.top)),null==f&&c==m&&(o=h),(!j||p.top<j.top||p.top==j.top&&p.left<j.left)&&(j=p),(!k||l.bottom>k.bottom||l.bottom==k.bottom&&l.right>k.right)&&(k=l),i+1>n&&(n=i),b(n,l.top,o-n,l.bottom)}),{start:j,end:k}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=L(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var j=kd(e,f.from.line),k=kd(e,f.to.line),l=Lc(e,j)==Lc(e,k),m=c(f.from.line,f.from.ch,l?j.text.length:null).end,n=c(f.to.line,l?0:null,f.to.ch).start;l&&(m.top<n.top-2?(b(m.right,m.top,null,m.bottom),b(i,n.top,n.left,n.bottom)):b(m.right,m.top,n.left-m.right,m.bottom)),m.bottom<n.top&&b(i,m.bottom,null,n.top)}de(d.selectionDiv,g),d.selectionDiv.style.display=""}function E(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function F(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,$d(G,a))}function G(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=pc(b.mode,I(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=Xc(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=pc(b.mode,e)
}else Zc(a,g,e),g.stateAfter=0==b.frontier%5?pc(b.mode,e):null;return++b.frontier,+new Date>d?(F(a,a.options.workDelay),!0):void 0}),f.length&&eb(a,function(){for(var a=0;a<f.length;++a)hb(this,f[a].start,f[a].end)})()}}function H(a,b,c){for(var d,e,f=a.doc,g=b,h=b-100;g>h;--g){if(g<=f.first)return f.first;var i=kd(f,g-1);if(i.stateAfter&&(!c||g<=f.frontier))return g;var j=Sd(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=g-1,d=j)}return e}function I(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=H(a,b,c),g=f>d.first&&kd(d,f-1).stateAfter;return g=g?pc(d.mode,g):qc(d.mode),d.iter(f,b,function(c){Zc(a,c,g);var h=f==b-1||0==f%5||f>=e.showingFrom&&f<e.showingTo;c.stateAfter=h?pc(d.mode,g):null,++f}),g}function J(a){return a.lineSpace.offsetTop}function K(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function L(a){var b=de(a.measure,be("pre",null,null,"text-align: left")).appendChild(be("span","x"));return b.offsetLeft}function M(a,b,c,d,e){var f=-1;d=d||P(a,b);for(var g=c;;g+=f){var h=d[g];if(h)break;0>f&&0==g&&(f=1)}var i=(c>g||"right"==e)&&null!=h.topRight;return{left:c>g?h.right:h.left,right:g>c?h.left:h.right,top:i?h.topRight:h.top,bottom:i?h.bottomRight:h.bottom}}function N(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e}}function O(a,b){var c=N(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function P(a,b){var c=N(a,b);if(c)return c.measure;var d=Q(a,b),e=a.display.measureLineCache,f={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:d,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};return 16==e.length?e[++a.display.measureLineCachePos%16]=f:e.push(f),d}function Q(a,b){function c(a,b){b>q&&(b=q),0>a&&(a=0);for(var c=0;c<o.length;c+=2){var d=o[c],e=o[c+1];if(!(d>b||a>e)&&(a>=d&&e>=b||d>=a&&b>=e||Math.min(b,e)-Math.max(a,d)>=b-a>>1))return o[c]=Math.min(a,d),o[c+1]=Math.max(b,e),c}return o.push(a,b),c}var d=a.display,e=Zd(b.text.length),f=_c(a,b,e);if(we&&!xe&&!a.options.lineWrapping&&f.childNodes.length>100){for(var g=document.createDocumentFragment(),h=10,i=f.childNodes.length,j=0,k=Math.ceil(i/h);k>j;++j){for(var l=be("div",null,null,"display: inline-block"),m=0;h>m&&i;++m)l.appendChild(f.firstChild),--i;g.appendChild(l)}f.appendChild(g)}de(d.measure,f);var n=fe(d.lineDiv),o=[],p=Zd(b.text.length),q=f.offsetHeight;ye&&d.measure.first!=f&&de(d.measure,f);for(var r,j=0;j<e.length;++j)if(r=e[j]){var s,t=r;if(/\bCodeMirror-widget\b/.test(r.className)&&r.getClientRects){1==r.firstChild.nodeType&&(t=r.firstChild);var u=t.getClientRects(),v=u[0],w=u[u.length-1];if(u.length>1){var x=c(v.top-n.top,v.bottom-n.top),y=c(w.top-n.top,w.bottom-n.top);p[j]={left:v.left-n.left,right:w.right-n.left,top:x,topRight:y};continue}}s=fe(t);var z=c(s.top-n.top,s.bottom-n.top),A=s.right;r.measureRight&&(A=fe(r.measureRight).left),p[j]={left:s.left-n.left,right:A-n.left,top:z}}for(var r,j=0;j<p.length;++j)if(r=p[j]){var B=r.top,C=r.topRight;r.top=o[B],r.bottom=o[B+1],null!=C&&(r.topRight=o[C],r.bottomRight=o[C+1])}return p}function R(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&N(a,b);if(f)return M(a,b,b.text.length,f.measure,"right").right;var g=_c(a,b),h=g.appendChild(ie(a.display.measure));return de(a.display.measure,g),fe(h).right-fe(a.display.lineDiv).left}function S(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function T(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function U(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function V(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Rc(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=qd(a,b);if("local"==d?g+=J(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=fe(a.display.lineSpace);g+=h.top+("window"==d?0:U());var i=h.left+("window"==d?0:T());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function W(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=T(),e-=U();else if("local"==c||!c){var f=fe(a.display.sizer);d+=f.left,e+=f.top}var g=fe(a.display.lineSpace);return{left:d-g.left,top:e-g.top}}function X(a,b,c,d,e){return d||(d=kd(a.doc,b.line)),V(a,d,M(a,d,b.ch,null,e),c)}function Y(a,b,c,d,e){function f(b,f){var g=M(a,d,b,e,f?"right":"left");return f?g.left=g.right:g.right=g.left,V(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==ke(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=le(c)-(c.level%2?0:1),d=!0):a==le(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=ke(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||kd(a.doc,b.line),e||(e=P(a,d));var h=rd(d),i=b.ch;if(!h)return f(i);var j=re(h,i),k=g(i,j);return null!=Ff&&(k.other=g(i,Ff)),k}function Z(a,b,c,d){var e=new Rb(a,b);return e.xRel=d,c&&(e.outside=!0),e}function $(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return Z(d.first,0,!0,-1);var e=pd(d,c),f=d.first+d.size-1;if(e>f)return Z(d.first+d.size-1,kd(d,f).text.length,!0,1);for(0>b&&(b=0);;){var g=kd(d,e),h=_(a,g,e,b,c),i=Kc(g),j=i&&i.find();if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=j.to.line}}function _(a,b,c,d,e){function f(d){var e=Y(a,Rb(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-qd(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=P(a,b),k=rd(b),l=b.text.length,m=me(b),n=ne(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return Z(c,n,r,1);for(;;){if(k?n==m||n==te(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);xf.test(b.text.charAt(s));)++s;var u=Z(c,s,s==m?p:r,0>t?-1:t?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=te(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function ab(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ne){Ne=be("pre");for(var b=0;49>b;++b)Ne.appendChild(document.createTextNode("x")),Ne.appendChild(be("br"));Ne.appendChild(document.createTextNode("x"))}de(a.measure,Ne);var c=Ne.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),ce(a.measure),c||1}function bb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=be("span","x"),c=be("pre",[b]);de(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function cb(a){a.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Ue},sf++||(rf=[])}function db(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=R(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+tf)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&wb(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=Y(a,c.sel.head);g=fc(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&B(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&dc(a,Wb(a.doc,b.scrollToPos),b.scrollToPosMargin)):g&&cc(a),b.selectionChanged&&E(a),a.state.focused&&b.updateInput&&lb(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Md(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Md(k[m],"unhide");var n;if(--sf||(n=rf,rf=null),b.textChanged&&Md(a,"change",a,b.textChanged),b.cursorActivity&&Md(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function eb(a,b){return function(){var c=a||this,d=!c.curOp;d&&cb(c);try{var e=b.apply(c,arguments)}finally{d&&db(c)}return e}}function fb(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&cb(this.cm);try{b=a.apply(this,arguments)}finally{c&&db(this.cm)}return b}}function gb(a,b){var c,d=!a.curOp;d&&cb(a);try{c=b()}finally{d&&db(a)}return c}function hb(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function ib(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){kb(a),a.state.focused&&ib(a)})}function jb(a){function b(){var d=kb(a);d||c?(a.display.pollingFast=!1,ib(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function kb(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||Cf(b)||nb(a)||a.state.disableInput)return!1;var f=b.value;if(f==c&&Sb(e.from,e.to))return!1;if(we&&!ye&&a.display.inputHasSelection===f)return lb(a,!0),!1;var g=!a.curOp;g&&cb(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);i>h&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Rb(j.line,j.ch-(c.length-h)):a.state.overwrite&&Sb(j,k)&&!a.state.pasteIncoming&&(k=Rb(k.line,Math.min(kd(d,k.line).text.length,k.ch+(f.length-h))));var l=a.curOp.updateInput,m={from:j,to:k,text:Bf(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"};return Kb(a.doc,m,"end"),a.curOp.updateInput=l,Nd(a,"inputRead",a,m),f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&db(a),a.state.pasteIncoming=!1,!0}function lb(a,b){var c,d,e=a.doc;if(Sb(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",we&&!ye&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=Df&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Vd(a.display.input),we&&!ye&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function mb(a){"nocursor"==a.options.readOnly||Je&&document.activeElement==a.display.input||a.display.input.focus()}function nb(a){return a.options.readOnly||a.doc.cantEdit}function ob(a){function b(){a.state.focused&&setTimeout($d(mb,a),0)}function c(){null==h&&(h=setTimeout(function(){h=null,g.cachedCharWidth=g.cachedTextHeight=zf=null,S(a),gb(a,$d(hb,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Ld(window,"resize",c)}function e(b){Od(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Dd(b))||Hd(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Vd(g.input))}var g=a.display;Kd(g.scroller,"mousedown",eb(a,rb)),we?Kd(g.scroller,"dblclick",eb(a,function(b){if(!Od(a,b)){var c=qb(a,b);if(c&&!sb(a,b)&&!pb(a.display,b)){Ed(b);var d=mc(kd(a.doc,c.line).text,c);Zb(a.doc,d.from,d.to)}}})):Kd(g.scroller,"dblclick",function(b){Od(a,b)||Ed(b)}),Kd(g.lineSpace,"selectstart",function(a){pb(g,a)||Ed(a)}),Re||Kd(g.scroller,"contextmenu",function(b){Gb(a,b)}),Kd(g.scroller,"scroll",function(){g.scroller.clientHeight&&(vb(a,g.scroller.scrollTop),wb(a,g.scroller.scrollLeft,!0),Md(a,"scroll",a))}),Kd(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&vb(a,g.scrollbarV.scrollTop)}),Kd(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&wb(a,g.scrollbarH.scrollLeft)}),Kd(g.scroller,"mousewheel",function(b){xb(a,b)}),Kd(g.scroller,"DOMMouseScroll",function(b){xb(a,b)}),Kd(g.scrollbarH,"mousedown",b),Kd(g.scrollbarV,"mousedown",b),Kd(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var h;Kd(window,"resize",c),setTimeout(d,5e3),Kd(g.input,"keyup",eb(a,function(b){Od(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Dd(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Kd(g.input,"input",$d(jb,a)),Kd(g.input,"keydown",eb(a,Cb)),Kd(g.input,"keypress",eb(a,Db)),Kd(g.input,"focus",$d(Eb,a)),Kd(g.input,"blur",$d(Fb,a)),a.options.dragDrop&&(Kd(g.scroller,"dragstart",function(b){ub(a,b)}),Kd(g.scroller,"dragenter",e),Kd(g.scroller,"dragover",e),Kd(g.scroller,"drop",eb(a,tb))),Kd(g.scroller,"paste",function(b){pb(g,b)||(mb(a),jb(a))}),Kd(g.input,"paste",function(){a.state.pasteIncoming=!0,jb(a)}),Kd(g.input,"cut",f),Kd(g.input,"copy",f),Ee&&Kd(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),mb(a)})}function pb(a,b){for(var c=Id(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function qb(a,b,c){var d=a.display;if(!c){var e=Id(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller||e==d.gutterFiller)return null}var f,g,h=fe(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return $(a,f-h.left,g-h.top)}function rb(a){function b(a){if(!Sb(r,a)){if(r=a,"single"==k)return Zb(e.doc,Wb(g,i),a),void 0;if(p=Wb(g,p),q=Wb(g,q),"double"==k){var b=mc(kd(g,a.line).text,a);Tb(a,p)?Zb(e.doc,b.from,q):Zb(e.doc,p,b.to)}else"triple"==k&&(Tb(a,p)?Zb(e.doc,q,Wb(g,Rb(a.line,0))):Zb(e.doc,p,Wb(g,Rb(a.line+1,0))))}}function c(a){var d=++t,h=qb(e,a,!0);if(h)if(Sb(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(eb(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Eb(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(eb(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0,Ed(a),mb(e),Ld(document,"mousemove",u),Ld(document,"mouseup",v)}if(!Od(this,a)){var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,pb(f,a))return ze||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)),void 0;if(!sb(e,a)){var i=qb(e,a);switch(Jd(a)){case 3:return Re&&Gb.call(e,e,a),void 0;case 2:return i&&Zb(e.doc,i),setTimeout($d(mb,e),20),Ed(a),void 0}if(!i)return Id(a)==f.scroller&&Ed(a),void 0;e.state.focused||Eb(e);var j=+new Date,k="single";if(Pe&&Pe.time>j-400&&Sb(Pe.pos,i))k="triple",Ed(a),setTimeout($d(mb,e),20),nc(e,i.line);else if(Oe&&Oe.time>j-400&&Sb(Oe.pos,i)){k="double",Pe={time:j,pos:i},Ed(a);var l=mc(kd(g,i.line).text,i);Zb(e.doc,l.from,l.to)}else Oe={time:j,pos:i};var m=i;if(e.options.dragDrop&&yf&&!nb(e)&&!Sb(h.from,h.to)&&!Tb(i,h.from)&&!Tb(h.to,i)&&"single"==k){var n=eb(e,function(b){ze&&(f.scroller.draggable=!1),e.state.draggingText=!1,Ld(document,"mouseup",n),Ld(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Ed(b),Zb(e.doc,i),mb(e))});return ze&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Kd(document,"mouseup",n),Kd(f.scroller,"drop",n),void 0}Ed(a),"single"==k&&Zb(e.doc,Wb(g,i));var p=h.from,q=h.to,r=i,s=fe(f.wrapper),t=0,u=eb(e,function(a){we||Jd(a)?c(a):d(a)}),v=eb(e,d);Kd(document,"mousemove",u),Kd(document,"mouseup",v)}}}function sb(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(b){return!1}if(d>=Math.floor(fe(c.gutters).right))return!1;if(Ed(b),!Qd(a,"gutterClick"))return!0;var f=fe(c.lineDiv);if(e>f.bottom)return!0;e-=f.top-c.viewOffset;for(var g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&fe(h).right>=d){var i=pd(a.doc,e),j=a.options.gutters[g];Nd(a,"gutterClick",a,i,j,b);break}}return!0}function tb(a){var b=this;if(!(Od(b,a)||pb(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Dd(a)))){Ed(a),we&&(Ve=+new Date);var c=qb(b,a,!0),d=a.dataTransfer.files;if(c&&!nb(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=Wb(b.doc,c),Kb(b.doc,{from:c,to:c,text:Bf(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&!Tb(c,b.doc.sel.from)&&!Tb(b.doc.sel.to,c))return b.state.draggingText(a),setTimeout($d(mb,b),20),void 0;try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;_b(b.doc,c,c),b.state.draggingText&&Qb(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),mb(b),Eb(b)}}catch(a){}}}}function ub(a,b){if(we&&(!a.state.draggingText||+new Date-Ve<100))return Hd(b),void 0;if(!Od(a,b)&&!pb(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage&&!De){var d=be("img",null,null,"position: fixed; left: 0; top: 0;");Ce&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),Ce&&d.parentNode.removeChild(d)}}}function vb(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,ve||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),ve&&t(a,[]),F(a,100))}function wb(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function xb(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Ke&&ze)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!ve&&!Ce&&null!=Xe)return d&&vb(a,Math.max(0,Math.min(f.scrollTop+d*Xe,f.scrollHeight-f.clientHeight))),wb(a,Math.max(0,Math.min(f.scrollLeft+c*Xe,f.scrollWidth-f.clientWidth))),Ed(b),e.wheelStartX=null,void 0;if(d&&null!=Xe){var h=d*Xe,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;0>h?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}20>We&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(Xe=(Xe*We+c)/(We+1),++We)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function yb(a,b,c){if("string"==typeof b&&(b=hf[b],!b))return!1;a.display.pollingFast&&kb(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{nb(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=uf}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function zb(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Ab(a,b){var c=rc(a.options.keyMap),d=c.auto;clearTimeout(Ye),d&&!tc(b)&&(Ye=setTimeout(function(){rc(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=uc(b,!0),f=!1;if(!e)return!1;var h=zb(a);return f=b.shiftKey?sc("Shift-"+e,h,function(b){return yb(a,b,!0)})||sc(e,h,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?yb(a,b):void 0}):sc(e,h,function(b){return yb(a,b)}),f&&(Ed(b),E(a),ye&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Nd(a,"keyHandled",a,e,b)),f}function Bb(a,b,c){var d=sc("'"+c+"'",zb(a),function(b){return yb(a,b,!0)});return d&&(Ed(b),E(a),Nd(a,"keyHandled",a,"'"+c+"'",b)),d}function Cb(a){var b=this;if(b.state.focused||Eb(b),we&&27==a.keyCode&&(a.returnValue=!1),!(Od(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Dd(a)))){var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=Ab(b,a);Ce&&($e=d?c:null,!d&&88==c&&!Df&&(Ke?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Db(a){var b=this;if(!(Od(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Dd(a)))){var c=a.keyCode,d=a.charCode;if(Ce&&c==$e)return $e=null,Ed(a),void 0;if(!(Ce&&(!a.which||a.which<10)||Ee)||!Ab(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!nb(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(eb(b,function(){ic(b,b.doc.sel.to.line,"smart")}),75),Bb(b,a,e)||(we&&!ye&&(b.display.inputHasSelection=null),jb(b))}}}function Eb(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Md(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),lb(a,!0)),ib(a),E(a))}function Fb(a){a.state.focused&&(Md(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Gb(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value=" "+(Sb(f.from,f.to)?"":e.input.value);e.prevInput=" ",e.input.selectionStart=1,e.input.selectionEnd=a.length}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=i,ye&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=h),ib(a),null!=e.input.selectionStart){(!we||ye)&&c(),clearTimeout(Ze);var b=0,d=function(){" "==e.prevInput&&0==e.input.selectionStart?eb(a,hf.selectAll)(a):b++<10?Ze=setTimeout(d,500):lb(a)};Ze=setTimeout(d,200)}}var e=a.display,f=a.doc.sel;if(!pb(e,b)){var g=qb(a,b),h=e.scroller.scrollTop;if(g&&!Ce){(Sb(f.from,f.to)||Tb(g,f.from)||!Tb(g,f.to))&&eb(a,_b)(a.doc,g,g);var i=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",mb(a),lb(a,!0),Sb(f.from,f.to)&&(e.input.value=e.prevInput=" "),we&&!ye&&c(),Re){Hd(b);var j=function(){Ld(window,"mouseup",j),setTimeout(d,20)};Kd(window,"mouseup",j)}else setTimeout(d,50)}}}function Hb(a,b,c){if(!Tb(b.from,c))return Wb(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Rb(f,kd(a,f).text.length):Xb(c,kd(a,e).text.length)}if(c.line==b.to.line+d)return Xb(c,Ud(b.text).length+(1==b.text.length?b.from.ch:0)+kd(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return Xb(c,b.text[g].length+(g?0:b.from.ch))}function Ib(a,b,c){if(c&&"object"==typeof c)return{anchor:Hb(a,b,c.anchor),head:Hb(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=_e(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Tb(a,b.from))return a;if(!Tb(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Rb(c,e)};return{anchor:e(a.sel.anchor),head:e(a.sel.head)}}function Jb(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=Wb(a,b)),c&&(this.to=Wb(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Md(a,"beforeChange",a,d),a.cm&&Md(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Kb(a,b,c,d){if(a.cm){if(!a.cm.curOp)return eb(a.cm,Kb)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Qd(a,"beforeChange")||a.cm&&Qd(a.cm,"beforeChange"))||(b=Jb(a,b,!0))){var e=Se&&!d&&Hc(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Lb(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Lb(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Lb(a,b,c)}}function Lb(a,b,c){var d=Ib(a,b,c);vd(a,b,d,a.cm?a.cm.curOp.id:0/0),Ob(a,b,d,Fc(a,b));var e=[];id(a,function(a,c){c||-1!=Wd(e,a.history)||(Bd(a.history,b),e.push(a.history)),Ob(a,b,null,Fc(a,b))})}function Mb(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e),c.generation=d.generation||++c.maxGeneration;for(var f=Qd(a,"beforeChange")||a.cm&&Qd(a.cm,"beforeChange"),g=d.changes.length-1;g>=0;--g){var h=d.changes[g];if(h.origin=b,f&&!Jb(a,h,!1))return("undo"==b?c.done:c.undone).length=0,void 0;e.changes.push(ud(a,h));var i=g?Ib(a,h,null):{anchor:d.anchorBefore,head:d.headBefore};Ob(a,h,i,Gc(a,h));var j=[];id(a,function(a,b){b||-1!=Wd(j,a.history)||(Bd(a.history,h),j.push(a.history)),Ob(a,h,null,Gc(a,h))})}}}}function Nb(a,b){function c(a){return Rb(a.line+b,a.ch)}a.first+=b,a.cm&&hb(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Ob(a,b,c,d){if(a.cm&&!a.cm.curOp)return eb(a.cm,Ob)(a,b,c,d);if(b.to.line<a.first)return Nb(a,b.text.length-1-(b.to.line-b.from.line)),void 0;if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Nb(a,e),b={from:Rb(a.first,0),to:Rb(b.to.line+e,b.to.ch),text:[Ud(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Rb(f,kd(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=ld(a,b.from,b.to),c||(c=Ib(a,b,null)),a.cm?Pb(a.cm,b,d,c):fd(a,b,d,c)}}function Pb(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=od(Lc(f,kd(f,h.line))),f.iter(l,i.line+1,function(a){return a==g.maxLine?(j=!0,!0):void 0})),Tb(f.sel.head,b.from)||Tb(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),fd(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),F(a,400);var m=b.text.length-(i.line-h.line)-1;if(hb(a,h.line,i.line+1,m),Qd(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Qb(a,b,c,d,e){if(d||(d=c),Tb(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=Bf(b)),Kb(a,{from:c,to:d,text:b,origin:e},null)}function Rb(a,b){return this instanceof Rb?(this.line=a,this.ch=b,void 0):new Rb(a,b)}function Sb(a,b){return a.line==b.line&&a.ch==b.ch}function Tb(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Ub(a){return Rb(a.line,a.ch)}function Vb(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Wb(a,b){if(b.line<a.first)return Rb(a.first,0);var c=a.first+a.size-1;return b.line>c?Rb(c,kd(a,c).text.length):Xb(b,kd(a,b.line).text.length)}function Xb(a,b){var c=a.ch;return null==c||c>b?Rb(a.line,b):0>c?Rb(a.line,0):a}function Yb(a,b){return b>=a.first&&b<a.first+a.size}function Zb(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Tb(b,e);f!=Tb(c,e)?(e=b,b=c):f!=Tb(b,c)&&(b=c)}_b(a,e,b,d)}else _b(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function $b(a,b,c){var d={anchor:b,head:c};return Md(a,"beforeSelectionChange",a,d),a.cm&&Md(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=Wb(a,d.anchor),d.head=Wb(a,d.head),d}function _b(a,b,c,d,e){if(!e&&Qd(a,"beforeSelectionChange")||a.cm&&Qd(a.cm,"beforeSelectionChange")){var f=$b(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,(e||!Sb(b,g.anchor))&&(b=bc(a,b,d,"push"!=e)),(e||!Sb(c,g.head))&&(c=bc(a,c,d,"push"!=e)),!Sb(g.anchor,b)||!Sb(g.head,c)){g.anchor=b,g.head=c;var h=Tb(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Nd(a,"cursorActivity",a)}}function ac(a){_b(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function bc(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=kd(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Md(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[0>g?"from":"to"];if(Sb(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?Wb(a,Rb(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Rb(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Rb(a.first,0)):bc(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function cc(a){var b=dc(a,a.doc.sel.head,a.options.cursorScrollMargin);if(a.state.focused){var c=a.display,d=fe(c.sizer),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!He){var f="none"==c.cursor.style.display;f&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),f&&(c.cursor.style.display="none")}}}function dc(a,b,c){for(null==c&&(c=0);;){var d=!1,e=Y(a,b),f=fc(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,h=a.doc.scrollLeft;if(null!=f.scrollTop&&(vb(a,f.scrollTop),Math.abs(a.doc.scrollTop-g)>1&&(d=!0)),null!=f.scrollLeft&&(wb(a,f.scrollLeft),Math.abs(a.doc.scrollLeft-h)>1&&(d=!0)),!d)return e}}function ec(a,b,c,d,e){var f=fc(a,b,c,d,e);null!=f.scrollTop&&vb(a,f.scrollTop),null!=f.scrollLeft&&wb(a,f.scrollLeft)}function fc(a,b,c,d,e){var f=a.display,g=ab(a.display);0>c&&(c=0);var h=f.scroller.clientHeight-tf,i=f.scroller.scrollTop,j={},k=a.doc.height+K(f),l=g>c,m=e>k-g;if(i>c)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-tf,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return p+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function gc(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function hc(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function ic(a,b,c,d){var e=a.doc;if(null==c&&(c="add"),"smart"==c)if(a.doc.mode.indent)var f=I(a,b);else c="prev";var g,h=a.options.tabSize,i=kd(e,b),j=Sd(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text),g==uf)){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Sd(kd(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c?g=j-a.options.indentUnit:"number"==typeof c&&(g=j+c),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="	";g>m&&(l+=Td(g-m)),l!=k&&Qb(a.doc,l,Rb(b,0),Rb(b,k.length),"+input"),i.stateAfter=null}function jc(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=kd(f,Vb(f,b)):d=od(b),null==d?null:c(e,d)?(hb(a,d,d+1),e):null}function kc(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=kd(a,b))}function g(a){var b=(e?te:ue)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?ne:me)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=kd(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=!0;!(0>c)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=_d(p)?"w":n?/\s/.test(p)?null:"p":null;if(m&&m!=q){0>c&&(c=1,g());break}if(q&&(m=q),c>0&&!g(!o))break}var r=bc(a,Rb(h,i),j,!0);return l||(r.hitSide=!0),r}function lc(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*ab(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=$(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function mc(a,b){var c=b.ch,d=b.ch;if(a){b.xRel<0||d==a.length?--c:++d;for(var e=a.charAt(c),f=_d(e)?_d:/\s/.test(e)?function(a){return/\s/.test(a)
}:function(a){return!/\s/.test(a)&&!_d(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Rb(b.line,c),to:Rb(b.line,d)}}function nc(a,b){Zb(a.doc,Rb(b,0),Wb(a.doc,Rb(b+1,0)))}function oc(b,c,d,e){a.defaults[b]=c,d&&(af[b]=e?function(a,b,c){c!=cf&&d(a,b,c)}:d)}function pc(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function qc(a,b,c){return a.startState?a.startState(b,c):!0}function rc(a){return"string"==typeof a?jf[a]:a}function sc(a,b,c){function d(b){b=rc(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;h>g;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function tc(a){var b=Ef[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function uc(a,b){if(Ce&&34==a.keyCode&&a["char"])return!1;var c=Ef[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Qe?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Qe?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function vc(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0}function wc(a,b){this.lines=[],this.type=b,this.doc=a}function xc(a,b,c,d,e){if(d&&d.shared)return zc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return eb(a.cm,xc)(a,b,c,d,e);var f=new wc(a,e);if("range"==e&&!Tb(b,c))return f;d&&Yd(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=be("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0)),f.collapsed&&(Te=!0),f.addToHistory&&vd(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},0/0);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Lc(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Ic(d,c.ch)),j==b.line?g=Ic(d,b.ch):nd(d,0)),Cc(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Mc(a,b)&&nd(b,0)}),f.clearOnEnter&&Kd(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Se=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.startStyle||f.endStyle||f.collapsed)&&hb(l,b.line,c.line+1),f.atomic&&ac(l)),f}function yc(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Kd(a[c],"clear",function(){d.clear()})}function zc(a,b,c,d,e){d=Yd(d),d.shared=!1;var f=[xc(a,b,c,d,e)],g=f[0],h=d.replacedWith;return id(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(xc(a,Wb(a,b),Wb(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Ud(f)}),new yc(f,g)}function Ac(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Bc(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Cc(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Dc(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Ec(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Fc(a,b){var c=Yb(a,b.from.line)&&kd(a,b.from.line).markedSpans,d=Yb(a,b.to.line)&&kd(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Sb(b.from,b.to),h=Dc(c,e,g),i=Ec(d,f,g),j=1==b.text.length,k=Ud(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Ac(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=Ac(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}if(j&&h){for(var l=0;l<h.length;++l)null!=h[l].from&&h[l].from==h[l].to&&"bookmark"!=h[l].marker.type&&h.splice(l--,1);h.length||(h=null)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Gc(a,b){var c=xd(a,b),d=Fc(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Hc(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Wd(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Tb(j.to,h.from)&&!Tb(h.to,j.from)){var k=[i,1];(Tb(j.from,h.from)||!g.inclusiveLeft&&Sb(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Tb(h.to,j.to)||!g.inclusiveRight&&Sb(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Ic(a,b){var c,d=Te&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Jc(a){return Ic(a,-1)}function Kc(a){return Ic(a,a.text.length+1)}function Lc(a,b){for(var c;c=Jc(b);)b=kd(a,c.find().from.line);return b}function Mc(a,b){var c=Te&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&Nc(a,b,d))return!0}}function Nc(a,b,c){if(null==c.to){var d=c.marker.find().to,e=kd(a,d.line);return Nc(a,e,Ac(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&!f.marker.replacedWith&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Nc(a,b,f))return!0}function Oc(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Pc(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Qc(a){return function(){var b=!this.cm.curOp;b&&cb(this.cm);try{var c=a.apply(this,arguments)}finally{b&&db(this.cm)}return c}}function Rc(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||de(a.cm.display.measure,be("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Sc(a,b,c,d){var e=new kf(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),jc(a,b,function(b){if((b.widgets||(b.widgets=[])).push(e),e.line=b,!Mc(a.doc,b)||e.showIfHidden){var c=qd(a,b)<a.display.scroller.scrollTop;nd(b,b.height+Rc(e)),c&&hc(a,0,e.height)}return!0}),e}function Tc(a,b,c){var d={text:a};return Pc(d,b),d.height=c?c(d):1,d}function Uc(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Oc(a),Pc(a,c);var e=d?d(a):1;e!=a.height&&nd(a,e)}function Vc(a){a.parent=null,Oc(a)}function Wc(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g,h=0,i=null,j=new vc(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();)j.pos>a.options.maxHighlightLength?(f=!1,j.pos=Math.min(b.length,j.start+5e4),g=null):g=c.token(j,d),f&&i==g||(h<j.start&&e(j.start,i),h=j.start,i=g),j.start=j.pos;h<j.pos&&e(j.pos,i)}function Xc(a,b,c){var d=[a.state.modeGen];Wc(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1,h=0;Wc(a,b.text,f.mode,!0,function(a,b){for(var c=g;a>h;){var e=d[g];e>a&&d.splice(g,1,a,d[g+1],e),g+=2,h=Math.min(a,e)}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;g>c;c+=2){var i=d[c+1];d[c+1]=i?i+" "+b:b}})}return d}function Yc(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Xc(a,b,b.stateAfter=I(a,od(b)))),b.styles}function Zc(a,b,c){var d=a.doc.mode,e=new vc(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function $c(a){return a?lf[a]||(lf[a]="cm-"+a.replace(/ +/g," cm-")):null}function _c(a,b,c){for(var d,e=b,f=!0;d=Jc(e);)e=kd(a.doc,d.find().from.line);var g={pre:be("pre"),col:0,pos:0,display:!c,measure:null,measuredSomething:!1,cm:a};e.textClass&&(g.pre.className=e.textClass);do{e.text&&(f=!1),g.measure=e==b&&c,g.pos=0,g.addToken=g.measure?bd:ad,(we||ze)&&a.getOption("lineWrapping")&&(g.addToken=cd(g.addToken));var h=ed(e,g,Yc(a,e));c&&e==b&&!g.measuredSomething&&(c[0]=g.pre.appendChild(ie(a.display.measure)),g.measuredSomething=!0),h&&(e=kd(a.doc,h.to.line))}while(h);!c||g.measuredSomething||c[0]||(c[0]=g.pre.appendChild(f?be("span","Â "):ie(a.display.measure))),g.pre.firstChild||Mc(a.doc,b)||g.pre.appendChild(document.createTextNode("Â "));var i;if(c&&we&&(i=rd(e))){var j=i.length-1;i[j].from==i[j].to&&--j;var k=i[j],l=i[j-1];if(k.from+1==k.to&&l&&k.level<l.level){var m=c[g.pos-1];m&&m.parentNode.insertBefore(m.measureRight=ie(a.display.measure),m.nextSibling)}}return Md(a,"renderLine",a,b,g.pre),g.pre}function ad(a,b,c,d,e){if(b){if(mf.test(b))for(var f=document.createDocumentFragment(),g=0;;){mf.lastIndex=g;var h=mf.exec(b),i=h?h.index-g:b.length-g;if(i&&(f.appendChild(document.createTextNode(b.slice(g,g+i))),a.col+=i),!h)break;if(g+=i+1,"	"==h[0]){var j=a.cm.options.tabSize,k=j-a.col%j;f.appendChild(be("span",Td(k),"cm-tab")),a.col+=k}else{var l=be("span","â¢","cm-invalidchar");l.title="\\u"+h[0].charCodeAt(0).toString(16),f.appendChild(l),a.col+=1}}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure){var m=c||"";return d&&(m+=d),e&&(m+=e),a.pre.appendChild(be("span",[f],m))}a.pre.appendChild(f)}}function bd(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>="í "&&"í¯¿">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&ge(b,g)&&a.pre.appendChild(be("wbr"));var j=a.measure[a.pos]=ad(a,h,c,i&&d,g==b.length-1&&e);we&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(j.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.measuredSomething=!0)}function cd(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"Â ";return b+=" "}return function(c,d,e,f,g){return a(c,d.replace(/ {3,}/,b),e,f,g)}}function dd(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.measure&&(a.measure[a.pos]=b?c:a.pre.appendChild(ie(a.cm.display.measure)),a.measuredSomething=!0),a.pre.appendChild(c)),a.pos+=b}function ed(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l=e.length,m=0,n=1,o="",p=0;;){if(p==m){h=i=j="",k=null,p=1/0;for(var q=null,r=0;r<d.length;++r){var s=d[r],t=s.marker;s.from<=m&&(null==s.to||s.to>m)?(null!=s.to&&p>s.to&&(p=s.to,i=""),t.className&&(h+=" "+t.className),t.startStyle&&s.from==m&&(j+=" "+t.startStyle),t.endStyle&&s.to==p&&(i+=" "+t.endStyle),t.collapsed&&(!k||k.marker.size<t.size)&&(k=s)):s.from>m&&p>s.from&&(p=s.from),"bookmark"==t.type&&s.from==m&&t.replacedWith&&(q=t.replacedWith)}if(k&&(k.from||0)==m&&(dd(b,(null==k.to?l:k.to)-m,null!=k.from&&k.marker.replacedWith),null==k.to))return k.marker.find();q&&!k&&dd(b,0,q)}if(m>=l)break;for(var u=Math.min(l,p);;){if(o){var v=m+o.length;if(!k){var w=v>u?o.slice(0,u-m):o;b.addToken(b,w,g?g+h:h,j,m+w.length==p?i:"")}if(v>=u){o=o.slice(u-m),m=u;break}m=v,j=""}o=e.slice(f,f=c[n++]),g=$c(c[n++])}}else for(var n=1;n<c.length;n+=2)b.addToken(b,e.slice(f,f=c[n]),$c(c[n+1]))}function fd(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Uc(a,c,d,e),Nd(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=kd(a,h.line),l=kd(a,i.line),m=Ud(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];q>p;++p)r.push(Tc(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;q>p;++p)r.push(Tc(j[p],f(p),e));r.push(Tc(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];q>p;++p)r.push(Tc(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Nd(a,"change",a,b),_b(a,d.anchor,d.head,null,!0)}function gd(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function hd(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function id(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function jd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,hb(a)}function kd(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function ld(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function md(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function nd(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function od(a){if(null==a.parent)return null;for(var b=a.parent,c=Wd(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function pd(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function qd(a,b){b=Lc(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function rd(a){var b=a.order;return null==b&&(b=a.order=Gf(a.text)),b}function sd(a){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function td(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ud(a,b){var c={from:b.from,to:_e(b),text:ld(a,b.from,b.to)};return td(a,c,b.from.line,b.to.line+1),id(a,function(a){td(a,c,b.from.line,b.to.line+1)},!0),c}function vd(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Ud(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Ud(g.changes);Sb(b.from,b.to)&&Sb(b.from,h.to)?h.to=_e(b):g.changes.push(ud(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else for(g={changes:[ud(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function wd(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function xd(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(wd(c[d]));return e}function yd(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&Wd(b,Number(i[1]))>-1&&(Ud(g)[k]=j[k],delete j[k])}}return d}function zd(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ad(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Ub(i.from),i.to=Ub(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Ub(f.anchorBefore),f.headBefore=Ub(f.headBefore),f.anchorAfter=Ub(f.anchorAfter),f.readAfter=Ub(f.headAfter),f.copied=!0),g?(zd(f.anchorBefore),zd(f.headBefore),zd(f.anchorAfter),zd(f.headAfter)):(a.splice(0,e+1),e=0)}}function Bd(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ad(a.done,c,d,e),Ad(a.undone,c,d,e)}function Cd(){Hd(this)}function Dd(a){return a.stop||(a.stop=Cd),a}function Ed(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Fd(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Gd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Hd(a){Ed(a),Fd(a)}function Id(a){return a.target||a.srcElement}function Jd(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Ke&&a.ctrlKey&&1==b&&(b=3),b}function Kd(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Ld(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Md(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Nd(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);rf||(++sf,rf=[],setTimeout(Pd,0));for(var f=0;f<d.length;++f)rf.push(c(d[f]))}}function Od(a,b){return Md(a,b.type,a,b),Gd(b)}function Pd(){--sf;var a=rf;rf=null;for(var b=0;b<a.length;++b)a[b]()}function Qd(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Rd(){this.id=null}function Sd(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;b>f;++f)"	"==a.charAt(f)?g+=c-g%c:++g;return g}function Td(a){for(;vf.length<=a;)vf.push(Ud(vf)+" ");return vf[a]}function Ud(a){return a[a.length-1]}function Vd(a){if(Ie)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function Wd(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function Xd(a,b){function c(){}c.prototype=a;var d=new c;return b&&Yd(b,d),d}function Yd(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Zd(a){for(var b=[],c=0;a>c;++c)b.push(void 0);return b}function $d(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function _d(a){return/\w/.test(a)||a>"Â"&&(a.toUpperCase()!=a.toLowerCase()||wf.test(a))}function ae(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function be(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)ee(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function ce(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function de(a,b){return ce(a).appendChild(b)}function ee(a,b){ye?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function fe(a){return a.getBoundingClientRect()}function ge(){return!1}function he(a){if(null!=zf)return zf;var b=be("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return de(a,b),b.offsetWidth&&(zf=b.offsetHeight-b.clientHeight),zf||0}function ie(a){if(null==Af){var b=be("span","â");de(a,be("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Af=b.offsetWidth<=1&&b.offsetHeight>2&&!xe)}return Af?be("span","â"):be("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px")}function je(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=0;e<a.length;++e){var f=a[e];(f.from<c&&f.to>b||b==c&&f.to==b)&&d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr")}}function ke(a){return a.level%2?a.to:a.from}function le(a){return a.level%2?a.from:a.to}function me(a){var b=rd(a);return b?ke(b[0]):0}function ne(a){var b=rd(a);return b?le(Ud(b)):a.text.length}function oe(a,b){var c=kd(a.doc,b),d=Lc(a.doc,c);d!=c&&(b=od(d));var e=rd(d),f=e?e[0].level%2?ne(d):me(d):0;return Rb(b,f)}function pe(a,b){for(var c,d;c=Kc(d=kd(a.doc,b));)b=c.find().to.line;var e=rd(d),f=e?e[0].level%2?me(d):ne(d):d.text.length;return Rb(b,f)}function qe(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function re(a,b){for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return Ff=null,d;if(e.from==b||e.to==b){if(null!=c)return qe(a,e.level,a[c].level)?(Ff=c,d):(Ff=d,c);c=d}}return Ff=null,c}function se(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&xf.test(a.text.charAt(b)));return b}function te(a,b,c,d){var e=rd(a);if(!e)return ue(a,b,c,d);for(var f=re(e,b),g=e[f],h=se(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return re(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?se(a,g.to,-1,d):se(a,g.from,1,d)}}function ue(a,b,c,d){var e=b+c;if(d)for(;e>0&&xf.test(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var ve=/gecko\/\d/i.test(navigator.userAgent),we=/MSIE \d/.test(navigator.userAgent),xe=we&&(null==document.documentMode||document.documentMode<8),ye=we&&(null==document.documentMode||document.documentMode<9),ze=/WebKit\//.test(navigator.userAgent),Ae=ze&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Be=/Chrome\//.test(navigator.userAgent),Ce=/Opera\//.test(navigator.userAgent),De=/Apple Computer/.test(navigator.vendor),Ee=/KHTML\//.test(navigator.userAgent),Fe=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Ge=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),He=/PhantomJS/.test(navigator.userAgent),Ie=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Je=Ie||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Ke=Ie||/Mac/.test(navigator.platform),Le=/windows/i.test(navigator.platform),Me=Ce&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Me&&(Me=Number(Me[1]));var Ne,Oe,Pe,Qe=Ke&&(Ae||Ce&&(null==Me||12.11>Me)),Re=ve||we&&!ye,Se=!1,Te=!1,Ue=0,Ve=0,We=0,Xe=null;we?Xe=-.53:ve?Xe=15:Be?Xe=-.7:De&&(Xe=-1/3);var Ye,Ze,$e=null,_e=a.changeEnd=function(a){return a.text?Rb(a.from.line+a.text.length-1,Ud(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.Pos=Rb,a.prototype={constructor:a,focus:function(){window.focus(),mb(this),Eb(this),jb(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,af.hasOwnProperty(a)&&eb(this,af[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(("string"==typeof a?b[c].name:b[c])==a)return b.splice(c,1),!0},addOverlay:eb(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,hb(this)}),removeOverlay:eb(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,hb(this),void 0}}),indentLine:eb(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Yb(this.doc,a)&&ic(this,a,b,c)}),indentSelection:eb(null,function(a){var b=this.doc.sel;if(Sb(b.from,b.to))return ic(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;c>=d;++d)ic(this,d,a)}),getTokenAt:function(a,b){var c=this.doc;a=Wb(c,a);for(var d=I(this,a.line,b),e=this.doc.mode,f=kd(c,a.line),g=new vc(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=e.token(g,d)}return{start:g.start,end:g.pos,string:g.current(),className:h||null,type:h||null,state:d}},getTokenTypeAt:function(a){a=Wb(this.doc,a);for(var b=Yc(this,kd(this.doc,a.line)),c=0,d=(b.length-1)/2,e=a.ch;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=e)d=f;else{if(!(b[2*f+1]<e))return b[2*f+2];c=f+1}}},getStateAfter:function(a,b){var c=this.doc;return a=Vb(c,null==a?c.first+c.size-1:a),I(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?Wb(this.doc,a):a?d.from:d.to,Y(this,c,b||"page")},charCoords:function(a,b){return X(this,Wb(this.doc,a),b||"page")},coordsChar:function(a,b){return a=W(this,a,b||"page"),$(this,a.left,a.top)},lineAtHeight:function(a,b){return a=W(this,{top:a,left:0},b||"page").top,pd(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=kd(this.doc,a);return V(this,kd(this.doc,a),{top:0,left:0},b||"page").top+(c?e.height:0)},defaultTextHeight:function(){return ab(this.display)},defaultCharWidth:function(){return bb(this.display)},setGutterMarker:eb(null,function(a,b,c){return jc(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&ae(d)&&(a.gutterMarkers=null),!0})}),clearGutter:eb(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,hb(b,d,d+1),ae(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:eb(null,function(a,b,c){return jc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:eb(null,function(a,b,c){return jc(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:eb(null,function(a,b,c){return Sc(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Yb(this.doc,a))return null;var b=a;if(a=kd(this.doc,a),!a)return null}else{var b=od(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Y(this,Wb(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&ec(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:eb(null,Cb),execCommand:function(a){return hf[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=Wb(this.doc,a);b>f&&(g=kc(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:eb(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Sb(d.from,d.to)?kc(this.doc,d.head,a,b,this.options.rtlMoveVisually):0>a?d.from:d.to,Zb(this.doc,c,c,a)}),deleteH:eb(null,function(a,b){var c=this.doc.sel;Sb(c.from,c.to)?Qb(this.doc,"",c.from,kc(this.doc,c.head,a,b,!1),"+delete"):Qb(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=Wb(this.doc,a);b>g;++g){var i=Y(this,h,"div");if(null==f?f=i.left:i.left=f,h=lc(this,i,e,c),h.hitSide)break}return h},moveV:eb(null,function(a,b){var c=this.doc.sel,d=Y(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=lc(this,d,a,b);"page"==b&&hc(this,0,X(this,e,"div").top-d.top),Zb(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:eb(null,function(a,b){gc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=tf;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:eb(null,function(a,b){"number"==typeof a&&(a=Rb(a,0)),b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?Wb(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=Y(this,this.curOp.scrollToPos));var d=fc(this,c.left,c.top-b,c.right,c.bottom+b);gc(this,d.scrollLeft,d.scrollTop)}),setSize:function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.refresh()},on:function(a,b){Kd(this,a,b)},off:function(a,b){Ld(this,a,b)},operation:function(a){return gb(this,a)},refresh:eb(null,function(){S(this),gc(this,this.doc.scrollLeft,this.doc.scrollTop),hb(this)}),swapDoc:eb(null,function(a){var b=this.doc;return b.cm=null,jd(this,a),S(this),lb(this,!0),gc(this,a.scrollLeft,a.scrollTop),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var af=a.optionHandlers={},bf=a.defaults={},cf=a.Init={toString:function(){return"CodeMirror.Init"}};oc("value","",function(a,b){a.setValue(b)},!0),oc("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),oc("indentUnit",2,c,!0),oc("indentWithTabs",!1),oc("smartIndent",!0),oc("tabSize",4,function(a){c(a),S(a),hb(a)},!0),oc("electricChars",!0),oc("rtlMoveVisually",!Le),oc("theme","default",function(a){h(a),i(a)},!0),oc("keyMap","default",g),oc("extraKeys",null),oc("onKeyEvent",null),oc("onDragEvent",null),oc("lineWrapping",!1,d,!0),oc("gutters",[],function(a){m(a.options),i(a)},!0),oc("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),oc("coverGutterNextToScrollbar",!1,n,!0),oc("lineNumbers",!1,function(a){m(a.options),i(a)},!0),oc("firstLineNumber",1,i,!0),oc("lineNumberFormatter",function(a){return a},i,!0),oc("showCursorWhenSelecting",!1,B,!0),oc("readOnly",!1,function(a,b){"nocursor"==b?(Fb(a),a.display.input.blur()):b||lb(a,!0)}),oc("dragDrop",!0),oc("cursorBlinkRate",530),oc("cursorScrollMargin",0),oc("cursorHeight",1),oc("workTime",100),oc("workDelay",100),oc("flattenSpans",!0),oc("pollInterval",100),oc("undoDepth",40,function(a,b){a.doc.history.undoDepth=b
}),oc("historyEventDelay",500),oc("viewportMargin",10,function(a){a.refresh()},!0),oc("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),oc("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),oc("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),oc("autofocus",null);var df=a.modes={},ef=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}df[b]=c},a.defineMIME=function(a,b){ef[a]=b},a.resolveMode=function(b){if("string"==typeof b&&ef.hasOwnProperty(b))b=ef[b];else if(b&&"string"==typeof b.name&&ef.hasOwnProperty(b.name)){var c=ef[b.name];b=Xd(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){c=a.resolveMode(c);var d=df[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(ff.hasOwnProperty(c.name)){var f=ff[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var ff=a.modeExtensions={};a.extendMode=function(a,b){var c=ff.hasOwnProperty(a)?ff[a]:ff[a]={};Yd(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){of.prototype[a]=b},a.defineOption=oc;var gf=[];a.defineInitHook=function(a){gf.push(a)},a.copyState=pc,a.startState=qc,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}};var hf=a.commands={selectAll:function(a){a.setSelection(Rb(a.firstLine(),0),Rb(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Sb(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Rb(b.line),"+delete"):a.replaceRange("",b,Rb(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Rb(b,0),Rb(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",Rb(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Rb(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Rb(a.lastLine()))},goLineStart:function(a){a.extendSelection(oe(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=oe(a,b.line),d=a.getLineHandle(c.line),e=rd(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Rb(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(pe(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Rb(b.line,b.ch-1),Rb(b.line,b.ch+1))},newlineAndIndent:function(a){eb(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},jf=a.keyMap={};jf.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},jf.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},jf.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},jf["default"]=Ke?jf.macDefault:jf.pcDefault,jf.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=sc,a.isModifierKey=tc,a.keyName=uc,a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Kd(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var i=g.submit=function(){d(),g.submit=h,g.submit(),g.submit=i}}catch(f){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Ld(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))},j},vc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Sd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Sd(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=vc,a.TextMarker=wc,wc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&cb(a);for(var c=null,d=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Ac(f.markedSpans,this);null!=g.to&&(d=od(f)),f.markedSpans=Bc(f.markedSpans,g),null!=g.from?c=od(f):this.collapsed&&!Mc(this.doc,f)&&a&&nd(f,ab(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var e=0;e<this.lines.length;++e){var h=Lc(a.doc,this.lines[e]),i=k(a.doc,h);i>a.display.maxLineLength&&(a.display.maxLine=h,a.display.maxLineLength=i,a.display.maxLineChanged=!0)}null!=c&&a&&hb(a,c,d+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&ac(a)),b&&db(a),Nd(this,"clear")}},wc.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Ac(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=od(d);null!=e.from&&(a=Rb(f,e.from)),null!=e.to&&(b=Rb(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},wc.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){var c=kd(this.doc,a.from.line);if(O(b,c),a.from.line>=b.display.showingFrom&&a.from.line<b.display.showingTo){for(var d=b.display.lineDiv.firstChild;d;d=d.nextSibling)if(d.lineObj==c){d.offsetHeight!=c.height&&nd(c,d.offsetHeight);break}gb(b,function(){b.curOp.selectionChanged=!0})}}},wc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Wd(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},wc.prototype.detachLine=function(a){if(this.lines.splice(Wd(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=yc,yc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Nd(this,"clear")}},yc.prototype.find=function(){return this.primary.find()};var kf=a.LineWidget=function(a,b,c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};kf.prototype.clear=Qc(function(){var a=this.line.widgets,b=od(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null),nd(this.line,Math.max(0,this.line.height-Rc(this))),hb(this.cm,b,b+1)}}),kf.prototype.changed=Qc(function(){var a=this.height;this.height=null;var b=Rc(this)-a;if(b){nd(this.line,this.line.height+b);var c=od(this.line);hb(this.cm,c,c+1)}});var lf={},mf=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;gd.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Vc(e),Nd(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},hd.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new gd(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new gd(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new hd(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Wd(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new hd(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var nf=0,of=a.Doc=function(a,b,c){if(!(this instanceof of))return new of(a,b,c);null==c&&(c=0),hd.call(this,[new gd([Tc("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=sd(),this.cleanGeneration=1,this.frontier=c;var d=Rb(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++nf,this.modeOption=b,"string"==typeof a&&(a=Bf(a)),fd(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};of.prototype=Xd(hd.prototype,{constructor:of,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=md(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:function(a){var b=Rb(this.first,0),c=this.first+this.size-1;Kb(this,{from:b,to:Rb(c,kd(this,c).text.length),text:Bf(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=Wb(this,b),c=c?Wb(this,c):b,Qb(this,a,b,c,d)},getRange:function(a,b,c){var d=ld(this,Wb(this,a),Wb(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){Yb(this,a)&&Qb(this,b,Rb(a,0),Wb(this,Rb(a)))},removeLine:function(a){a?Qb(this,"",Wb(this,Rb(a-1)),Wb(this,Rb(a))):Qb(this,"",Rb(0,0),Wb(this,Rb(1,0)))},getLineHandle:function(a){return Yb(this,a)?kd(this,a):void 0},getLineNumber:function(a){return od(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Wb(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||a===!1?c.to:c.from,Ub(b)},somethingSelected:function(){return!Sb(this.sel.head,this.sel.anchor)},setCursor:fb(function(a,b,c){var d=Wb(this,"number"==typeof a?Rb(a,b||0):a);c?Zb(this,d):_b(this,d,d)}),setSelection:fb(function(a,b){_b(this,Wb(this,a),Wb(this,b||a))}),extendSelection:fb(function(a,b){Zb(this,Wb(this,a),b&&Wb(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Kb(this,{from:this.sel.from,to:this.sel.to,text:Bf(a),origin:c},b||"around")},undo:fb(function(){Mb(this,"undo")}),redo:fb(function(){Mb(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=sd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:yd(this.history.done),undone:yd(this.history.undone)}},setHistory:function(a){var b=this.history=sd(this.history.maxGeneration);b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return xc(this,Wb(this,a),Wb(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=Wb(this,a),xc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Wb(this,a);var b=[],c=kd(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,++c,void 0)}),Wb(this,Rb(c,b))},indexFromPos:function(a){a=Wb(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new of(md(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new of(md(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];id(b,function(a){e.push(a.id)},!0),b.history=sd(),b.history.done=yd(this.history.done,e),b.history.undone=yd(this.history.undone,e)}},iterLinkedDocs:function(a){id(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),of.prototype.eachLine=of.prototype.iter;var pf="iter insert remove copy getEditor".split(" ");for(var qf in of.prototype)of.prototype.hasOwnProperty(qf)&&Wd(pf,qf)<0&&(a.prototype[qf]=function(a){return function(){return a.apply(this.doc,arguments)}}(of.prototype[qf]));a.e_stop=Hd,a.e_preventDefault=Ed,a.e_stopPropagation=Fd;var rf,sf=0;a.on=Kd,a.off=Ld,a.signal=Md;var tf=30,uf=a.Pass={toString:function(){return"CodeMirror.Pass"}};Rd.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Sd;var vf=[""],wf=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,xf=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){fe=a};var yf=function(){if(ye)return!1;var a=be("div");return"draggable"in a||"dragDrop"in a}();ve?ge=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:De&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?ge=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:ze&&(ge=function(a,b){return b>1&&45==a.charCodeAt(b-1)&&/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b))?!0:/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|â¦[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var zf,Af,Bf=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=Bf;var Cf=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Df=function(){var a=be("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Ef={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=Ef,function(){for(var a=0;10>a;a++)Ef[a+48]=String(a);for(var a=65;90>=a;a++)Ef[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Ef[a+111]=Ef[a+63235]="F"+a}();var Ff,Gf=function(){function a(a){return 255>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1791>=a?c.charAt(a-1536):a>=1792&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;j>l;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;j>l;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;j>l;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];j-1>l;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;j>l;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;j>o&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||j-1>o&&"1"==k[o]?"1":"N",q=l;o>q;++q)k[q]=p;l=o-1}}for(var l=0,n=i;j>l;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;j>l;++l)if(e.test(k[l])){for(var o=l+1;j>o&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(j-1>o?k[o]:i),p=r||s?"L":"R",q=l;o>q;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;j>l;)if(g.test(k[l])){var v=l;for(++l;j>l&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;j>l&&"L"!=k[l];++l);for(var q=w;l>q;)if(h.test(k[q])){q>w&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;l>q&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;l>w&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Ud(u).level&&(t=b.match(/\s+$/))&&(Ud(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Ud(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.14.0",a}(),function(){function a(a,b,c){function d(b,c,d){if(b.text){var g=m?0:b.text.length-1,i=m?b.text.length:-1;if(b.text.length>h)return null;for(null!=d&&(g=d+n);g!=i;g+=n){var j=b.text.charAt(g);if(r.test(j)&&a.getTokenTypeAt(e(c,g+1))==p){var k=f[j];if(">"==k.charAt(1)==m)q.push(j);else{if(q.pop()!=k.charAt(0))return{pos:g,match:!1};if(!q.length)return{pos:g,match:!0}}}}}}var g=a.state.matchBrackets,h=g&&g.maxScanLineLength||1e4,i=b||a.getCursor(),j=a.getLineHandle(i.line),k=i.ch-1,l=k>=0&&f[j.text.charAt(k)]||f[j.text.charAt(++k)];if(!l)return null;var m=">"==l.charAt(1),n=m?1:-1;if(c&&m!=(k==i.ch))return null;for(var o,p=a.getTokenTypeAt(e(i.line,k+1)),q=[j.text.charAt(k)],r=/[(){}[\]]/,s=i.line,t=m?Math.min(s+100,a.lineCount()):Math.max(-1,s-100);s!=t&&!(o=s==i.line?d(j,s,k):d(a.getLineHandle(s),s));s+=n);return{from:e(i.line,k),to:o&&e(s,o.pos),match:o&&o.match,forward:m}}function b(b,c){var f=b.state.matchBrackets.maxHighlightLineLength||1e3,g=a(b);if(!(!g||b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=b.markText(g.from,e(g.from.line,g.from.ch+1),{className:h}),j=g.to&&b.markText(g.to,e(g.to.line,g.to.ch+1),{className:h});d&&b.state.focused&&b.display.input.focus();var k=function(){b.operation(function(){i.clear(),j&&j.clear()})};return c?(setTimeout(k,800),void 0):k}}function c(a){a.operation(function(){g&&(g(),g=null),a.somethingSelected()||(g=b(a,!1))})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,function(a,b,d){d&&d!=CodeMirror.Init&&a.off("cursorActivity",c),b&&(a.state.matchBrackets="object"==typeof b?b:{},a.on("cursorActivity",c))}),CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(b,c){return a(this,b,c)})}(),function(){function a(a){var b,c=a.getCursor(),d=a.getTokenAt(c),e=CodeMirror.innerMode(a.getMode(),d.state).mode;if("comment"==d.type&&e.blockCommentStart){var f,g=d.string.indexOf(e.blockCommentEnd),h=a.getRange(CodeMirror.Pos(c.line,0),CodeMirror.Pos(c.line,d.end));if(-1!=g&&g==d.string.length-e.blockCommentEnd.length);else if(0==d.string.indexOf(e.blockCommentStart)){if(b=h.slice(0,d.start),!/^\s*$/.test(b)){b="";for(var i=0;i<d.start;++i)b+=" "}}else-1!=(f=h.indexOf(e.blockCommentContinue))&&f+e.blockCommentContinue.length>d.start&&/^\s*$/.test(h.slice(0,f))&&(b=h.slice(0,f))}return null==b?CodeMirror.Pass:(a.replaceSelection("\n"+b+e.blockCommentContinue,"end"),void 0)}for(var b=["clike","css","javascript"],c=0;c<b.length;++c)CodeMirror.extendMode(b[c],{blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * "});CodeMirror.defineOption("continueComments",null,function(b,c,d){d&&d!=CodeMirror.Init&&b.removeKeyMap("continueComment");var e={name:"continueComment"};e["string"==typeof c?c:"Enter"]=a,b.addKeyMap(e)})}(),CodeMirror.defineMode("javascript",function(a,b){function c(a,b,c){return b.tokenize=c,c(a,b)}function d(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!1;d=!d&&"\\"==c}return d}function e(a,b,c){return S=a,T=c,b}function f(a,b){var f=a.next();if('"'==f||"'"==f)return c(a,b,g(f));if(/[\[\]{}\(\),;\:\.]/.test(f))return e(f);if("0"==f&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(f)||"-"==f&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==f)return a.eat("*")?c(a,b,h):a.eat("/")?(a.skipToEnd(),e("comment","comment")):"operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)?(d(a,"/"),a.eatWhile(/[gimy]/),e("regexp","string-2")):(a.eatWhile(Z),e("operator",null,a.current()));if("#"==f)return a.skipToEnd(),e("error","error");if(Z.test(f))return a.eatWhile(Z),e("operator",null,a.current());a.eatWhile(/[\w\$_]/);var i=a.current(),j=Y.propertyIsEnumerable(i)&&Y[i];return j&&"."!=b.lastType?e(j.type,j.style,i):e("variable","variable",i)}function g(a){return function(b,c){return d(b,a)||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function j(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function k(a,b,c,d,e){var f=a.cc;for(_.state=a,_.stream=e,_.marked=null,_.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():W?u:t;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return _.marked?_.marked:"variable"==c&&j(a,d)?"variable-2":b}}}function l(){for(var a=arguments.length-1;a>=0;a--)_.cc.push(arguments[a])}function m(){return l.apply(null,arguments),!0}function n(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var c=_.state;if(c.context){if(_.marked="def",b(c.localVars))return;c.localVars={name:a,next:c.localVars}}else{if(b(c.globalVars))return;c.globalVars={name:a,next:c.globalVars}}}function o(){_.state.context={prev:_.state.context,vars:_.state.localVars},_.state.localVars=ab}function p(){_.state.localVars=_.state.context.vars,_.state.context=_.state.context.prev}function q(a,b){var c=function(){var c=_.state,d=c.indented;"stat"==c.lexical.type&&(d=c.lexical.indented),c.lexical=new i(d,_.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function r(){var a=_.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function s(a){return function(b){return b==a?m():";"==a?l():m(arguments.callee)}}function t(a){return"var"==a?m(q("vardef"),J,s(";"),r):"keyword a"==a?m(q("form"),u,t,r):"keyword b"==a?m(q("form"),t,r):"{"==a?m(q("}"),G,r):";"==a?m():"if"==a?m(q("form"),u,t,r,L(_.state.indented)):"function"==a?m(Q):"for"==a?m(q("form"),s("("),q(")"),M,s(")"),r,t,r):"variable"==a?m(q("stat"),B):"switch"==a?m(q("form"),u,q("}","switch"),s("{"),G,r,r):"case"==a?m(u,s(":")):"default"==a?m(s(":")):"catch"==a?m(q("form"),o,s("("),R,s(")"),t,r,p):l(q("stat"),u,s(";"),r)}function u(a){return w(a,!1)}function v(a){return w(a,!0)}function w(a,b){var c=b?A:z;return $.hasOwnProperty(a)?m(c):"function"==a?m(Q):"keyword c"==a?m(b?y:x):"("==a?m(q(")"),x,s(")"),r,c):"operator"==a?m(b?v:u):"["==a?m(q("]"),F(v,"]"),r,c):"{"==a?m(q("}"),F(D,"}"),r,c):m()}function x(a){return a.match(/[;\}\)\],]/)?l():l(u)}function y(a){return a.match(/[;\}\)\],]/)?l():l(v)}function z(a,b){return","==a?m(u):A(a,b,z)}function A(a,b,c){return c||(c=A),"operator"==a?/\+\+|--/.test(b)?m(c):"?"==b?m(u,s(":"),u):m(u):";"!=a?"("==a?m(q(")","call"),F(v,")"),r,c):"."==a?m(C,c):"["==a?m(q("]"),u,s("]"),r,c):void 0:void 0}function B(a){return":"==a?m(r,t):l(z,s(";"),r)}function C(a){return"variable"==a?(_.marked="property",m()):void 0}function D(a,b){if("variable"==a){if(_.marked="property","get"==b||"set"==b)return m(E)}else("number"==a||"string"==a)&&(_.marked=a+" property");return $.hasOwnProperty(a)?m(s(":"),v):void 0}function E(a){return":"==a?m(u):"variable"!=a?m(s(":"),u):(_.marked="property",m(Q))}function F(a,b){function c(d){if(","==d){var e=_.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),m(a,c)}return d==b?m():m(s(b))}return function(d){return d==b?m():l(a,c)}}function G(a){return"}"==a?m():l(t,G)}function H(a){return":"==a?m(I):l()}function I(a){return"variable"==a?(_.marked="variable-3",m()):l()}function J(a,b){return"variable"==a?(n(b),X?m(H,K):m(K)):l()}function K(a,b){return"="==b?m(v,K):","==a?m(J):void 0}function L(a){return function(b,c){return"keyword b"==b&&"else"==c?(_.state.lexical=new i(a,0,"form",null,_.state.lexical),m(t,r)):l()}}function M(a){return"var"==a?m(J,s(";"),O):";"==a?m(O):"variable"==a?m(N):l(u,s(";"),O)}function N(a,b){return"in"==b?m(u):m(z,O)}function O(a,b){return";"==a?m(P):"in"==b?m(u):l(u,s(";"),P)}function P(a){")"!=a&&m(u)}function Q(a,b){return"variable"==a?(n(b),m(Q)):"("==a?m(q(")"),o,F(R,")"),r,t,p):void 0}function R(a,b){return"variable"==a?(n(b),X?m(H):m()):void 0}var S,T,U=a.indentUnit,V=b.statementIndent,W=b.json,X=b.typescript,Y=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this")};
if(X){var h={type:"variable",style:"variable-3"},i={"interface":a("interface"),"class":a("class"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),"super":a("super"),string:h,number:h,bool:h,any:h};for(var j in i)g[j]=i[j]}return g}(),Z=/[+\-*&%=<>!?|~^]/,$={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},_={state:null,column:null,marked:null,cc:null},ab={name:"this",next:{name:"arguments"}};return r.lex=!0,{startState:function(a){return{tokenize:f,lastType:null,cc:[],lexical:new i((a||0)-U,0,"block",!1),localVars:b.localVars,globalVars:b.globalVars,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==S?c:(b.lastType="operator"!=S||"++"!=T&&"--"!=T?S:"incdec",k(b,c,S,T,a))},indent:function(a,c){if(a.tokenize==h)return CodeMirror.Pass;if(a.tokenize!=f)return 0;var d=c&&c.charAt(0),e=a.lexical;"stat"==e.type&&"}"==d&&(e=e.prev),V&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);var g=e.type,i=d==g;return"vardef"==g?e.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==g&&"{"==d?e.indented:"form"==g?e.indented+U:"stat"==g?e.indented+("operator"==a.lastType||","==a.lastType?V||U:0):"switch"!=e.info||i||0==b.doubleIndentSwitch?e.align?e.column+(i?0:1):e.indented+(i?0:U):e.indented+(/^(?:case|default)\b/.test(c)?U:2*U)},electricChars:":{}",blockCommentStart:W?null:"/*",blockCommentEnd:W?null:"*/",lineComment:W?null:"//",jsonMode:W}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("velocity",function(){function a(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function b(a,b,c){return b.tokenize=c,c(a,b)}function c(a,c){var k=c.beforeParams;c.beforeParams=!1;var l=a.next();if('"'!=l&&"'"!=l||!c.inParams){if(/[\[\]{}\(\),;\.]/.test(l))return"("==l&&k?c.inParams=!0:")"==l&&(c.inParams=!1),null;if(/\d/.test(l))return a.eatWhile(/[\w\.]/),"number";if("#"==l&&a.eat("*"))return b(a,c,e);if("#"==l&&a.match(/ *\[ *\[/))return b(a,c,f);if("#"==l&&a.eat("#"))return a.skipToEnd(),"comment";if("$"==l)return a.eatWhile(/[\w\d\$_\.{}]/),i&&i.propertyIsEnumerable(a.current().toLowerCase())?"keyword":(c.beforeParams=!0,"builtin");if(j.test(l))return a.eatWhile(j),"operator";a.eatWhile(/[\w\$_{}]/);var m=a.current().toLowerCase();return g&&g.propertyIsEnumerable(m)?"keyword":h&&h.propertyIsEnumerable(m)||a.current().match(/^#[a-z0-9_]+ *$/i)&&"("==a.peek()?(c.beforeParams=!0,"keyword"):null}return b(a,c,d(l))}function d(a){return function(b,d){for(var e,f=!1,g=!1;null!=(e=b.next());){if(e==a&&!f){g=!0;break}f=!f&&"\\"==e}return g&&(d.tokenize=c),"string"}}function e(a,b){for(var d,e=!1;d=a.next();){if("#"==d&&e){b.tokenize=c;break}e="*"==d}return"comment"}function f(a,b){for(var d,e=0;d=a.next();){if("#"==d&&2==e){b.tokenize=c;break}"]"==d?e++:" "!=d&&(e=0)}return"meta"}var g=a("#end #else #break #stop #[[ #]] #{end} #{else} #{break} #{stop}"),h=a("#if #elseif #foreach #set #include #parse #macro #define #evaluate #{if} #{elseif} #{foreach} #{set} #{include} #{parse} #{macro} #{define} #{evaluate}"),i=a("$foreach.count $foreach.hasNext $foreach.first $foreach.last $foreach.topmost $foreach.parent $velocityCount"),j=/[+\-*&%=<>!?:\/|]/;return{startState:function(){return{tokenize:c,beforeParams:!1,inParams:!1}},token:function(a,b){return a.eatSpace()?null:b.tokenize(a,b)}}}),CodeMirror.defineMIME("text/velocity","velocity"),CodeMirror.defineMode("xml",function(a,b){function c(a,b){function c(c){return b.tokenize=c,c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(f("atom","]]>")):null:a.match("--")?c(f("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(g(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta";var h=a.eat("/");t="";for(var i;i=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)t+=i;return t?(u=h?"closeTag":"openTag",b.tokenize=d,"tag"):"error"}if("&"==e){var j;return j=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),j?"atom":"error"}return a.eatWhile(/[^&<]/),null}function d(a,b){var d=a.next();return">"==d||"/"==d&&a.eat(">")?(b.tokenize=c,u=">"==d?"endTag":"selfcloseTag","tag"):"="==d?(u="equals",null):"<"==d?"error":/[\'\"]/.test(d)?(b.tokenize=e(d),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function e(a){return function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"}}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function g(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==e)return d.tokenize=g(a+1),d.tokenize(b,d);if(">"==e){if(1==a){d.tokenize=c;break}return d.tokenize=g(a-1),d.tokenize(b,d)}}return"meta"}}function h(){for(var a=arguments.length-1;a>=0;a--)v.cc.push(arguments[a])}function i(){return h.apply(null,arguments),!0}function j(a,b){var c=A.doNotIndent.hasOwnProperty(a)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:a,indent:v.indented,startOfLine:b,noIndent:c}}function k(){v.context&&(v.context=v.context.prev)}function l(a){if("openTag"==a)return v.tagName=t,v.tagStart=w.column(),i(p,m(v.startOfLine));if("closeTag"==a){var b=!1;return v.context?v.context.tagName!=t&&(A.implicitlyClosed.hasOwnProperty(v.context.tagName.toLowerCase())&&k(),b=!v.context||v.context.tagName!=t):b=!0,b&&(x="error"),i(n(b))}return i()}function m(a){return function(b){var c=v.tagName;return v.tagName=v.tagStart=null,"selfcloseTag"==b||"endTag"==b&&A.autoSelfClosers.hasOwnProperty(c.toLowerCase())?(o(c.toLowerCase()),i()):"endTag"==b?(o(c.toLowerCase()),j(c,a),i()):i()}}function n(a){return function(b){return a&&(x="error"),"endTag"==b?(k(),i()):(x="error",i(arguments.callee))}}function o(a){for(var b;;){if(!v.context)return;if(b=v.context.tagName.toLowerCase(),!A.contextGrabbers.hasOwnProperty(b)||!A.contextGrabbers[b].hasOwnProperty(a))return;k()}}function p(a){return"word"==a?(x="attribute",i(q,p)):"endTag"==a||"selfcloseTag"==a?h():(x="error",i(p))}function q(a){return"equals"==a?i(r,p):(A.allowMissing?"word"==a&&(x="attribute"):x="error","endTag"==a||"selfcloseTag"==a?h():i())}function r(a){return"string"==a?i(s):"word"==a&&A.allowUnquoted?(x="string",i()):(x="error","endTag"==a||"selfCloseTag"==a?h():i())}function s(a){return"string"==a?i(s):h()}var t,u,v,w,x,y=a.indentUnit,z=b.multilineTagIndentFactor||1,A=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},B=b.alignCDATA;return{startState:function(){return{tokenize:c,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.startOfLine=!0,b.indented=a.indentation()),a.eatSpace())return null;x=u=t=null;var c=b.tokenize(a,b);if(b.type=u,(c||u)&&"comment"!=c)for(v=b,w=a;;){var d=b.cc.pop()||l;if(d(u||c))break}return b.startOfLine=!1,x||c},indent:function(a,b,e){var f=a.context;if(a.tokenize!=d&&a.tokenize!=c||f&&f.noIndent)return e?e.match(/^(\s*)/)[0].length:0;if(a.tagName)return a.tagStart+y*z;if(B&&/<!\[CDATA\[/.test(b))return 0;for(f&&/^<\//.test(b)&&(f=f.prev);f&&!f.startOfLine;)f=f.prev;return f?f.indent+y:0},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:b.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("css",function(a){return CodeMirror.getMode(a,"text/css")}),CodeMirror.defineMode("css-base",function(a,b){"use strict";function c(a,b){return o=b,a}function d(a,b){var d=a.next();if(h[d]){var g=h[d](a,b);if(g!==!1)return g}if("@"==d)return a.eatWhile(/[\w\\\-]/),c("def",a.current());if("="==d)c(null,"compare");else{if(("~"==d||"|"==d)&&a.eat("="))return c(null,"compare");if('"'==d||"'"==d)return b.tokenize=e(d),b.tokenize(a,b);if("#"==d)return a.eatWhile(/[\w\\\-]/),c("atom","hash");if("!"==d)return a.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(d))return a.eatWhile(/[\w.%]/),c("number","unit");if("-"!==d)return/[,+>*\/]/.test(d)?c(null,"select-op"):"."==d&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?c("qualifier","qualifier"):":"==d?c("operator",d):/[;{}\[\]\(\)]/.test(d)?c(null,d):"u"==d&&a.match("rl(")?(a.backUp(1),b.tokenize=f,c("property","variable")):(a.eatWhile(/[\w\\\-]/),c("property","variable"));if(/\d/.test(a.peek()))return a.eatWhile(/[\w.%]/),c("number","unit");if(a.match(/^[^-]+-/))return c("meta","meta")}}function e(a,b){return function(e,f){for(var g,h=!1;null!=(g=e.next())&&(g!=a||h);)h=!h&&"\\"==g;return h||(b&&e.backUp(1),f.tokenize=d),c("string","string")}}function f(a,b){return a.next(),b.tokenize=a.match(/\s*[\"\']/,!1)?d:e(")",!0),c(null,"(")}var g=a.indentUnit,h=b.hooks||{},i=b.atMediaTypes||{},j=b.atMediaFeatures||{},k=b.propertyKeywords||{},l=b.colorKeywords||{},m=b.valueKeywords||{},n=!!b.allowNested,o=null;return{startState:function(a){return{tokenize:d,baseIndent:a||0,stack:[]}},token:function(a,b){if(b.tokenize=b.tokenize||d,b.tokenize==d&&a.eatSpace())return null;var e=b.tokenize(a,b);e&&"string"!=typeof e&&(e=c(e[0],e[1]));var f=b.stack[b.stack.length-1];if("variable"==e)return"variable-definition"==o&&b.stack.push("propertyValue"),"variable-2";if("property"==e){var g=a.current().toLowerCase();"propertyValue"==f?e=m.hasOwnProperty(g)?"string-2":l.hasOwnProperty(g)?"keyword":"variable-2":"rule"==f?k.hasOwnProperty(g)||(e+=" error"):"block"==f?e=k.hasOwnProperty(g)?"property":l.hasOwnProperty(g)?"keyword":m.hasOwnProperty(g)?"string-2":"tag":f&&"@media{"!=f?"@media"==f?e=i[a.current()]?"attribute":/^(only|not)$/.test(g)?"keyword":"and"==g?"error":j.hasOwnProperty(g)?"error":"attribute error":"@mediaType"==f?e=i.hasOwnProperty(g)?"attribute":"and"==g?"operator":/^(only|not)$/.test(g)?"error":"error":"@mediaType("==f?k.hasOwnProperty(g)||(i.hasOwnProperty(g)?e="error":"and"==g?e="operator":/^(only|not)$/.test(g)?e="error":e+=" error"):e="@import"==f?"tag":"error":e="tag"}else"atom"==e?f&&"@media{"!=f&&"block"!=f?"propertyValue"==f?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a.current())||(e+=" error"):e="error":e="builtin":"@media"==f&&"{"==o&&(e="error");if("{"==o)if("@media"==f||"@mediaType"==f)b.stack.pop(),b.stack[b.stack.length-1]="@media{";else{var h=n?"block":"rule";b.stack.push(h)}else if("}"==o){var p=b.stack[b.stack.length-1];"interpolation"==p&&(e="operator"),b.stack.pop(),"propertyValue"==f&&b.stack.pop()}else"interpolation"==o?b.stack.push("interpolation"):"@media"==o?b.stack.push("@media"):"@import"==o?b.stack.push("@import"):"@media"==f&&/\b(keyword|attribute)\b/.test(e)?b.stack.push("@mediaType"):"@mediaType"==f&&","==a.current()?b.stack.pop():"@mediaType"==f&&"("==o?b.stack.push("@mediaType("):"@mediaType("==f&&")"==o?b.stack.pop():"rule"!=f&&"block"!=f||":"!=o?"propertyValue"==f&&";"==o?b.stack.pop():"@import"==f&&";"==o&&b.stack.pop():b.stack.push("propertyValue");return e},indent:function(a,b){var c=a.stack.length;return/^\}/.test(b)&&(c-="propertyValue"==a.stack[a.stack.length-1]?2:1),a.baseIndent+c*g},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/"}}),function(){function a(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function b(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}var c=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),d=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),e=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"]),f=a(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),g=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);CodeMirror.defineMIME("text/css",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,hooks:{"<":function(a,b){function c(a,b){for(var c,d=0;null!=(c=a.next());){if(d>=2&&">"==c){b.tokenize=null;break}d="-"==c?d+1:0}return["comment","comment"]}return a.eat("!")?(b.tokenize=c,c(a,b)):void 0},"/":function(a,c){return a.eat("*")?(c.tokenize=b,b(a,c)):!1}},name:"css-base"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,allowNested:!0,hooks:{$:function(a){return a.match(/^[\w-]+/),":"==a.peek()?["variable","variable-definition"]:["variable","variable"]},"/":function(a,c){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(c.tokenize=b,b(a,c)):["operator","operator"]},"#":function(a){return a.eat("{")?["operator","interpolation"]:(a.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css-base"})}(),CodeMirror.defineMode("htmlmixed",function(a,b){function c(a,b){var c=b.htmlState.tagName,d=g.token(a,b.htmlState);if("script"==c&&/\btag\b/.test(d)&&">"==a.current()){var j=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);j=j?j[1]:"",j&&/[\"\']/.test(j.charAt(0))&&(j=j.slice(1,j.length-1));for(var k=0;k<i.length;++k){var l=i[k];if("string"==typeof l.matches?j==l.matches:l.matches.test(j)){l.mode&&(b.token=e,b.localMode=l.mode,b.localState=l.mode.startState&&l.mode.startState(g.indent(b.htmlState,"")));break}}}else"style"==c&&/\btag\b/.test(d)&&">"==a.current()&&(b.token=f,b.localMode=h,b.localState=h.startState(g.indent(b.htmlState,"")));return d}function d(a,b,c){var d,e=a.current(),f=e.search(b);return f>-1?a.backUp(e.length-f):(d=e.match(/<\/?$/))&&(a.backUp(e.length),a.match(b,!1)||a.match(e[0])),c}function e(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function f(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*style\s*>/,h.token(a,b.localState))}var g=CodeMirror.getMode(a,{name:"xml",htmlMode:!0}),h=CodeMirror.getMode(a,"css"),i=[],j=b&&b.scriptTypes;if(i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(a,"javascript")}),j)for(var k=0;k<j.length;++k){var l=j[k];i.push({matches:l.matches,mode:l.mode&&CodeMirror.getMode(a,l.mode)})}return i.push({matches:/./,mode:CodeMirror.getMode(a,"text/plain")}),{startState:function(){var a=g.startState();return{token:c,localMode:null,localState:null,htmlState:a}},copyState:function(a){if(a.localState)var b=CodeMirror.copyState(a.localMode,a.localState);return{token:a.token,localMode:a.localMode,localState:b,htmlState:CodeMirror.copyState(g,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return!a.localMode||/^\s*<\//.test(b)?g.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||g}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("sql",function(a,b){"use strict";function c(a,b){var c=a.next();if(n[c]){var f=n[c](a,b);if(f!==!1)return f}if(1==m.hexNumber&&("0"==c&&a.match(/^[xX][0-9a-fA-F]+/)||("x"==c||"X"==c)&&a.match(/^'[0-9a-fA-F]+'/)))return"number";if(1==m.binaryNumber&&(("b"==c||"B"==c)&&a.match(/^'[01]+'/)||"0"==c&&a.match(/^b[01]+/)))return"number";if(c.charCodeAt(0)>47&&c.charCodeAt(0)<58)return a.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==m.decimallessFloat&&a.eat("."),"number";if("?"==c&&(a.eatSpace()||a.eol()||a.eat(";")))return"variable-3";if("'"==c||'"'==c&&m.doubleQuote)return b.tokenize=d(c),b.tokenize(a,b);if((1==m.nCharCast&&("n"==c||"N"==c)||1==m.charsetCast&&"_"==c&&a.match(/[a-z][a-z0-9]*/i))&&("'"==a.peek()||'"'==a.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(c))return null;if(m.commentSlashSlash&&"/"==c&&a.eat("/"))return a.skipToEnd(),"comment";if(m.commentHash&&"#"==c||"-"==c&&a.eat("-")&&(!m.commentSpaceRequired||a.eat(" ")))return a.skipToEnd(),"comment";if("/"==c&&a.eat("*"))return b.tokenize=e,b.tokenize(a,b);if("."!=c){if(l.test(c))return a.eatWhile(l),null;if("{"==c&&(a.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||a.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";a.eatWhile(/^[_\w\d]/);var g=a.current().toLowerCase();return o.hasOwnProperty(g)&&(a.match(/^( )+'[^']*'/)||a.match(/^( )+"[^"]*"/))?"number":i.hasOwnProperty(g)?"atom":j.hasOwnProperty(g)?"builtin":k.hasOwnProperty(g)?"keyword":h.hasOwnProperty(g)?"string-2":null}return 1==m.zerolessFloat&&a.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==m.ODBCdotTable&&a.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function d(a){return function(b,d){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){d.tokenize=c;break}f=!f&&"\\"==e}return"string"}}function e(a,b){for(;;){if(!a.skipTo("*")){a.skipToEnd();break}if(a.next(),a.eat("/")){b.tokenize=c;break}}return"comment"}function f(a,b,c){b.context={prev:b.context,indent:a.indentation(),col:a.column(),type:c}}function g(a){a.indent=a.context.indent,a.context=a.context.prev}var h=b.client||{},i=b.atoms||{"false":!0,"true":!0,"null":!0},j=b.builtin||{},k=b.keywords||{},l=b.operatorChars||/^[*+\-%<>!=&|~^]/,m=b.support||{},n=b.hooks||{},o=b.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:c,context:null}},token:function(a,b){if(a.sol()&&b.context&&null==b.context.align&&(b.context.align=!1),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==c)return c;b.context&&null==b.context.align&&(b.context.align=!0);var d=a.current();return"("==d?f(a,b,")"):"["==d?f(a,b,"]"):b.context&&b.context.type==d&&g(b),c},indent:function(b,c){var d=b.context;return d?d.align?d.col+(c.charAt(0)==d.type?0:1):d.indent+a.indentUnit:CodeMirror.Pass}}}),function(){"use strict";function a(a){for(var b;null!=(b=a.next());)if("`"==b&&!a.eat("`"))return"variable-2";return null}function b(a){return a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./)),a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null
}function c(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function d(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}var e="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";CodeMirror.defineMIME("text/x-sql",{name:"sql",keywords:d(e+"begin"),builtin:d("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:d("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:d("date time timestamp"),support:d("ODBCdotTable doubleQuote binaryNumber hexNumber")}),CodeMirror.defineMIME("text/x-mysql",{name:"sql",client:d("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:d(e+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:d("bool boolean bit blob decimal double enum float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:d("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:d("date time timestamp"),support:d("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":b,"`":a,"\\":c}}),CodeMirror.defineMIME("text/x-mariadb",{name:"sql",client:d("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:d(e+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:d("bool boolean bit blob decimal double enum float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:d("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:d("date time timestamp"),support:d("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":b,"`":a,"\\":c}}),CodeMirror.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:d("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:d("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),atoms:d("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:d("commentSlashSlash decimallessFloat"),hooks:{}}),CodeMirror.defineMIME("text/x-plsql",{name:"sql",client:d("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:d("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),functions:d("abs acos add_months ascii asin atan atan2 average bfilename ceil chartorowid chr concat convert cos cosh count decode deref dual dump dup_val_on_index empty error exp false floor found glb greatest hextoraw initcap instr instrb isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mod months_between new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null nvl others power rawtohex reftohex round rowcount rowidtochar rpad rtrim sign sin sinh soundex sqlcode sqlerrm sqrt stddev substr substrb sum sysdate tan tanh to_char to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid upper user userenv variance vsize"),builtin:d("bfile blob character clob dec float int integer mlslabel natural naturaln nchar nclob number numeric nvarchar2 real rowtype signtype smallint string varchar varchar2"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:d("date time timestamp"),support:d("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")})}();var xui={};!function(){function a(a){var b;if(""==(b=d(a)))throw new Error("Error input: "+str);return b}function b(a,b){var c=a[b];return null!=c?c:a[b]={}}function c(a){return"[object Function]"==Object.prototype.toString.call(a)}function d(a){return null==a?"":String(a).replace(h,"")}var e,f=xui.XProject={},g=window,h=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),i=[],j=[];f.namespace=function(c,d){if(0==arguments.length)return e;for(var f=g,h=a(c).split("."),i=0;i<h.length;i++)f=b(f,a(h[i]));return d!==!1&&(e=f),f},f.link=function(a){if(!c(a))throw new Error("Input of link must be a function but not "+a);i.push(a)},f.doLink=function(){for(var a,b=0;a=i[b];b++)a.call(null);i=[]},f.end=function(a){if(!c(a))throw new Error("Input of link must be a function but not "+a);j.push(a)},f.doEnd=function(){for(var a,b=0;a=j[b];b++)a.call(null);j=[]},f.setNamespaceBase=function(a){a&&(g=a)},f.getNamespaceBase=function(){return g}}();var T,baidu=T=baidu||{version:"1.5.2.2"};baidu.guid="$BAIDU$",baidu.$$=window[baidu.guid]=window[baidu.guid]||{global:{}},baidu.ajax=baidu.ajax||{},baidu.fn=baidu.fn||{},baidu.fn.blank=function(){},baidu.fn.bind=function(a,b){var c=arguments.length>2?[].slice.call(arguments,2):null;return function(){var d=baidu.lang.isString(a)?b[a]:a,e=c?c.concat([].slice.call(arguments,0)):arguments;return d.apply(b||d,e)}},baidu.ajax.request=function(a,b){function c(){if(4==h.readyState){try{var a=h.status}catch(b){return e("failure"),void 0}e(a),a>=200&&300>a||304==a||1223==a?e("success"):e("failure"),window.setTimeout(function(){h.onreadystatechange=baidu.fn.blank,k&&(h=null)},0)}}function d(){if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}return window.XMLHttpRequest?new XMLHttpRequest:void 0}function e(a){a="on"+a;var b=q[a],c=baidu.ajax[a];if(b)if(f&&clearTimeout(f),"onsuccess"!=a)b(h);else{try{h.responseText}catch(d){return b(h)}b(h,h.responseText)}else if(c){if("onsuccess"==a)return;c(h)}}var f,g,h,i=b||{},j=i.data||"",k=!(i.async===!1),l=i.username||"",m=i.password||"",n=(i.method||"GET").toUpperCase(),o=i.headers||{},p=i.timeout||0,q={};for(g in i)q[g]=i[g];if(o["X-Requested-With"]="XMLHttpRequest",xutil.url){var r=xutil.url.parseParam(j);o["X-RouteBizKey"]=r._rbk,r=null}try{h=d(),"GET"==n&&(j&&(a+=(a.indexOf("?")>=0?"&":"?")+j,j=null),i.noCache&&(a+=(a.indexOf("?")>=0?"&":"?")+"b"+ +new Date+"=1")),l?h.open(n,a,k,l,m):h.open(n,a,k),k&&(h.onreadystatechange=c),"POST"==n&&h.setRequestHeader("Content-Type",o["Content-Type"]||"application/x-www-form-urlencoded; charset=UTF-8");for(g in o)o.hasOwnProperty(g)&&h.setRequestHeader(g,o[g]);e("beforerequest"),p&&(f=setTimeout(function(){h.onreadystatechange=baidu.fn.blank,h.abort(),e("timeout")},p)),h.send(j),k||c()}catch(s){e("failure")}return h},baidu.ajax.get=function(a,b){return baidu.ajax.request(a,{onsuccess:b})},baidu.ajax.post=function(a,b,c){return baidu.ajax.request(a,{onsuccess:c,method:"POST",data:b})},baidu.json=baidu.json||{},baidu.json.stringify=function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=e[a];return b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})),'"'+a+'"'}function b(a){var b,c,d,e=["["],f=a.length;for(c=0;f>c;c++)switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(baidu.json.stringify(d)),b=1}return e.push("]"),e.join("")}function c(a){return 10>a?"0"+a:a}function d(a){return'"'+a.getFullYear()+"-"+c(a.getMonth()+1)+"-"+c(a.getDate())+"T"+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())+'"'}var e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(c){switch(typeof c){case"undefined":return"undefined";case"number":return isFinite(c)?String(c):"null";case"string":return a(c);case"boolean":return String(c);default:if(null===c)return"null";if(c instanceof Array)return b(c);if(c instanceof Date)return d(c);var e,f,g=["{"],h=baidu.json.stringify;for(var i in c)if(Object.prototype.hasOwnProperty.call(c,i))switch(f=c[i],typeof f){case"undefined":case"unknown":case"function":break;default:e&&g.push(","),e=1,g.push(h(i)+":"+h(f))}return g.push("}"),g.join("")}}}(),baidu.json.parse=function(a){return new Function("return ("+a+")")()},baidu.json.encode=baidu.json.stringify,baidu.json.decode=baidu.json.parse,baidu.browser=baidu.browser||{},function(){var a=navigator.userAgent;baidu.browser.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)?+(RegExp.$1||RegExp.$2):void 0}(),baidu.browser.ie=baidu.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,baidu.browser.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,baidu.dom=baidu.dom||{},baidu.lang=baidu.lang||{},baidu.event=baidu.event||{},baidu.event.EventArg=function(a,b){b=b||window,a=a||b.event;var c=b.document;this.target=a.target||a.srcElement,this.keyCode=a.which||a.keyCode;for(var d in a){var e=a[d];"function"!=typeof e&&(this[d]=e)}this.pageX||0===this.pageX||(this.pageX=(a.clientX||0)+(c.documentElement.scrollLeft||c.body.scrollLeft),this.pageY=(a.clientY||0)+(c.documentElement.scrollTop||c.body.scrollTop)),this._event=a},baidu.event.EventArg.prototype.preventDefault=function(){return this._event.preventDefault?this._event.preventDefault():this._event.returnValue=!1,this},baidu.event.EventArg.prototype.stopPropagation=function(){return this._event.stopPropagation?this._event.stopPropagation():this._event.cancelBubble=!0,this},baidu.event.EventArg.prototype.stop=function(){return this.stopPropagation().preventDefault()},baidu.lang.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},baidu.isString=baidu.lang.isString,baidu.dom._g=function(a){return baidu.lang.isString(a)?document.getElementById(a):a},baidu._g=baidu.dom._g,baidu.dom.contains=function(a,b){var c=baidu.dom._g;return a=c(a),b=c(b),a.contains?a!=b&&a.contains(b):!!(16&a.compareDocumentPosition(b))},baidu.object=baidu.object||{},baidu.extend=baidu.object.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},baidu.object.values=function(a){var b,c=[],d=0;for(b in a)a.hasOwnProperty(b)&&(c[d++]=a[b]);return c},baidu.lang.isNumber=function(a){return"[object Number]"==Object.prototype.toString.call(a)&&isFinite(a)},function(){function a(a,b){for(var c=0,d=a.length,e={};d>c;c++)e[a[c]]=b[a[c]],delete b[a[c]];return e}function b(b,c,d){d=baidu.object.extend({},d);var e=baidu.object.values(a(l[c],d)),f=document.createEvent(c);return e.unshift(b),"KeyEvents"==c?f.initKeyEvent.apply(f,e):"MouseEvents"==c?f.initMouseEvent.apply(f,e):"UIEvents"==c?f.initUIEvent.apply(f,e):f.initEvent.apply(f,e),baidu.object.extend(f,d),f}function c(a){var b;return document.createEventObject&&(b=document.createEventObject(),baidu.object.extend(b,a)),b}function d(d,e){e=a(l.KeyEvents,e);var f;if(document.createEvent)try{f=b(d,"KeyEvents",e)}catch(g){try{f=b(d,"Events",e)}catch(h){f=b(d,"UIEvents",e)}}else e.keyCode=e.charCode>0?e.charCode:e.keyCode,f=c(e);return f}function e(d,e){e=a(l.MouseEvents,e);var f;return document.createEvent?(f=b(d,"MouseEvents",e),e.relatedTarget&&!f.relatedTarget&&("mouseout"==d.toLowerCase()?f.toElement=e.relatedTarget:"mouseover"==d.toLowerCase()&&(f.fromElement=e.relatedTarget))):(e.button=0==e.button?1:1==e.button?4:baidu.lang.isNumber(e.button)?e.button:0,f=c(e)),f}function f(d,e){e.bubbles=k.hasOwnProperty(d),e=a(l.HTMLEvents,e);var f;if(document.createEvent)try{f=b(d,"HTMLEvents",e)}catch(g){try{f=b(d,"UIEvents",e)}catch(h){f=b(d,"Events",e)}}else f=c(e);return f}var g=baidu.browser,h={keydown:1,keyup:1,keypress:1},i={click:1,dblclick:1,mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1},j={abort:1,blur:1,change:1,error:1,focus:1,load:g.ie?0:1,reset:1,resize:1,scroll:1,select:1,submit:1,unload:g.ie?0:1},k={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},l={KeyEvents:["bubbles","cancelable","view","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode"],MouseEvents:["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget"],HTMLEvents:["bubbles","cancelable"],UIEvents:["bubbles","cancelable","view","detail"],Events:["bubbles","cancelable"]};baidu.object.extend(k,h),baidu.object.extend(k,i),baidu.event.fire=function(a,b,c){var g;if(b=b.replace(/^on/i,""),a=baidu.dom._g(a),c=baidu.object.extend({bubbles:!0,cancelable:!0,view:window,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0,button:0,relatedTarget:null},c),h[b])g=d(b,c);else if(i[b])g=e(b,c);else{if(!j[b])throw new Error(b+" is not support!");g=f(b,c)}g&&(a.dispatchEvent?a.dispatchEvent(g):a.fireEvent&&a.fireEvent("on"+b,g))}}(),baidu.event.get=function(a,b){return new baidu.event.EventArg(a,b)},baidu.event.getEvent=function(){if(window.event)return window.event;var a=arguments.callee;do if(/Event/.test(a.arguments[0]))return a.arguments[0];while(a=a.caller);return null},baidu.event.getKeyCode=function(a){return a.which||a.keyCode},baidu.event.getPageX=function(a){var b=a.pageX,c=document;return b||0===b||(b=(a.clientX||0)+(c.documentElement.scrollLeft||c.body.scrollLeft)),b},baidu.event.getPageY=function(a){var b=a.pageY,c=document;return b||0===b||(b=(a.clientY||0)+(c.documentElement.scrollTop||c.body.scrollTop)),b},baidu.event.getTarget=function(a){return a.target||a.srcElement},baidu.event._listeners=baidu.event._listeners||[],baidu.event.on=function(a,b,c){b=b.replace(/^on/i,""),a=baidu.dom._g(a);var d,e=function(b){c.call(a,b)},f=baidu.event._listeners,g=baidu.event._eventFilter,h=b;return b=b.toLowerCase(),g&&g[b]&&(d=g[b](a,b,e),h=d.type,e=d.listener),a.addEventListener?a.addEventListener(h,e,!1):a.attachEvent&&a.attachEvent("on"+h,e),f[f.length]=[a,b,c,e,h],a},baidu.on=baidu.event.on,baidu.event.un=function(a,b,c){a=baidu.dom._g(a),b=b.replace(/^on/i,"").toLowerCase();for(var d,e,f,g=baidu.event._listeners,h=g.length,i=!c;h--;)d=g[h],d[1]!==b||d[0]!==a||!i&&d[2]!==c||(e=d[4],f=d[3],a.removeEventListener?a.removeEventListener(e,f,!1):a.detachEvent&&a.detachEvent("on"+e,f),g.splice(h,1));return a},baidu.un=baidu.event.un,baidu.event.once=function(a,b,c){function d(e){c.call(a,e),baidu.event.un(a,b,d)}return a=baidu.dom._g(a),baidu.event.on(a,b,d),a},baidu.event.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},baidu.event.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},baidu.event.stop=function(a){var b=baidu.event;b.stopPropagation(a),b.preventDefault(a)},baidu.event._eventFilter=baidu.event._eventFilter||{},baidu.event._eventFilter._crossElementBoundary=function(a,b){var c=b.relatedTarget,d=b.currentTarget;if(c!==!1&&d!=c&&(!c||"xul"!=c.prefix&&!baidu.dom.contains(d,c)))return a.call(d,b)},baidu.event._eventFilter.mouseenter=window.attachEvent?null:function(a,b,c){return{type:"mouseover",listener:baidu.fn.bind(baidu.event._eventFilter._crossElementBoundary,this,c)}},baidu.event._eventFilter.mouseleave=window.attachEvent?null:function(a,b,c){return{type:"mouseout",listener:baidu.fn.bind(baidu.event._eventFilter._crossElementBoundary,this,c)}},function(){var a=baidu.dom.ready=function(){function a(){if(!a.isReady){a.isReady=!0;for(var b=0,c=f.length;c>b;b++)f[b]()}}function b(){try{document.documentElement.doScroll("left")}catch(c){return setTimeout(b,1),void 0}a()}function c(){if(!e)if(e=!0,"complete"===document.readyState)a.isReady=!0;else if(document.addEventListener)document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",d),window.attachEvent("onload",a);var c=!1;try{c=null==window.frameElement}catch(f){}document.documentElement.doScroll&&c&&b()}}var d,e=!1,f=[];return document.addEventListener?d=function(){document.removeEventListener("DOMContentLoaded",d,!1),a()}:document.attachEvent&&(d=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",d),a())}),c(),function(b){a.isReady?b():f.push(b)}}();a.isReady=!1}(),T.undope=!0,baidu.ejson=function(){function a(a,c){var d=c.onsuccess,e=c.onfailure;return c.onsuccess=function(a){b(a.responseText,d,e),c=null},c.onfailure=function(a){b({status:a.status||DEFAULT_ERROR_STATUS,statusInfo:a.statusText,data:a.responseText},d,e),c=null},baidu.ajax.request(a,c)}function b(a,b,c){c=c||new Function,b=b||new Function;var d;try{d="string"==typeof a?baidu.json.parse(a):a}catch(e){d=a}return d&&"object"==typeof d?(d.status?c(d.status,d):b(d.data,d),void 0):(c(1,d),void 0)}return DEFAULT_ERROR_STATUS=99999,{DEFAULT_ERROR_STATUS:DEFAULT_ERROR_STATUS,request:a,get:function(b,c,d){a(b,{method:"get",onsuccess:c,onfailure:d})},post:function(b,c,d,e){return a(b,{method:"post",data:c,onsuccess:d,onfailure:e})},process:b}}();var xutil={lang:{},number:{},string:{},fn:{},object:{},date:{},url:{},collection:{},file:{},dom:{},uid:{},graphic:{},ajax:{}};!function(){var a=xutil,b=a.LinkedHashMap=function(a,b,c){this._oMap={},this._oHead=null,this._oTail=null,this._nLength=0,this.setDefaultAttr(b,c),a&&this.appendAll(a)},c=b.prototype;c.setDefaultAttr=function(a,b){this._sDefaultKeyAttr=a,this._sDefaultValueAttr=b},c.appendAll=function(a,b,c){if(null==b&&(b=this._sDefaultKeyAttr),null==b)return this;null==c&&(c=this._sDefaultValueAttr),a=a||[];for(var d,e=0,f=a.length;f>e;e++)(d=a[e])&&this.addLast(this.$retieval(d,c),this.$retieval(d,b));return this},c.addLast=function(a,b){null==b&&(b=this.$retieval(a,this._sDefaultKeyAttr),a=this.$retieval(a,this._sDefaultValueAttr));var c={key:b,item:a,pre:null,next:null};return this._oMap[b]=c,this.$insert(c,this._oTail,null),this},c.addFirst=function(a,b){null==b&&(b=this.$retieval(a,this._sDefaultKeyAttr),a=this.$retieval(a,this._sDefaultValueAttr));var c={key:b,item:a,pre:null,next:null};return this._oMap[b]=c,this.$insert(c,null,this._oHead),this},c.insertBefore=function(){var a,b,c,d=arguments;2==d.length?(a=this.$retieval(d[0],this._sDefaultValueAttr),b=this.$retieval(d[0],this._sDefaultKeyAttr),c=d[1]):(a=d[0],b=d[1],c=d[2]);var e=this._oMap[c],f={key:b,item:a,pre:null,next:null};return e&&(this._oMap[b]=f,this.$insert(f,e.pre,e)),this},c.insertAfter=function(){var a,b,c,d=arguments;2==d.length?(a=this.$retieval(d[0],this._sDefaultValueAttr),b=this.$retieval(d[0],this._sDefaultKeyAttr),c=d[1]):(a=d[0],b=d[1],c=d[2]);var e=this._oMap[c],f={key:b,item:a,pre:null,next:null};return e&&(this._oMap[b]=f,this.$insert(f,e,e.next)),this},c.insertAt=function(){var a,b,c,d=arguments;if(2==d.length?(a=this.$retieval(d[0],this._sDefaultValueAttr),b=this.$retieval(d[0],this._sDefaultKeyAttr),c=d[1]):(a=d[0],b=d[1],c=d[2]),null!=c&&c==this.size())this.addLast(a,b);else{var e=this.getAt(c);e&&null!=e.key&&this.insertBefore(a,b,e.key)}return this},c.clean=function(){this._oMap={},this._oHead=null,this._oTail=null,this._nLength=0,this._sDefaultKeyAttr=null,this._sDefaultValueAttr=null},c.cleanWithoutDefaultAttr=function(){this._oMap={},this._oHead=null,this._oTail=null,this._nLength=0},c.set=function(){var a,b,c=arguments;1==c.length?b=c[0]:(a=c[0],b=c[1]);var d=this._oMap[a];return d?d.item=b:this.addLast(b,a),this},c.get=function(a){var b=this._oMap[a];return b?b.item:null},c.getAt=function(a){var b={};return this.foreach(function(c,d,e){return a==e?(b.key=c,b.item=d,!1):void 0}),null!=b.key?b:null},c.getIndex=function(a){var b=-1;return this.foreach(function(c,d,e){return c==a?(b=e,!1):void 0}),b},c.getKey=function(a){var b;return this.foreach(function(c,d){return d.item==a?(b=c,!1):void 0}),b},c.containsKey=function(a){return!!this.get(a)},c.list=function(){var a=[];return this.foreach(function(b,c){a.push(c)}),a},c.foreach=function(a){for(var b=this._oHead,c=0;b&&a(b.key,b.item,c++)!==!1;)b=b.next},c.remove=function(a){var b=this._oMap[a];if(b){delete this._oMap[a];var c=b.pre,d=b.next;c&&(c.next=d),d&&(d.pre=c),this._nLength--,this._oHead==b&&(this._oHead=d),this._oTail==b&&(this._oTail=c)}return b?b.item:null},c.size=function(){return this._nLength},c.first=function(){return this._oHead?this._oHead.item:null},c.firstKey=function(){return this._oHead?this._oHead.key:null},c.last=function(){return this._oTail?this._oTail.item:null},c.lastKey=function(){return this._oTail?this._oTail.key:null},c.next=function(a,b){var c=this.$next(a,b);return c?c.item:null},c.nextKey=function(a,b){var c=this.$next(a,b);return c?c.key:null},c.previous=function(a,b){var c=this.$previous(a,b);return c?c.item:null},c.previousKey=function(a,b){var c=this.$previous(a,b);return c?c.key:null},c.$next=function(a,b){var c=this._oMap[a];if(!c)return null;var d=b&&c==this._oTail?this._oHead:c.next;return d},c.$previous=function(a,b){var c=this._oMap[a];if(!c)return null;var d=b&&c==this._oHead?this._oTail:c.pre;return d},c.$retieval=function(a,b){var c;return c="[object Function]"==Object.prototype.toString.call(b)?b(a):null==b?a:a[b],void 0===c?null:c},c.$insert=function(a,b,c){a.pre=b,a.next=c,b?b.next=a:this._oHead=a,c?c.pre=a:this._oTail=a,this._nLength++}}(),function(){function a(a){var b=[];j(a)&&""!==a&&b.push(a);var c=l.DEFAULT_PARAM?l.DEFAULT_PARAM():"";return j(c)&&""!==c&&b.push(c),b.join("&")}function b(a){k(window.console)&&i(window.console.log)&&window.console.log(a)}function c(a,b){b&&(p[a]=1,0==q++&&l.SHOW_WAITING_HANDLER&&l.SHOW_WAITING_HANDLER())}function d(a){p[a]&&(delete p[a],--q<=0&&l.HIDE_WAITING_HANDLER&&l.HIDE_WAITING_HANDLER())}function e(a,b){var c;j(a)&&((c=o[a])&&l.abort(c,!0),o[a]=b)}function f(a){j(a)&&delete o[a]}function g(a,b){var c;for(this.syncNameMap={},c=0,a=a||[];c<a.length;c++)this.syncNameMap[a[c]]=0;this.callback=b||new Function}function h(a,b){for(var c in b)a[c]=b[c];return a}function i(a){return"[object Function]"==Object.prototype.toString.call(a)}function j(a){return null!=a}function k(a){return a===Object(a)}var l=xutil.ajax,m=baidu.ejson.request;l.DEFAULT_OPTIONS=null,l.DEFAULT_FAILURE_HANDLER=null,l.DEFAULT_TIMEOUT_HANDLER=null,l.DEFAULT_PARAM=null,l.SHOW_WAITING_HANDLER=null,l.HIDE_WAITING_HANDLER=null,l.DEFAULT_SHOW_WAITING=!1;var n={},o={},p={},q=0,r=1;l.request=function(b,g){function i(){p=s=t=u=w=v=j=g=null,delete n[k],f(o),d(k)}g=h(h({},l.DEFAULT_OPTIONS||{}),g||{});var j,k="AJAX_"+ ++r,o=g.businessKey,p=g.defaultFailureHandler||null,q=g.timeout||0,s=g.ontimeout,t=g.onfailure,u=g.onsuccess,v=g.oncomplete,w=g.onfinalize,x=g.showWaiting||l.DEFAULT_SHOW_WAITING,y=g.syncWrap,z=g.syncName;return g.noCache=!0,g.method=g.method||"POST",g.data=a(g.data||""),g.onsuccess=function(a,b){if(k in n)try{v&&v(b)===!1||u(a,b),w&&w(b)}catch(c){l.errorMsg=c.message}finally{y&&y.done(z),i()}},g.onfailure=function(a,b){var c;if(k in n)try{v&&v(b)===!1||(c=t(a,b)),w&&w(b)}catch(d){l.errorMsg=d.message}finally{c!==!1&&(l.DEFAULT_FAILURE_HANDLER?l.DEFAULT_FAILURE_HANDLER(a,b,p):p&&p(a,b)),y&&y.done(z),i()}},g.ontimeout=function(){try{v&&v(obj)===!1||s&&s(),w&&w(obj)}catch(a){l.errorMsg=a.message}finally{l.DEFAULT_TIMEOUT_HANDLER&&l.DEFAULT_TIMEOUT_HANDLER(),y&&y.done(z),i()
}},q>0?(g.timeout=q,g.ontimeout=timeoutHandler):delete g.timeout,c(k,x),e(k,o),n[k]={xhr:m(b,g),clear:i},k},l.post=function(a,b,c,d,e){return e=e||{},e.method="POST",e.data=b,e.onsuccess=c,e.onfailure=d,l.request(a,e)},l.get=function(a,b,c,d,e){return e=e||{},e.method="GET",e.data=b,e.onsuccess=c,e.onfailure=d,l.request(a,e)},l.abort=function(a,c){var d,e,f=[];if(c=c||!0,j(a))a in n&&f.push(a);else for(d in n)f.push(d);for(d=0;a=f[d];d++)try{e=n[a],c&&delete n[a],e.xhr.abort(),e.clear.call(null)}catch(g){b("[ERROR] abort ajax error. requestId="+a+", e="+g)}},l.abortBusiness=function(a){var b=o[a];j(b)&&(delete o[a],l.abort(b))},l.createSyncWrap=function(a,b){return new g(a,b)},g.prototype.done=function(a){var b;this.syncNameMap[a]=1;for(b in this.syncNameMap)if(!this.syncNameMap[b])return;this.callback.call(null)}}(),function(){function a(c,d,e,f,g,h,i,j,k,l){if(null!=c){f=!!f;var m,n,o;if(f||(m=d.call(null,c,{level:g,index:i.index,parent:h,childrenParam:n={},parentParam:j,globalParam:l}),i.index++),m===b.STOP_ALL_TRAVEL)return m;if(m!==b.STOP_SUB_TREE_TRAVEL){for(var p,q=c[e||"children"]||[],r=0,s=q.length;s>r;r++)if(p=q[r],m=a(p,d,e,f,g+1,c,i,n,o={},l),m===b.STOP_ALL_TRAVEL)return m;return f&&m!==b.STOP_ALL_TRAVEL&&(m=d.call(null,c,{level:g,index:i.index,parent:h,childrenParam:o,parentParam:k,globalParam:l}),i.index++),m===b.STOP_ALL_TRAVEL?m:void 0}}}var b=xutil.collection,c=xutil.object;b.inList=function(a,b,c,d){if(null==a||!b)return!1;for(var e,f=0,g=b.length;g>f;f++)if(e=b[f],(null!=e||!c)&&(e=c?e[c]:e,d?d(a,e):a==e))return!0;return!1},b.selectFromWhere=function(a,b,c,d,e){var f=[];if(null==d||!a||!c||!b)return f;for(var g,h,i=0,j=a.length;j>i;i++)(g=a[i])&&(h=g[c],(e?e(d,h):d==h)&&f.push(g[b]));return f},b.selectSingleFromWhere=function(a,c,d,e,f){var g=b.selectFromWhere(a,c,d,e,f);return g&&g.length>0?g[0]:null},b.sortList=function(a,b,d,e){e&&(a=c.clone(a)),b=null!=b?b:null,">"==d?d=function(a,b){var c=null!=a,d=null!=b;return c&&d?a>=b:c||!d}:"<"==d&&(d=function(a,b){var c=null!=a,d=null!=b;return c&&d?b>=a:!c||d});for(var f,g,h,i,j=!0,k=0,l=a.length-1;l>k&&j;k++){j=!1;for(var m=0,n=a.length-k-1;n>m;m++)f=a[m],h=null!=f?b?f[b]:f:null,g=a[m+1],i=null!=g?b?g[b]:g:null,d(h,i)||(a[m]=g,a[m+1]=f,j=!0)}return a},b.travelTree=function(b,c,d,e,f){a(b,c,d,e,0,null,{index:0},{},{},f||{})},b.STOP_ALL_TRAVEL=1,b.STOP_SUB_TREE_TRAVEL=2}(),function(){var a=xutil.date,b=xutil.lang,c=xutil.number,d=864e5;a.DATE_FORMAT="yyyy-MM-dd",a.MINUTE_FORMAT="yyyy-MM-dd hh:mm",a.SECONDS_FORMAT="yyyy-MM-dd HH:mm:ss",a.TIME_REG=/h{1,2}:m{1,2}:s{1,2}$/i,a.isValidFormatPattern=function(b){return!b||b!==a.DATE_FORMAT&&b!==a.MINUTE_FORMAT&&b!==a.SECONDS_FORMAT?!1:!0},a.dateToString=function(b,c){return b?(c=c||a.DATE_FORMAT,a.format(b,c)):""},a.dateToStringM=function(b){return a.dateToString(b,a.MINUTE_FORMAT)},a.stringToDate=function(b){return b?a.parse(b):null},a.getYesterday=function(b){return b?a.addDay(b,-1,!0):null},a.getYesterdayString=function(b){return b?a.dateToString(a.getYesterday(b)):null},a.getWeekend=function(a,b,c){var d=c?a:new Date(a),e=b?6-d.getDay():(7-d.getDay())%7;return d.setDate(d.getDate()+e),d},a.getWorkday=function(a,b,c){var d=c?a:new Date(a),e=d.getDate();return e=b?e-d.getDay():e-(6+d.getDay())%7,d.setDate(e),d},a.dateCountFromYearBegin=function(c){if(!c)return null;b.isString(c)&&(c=a.stringToDate(c));var d=new Date(c.getTime());return d.setDate(1),d.setMonth(0),a.dateMinus(c,d)+1},a.dateCountFromQuarterBegin=function(c){return c?(b.isString(c)&&(c=a.stringToDate(c)),a.dateMinus(c,a.getQuarterBegin(c))+1):null},a.dateCountFromMonthBegin=function(c){if(!c)return null;b.isString(c)&&(c=a.stringToDate(c));var d=new Date(c.getTime());return d.setDate(1),a.dateMinus(c,d)+1},a.getQuarter=function(c){return c?(b.isString(c)&&(c=a.stringToDate(c)),Math.floor(c.getMonth()/3)+1):null},a.getQuarterBegin=function(c){if(!c)return null;b.isString(c)&&(c=a.stringToDate(c));var d=a.getQuarter(c),e=[0,0,3,6,9];return new Date(c.getFullYear(),e[d],1)},a.sameDate=function(c,d){return c&&d?(b.isString(c)&&(c=a.stringToDate(c)),b.isString(d)&&(d=a.stringToDate(d)),c.getFullYear()==d.getFullYear()&&c.getMonth()==d.getMonth()&&c.getDate()==d.getDate()):!1},a.compareDate=function(c,d){var e,f,g,h,c,d;return b.isString(c)&&(c=a.stringToDate(c)),b.isString(d)&&(d=a.stringToDate(d)),(e=c.getFullYear())==(f=d.getFullYear())?(g=c.getMonth())==(h=d.getMonth())?(c=c.getDate())==(d=d.getDate())?0:d>c?-1:1:h>g?-1:1:f>e?-1:1},a.dateMinus=function(b,c){b=a.stringToDate(a.dateToString(b)),c=a.stringToDate(a.dateToString(c));var e=b.getTime()-c.getTime(),f=Math.round(e/d);return f},a.addDay=function(a,b,c){return a?(b=b||0,c?new Date(a.getTime()+b*d):(a.setDate(a.getDate()+b),a)):null},a.addMonth=function(a,b,c){return a?(b=b||0,c&&(a=new Date(a.getTime())),a.setMonth(a.getMonth()+b),a):null},a.nextMonth=function(a,b){var c=a.getFullYear(),d=a.getMonth();return{year:c+Math.floor((d+b)/12),month:(d+b+Math.abs(12*b))%12+1}},a.nextQuarter=function(c,d){if(!c)return null;b.isString(c)&&(c=a.stringToDate(c));var e=a.getQuarter(c),f=c.getFullYear();return{year:f+Math.floor((e-1+d)/4),quarter:(e-1+d+Math.abs(4*d))%4+1}},a.getDay=function(c,d){if(!c)return"";b.isString(c)&&(c=a.stringToDate(c)),d=d||"å¨";var e;switch(c.getDay()){case 1:e=d+"ä¸";break;case 2:e=d+"äº";break;case 3:e=d+"ä¸";break;case 4:e=d+"å";break;case 5:e=d+"äº";break;case 6:e=d+"å­";break;case 0:e=d+"æ¥";break;default:e=""}return e},a.format=function(a,d){function e(a,b){d=d.replace(a,b)}var f=c.pad;if(!b.isString(d))return a.toString();var g=a.getFullYear(),h=a.getMonth()+1,i=a.getDate(),j=a.getHours(),k=a.getMinutes(),l=a.getSeconds();return e(/yyyy/g,f(g,4)),e(/yy/g,f(parseInt(g.toString().slice(2),10),2)),e(/MM/g,f(h,2)),e(/M/g,h),e(/dd/g,f(i,2)),e(/d/g,i),e(/HH/g,f(j,2)),e(/H/g,j),e(/hh/g,f(j%12,2)),e(/h/g,j%12),e(/mm/g,f(k,2)),e(/m/g,k),e(/ss/g,f(l,2)),e(/s/g,l),d},a.formatTime=function(a,d){function e(a,b){d=d.replace(a,b)}var f=c.pad;if(!b.isString(d))return a.toString();var g=parseInt(a/3600),h=parseInt(g/24);g=parseInt(g%24);var i=parseInt(a%3600/60),j=Math.round(a%60);return 0==h&&(d="hh:mm:ss"),e(/d/gi,h),e(/hh/gi,g),e(/h/gi,g),e(/mm/gi,f(i,2)),e(/m/gi,i),e(/ss/gi,f(j,2)),e(/s/gi,j),d},a.parse=function(a){var b=new RegExp("^\\d+(\\-|\\/)\\d+(\\-|\\/)\\d+$");if("string"==typeof a){if(b.test(a)||isNaN(Date.parse(a))){var c=a.split(/ |T/),d=c.length>1?c[1].split(/[^\d]/):[0,0,0],e=c[0].split(/[^\d]/);return new Date(e[0],null!=e[1]?e[1]-1:0,null!=e[2]?e[2]:1,null!=d[0]?d[0]:0,null!=d[1]?d[1]:0,null!=d[2]?d[2]:0)}return new Date(a)}return new Date}}(),function(){var a=xutil.dom,b=Object.prototype.toString,c=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),d=/\s/,e=navigator.userAgent,f=document,g=RegExp;a.isStrict="CSS1Compat"==f.compatMode,a.ieVersion=/msie (\d+\.\d)/i.test(e)?f.documentMode||g.$1-0:void 0,a.firefoxVersion=/firefox\/(\d+\.\d)/i.test(e)?g.$1-0:void 0,a.operaVersion=/opera\/(\d+\.\d)/i.test(e)?g.$1-0:void 0,a.safariVersion=/(\d+\.\d)(\.\d)?\s+safari/i.test(e)&&!/chrome/i.test(e)?g.$1-0:void 0,a.chromeVersion=/chrome\/(\d+\.\d+)/i.test(e)?+g.$1:void 0,a.g=function(a){return"[object String]"==b.call(a)?document.getElementById(a):a&&a.nodeName&&(1==a.nodeType||9==a.nodeType)?a:null},a.q=function(b,e){var f=[];if(!b||!(b=String(b).replace(c,"")))return f;if(null==e)e=document;else if(!(e=a.g(e)))return f;if(e.getElementsByClassName)return e.getElementsByClassName(b);for(var g,h,i=e.all||e.getElementsByTagName("*"),j=0;g=i[j];j++)if(null!=(h=g.className)){var k=h.indexOf(b),l=k+b.length;k>=0&&(""==h.charAt(k-1)||d.test(h.charAt(k-1)))&&(""==h.charAt(l)||d.test(h.charAt(l)))&&(f[f.length]=g)}return f},a.addClass=function(a,b){a.className+=" "+b},a.removeClass=function(a,b){for(var c=a.className.split(/\s+/).sort(),d=b.split(/\s+/).sort(),e=c.length,f=d.length;e&&f;)c[e-1]==d[f-1]?c.splice(--e,1):c[e-1]<d[f-1]?f--:e--;a.className=c.join(" ")},a.hasClass=function(a,b){for(var c=a.className.split(/\s+/).sort(),d=b.split(/\s+/).sort(),e=c.length,f=d.length;e&&f;)c[e-1]==d[f-1]&&f--,e--;return 0>=f},a.getParent=a.ieVersion?function(a){return a.parentElement}:function(a){return a.parentNode},a.children=function(a){if(!a)return[];for(var b=[],c=a.firstChild;c;c=c.nextSibling)1==c.nodeType&&b.push(c);return b},a.remove=function(b){if(b){var c=a.getParent(b);c&&c.removeChild(b)}}}(),function(){var a=xutil.file;a.FILE_NAME_FORBIDEN_CHARACTER={"\\":"ï¼¼","/":"ï¼",":":"ï¼","*":"ï¼","?":"ï¼",'"':"ï¼","<":"ï¼",">":"ï¼","|":"ï½"},a.fixFileName=function(b){return null==b?b:b.replace(/./g,function(b){return a.FILE_NAME_FORBIDEN_CHARACTER[b]||b})}}(),function(){var a=xutil.fn,b=xutil.lang,c=Array.prototype.slice,d=Function.prototype.bind;a.bind=function(a,e){var f;return d&&a.bind===d?d.apply(a,c.call(arguments,1)):(a=b.isString(a)?e[a]:a,f=c.call(arguments,2),function(){return a.apply(e||a,f.concat(c.call(arguments)))})}}(),function(){var a=xutil.graphic;a.unionBoundBox=function(){for(var a,b,c,d,e,f,g,h=null,i=0,j=arguments.length;j>i;i++)(g=arguments[i])&&(h?(a=g.left<h.left?g.left:h.left,b=g.top<h.top?g.top:h.top,c=g.left+g.width,e=c>h.left+h.width?c-h.left:h.width,d=g.top+g.height,f=d>h.top+h.height?d-h.top:h.height,h.left=a,h.top=b,h.width=e,h.height=f):h=g);return h}}(),function(){var a=xutil.lang,b=xutil.string,c=Object.prototype,d=c.toString,e=c.hasOwnProperty;a.hasValue=function(a){return null!=a},a.hasValueNotBlank=function(c){return a.hasValue(c)&&(!a.isString(c)||""!=b.trim(c))},a.isBlank=function(b){if(a.isString(b))return""==trim(b);if(a.isArray(b))return 0==b.length;if(a.isObject(b)){for(var c in b)if(e.call(b,c))return!1;return!0}return!!b},a.isUndefined=function(a){return"undefined"==typeof a},a.isNull=function(a){return null===a},a.isNumber=function(a){return"[object Number]"==d.call(a)},a.isNormalNumber=function(b){return a.isNumber(b)&&!isNaN(b)&&isFinite(b)},a.isFinite=function(b){return a.isNumber(b)&&isFinite(b)},a.isNaN=function(a){return a!==a},a.isString=function(a){return"[object String]"==d.call(a)},a.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==d.call(a)},a.isFunction=function(a){return"[object Function]"==d.call(a)},a.isObject=function(a){return a===Object(a)},a.isArray=Array.isArray||function(a){return"[object Array]"==d.call(a)},a.isDate=function(a){return"[object Date]"==d.call(a)},a.isRegExp=function(a){return"[object RegExp]"==d.call(a)},a.isElement=function(a){return!(!a||1!=a.nodeType)},a.toNumber=function(a,b){return b="undefined"!=typeof b?b:a,isFinite(a=parseFloat(a))?a:b},a.stringToBoolean=function(b){return a.isString(b)?"true"==trim(b):!!b}}(),function(){var a=xutil.number,b=xutil.date;a.ordinalSuffix=function(a){return 1==a?"st":2==a?"nd":3==a?"rd":"th"},a.pad=function(a,b){var c="",d=0>a,e=String(Math.abs(a));return e.length<b&&(c=new Array(b-e.length+1).join("0")),(d?"-":"")+c+e},a.formatNumber=function(c,d,e,f,g){if(!d)return c;if(isNaN(c))return c;if(b.isValidFormatPattern(d))return b.format(b.parse(c),d);if(b.TIME_REG.test(d))return b.formatTime(c,d);g&&/[ID]%/.test(d)&&(c=100*c),c=a.fixNumber(c,d,f);var h,i=c.toString(),j=i.split("."),k=j[0],l=j.length>1?j[1]:"";return h=d.replace(/I+,*I*/g,function(){var a,b,c=arguments[0],d=c.lastIndexOf(","),f=[];if(d>=0&&d!=k.length-1){b=c.length-1-d;for(var g;(g=k.length-b)>0&&b>0;)f.push(k.substr(g,b)),k=k.substring(0,g);f.push(k),f.reverse(),"-"==f[0]?(f.shift(),a="-"+f.join(",")):a=f.join(",")}else a=k;return e&&a&&a.indexOf("-")<0&&(a="+"+a),a}),h=h.replace(/D+/g,function(){var a=arguments[0],b=l;return b.length>a.length?b=b.substr(0,a.length):b+=new Array(a.length-b.length).join("0"),b})},a.fixNumber=function(a,b,c){var d,e=/D+/.exec(b),f=e&&e.length>0?e[0].length:0;return c?2==c?Number(a).toFixed(f):Number(a):(d=Math.pow(10,f),Math.round(a*d)/d)}}(),function(){function a(c,d,e,g,h){var i,k;for(var l in d)i=d[l],k=c[l],l in h||!d.hasOwnProperty(l)||(j(k)&&j(i)?a(k,i,e,g,h):!e&&l in c||(c[l]=!g||"WITHOUT_ARRAY"==g&&b(i)?i:f.clone(i)))}function b(a){return"[object Array]"==g.call(a)}function c(a){return"[object Function]"==g.call(a)}function d(a){return"[object Date]"==g.call(a)}function e(a){var c,d={};if(b(a))for(c=0;c<a.length;c++)d[a[c]]=a[c];else if(a===Object(a))for(c in a)d[a[c]]=c;return d}var f=xutil.object,g=Object.prototype.toString,h=Object.prototype.hasOwnProperty,i=Array.prototype.slice;f.PATH_DEFAULT_CONTEXT=window,f.getByPath=function(a,b,c){if(c=c||{},b=b||f.PATH_DEFAULT_CONTEXT,null==a)return b;for(var d,e,g,h,i=c.arrBegin||"[",j=c.arrEnd||"]",k=a.split(null!=c.objDelimiter?c.objDelimiter:"."),l=0;l<k.length;l++)for(e=k[l],g=e.split(i),d=0;d<g.length;d++){if(h=g[d],d>0&&(h=h.split(j)[0]),b!==Object(b))return;b=b[h]}return b},f.setByPath=function(a,b,c,d){if(d=d||{},c=c||f.PATH_DEFAULT_CONTEXT,null!=a)for(var e,g,h,i,j,k=d.arrBegin||"[",l=d.arrEnd||"]",m=d.conflict||"THROW",n=a.split(null!=d.objDelimiter?d.objDelimiter:"."),o=0;o<n.length;o++)for(g=n[o],h=g.split(k),e=0;e<h.length;e++){if(i=h[e],e>0&&(i=i.split(l)[0]),j=c[i],o==n.length-1&&e==h.length-1)return c[i]=b,void 0;if(null!=j&&j!==Object(j)){if("THROW"==m)throw new Error("Path conflict: "+a);if("IGNORE"==m)return}c=j!==Object(j)?c[i]=h.length>1&&e<h.length-1?[]:{}:c[i]}},f.set=function(a,b,d){c(a.set)?a.set(b,d):a[b]},f.objKey=function(){function a(a,b,c){if(null==b)return!1;for(var d=!1,f=e(a,c),g=0;g<f.length;g++)b==f[g]&&(d=!0);return d}function b(a,b){return e(a,b).length}function c(b,c,d){null!=c&&(a(b,c,d)||e(b,d).push(c))}function d(a,b,c){if(null!=b)for(var d=e(a,c),f=0;f<d.length;)b==d[f]?d.splice(f,1):f++}function e(a,b){return null==b&&(b=""),a[f+b]||(a[f+b]=[]),a[f+b]}var f="__OBJ__KEY__";return{add:c,remove:d,has:a,size:b,KEY_ATTR_NAME:f}}(),f.get=function(a,b){return c(a.get)?a.get(b):a[b]},f.isEmptyObj=function(a){if(a!==Object(a))return!1;for(var b in a)return!1;return!0},f.extend=function(a){for(var b,c,d=i.call(arguments,1),e=0;e<d.length;e++)if(b=d[e])for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f.assign=function(a,b,c,d){var f,g=e(c),h=e(d);for(var f in b)b.hasOwnProperty(f)&&(c?null!=g[f]&&null==h[f]&&(a[g[f]]=b[f]):null==h[f]&&(a[f]=b[f]));return a},f.clone=function(a,c){c=c||{};var g,h,i,k=e(c.exclusion);if(j(a)||(i=b(a))){g=i?[]:{};for(h in a)!a.hasOwnProperty(h)||h in k||(g[h]=f.clone(a[h]))}else g=d(a)?new Date(a.getTime()):a;return g},f.merge=function(b,c,d){d=d||{};var f=d.overwrite;null==f&&(f=!0);var g=d.clone;null==g&&(g=!0);var h=e(d.exclusion);return j(b)&&j(c)&&a(b,c,f,g,h),b},f.inherits=function(a,b){var c=a.prototype,d=new Function;return d.prototype=b.prototype,f.extend(a.prototype=new d,c),a.prototype.constructor=a,a.superClass=b.prototype,a.prototype},f.inheritsObject=function(a,b){var c=function(a){return new c.client(a)},d=c.client=function(c){c=c||{},a&&a.client.call(this,c),b&&b.call(this,c)};return a&&f.inherits(c,a),f.inherits(d,c),d.agent=c,c},f.createSingleton=function(a,b){var c,d=function(a){return c||(c=new d.client(a))},e=d.client=function(c){c=c||{},a&&a.client.call(this,c),b&&b.call(this,c)};return a&&f.inherits(d,a),f.inherits(e,d),e.agent=d,d};var j=f.isPlainObject=function(a){if(!(a&&"[object Object]"==Object.prototype.toString.call(a)&&"isPrototypeOf"in a))return!1;try{if(a.constructor&&!h.call(a,"constructor")&&!h.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}for(var c in a);return void 0===c||h.call(a,c)}}(),function(){var a=xutil.string,b=xutil.lang,c=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");a.trim=function(a){return null==a?"":String(a).replace(c,"")},a.encodeHTMLWithBlank=function(b,c){var d=[];c=c||1;for(var e=0;c>e;e++)d.push("&nbsp;");return a.encodeHTML(b).replace(/ /g,d.join(""))},a.encodeHTML=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},a.decodeHTML=function(a){var b=String(a).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return b.replace(/&#([\d]+);/g,function(a,b){return String.fromCharCode(parseInt(b,10))})},a.decodePercent=function(a){return null==a?"":decodeURIComponent(a.replace(/\+/g,"%20"))},a.toShowText=function(c,d,e,f){d=b.hasValue(d)?d:"",f=f||a.encodeHTML;var g=b.hasValueNotBlank(c)?c:d;return e&&(g=f(g)),g},a.htmlText=function(b,c,d){return null==c&&(c=""),null==d&&(d=!0),a.toShowText(b,c,d)},a.escapeTag=function(a){return b.hasValueNotBlank(a)?String(a).replace(/<.*?>/g,""):""},a.escapeReg=function(a){return String(a).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")},a.textLength=function(a){return b.hasValue(a)?a.replace(/[^\x00-\xFF]/g,"**").length:0},a.textSubstr=function(a,c,d){if(!b.hasValue(a))return"";for(var e=0,f=c,g=a.length;g>f&&d>e;f++)a.charCodeAt(f)>255?e+=2:e++;return e>d&&f--,a.substring(c,f)},a.textWrap=function(a,c,d){if(d=d||"\r",2>c)throw Error("illegle length");if(!b.hasValueNotBlank(a))return"";for(var e,f=0,e=0,g=a.length,h=0,i=[];;){if(f>=g){i.push(a.substring(e,g+1));break}a.charCodeAt(f)>255?h+=2:h++,h>=c&&(h>c&&(f-=1),i.push(a.substring(e,f+1)),e=f+1,h=0),f++}return i.join(d)},a.template=function(a,b){a=String(a);var c=Array.prototype.slice.call(arguments,1),d=Object.prototype.toString;return c.length?(c=1==c.length?null!==b&&/\[object Array\]|\[object Object\]/.test(d.call(b))?b:c:c,a.replace(/#\{(.+?)\}/g,function(a,b){var e=c[b];return"[object Function]"==d.call(e)&&(e=e(b)),"undefined"==typeof e?"":e})):a},a.endWith=function(a,b){return a&&b?a.lastIndexOf(b)===a.length-b.length:!1}}(),function(){var a=xutil.uid,b=1,c={};a.getIncreasedUID=function(a){return null!=a?(!c[a]&&(c[a]=1),c[a]++):b++},a.getUID=a.getIncreasedUID}(),function(){var a=xutil.url,b=xutil.lang,c=Object.prototype.toString,d=Array.prototype.slice;a.decodeURIComponent=function(a){return b.hasValueNotBlank(a)?decodeURIComponent(a):a},a.appendParam=function(a,b,c){return c=c||1,a+=a.indexOf("?")<0?(2==c?"~":"?")+b:"&"+b},a.replaceIntoParam=function(c,d,e,f){var g=c;if(!g||!b.hasValueNotBlank(d))return g;e=null!=e?e:"";var h=new RegExp("([&~?])"+d+"=[^&]*"),i=d+"="+e;return g=h.test(g)?g.replace(h,"$1"+i):a.appendParam(g,i,f)},a.parseParam=function(a,b){var d={};if(b=b||{},null==a)return d;for(var e,f=a.split("&"),g=0,h=f.length;h>g;g++){e=null!=f[g]?f[g]:"",e=e.split("=");var i=e[0],j=e[1];b.dontParseBoolean||("true"==j&&(j=!0),"false"==j&&(j=!1)),null!=i&&(d.hasOwnProperty(i)?"[object Array]"==c.call(d[i])?d[i].push(j):d[i]=[d[i],j]:d[i]=j)}return d},a.stringifyParam=function(b,c){function d(a,b){h.push(i(a,!c)+"="+i(b,!c))}var e,f,g,h=[],i=a.textParam;for(e in b||{})if(f=b[e],"[object Array]"==Object.prototype.toString.call(f))for(g=0;g<f.length;g++)d(e,f[g]);else d(e,f);return h},a.textParam=function(a,b,c){return"undefined"==typeof c&&(c=""),a=null==a?c:a,b?a:encodeURIComponent(a)},a.numberParam=function(a,b){return"undefined"==typeof b&&(b=""),null==a||""===a?b:a},a.wrapArrayParam=function(b,c,e,f){if(!b||!b.length)return[];f=f||a.textParam;for(var g,h=d.call(arguments,4),i=[],j=0;j<b.length;j++)g=b[j],g===Object(g)&&(g=g[e]),g=f.apply(null,[g].concat(h)),i.push(c+"="+g);return i}}(),function(){var a=xutil.validator={},b=/^\d+(\.\d{1,2})?$/,c=/^(\+|-)?\d+(\.\d{1,2})?$/,d=/^[_\w-]+(\.[_\w-]+)*@([\w-])+(\.[\w-]+)*((\.[\w]{2,})|(\.[\w]{2,}\.[\w]{2,}))$/,e=/^[^.ãï¼]+(\.[^.ï¼ã]+)+$/,f=/^1\d{10}$/,g=/^\d{6}$/;a.isCash=function(a,d){return d?c.test(a):b.test(a)},a.isURL=function(a){return e.test(a)},a.isMobile=function(a){return f.test(a)},a.isEMAIL=function(a){return d.test(a)},a.isZipCode=function(a){return g.test(a)}}(),function(){function a(){this._oEventHandlerMap={},this._bDisabled=!1}function b(a){a.once=!1,d.call(this,a)}function c(a){a.once=!0,d.call(this,a)}function d(a){var b=this._oEventHandlerMap[a.eventName];b||(b=this._oEventHandlerMap[a.eventName]=[]),h.call(this,a)<0&&b.push(a)}function e(a){var b=h.call(this,a);b>=0&&this._oEventHandlerMap[a.eventName].splice(b,1)}function f(a,b,c,d){return d=l.call(arguments,3),0==d.length&&(d=null),{eventName:a,handler:b,context:c||this,args:d}}function g(a,b){var c=b[0];if("[object String]"==k.call(c))a.call(this,f.apply(this,b));else if("[object Array]"==k.call(c))for(var d=0;d<b.length;d++)a.call(this,f.apply(this,b[d]));else if(c===Object(c)){var e;for(var g in c)if(e=c[g],"[object Array]"==k.call(e))for(var d=0;d<e.length;d++)a.call(this,f.call(this,g,e[d]));else a.call(this,f.call(this,g,e))}}function h(a){var b=this._oEventHandlerMap[a.eventName];if(b)for(var c,d=0;c=b[d];d++)if(c.handler===a.handler&&c.context===a.context)return d;return-1}var i=xutil.object,j=i.inheritsObject,k=Object.prototype.toString,l=Array.prototype.slice,m=xui.XObject=j(null,a),n=m.prototype;n.init=function(){},n.dispose=function(){this._oEventHandlerMap={}},n.isDisabled=function(){return!!this._bDisabled},n.disable=function(){return this._bDisabled?!1:(this._bDisabled=!0,!0)},n.enable=function(){return this._bDisabled?(this._bDisabled=!1,!0):!1},n.attach=function(){g.call(this,b,l.call(arguments))},n.attachOnce=function(){g.call(this,c,l.call(arguments))},n.detach=function(){g.call(this,e,l.call(arguments))},n.detachAll=function(a){delete this._oEventHandlerMap[a]},n.notify=function(a,b){var c,d,e,f=!0,g=[],h=this._oEventHandlerMap[a]||[];for(c=0;e=h[c];c++)d=e.handler.apply(e.context,(e.args||[]).concat(b||[])),d===!1&&(f=!1),e.once&&g.push(e);for(c=0;e=g[c];c++)this.detach(a,e.handler,e.context);return f}}(),function(){function a(){this._oEventHandlerMap={},this._oSyncCombineSet={},this._aSyncCombineSetDefault=[],this._oRequestSet={},this._sCurrentDatasourceId}function b(a,b){l.call(this,a,"preprocess",b),m.call(this,a,"sync.preprocess",b)}function c(a,b,c){l.call(this,a,"result",b,[c,this.wrapEJson(c)]),m.call(this,a,"sync.result",b,[c,this.wrapEJson(c)])}function d(a,b,c){f.call(this,a,i,b,c),c.status?f.call(this,a,h,b,c.status,c):f.call(this,a,g,b,c.data,c),f.call(this,a,j,b,c)}function e(a,b,c){var d,e={},m=this;e.method=l.call(m,a,"method",b)||"POST",e.businessKey=l.call(m,a,"businessKey",b),e.data=y(d=l.call(m,a,"param",b))?d:"",e.timeout=l.call(m,a,"timeoutTime",b)||void 0,e.onsuccess=function(c,d){f.call(m,a,g,b,c,d)},e.onfailure=function(c,d){f.call(m,a,h,b,c,d)},e.oncomplete=function(c){f.call(m,a,i,b,c),delete m._oRequestSet[n]},e.onfinalize=function(c){f.call(m,a,j,b,c)},e.ontimeout=function(){f.call(m,a,k,b)},e=t(e,l.call(m,a,"ajaxOptions",b)||{}),this._sBusinessKey=e.businessKey;var n=p.request(c,e);return this._oRequestSet[n]=1,n}function f(a,b,c){var d=z.call(arguments,3,arguments.length);b.apply(this,[a,c].concat(d));var e,f,g;if(y(a))for(g=this._oSyncCombineSet[a]||[],e=0;f=g[e];e++)b.apply(f,[a,{}].concat(d));for(g=this._aSyncCombineSetDefault||[],e=0;f=g[e];e++)b.apply(f,[a,{}].concat(d))}function g(a,b,c,d){function e(){null!=this._sErrorStatusInfo&&(d.statusInfo=this._sErrorStatusInfo),f.call(this,a,h,b,this._nErrorStatus,d),this._bGoError=!1,this._nErrorStatus=null,this._sErrorStatusInfo=null}this._bGoError=!1;var c=l.call(this,a,"parse",b,[c,d]);return this._bGoError?(e.call(this),void 0):(l.call(this,a,"result",b,[c,d]),this._bGoError?(e.call(this),void 0):(m.call(this,a,"sync.result",b,[c,d]),void 0))}function h(a,b,c,d){l.call(this,a,"error",b,[c,d]),m.call(this,a,"sync.error",b,[c,d])}function i(a,b,c){l.call(this,a,"complete",b,[c]),m.call(this,a,"sync.complete",b,[c])}function j(a,b,c){l.call(this,a,"finalize",b,[c]),m.call(this,a,"sync.finalize",b,[c])}function k(a,b){l.call(this,a,"timeout",b),m.call(this,a,"sync.timeout",b)}function l(a,b,c,d){c=c||{},d=d||[],d.push(c);var e,a;return"undefined"!=typeof c[b]?e=c[b]:(e=this[b],y(a)&&x(e)&&y(e[a])&&(e=e[a])),e instanceof C&&(e=null),v(e)?e.apply(this,d):e}function m(a,b,c,d){c=c||{},d=d||[],d.push(c),y(a)&&this.notify(b+"."+a,d),this.notify(b,d)}function n(a){a=a||{};var b=y(a.datasourceId)?a.datasourceId:this.datasourceId;return v(b)?b.call(this,a):b}var o=xui.XObject,p=xutil.ajax,q=xutil.lang,r=xutil.object,s=r.inheritsObject,t=r.extend,u=r.clone,v=q.isFunction;q.isArray;var w=q.isString,x=q.isObject,y=q.hasValue,z=Array.prototype.slice,A=xui.XDatasource=s(o,a),B=A.prototype,C=A.Set=function(a){a&&t(this,a)};B.DEFAULT_ERROR_STATUS=999999999999,B.OPTIONS_NAME=["preprocess","businessData","local","url","method","businessKey","param","parse","result","error","timeout","complete","finalize","timeoutTime","datasourceId","ajaxOptions"],B.sync=function(a){w(a)?a={datasourceId:a,args:{}}:(a=a||{},a.args=a.args||{});var f=n.call(this,a);this._sCurrentDatasourceId=f,b.call(this,f,a);var g,h,i,j;return y(g=l.call(this,f,"businessData",a))?c.call(this,f,a,g):y(h=l.call(this,f,"local",a))?d.call(this,f,a,h):y(i=l.call(this,f,"url",a))&&(j=e.call(this,f,a,i)),delete this._sCurrentDatasourceId,j},B.dispose=function(){this.abortAll(),this._oSyncCombineSet=null,this._aSyncCombineSetDefault=null,A.superClass.dispose.call(this)},B.parse=function(a){return a},B.datasourceId=function(){return void 0},B.setBusinessData=function(a,b){this.businessData=a||null,m.call(this,b,"set.businessdata",{},[a])},B.getCurrentDatasourceId=function(){return this._sCurrentDatasourceId},B.abortAll=function(){var a=u(this._oRequestSet);for(var b in a)this.abort(b);this.notify("abortAll",[a])},B.abort=function(a){p.abort(a,!0),delete this._oRequestSet[a]},B.wrapEJson=function(a,b,c){return{data:a,status:b||0,statusInfo:c}},B.$goError=function(a,b){this._bGoError=!0,this._nErrorStatus=null==a?DEFAULT_ERROR_STATUS:a,null!=b&&(this._sErrorStatusInfo=b)},B.addSyncCombine=function(a,b){if(a instanceof A){var c;y(b)?((c=this._oSyncCombineSet[b])||(c=this._oSyncCombineSet[b]=[]),c.push(a)):this._aSyncCombineSetDefault.push(a)}},B.removeSyncCombine=function(a,b){if(a instanceof A)for(var c=y(b)?this._oSyncCombineSet[b]||[]:this._aSyncCombineSetDefault||[],d=0;d<c.length;)a===c[d]?c.splice(d,1):d++},A.extend=function(a,b){a instanceof A&&a!==A&&t(a.prototype,b)}}(),function(){var a=xui.XObject,b=xutil.object.getByPath,c=xutil.object.inheritsObject,d=xui.XView=c(a,function(a){this._el=a.el}),e=d.prototype;e.getEl=function(){return this._el},e.setEl=function(a){this._el=a},e.dispose=function(){this._el=null},d.start=function(a,c){var e;d.$domReady(function(){d.$preStart&&d.$preStart(a,c),a&&(e=b(a)),e&&new e(c).init(),d.$postStart&&d.$postStart(a,c)})},d.$preStart=function(){},d.$postStart=function(){},d.$domReady=null}(),xui.XProject.setNamespaceBase(window.__$DI__NS$__=window.__$DI__NS$__||{});var $namespace=xui.XProject.namespace,$link=xui.XProject.link,$end=xui.XProject.end,$getNamespaceBase=xui.XProject.getNamespaceBase,di=$namespace("di");$getNamespaceBase().xui=xui,$getNamespaceBase().xutil=xutil,xutil.object.PATH_DEFAULT_CONTEXT=$getNamespaceBase();var ecui;!function(){function a(a,b){for(;a&&1!=a.nodeType;a=a[b]);return a}var b,c=ecui={},d=c.array={},e=c.dom={},f=(c.ext={},c.json={}),g=c.string={},h=(c.ui={},c.util={}),i=window,j=document,k=Function,l=Math,m=RegExp,n=l.abs,o=(l.ceil,l.floor),p=l.max,q=(l.min,l.pow,l.round,parseInt),r=isNaN,s=navigator.userAgent,t="CSS1Compat"==j.compatMode,u=e.ieVersion=/msie (\d+\.\d)/i.test(s)?j.documentMode||m.$1-0:b,v=e.firefoxVersion=/firefox\/(\d+\.\d)/i.test(s)?m.$1-0:b,w=e.operaVersion=/opera\/(\d+\.\d)/i.test(s)?m.$1-0:b,x=e.safariVersion=/(\d+\.\d)(\.\d)?\s+safari/i.test(s)&&!/chrome/i.test(s)?m.$1-0:b,y={utf8:{byteLength:function(a){return a.replace(/[\x80-\u07ff]/g,"  ").replace(/[\u0800-\uffff]/g,"   ").length},codeLength:function(a){return a>2047?3:a>127?2:1}},gbk:{byteLength:function(a){return a.replace(/[\x80-\uffff]/g,"  ").length},codeLength:function(a){return a>127?2:1}},"":{byteLength:function(a){return a.length},codeLength:function(){return 1}}},z={display:8>u?{get:function(a,b){return"inline"==b.display&&1==b.zoom?"inline-block":b.display},set:function(a,b){"inline-block"==b&&(b="inline",a.style.zoom=1),a.style.display=b}}:3>v?{get:function(a,b){return"-moz-inline-box"==b.display?"inline-block":b.display},set:function(a,b){a.style.display="inline-block"==b?"-moz-inline-box":b}}:b,opacity:u?{get:function(a,b){return/alpha\(opacity=(\d+)/.test(b.filter)?(m.$1-0)/100+"":"1"},set:function(a,b){a.style.filter=a.style.filter.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*b+")"}}:b,"float":u?"styleFloat":"cssFloat"},A=(d.indexOf=function(a,b){for(var c=a.length;c--&&a[c]!==b;);return c},d.remove=function(a,b){for(var c=a.length;c--;)a[c]===b&&a.splice(c,1)},e.addClass=function(a,b){a.className+=" "+b},e.children=function(a){for(var b=[],c=a.firstChild;c;c=c.nextSibling)1==c.nodeType&&b.push(c);return b},e.contain=v?function(a,b){return a==b||!!(16&a.compareDocumentPosition(b))}:function(a,b){return a.contains(b)},e.create=function(a,b,c){return c=j.createElement(c||"DIV"),a&&(c.className=a),b&&(c.style.cssText=b),c}),B=(e.first=function(b){return a(b.firstChild,"nextSibling")},e.getAttribute=8>u?function(a,b){return a[b]}:function(a,b){return a.getAttribute(b)}),C=e.getParent=u?function(a){return a.parentElement}:function(a){return a.parentNode},D=(e.getPosition=function(a){var b=0,c=0,d=j.body,e=C(d);if(u)t||(f=D(d),r(b=q(f.borderTopWidth))&&(b=-2),r(c=q(f.borderLeftWidth))&&(c=-2)),f=a.getBoundingClientRect(),b+=e.scrollTop+d.scrollTop-e.clientTop+o(f.top),c+=e.scrollLeft+d.scrollLeft-e.clientLeft+o(f.left);else if(a==d)b=e.scrollTop+d.scrollTop,c=e.scrollLeft+d.scrollLeft;else if(a!=e){for(f=a;f;f=f.offsetParent)b+=f.offsetTop,c+=f.offsetLeft;(w||/webkit/i.test(s)&&"absolute"==D(a,"position"))&&(b-=d.offsetTop);for(var f=C(a),g=D(a);f!=d;f=C(f),g=a)c-=f.scrollLeft,w?"TR"!=f.tagName&&(b-=f.scrollTop):(a=D(f),e=v&&"visible"!=a.overflow&&"absolute"==g.position?2:1,b+=L(a.borderTopWidth)*e-f.scrollTop,c+=L(a.borderLeftWidth)*e)}return{top:b,left:c}},e.getStyle=function(a,b){var c=z[b],d=a.currentStyle||(u?a.style:getComputedStyle(a,null));return b?c&&c.get?c.get(a,d):d[c||b]:d}),E=(e.getText=v?function(a){return a.textContent}:function(a){return a.innerText},e.insertAfter=function(a,b){var c=C(b);return c?c.insertBefore(a,b.nextSibling):F(a)},e.insertBefore=function(a,b){var c=C(b);return c?c.insertBefore(a,b):F(a)},e.insertHTML=v?function(a,b,c){var d={AFTERBEGIN:"selectNodeContents",BEFOREEND:"selectNodeContents",BEFOREBEGIN:"setStartBefore",AFTEREND:"setEndAfter"}[b.toUpperCase()],e=j.createRange();e[d](a),e.collapse(b.length>9),e.insertNode(e.createContextualFragment(c))}:function(a,b,c){a.insertAdjacentHTML(b,c)}),F=(e.last=function(b){return a(b.lastChild,"previousSibling")},e.moveElements=function(a,b,c){for(var d=a.firstChild;d;d=a)a=d.nextSibling,(c||1==d.nodeType)&&b.appendChild(d)},e.next=function(b){return a(b.nextSibling,"nextSibling")},e.remove=function(a){var b=C(a);return b&&b.removeChild(a),a}),G=(e.removeClass=function(a,b){for(var c=a.className.split(/\s+/).sort(),d=b.split(/\s+/).sort(),e=c.length,f=d.length;e&&f;)c[e-1]==d[f-1]?c.splice(--e,1):c[e-1]<d[f-1]?f--:e--;a.className=c.join(" ")},e.setInput=function(a,c,d){if(!a)if("textarea"==d)a=A("","","textarea");else{if(9>u)return A("","",'<input type="'+(d||"")+'" name="'+(c||"")+'">');a=A("","","input")}return c=c===b?a.name:c,d=d===b?a.type:d,(a.name!=c||a.type!=d)&&(u&&"textarea"!=d||a.type!=d&&("textarea"==a.type||"textarea"==d)?(E(a,"AFTEREND","<"+("textarea"==d?"textarea":'input type="'+d+'"')+' name="'+c+'" class="'+a.className+'" style="'+a.style.cssText+'" '+(a.disabled?"disabled":"")+(a.readOnly?" readOnly":"")+">"),c=a,(a=a.nextSibling).value=c.value,"radio"==d&&(a.checked=c.checked),F(c)):(a.type=d,a.name=c)),a},e.setStyle=function(a,b,c){var d=z[b];d&&d.set?d.set(a,c):a.style[d||b]=c},e.setText=v?function(a,b){a.textContent=b}:function(a,b){a.innerText=b},f.parse=function(a){return new Function("return ("+a+")")()},f.stringify=function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=f[a];return b?b:(b=a.charCodeAt(),"\\u00"+o(b/16)+(b%16).toString(16))})),'"'+a+'"'}function c(a){for(var c,c,d=0,e=[],f=a.length,d=0,e=[],f=a.length;f>d;d++)(c=G(a[d]))!==b&&e.push(c);
return"["+e.join(",")+"]"}function d(a){return 10>a?"0"+a:a}function e(a){return'"'+a.getFullYear()+"-"+d(a.getMonth()+1)+"-"+d(a.getDate())+"T"+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())+'"'}var f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(d){switch(typeof d){case"undefined":case"function":case"unknown":return b;case"number":if(!isFinite(d))return"null";case"boolean":return d.toString();case"string":return a(d);default:if(null===d)return"null";if(d instanceof Array)return c(d);if(d instanceof Date)return e(d);var f,g=[];for(var h in d)(f=G(d[h]))!==b&&g.push(a(h)+":"+f);return"{"+g.join(",")+"}"}}}()),H=(g.decodeHTML=function(){var a={quot:'"',lt:"<",gt:">",amp:"&"};return function(b){return b.replace(/&(quot|lt|gt|amp|#([\d]+));/g,function(b,c,d){return a[c]||String.fromCharCode(+d)})}}(),g.encodeHTML=function(a){return a.replace(/[&<>"']/g,function(a){return"&#"+a.charCodeAt(0)+";"})},g.getByteLength=function(a,b){return y[b||""].byteLength(a)},g.sliceByte=function(a,b,c){for(var d=0,e=y[c||""].codeLength;d<a.length;d++)if(b-=e(a.charCodeAt(d)),0>b)return a.slice(0,d);return a},g.toCamelCase=function(a){return a.indexOf("-")<0?a:a.replace(/\-./g,function(a){return a.charAt(1).toUpperCase()})},g.toHalfWidth=function(a){return a.replace(/[\u3000\uFF01-\uFF5E]/g,function(a){return String.fromCharCode(p(a.charCodeAt(0)-65248,32))})},g.trim=function(a){return a&&a.replace(/^\s+|\s+$/g,"")},g.formatDate=function(a,b){var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=a.getHours(),g=a.getMinutes(),h=a.getSeconds();return b.replace(/(y+|M+|d+|H+|h+|m+|s+)/g,function(a){var b=a.length;switch(a.charAt()){case"y":return b>2?c:c.toString().slice(2);case"M":a=d;break;case"d":a=e;break;case"H":a=f;break;case"h":a=f%12;break;case"m":a=g;break;case"s":a=h}return b>1&&10>a?"0"+a:a})},h.attachEvent=u?function(a,b,c){a.attachEvent("on"+b,c)}:function(a,b,c){a.addEventListener(b,c,!1)}),I=(h.blank=function(){},h.callSuper=function(a,c){function d(a,b){for(;a;a=a.constructor.superClass)if(a[c]==b){for(;a=a.constructor.superClass;)if(a[c]!=b)return a[c];return null}}var e=a.constructor.prototype,f=I.caller,g=d(e,f);return g===b&&(g=d(e,f.caller)),g?g.apply(a,f.arguments):void 0}),J=(h.cancel=function(){return!1},h.detachEvent=u?function(a,b,c){a.detachEvent("on"+b,c)}:function(a,b,c){a.removeEventListener(b,c,!1)},h.extend=function(a,b){for(var c in b)a[c]=b[c];return a}),K=(h.getView=function(){var a=j.body,b=C(a),c=t?b:a,d=b.scrollTop+a.scrollTop,e=b.scrollLeft+a.scrollLeft,f=c.clientWidth,g=c.clientHeight;return{top:d,right:e+f,bottom:d+g,left:e,width:f,height:g,pageWidth:p(b.scrollWidth,a.scrollWidth,f),pageHeight:p(b.scrollHeight,a.scrollHeight,g)}},h.inherits=function(a,b){var c=a.prototype,d=new k;return d.prototype=b.prototype,J(a.prototype=new d,c),a.prototype.constructor=a,a.superClass=b.prototype,a.prototype},h.setDefault=function(a,b,c){a.hasOwnProperty(b)||(a[b]=c)},h.timer=function(a,b,c){function d(){return(0>b?setInterval:setTimeout)(function(){a.apply(c,f),0>b||(a=c=f=null)},n(b))}var e,f=Array.prototype.slice.call(arguments,3),g=d();return function(h){(0>b?clearInterval:clearTimeout)(g),h?(e&&(g=d()),e=!e):a=c=f=null}}),L=h.toNumber=function(a){return q(a)||0};e.ready=function(){function a(){if(!e){e=!0;for(var a,b=0;a=f[b++];)a()}}var c,d,e=!1,f=[];return j.addEventListener&&!w?j.addEventListener("DOMContentLoaded",a,!1):u&&i==top?c=function(){try{j.documentElement.doScroll("left"),a()}catch(b){K(c,0)}}:x&&(c=function(){var e,f=0,g=j.readyState;if("loaded"!=g&&"complete"!=g)K(c,0);else{if(d===b&&(d=0,(e=j.getElementsByTagName("style"))&&(d+=e.length),e=j.getElementsByTagName("link")))for(;g=e[f++];)"stylesheet"==B(g,"rel")&&d++;j.styleSheets.length!=d?K(c,0):a()}}),c&&c(),H(i,"load",a),function(a){e?a():f.push(a)}}();try{j.execCommand("BackgroundImageCache",!1,!0)}catch(M){}}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=ecui,J=I.array,K=I.dom,L=I.ext,M=I.string,N=I.util,O=I.ui,P=window,Q=document,R=Date,S=Math,T=RegExp,U=S.abs,V=S.max,W=S.min,X=isNaN,Y=navigator.userAgent,Z="CSS1Compat"==Q.compatMode,$=/msie (\d+\.\d)/i.test(Y)?Q.documentMode||T.$1-0:a,_=/firefox\/(\d+\.\d)/i.test(Y)?T.$1-0:a,ab=J.indexOf,bb=J.remove,cb=K.addClass,db=K.contain,eb=K.create,fb=K.getAttribute,gb=K.getParent,hb=K.getPosition,ib=K.getStyle,jb=K.insertHTML,kb=K.ready,lb=K.remove,mb=K.removeClass,nb=K.setStyle,ob=M.toCamelCase,pb=N.attachEvent,qb=N.blank,rb=N.detachEvent,sb=N.extend,tb=N.getView,ub=N.inherits,vb=N.timer,wb=N.toNumber,xb=I.NORMAL=0,yb=I.LOADING=1,zb=I.REPAINT=2,Ab=I.findControl=function(a){for(;a;a=gb(a))if(a.getControl)return a.getControl();return null},Bb=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"];!function(){function J(b,c,d,e){for(d=d||new Xb(c),d.cancelBubble=!1;b!=e;b=b.getParent())if(d.returnValue=a,G(b,c,d),d.cancelBubble)return}function K(a,b){if(a!=b){for(var c=0,d=[],e=[];a;a=a.getParent())d.push(a);for(;b;b=b.getParent())e.push(b);for(d.reverse(),e.reverse();d[c]==e[c];c++);a=d[c-1]}return a||null}function M(){return this._cControl}function N(a,b,c,d){var e=a.getOuter().style,f=a.getX(),g=a.getY();e.left=f+"px",e.top=g+"px",e.position="absolute",c.target=a,c.actived=Ub,Hb(c),Ub=null,G(a,d+"start",b),$&&Q.body.setCapture()}function S(){if(!Tb){Sb=yb;for(a in L)_b[a]=L[a];for(a in ic)pb(Q,a,ic[a]);Tb={};var a=u(Q.body,"data-ecui");return Zb=a.name||Zb,Jb=a.globalId,Kb=ab(["class","all"],a.structural)+1,jb(Q.body,"BEFOREEND",'<div style="position:absolute;overflow:scroll;top:-90px;left:-90px;width:80px;height:80px;border:1px solid"><div style="position:absolute;top:0px;height:90px"></div></div>'),a=Q.body.lastChild,Lb=a.offsetWidth>80,Mb=a.lastChild.offsetTop,Nb=a.offsetWidth-a.clientWidth-2,lb(a),pb(P,"resize",nc),pb(P,"unload",function(){for(var b=0;a=cc[b++];)a.$dispose();Q=ac=null}),pb(P,"scroll",Fb),mc(Q.body),cb(Q.body,"ecui-loaded"),Sb=xb,!0}}function Y(){return Rb.time>(new R).getTime()-200}function Cb(a){var b=a.target,c=hb(b),d=ib(b);return a.pageX-c.left-wb(d.borderLeftWidth)>=b.clientWidth!=a.pageY-c.top-wb(d.borderTopWidth)>=b.clientHeight}function Db(a,b){J(Ub=a,"activate",b),J(a,"mousedown",b),Gb(a,b)}function Eb(a,b){if(a.oncreate&&a.oncreate(b),cc.push(a),b.id&&(Tb[b.id]=a,Jb&&(P[b.id]=a)),b.ext)for(var c in b.ext)_b[c]&&(_b[c](a,b.ext[c],b),(c=a["$init"+c.charAt(0).toUpperCase()+ob(c.slice(1))])&&c.call(a,b))}function Fb(a){a=H(a);for(var b,c=0;b=dc[c++];)G(b,"pagescroll",a);B(!0)}function Gb(a,b){for(;a;a=a.getParent())if(!a.isUserSelect())return b.preventDefault(),void 0}function Hb(a){var b={};Ib(ic,!0),sb(b,ic),sb(b,a),b.x=Pb,b.y=Qb,Ib(b),hc.push(ic),ic=b}function Ib(a,b){for(var c,d=0,e=b?rb:pb;5>d;)a[c=Bb[d++]]&&e(Q,c,a[c])}var Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb=O.Event=function(a,b){this.type=a,b?(this.pageX=b.pageX,this.pageY=b.pageY,this.which=b.which,this.target=b.target,this._oNative=b):(this.pageX=Pb,this.pageY=Qb,this.which=bc,this.target=Q)},Yb=Xb.prototype,Zb="ecui",$b=0,_b={},ac=[],bc=0,cc=[],dc=[],ec=0,fc={},gc={},hc=[],ic={click:function(a){a=H(a);var b=Ab(a.target);b&&b.isDisabled()&&a.preventDefault()},mousedown:function(b){if(Ub)return J(Ub,"deactivate"),Ub=null,void 0;b=H(b);var c=b.getControl(),d=8>$&&Cb(b),e=c;if(Rb&&Y()||(Rb={time:(new R).getTime()}),c){if(d)return;for(;e;e=e.getParent())if(e.isFocusable()){e!=c&&e.contain(Wb)||F(e);break}d||Db(c,b)}else(c=Ab(e=b.target))&&(Gb(c,b),("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||"BUTTON"==e.tagName)&&vb(function(){e.blur()})),F(),Ub=a},mouseover:function(a){if("drag"!=ic.type&&"zoom"!=ic.type){a=H(a);var b=a.getControl(),c=K(b,Vb);J(Vb,"mouseout",a,c),J(b,"mouseover",a,c),Vb=b}},mousemove:function(a){a=H(a);var b=a.getControl();J(b,"mousemove",a)},mouseup:function(a){a=H(a);var b,c=a.getControl();null!==Ub&&(J(c,"mouseup",a),Ub&&(b=K(c,Ub),J(b,"click",a),Rb&&(Y()&&Rb.target==c?(J(b,"dblclick",a),Rb=null):Rb.target=c),J(Ub,"deactivate",a)),Ub=null)}},jc={type:"drag",mousemove:function(a){a=H(a);var b=ic.target,c=b.getX()+Pb-ic.x,d=b.getY()+Qb-ic.y,e=W(V(c,ic.left),ic.right),f=W(V(d,ic.top),ic.bottom);G(b,"dragmove",a,[e,f])&&b.setPosition(e,f),ic.x=Pb+b.getX()-c,ic.y=Qb+b.getY()-d},mouseup:function(a){a=H(a);var b=ic.target;G(b,"dragend",a),Ub=ic.actived,E(),ic.mouseover(a),ic.mouseup(a)}},kc={type:"intercept",mousedown:function(a){a=H(a);var b=ic.target,c=ic,d=a.getControl();Rb=null,Cb(a)||(d&&!d.isFocusable()?Db(d,a):G(b,"intercept",a)?E():a.cancelBubble||(c==ic?d&&Db(d,a):ic.mousedown(a)))}},lc={type:"zoom",mousemove:function(a){a=H(a);var b=ic.target,c=ic.width=Pb-ic.x+ic.width,d=ic.height=Qb-ic.y+ic.height,e=ic.minWidth,f=ic.maxWidth,g=ic.minHeight,h=ic.maxHeight;ic.x=Pb,ic.y=Qb,c=e>c?e:c>f?f:c,d=g>d?g:d>h?h:d,b.setPosition(ic.left+W(c,0),ic.top+W(d,0)),G(b,"zoom",a)&&b.setSize(U(c),U(d))},mouseup:function(a){a=H(a);var b=ic.target;G(b,"zoomend",a),Ub=ic.actived,E(),nc(),ic.mouseover(a),ic.mouseup(a)}},mc=I.init=function(a){if(!S()&&a){var b,c=0,d=[],e=a.all||a.getElementsByTagName("*"),f=[a],g={};for($b++||rb(P,"resize",nc);b=e[c++];)fb(b,Zb)&&f.push(b);for(c=0;a=f[c];c++){e=u(a);break}for(c=0;b=d[c++];)b.cache();for(c=0;b=d[c++];)b.init();return--$b||pb(P,"resize",nc),g}},nc=I.repaint=function(){var b,c=0,d=[],e=[];if($){if(b=(Z?Q.documentElement:Q.body).clientWidth,Ob==b)return Fb(new Xb("scroll")),void 0;Ob=b}if(Sb=zb,b=ic.type,B(!1),"zoom"!=b){for("drag"==b&&ic.mouseup(),b=null;b!==a;b=d[c++])for(var f=0,g=D({parent:b});b=g[f++];)b.isShow()&&b.isResizable()&&d.push(b);for(c=0;b=d[c++];)b.repaint=qb,G(b,"resize"),delete b.repaint,8>$&&(b=ib(f=b.getMain()),"auto"==b.width&&"block"==b.display&&(f.style.width="100%"));if(8>$){for(c=0;b=d[c];)e[c++]=b.getMain().offsetWidth;for(;b=d[c--];)b.getMain().style.width=e[c]-(Lb?2*b.$getBasicWidth():0)+"px"}for(c=0;b=d[c++];)b.cache(!0,!0);for(c=0;b=d[c++];)b.$setSize(b.getWidth(),b.getHeight())}8>$?vb(B,0,null,!0):B(!0),Sb=xb};b=I.$bind=function(a,b){a._cControl=b,a.getControl=M},d=I.$clearState=function(a){var b=a.getParent();A(a),a.contain(Ub)&&J(Ub,"deactivate",null,Ub=b),a.contain(Vb)&&J(Vb,"mouseout",null,Vb=b)},c=I.$connect=function(a,b,c){if(c){var d=Tb[c];d?b.call(a,d):(fc[c]=fc[c]||[]).push({func:b,caller:a})}},e=I.$create=function(a,b){a=a.client||a,b=b||{};var c,d=0,e=b.parent,f=b.main,g=b.primary||"";if(b.uid="ecui-"+ ++ec,f){if(Kb?c=f.className:f.className=c=f.className+" "+g+a.agent.TYPES,g||(/\s*([^\s]+)/.test(c),b.primary=T.$1),f.getControl)return f.getControl()}else f=b.main=eb(g+a.agent.TYPES),g||(b.primary=a.agent.types[0]);if(a=new a(f,b),e?e instanceof O.Control?a.setParent(e):a.appendTo(e):a.$setParent(Ab(gb(a.getOuter()))),Eb(a,b),dc.push(a),f=fc[b.id])for(fc[b.id]=null;g=f[d++];)g.func.call(g.caller,a);return a},f=I.$fastCreate=function(a,b,c,d){return a=a.client||a,d=d||{},d.uid="ecui-"+ ++ec,d.primary||(/\s*([^\s]+)/.test(b.className),d.primary=T.$1),a=new a(b,d),a.$setParent(c),Eb(a,d),a},I.addEventListener=function(a,b,c){b=a.getUID()+b,(gc[b]=gc[b]||[]).push(c)},g=I.calcHeightRevise=function(a){return Lb?wb(a.borderTopWidth)+wb(a.borderBottomWidth)+wb(a.paddingTop)+wb(a.paddingBottom):0},h=I.calcLeftRevise=function(a){var b=ib(a.offsetParent);return!_||"visible"!=b.overflow&&"absolute"==ib(a,"position")?wb(b.borderLeftWidth)*Mb:0},i=I.calcTopRevise=function(a){var b=ib(a.offsetParent);return!_||"visible"!=b.overflow&&"absolute"==ib(a,"position")?wb(b.borderTopWidth)*Mb:0},j=I.calcWidthRevise=function(a){return Lb?wb(a.borderLeftWidth)+wb(a.borderRightWidth)+wb(a.paddingLeft)+wb(a.paddingRight):0},k=I.create=function(a,b){return a=e("string"==typeof a?O[a]:a,b),a.cache(),a.init(),a},l=I.dispose=function(a){var b,c=cc.length,e=a instanceof O.Control,f={},g=[];e?d(a):(b=Ab(gb(a)),Wb&&db(a,Wb.getOuter())&&F(b),Ub&&db(a,Ub.getOuter())&&J(Ub,"deactivate",null,Ub=b),Vb&&db(a,Vb.getOuter())&&J(Vb,"mouseout",null,Vb=b));for(b in Tb)f[Tb[b].getUID()]=b;for(;c--;)b=cc[c],(e?a.contain(b):!!b.getOuter()&&db(a,b.getOuter()))&&(g.push(b),bb(dc,b),(b=f[b.getUID()])&&delete Tb[b],cc.splice(c,1));for(;b=g[++c];)b.$dispose()},m=I.drag=function(a,b,c){if("mousedown"==b.type){var d=a.getOuter().offsetParent,e=ib(d);sb(jc,"BODY"==d.tagName||"HTML"==d.tagName?tb():{top:0,right:d.offsetWidth-wb(e.borderLeftWidth)-wb(e.borderRightWidth),bottom:d.offsetHeight-wb(e.borderTopWidth)-wb(e.borderBottomWidth),left:0}),sb(jc,c),jc.right=V(jc.right-a.getWidth(),jc.left),jc.bottom=V(jc.bottom-a.getHeight(),jc.top),N(a,b,jc,"drag")}},I.get=function(a){return S(),Tb[a]||null},n=I.getActived=function(){return Ub||null},o=I.getAttributeName=function(){return Zb},p=I.getFocused=function(){return Wb||null},q=I.getHovered=function(){return Vb},r=I.getKey=function(){return bc},s=I.getMouseX=function(a){return a?(a=a.getBody(),Pb-hb(a).left-wb(ib(a,"borderLeftWidth"))):Pb},t=I.getMouseY=function(a){return a?(a=a.getBody(),Qb-hb(a).top-wb(ib(a,"borderTopWidth"))):Qb},I.getNamedControls=function(){return sb({},Tb)},u=I.getOptions=function(a,b){b=b||Zb;var c,d=fb(a,b);if(d){if(a.removeAttribute(b),I.onparseoptions&&(c=I.onparseoptions(d)))return c;for(c={};/^(\s*;)?\s*(ext\-)?([\w\-]+)\s*(:\s*([^;\s]+(\s+[^;\s]+)*)\s*)?($|;)/.test(d);)d=T["$'"],a=T.$5,b=T.$2?c.ext=c.ext||{}:c,b[ob(T.$3)]=a&&"true"!=a?"false"==a?!1:X(+a)?a:+a:!0;return c}return{}},v=I.getScrollNarrow=function(){return Nb},w=I.getStatus=function(){return Sb},x=I.inherits=function(a,b,c,d){var e=function(a){return k(e.client,a)},f=e.client=function(b,c){e.preprocess&&(b=e.preprocess.call(this,b,c)||b),a&&a.client.call(this,b,c),d&&d.call(this,b,c)};return e.preprocess=c,a?(ub(e,a),b&&"*"==b.charAt(0)?(e.types=a.types.slice())[0]=b.slice(1):e.types=(b?[b]:[]).concat(a.types)):e.types=[],e.TYPES=" "+e.types.join(" "),ub(f,e),f.agent=e,e},y=I.intercept=function(a){kc.target=a,Hb(kc)},z=I.isContentBox=function(){return Lb},A=I.loseFocus=function(a){a.contain(Wb)&&F(a.getParent())},B=I.mask=function(b,c){var d=0,e=Q.body,f=tb(),g=V(f.top-2*f.height,0),h=V(f.left-2*f.width,0),i=";top:"+g+"px;left:"+h+"px;width:"+W(5*f.width,f.pageWidth-h)+"px;height:"+W(5*f.height,f.pageHeight-g)+"px;display:";if("boolean"==typeof b)for(i+=b?"block":"none";f=ac[d++];)f.style.cssText+=i;else b===a?(lb(ac.pop()),ac.length||mb(e,"ecui-mask")):(ac.length||cb(e,"ecui-mask"),ac.push(f=e.appendChild(eb("","position:absolute;background-color:#000;z-index:"+(c||32767)))),nb(f,"opacity",b),f.style.cssText+=i+"block")},C=I.needInitClass=function(){return!Kb},D=I.query=function(b){b=b||{};for(var c,d=0,e=[],f=b.parent,g=b.custom;c=dc[d++];)b.type&&!(c instanceof b.type)||f!==a&&c.getParent()!==f||g&&!g.call(this,c)||e.push(c);return e},I.removeEventListener=function(a,b,c){(b=gc[a.getUID()+b])&&bb(b,c)},E=I.restore=function(){$&&("drag"==ic.type||"zoom"==ic.type)&&Q.body.releaseCapture(),Ib(ic,!0),Ib(ic=hc.pop())},F=I.setFocused=function(a){a&&a.isDisabled()&&(a=null);var b=K(Wb,a);J(Wb,"blur",null,b),J(Wb=a,"focus",null,b)},G=I.triggerEvent=function(a,b,c,d){if(d&&c?d.splice(0,0,c):c?d=[c]:(c={returnValue:c,preventDefault:Yb.preventDefault},d=d||[]),e=gc[a.getUID()+b])for(var e,f,g=0;f=e[g++];)f.apply(a,d);return(a["on"+b]&&a["on"+b].apply(a,d)===!1||c.returnValue===!1||a["$"+b]&&a["$"+b].apply(a,d)===!1)&&c.preventDefault(),c.returnValue!==!1},H=I.wrapEvent=function(a){if(a instanceof Xb)return a;var b=Q.body,c=gb(b);return $&&(a=P.event,a.pageX=c.scrollLeft+b.scrollLeft-c.clientLeft+a.clientX-b.clientLeft,a.pageY=c.scrollTop+b.scrollTop-c.clientTop+a.clientY-b.clientTop,a.target=a.srcElement,a.which=a.keyCode),"mousemove"==a.type&&(Rb=null),Pb=a.pageX,Qb=a.pageY,new Xb(a.type,a)},I.zoom=function(a,b,c){"mousedown"==b.type&&(c&&sb(lc,c),lc.top=a.getY(),lc.left=a.getX(),lc.width=a.getWidth(),lc.height=a.getHeight(),N(a,b,lc,"zoom"))},ic.keydown=ic.keypress=ic.keyup=function(a){a=H(a);var b=a.type,c=a.which;"keydown"==b&&(bc=c),J(Wb,b,a),"keyup"==b&&bc==c&&(bc=0)},$&&(ic.dblclick=function(a){ic.mousedown(a),ic.mouseup(a)},ic.selectstart=function(a){a=H(a),Gb(Ab(a.target),a)}),ic[_?"DOMMouseScroll":"mousewheel"]=function(b){b=H(b),b.detail=b._oNative.wheelDelta!==a?b._oNative.wheelDelta/-40:b._oNative.detail,"drag"==ic.type?b.preventDefault():(J(Vb,"mousewheel",b),b.cancelBubble||J(Wb,"mousewheel",b))},Yb.getControl=function(){var a=Ab(this.target);if(a&&!a.isDisabled())for(;a;a=a.getParent())if(a.isCapturable())return a;return null},Yb.getNative=function(){return this._oNative},Yb.preventDefault=function(){this.returnValue=!1,this._oNative&&($?this._oNative.returnValue=!1:this._oNative.preventDefault())},Yb.stopPropagation=function(){this.cancelBubble=!0,this._oNative&&($?this._oNative.cancelBubble=!1:this._oNative.stopPropagation())},Yb.exit=function(){this.preventDefault(),this.stopPropagation()},kb(mc)}()}(),function(){function a(a,b,c){var d=a._cParent,e=a.getOuter(),f=a._bCreated&&a.isShow();if(b!=d){if(d&&!L(d,"remove",null,[a]))return;b&&(L(b,"append",null,[a])||(b=c=null))}c!=o(e)&&(c?c.appendChild(e):r(e),a.$setParent(b)),f!=(a._bCreated&&a.isShow())&&L(a,f?"hide":"show",!1)}var b,c,d=ecui,e=d.array,f=d.dom,g=d.ui,h=d.util,i=document,j=RegExp,k=navigator.userAgent,l=/msie (\d+\.\d)/i.test(k)?i.documentMode||j.$1-0:b,m=e.remove,n=f.addClass,o=f.getParent,p=f.getStyle,q=f.removeClass,r=f.remove,s=h.blank,t=h.timer,u=h.toNumber,v=d.REPAINT,w=d.$bind,x=d.$clearState,y=d.calcLeftRevise,z=d.calcTopRevise,A=d.dispose,B=d.findControl,C=d.getActived,D=d.getFocused,E=d.getHovered,F=d.getStatus,G=d.inherits,H=d.isContentBox,I=d.loseFocus,J=d.query,K=d.setFocused,L=d.triggerEvent,M=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],N=g.Control=G(null,null,null,function(a,b){w(a,this),this._bDisabled=!!b.disabled,this._sUID=b.uid,this._sPrimary=b.primary||"",this._sClass=b.current||this._sPrimary,this._eMain=this._eBody=a,this._cParent=null,this._bCapturable=b.capturable!==!1,this._bUserSelect=b.userSelect!==!1,this._bFocusable=b.focusable!==!1,b.resizable!==!1?(this._bResizable=!0,a=a.style,this._sWidth=a.width,this._sHeight=a.height):this._bResizable=!1,this._aStatus=[""," "]}),O=N.prototype,P={custom:function(a){return this!=a&&this.contain(a)&&a.isShow()}};O.$activate=function(){this.alterClass("+active")},O.$blur=function(){this.alterClass("-focus")},O.$cache=function(a,b){if(8>l)c=a.borderWidth,c.indexOf(" ")>0?(c=c.split(" "),this.$$borderTopWidth=u(c[0]),this.$$borderRightWidth=u(c[1]),this.$$borderBottomWidth=c[2]?u(c[2]):this.$$borderTopWidth,this.$$borderLeftWidth=c[3]?u(c[3]):this.$$borderRightWidth=u(c[1])):this.$$borderTopWidth=this.$$borderLeftWidth=this.$$borderRightWidth=this.$$borderBottomWidth=u(c),c=a.padding,c.indexOf(" ")>0?(c=c.split(" "),this.$$paddingTop=u(c[0]),this.$$paddingRight=u(c[1]),this.$$paddingBottom=c[2]?u(c[2]):this.$$paddingTop,this.$$paddingLeft=c[3]?u(c[3]):this.$$paddingRight):this.$$paddingTop=this.$$paddingLeft=this.$$paddingRight=this.$$paddingBottom=u(c);else for(var c,d=0,e=["borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","paddingTop","paddingLeft","paddingRight","paddingBottom"];c=e[d++];)this["$$"+c]=u(a[c]);this.$$position=a.position,b!==!1&&(c=H(),this.$$width=this._eMain.offsetWidth||u(a.width)+(c?this.$getBasicWidth():0),this.$$height=this._eMain.offsetHeight||u(a.height)+(c?this.$getBasicHeight():0))},O.$deactivate=function(){this.alterClass("-active")},O.$dispose=function(){try{L(this,"dispose",!1)}catch(a){}this._eMain.getControl=b,this._eMain=this._eBody=null,this.$ready=s},O.$focus=function(){this.alterClass("+focus")},O.$getBasicHeight=function(){return this.$$borderTopWidth+this.$$borderBottomWidth+this.$$paddingTop+this.$$paddingBottom},O.$getBasicWidth=function(){return this.$$borderLeftWidth+this.$$borderRightWidth+this.$$paddingLeft+this.$$paddingRight},O.$getSection=function(a){return this["_u"+a]},O.$hide=function(){if(this._sDisplay===b){if(this._bCreated)for(var a,c=0,d=J.call(this,P);a=d[c++];)L(a,"hide",!1);a=this.getOuter().style,this._sDisplay=a.display,a.display="none",x(this)}},O.$locate=function(){"static"==this.$$position&&(this._eMain.style.position=this.$$position="relative")},O.$mouseout=function(){this.alterClass("-hover")},O.$mouseover=function(){this.alterClass("+hover")},O.$resize=function(){var a=this._eMain,b=a.style;if(b.width=this._sWidth,8>l&&F()!=v){var c=p(a);"auto"==c.width&&"block"==c.display&&(b.width="100%",b.width=a.offsetWidth-(H()?2*this.$getBasicWidth():0)+"px")}b.height=this._sHeight},O.$setBody=function(a){this._eBody=a},O.$setParent=function(a){this._cParent=a},O.$setSize=function(a,b){var c=this._eMain.style,d=this._eMain.tagName,e=H()&&"BUTTON"!=d&&"INPUT"!=d;a&&(d=a-(e?this.$getBasicWidth():0))>0&&(c.width=d+"px",this.$$width=a),b&&(d=b-(e?this.$getBasicHeight():0))>0&&(c.height=d+"px",this.$$height=b)},O.$show=function(){if(this.getOuter().style.display=this._sDisplay||"",this._sDisplay=b,this._bCreated)for(var a,c=0,d=J.call(this,P);a=d[c++];)L(a,"show",!1)},O.alterClass=function(a){var b="+"==a.charAt(0);b?a="-"+a.slice(1)+" ":a+=" ",(b?n:q)(this._eMain,this.getTypes().concat([this._sClass,""]).join(a)),b?this._aStatus.push(a):m(this._aStatus,a)},O.appendTo=function(b){a(this,b&&B(b),b)},O.blur=function(){I(this)},O.cache=function(a,b){(b||!this._bCached)&&(this._bCached=!0,this.$cache(p(this._eMain),a))},O.clearCache=function(){this._bCached=!1},O.contain=function(a){for(;a;a=a._cParent)if(a==this)return!0;return!1},O.disable=function(){return this._bDisabled?!1:(this.alterClass("+disabled"),this._bDisabled=!0,x(this),!0)},O.dispose=function(){A(this)},O.enable=function(){return this._bDisabled?(this.alterClass("-disabled"),this._bDisabled=!1,!0):!1},O.focus=function(){this.isFocused()||K(this)},O.getBody=function(){return this._eBody},O.getBodyHeight=function(){return this.getHeight()-this.getMinimumHeight()},O.getBodyWidth=function(){return this.getWidth()-this.getMinimumWidth()},O.getClass=function(){return this._sClass},O.getContent=function(){return this._eBody.innerHTML},O.getHeight=function(){return this.cache(),this.$$height},O.getMain=function(){return this._eMain},O.getMinimumHeight=function(){return this.cache(),this.$getBasicHeight()+(this.$$bodyHeightRevise||0)},O.getMinimumWidth=function(){return this.cache(),this.$getBasicWidth()+(this.$$bodyWidthRevise||0)},O.getOuter=function(){return this._eMain},O.getParent=function(){return this._cParent||null},O.getPrimary=function(){return this._sPrimary},O.getType=function(){return this.constructor.agent.types[0]},O.getTypes=function(){return this.constructor.agent.types.slice()},O.getUID=function(){return this._sUID},O.getWidth=function(){return this.cache(),this.$$width},O.getX=function(){var a=this.getOuter();return this.isShow()?a.offsetLeft-y(a):0},O.getY=function(){var a=this.getOuter();return this.isShow()?a.offsetTop-z(a):0},O.hide=function(){this.isShow()&&L(this,"hide")},O.init=function(){this._bCreated||(this._bDisabled&&this.alterClass("+disabled"),this.$setSize(this.getWidth(),this.getHeight()),null===c?this.$ready():(c||(c=[],t(function(){for(var a,b=0;a=c[b++];)a.$ready();c=null})),this.$ready!=s&&c.push(this)),this._bCreated=!0)},O.isActived=function(){return this.contain(C())},O.isCapturable=function(){return this._bCapturable},O.isDisabled=function(){return this._bDisabled||!!this._cParent&&this._cParent.isDisabled()},O.isFocusable=function(){return this._bFocusable},O.isFocused=function(){return this.contain(D())},O.isHovered=function(){return this.contain(E())},O.isResizable=function(){return this._bResizable},O.isShow=function(){return!!this.getOuter().offsetWidth},O.isUserSelect=function(){return this._bUserSelect},O.render=function(){this.resize()},O.repaint=function(){this.cache(!0,!0),this.$setSize(this.getWidth(),this.getHeight())},O.resize=function(){this._bResizable&&(this.$resize(),this.repaint())},O.setBodySize=function(a,b){this.setSize(a&&a+this.getMinimumWidth(),b&&b+this.getMinimumHeight())},O.setClass=function(a){var b=0,c=this._sClass,d=this.getTypes(),e=[];if(a=a||this._sPrimary,a!=c){for(d.splice(0,0,this._sClass=a);d[b];)e[b]=this._aStatus.join(d[b++]);d[0]=c,this._eMain.className=e.join("")+this._eMain.className.split(/\s+/).join("  ").replace(new j("(^| )("+d.join("|")+")(-[^ ]+)?( |$)","g"),"")}},O.setContent=function(a){this._eBody.innerHTML=a},O.setParent=function(b){a(this,b,b&&b._eBody)},O.setPosition=function(a,b){var c=this.getOuter().style;c.left=a+"px",c.top=b+"px"},O.setSize=function(a,b){if(this._bResizable){this.cache();var c=this._eMain.style;a<this.getMinimumWidth()&&(a=0),b<this.getMinimumHeight()&&(b=0),this.$setSize(a,b),a&&(this._sWidth=c.width),b&&(this._sHeight=c.height)}},O.show=function(){return this.isShow()?!1:(L(this,"show"),!0)},function(){for(var a,b=0;a=M[b++];)O["$"+a]=O["$"+a]||s;O.$intercept=O.$append=O.$remove=O.$zoomstart=O.$zoom=O.$zoomend=O.$dragstart=O.$dragmove=O.$dragend=O.$ready=O.$pagescroll=s}()}(),function(){var a,b=ecui,c=b.dom,d=b.ext,e=b.string,f=b.ui,g=b.util,h=document,i=Math,j=RegExp,k=i.floor,l=navigator.userAgent,m=/msie (\d+\.\d)/i.test(l)?h.documentMode||j.$1-0:a,n=c.addClass,o=c.create,p=c.getStyle,q=c.insertBefore,r=c.insertHTML,s=c.removeClass,t=c.remove,u=e.toCamelCase,v=g.inherits,w=b.$bind,x=b.isContentBox,y=f.Control,z=y.prototype,A=d.decorate=function(a,b){b.replace(/([A-Za-z0-9\-]+)\s*\(\s*([^)]+)\)/g,function(b,c,d){c=A[u(c.charAt(0).toUpperCase()+c.slice(1))],d=d.split(/\s+/);for(var e=0;b=d[e++];)new c(a,b)})},B=A.Decorator=function(a,b,c){var d=a.getUID(),e=(this._oInner=B[d]||a).getOuter();if(q(this._eMain=o(this._sPrimary=b),e).appendChild(e),w(this._eMain,a),a.clearCache(),B[d]=this,!E[d]){d=E[d]={};for(e in D)d[e]=a[e],a[e]=D[e]}if(c){for(d=0;e=c[d];)c[d++]='<div class="'+b+"-"+e+'" style="position:absolute;top:0px;left:0px"></div>';r(this._eMain,"BEFOREEND",c.join(""))}},C=B.prototype,D={},E={};B.clear=function(a){var b,c=a.getUID();for(b in D)delete a[b],a[b]!=E[c][b]&&(a[b]=E[c][b]);for(b=B[c],q(a.getOuter(),b._eMain),t(b._eMain);b!=a;b=b._oInner)b.$dispose();delete B[c],delete E[c]},C.$cache=function(a,b){this._oInner.$cache(a,b,!0),z.$cache.call(this,p(this._eMain),!1),this._oInner.$$position="relative",this.$$position="absolute"==a.position?"absolute":"relative",this.$$layout=";top:"+a.top+";left:"+a.left+";display:"+a.display+(m?";zoom:"+a.zoom:"")},C.$dispose=function(){this._eMain=null},C.$resize=function(){var a=this._eMain.style;a.width="",m||(a.height=""),this._oInner.$resize(!0)},C.$setSize=function(a,b){var c=this._eMain.style,d=this._oInner,e=z.$getBasicWidth.call(this),f=z.$getBasicHeight.call(this),g=x();d.$setSize(a&&a-e,b&&b-f,!0),c.width=d.getWidth(!0)+(g?0:e)+"px",c.height=d.getHeight(!0)+(g?0:f)+"px"},C.alterClass=function(a){var b="+"==a.charAt(0);this._oInner.alterClass(a,!0),b&&(a="-"+a.slice(1)),(b?n:s)(this._eMain,this._sPrimary+a)},C.getClass=function(){return this._sPrimary},C.getHeight=function(){return this._oInner.getHeight(!0)+z.$getBasicHeight.call(this)},C.getMinimumHeight=function(){return this._oInner.getMinimumHeight(!0)+z.$getBasicHeight.call(this)},C.getMinimumWidth=function(){return this._oInner.getMinimumWidth(!0)+z.$getBasicWidth.call(this)},C.getOuter=function(){return this._eMain},C.getWidth=function(){return this._oInner.getWidth(!0)+z.$getBasicWidth.call(this)},C.init=function(){this._eMain.style.cssText="position:"+this.$$position+this.$$layout,this._oInner.getOuter(!0).style.cssText+=";position:relative;top:auto;left:auto;display:block",this._oInner.init(!0)},D.$dispose=function(){B.clear(this),this.$dispose()},function(){function a(a,b){D[a]=function(){var c=this.getUID(),d=B[c],e=arguments;return e[b]?E[c][a].apply(this,e):d[a].apply(d,e)}}for(var b=0,c=[["$cache",2],["$resize",0],["$setSize",2],["alterClass",1],["getOuter",0],["getMinimumWidth",0],["getMinimumHeight",0],["getWidth",0],["getHeight",0],["init",0]];10>b;)a(c[b][0],c[b++][1])}();var F=A.LRDecorator=function(a,b){B.call(this,a,b,["left","right"])};v(F,B).$setSize=function(a,b){C.$setSize.call(this,a,b);var c=this._eMain.lastChild,d=";top:"+this.$$paddingTop+"px;height:"+this._oInner.getHeight(!0)+"px;width:";c.style.cssText+=d+this.$$paddingRight+"px;left:"+(this.$$paddingLeft+this._oInner.getWidth(!0))+"px",c.previousSibling.style.cssText+=d+this.$$paddingLeft+"px"};var G=A.TBDecorator=function(a,b){B.call(this,a,b,["top","bottom"])};v(G,B).$setSize=function(a,b){C.$setSize.call(this,a,b);var c=this._eMain.lastChild,d=";left:"+this.$$paddingLeft+"px;width:"+this._oInner.getWidth(!0)+"px;height:";c.style.cssText+=d+this.$$paddingBottom+"px;top:"+(this.$$paddingTop+this._oInner.getHeight(!0))+"px",c.previousSibling.style.cssText+=d+this.$$paddingTop+"px"};var H=A.MagicDecorator=function(a,b){B.call(this,a,b,["widget0","widget1","widget2","widget3","widget5","widget6","widget7","widget8"])};v(H,B).$setSize=function(a,b){C.$setSize.call(this,a,b);var c=this._eMain.lastChild,d=9,e=this.$$paddingTop,f=this.$$paddingLeft,g=this._oInner.getWidth(!0),h=this._oInner.getHeight(!0),i=[0,e,e+h],j=[0,f,f+g];for(g=[f,g,this.$$paddingRight],h=[e,h,this.$$paddingBottom];d--;)4!=d&&(c.style.cssText+=";top:"+i[k(d/3)]+"px;left:"+j[d%3]+"px;width:"+g[d%3]+"px;height:"+h[k(d/3)]+"px",c=c.previousSibling)}}(),function(){function a(a){return p[a]||(o[a]=function(){var b,c=0,d=this.getUID(),e=n[d];for(e[a]=j;b=e._aControls[c++];)h(m,a)<0?n[d+a].apply(b,arguments):b!=this&&l(b,a,arguments[0]);delete e[a]},p[a]=function(){n[this.getUID()][a].apply(this,arguments)}),p[a]}function b(b){for(var d,e=0,f=b.getUID();d=this._aNames[e++];)h(m,d)<0?(n[f+d]=b[d],b[d]=a(d)):c.addEventListener(b,d,a(d));this._aControls.push(b),n[f]=this}var c=ecui,d=c.array,e=c.ext,f=c.util,g=RegExp,h=d.indexOf,i=d.remove,j=f.blank,k=c.$connect,l=c.triggerEvent,m=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","mousewheel","keydown","keypress","keyup","focus","blur","activate","deactivate"],n=function(a,c){this._aControls=[],c?(e=h(c,"*"))>=0&&(c.splice(e,1,"disable","enable"),c=m.concat(c)):c=["disable","enable"],c.splice(0,0,"$dispose"),this._aNames=c;for(var d,e=0;d=a[e++];)"string"==typeof d?k(this,b,d):b.call(this,d)},o=n.prototype,p={};p.$dispose=function(){var a=0,b=this.getUID(),c=n[b],d=this.getMain(),e=[this.getClass()].concat(this.getTypes());for(n[b+"$dispose"].call(this),d.className=e.join(" "),i(c._aControls,this);e=c._aNames[a++];)delete n[b+e]},e.combine=function(a,b){/(^[^(]+)(\(([^)]+)\))?$/.test(b)&&(b=g.$3,new n([a].concat(g.$1.split(/\s+/)),b.split(/\s+/)))}}(),$getNamespaceBase().ecui=ecui,function(){var a=ecui,b=a.dom,c=a.ui,d=a.util,e=b.setText,f=d.setDefault,g=a.inherits,h=c.Control,i=h.prototype,j=c.Button=g(h,"ui-button",function(a,b){f(b,"userSelect",!1),b.text&&e(a,b.text)}),k=j.prototype;k.$activate=function(a){i.$activate.call(this,a),a.stopPropagation()},k.$mouseout=function(a){i.$mouseout.call(this,a),this.isActived()&&this.alterClass("-active")},k.$mouseover=function(a){i.$mouseover.call(this,a),this.isActived()&&this.alterClass("+active")},k.setText=function(a){e(this.getBody(),a)}}(),function(){function a(a){H.push(H.splice(k(H,a),1)[0]);for(var b,c=0,d=H.length-I;b=H[c++];)b.getOuter().style.zIndex=c>d?32767+2*(c-d):4095+c}var b,c=ecui,d=c.array,e=c.dom,f=c.ui,g=c.string,h=c.util,i=Math,j=i.max,k=d.indexOf,l=e.children,m=e.create,n=e.first,o=e.getStyle,p=e.moveElements,q=g.encodeHTML,r=h.getView,s=c.$fastCreate,t=c.calcHeightRevise,u=c.calcWidthRevise,v=c.drag,w=c.inherits,x=c.loseFocus,y=c.mask,z=c.setFocused,A=f.Control,B=f.Control.prototype,C=f.Button,D=f.Form=w(A,"ui-form",function(a,b){var c=this.getType(),d=m(c+"-body","position:relative;overflow:auto"),e=n(a);p(a,d,!0),e&&"LABEL"==e.tagName?(a.innerHTML='<div class="'+c+"-close"+this.Close.TYPES+'" style="position:absolute"></div>',a.insertBefore(e,a.firstChild),e.className=c+"-title"+this.Title.TYPES,e.style.position="absolute"):(a.innerHTML='<label class="'+c+"-title"+this.Title.TYPES+'" style="position:absolute">'+(b.title?q(b.title):"")+'</label><div class="'+c+"-close"+this.Close.TYPES+'" style="position:absolute"></div>',e=a.firstChild),a.style.overflow="hidden",a.appendChild(d)
},function(a,b){this._bAutoHeight=!a.style.height,a=l(a),this._bFlag=b.hide,this._bAutoTitle=b.autoTitle!==!1,this._bAutoCenter=b.autoCenter===!0,this._uTitle=s(this.Title,a[0],this,{userSelect:!1}),this._uClose=s(this.Close,a[1],this),b.closeButton===!1&&this._uClose.$hide(),this.$setBody(a[2])}),E=D.prototype,F=(E.Title=w(A)).prototype,G=(E.Close=w(C)).prototype,H=[],I=0;F.$activate=function(a){B.$activate.call(this,a),v(this.getParent(),a)},G.$click=function(a){B.$click.call(this,a),this.getParent().hide()},E.$cache=function(a,b){B.$cache.call(this,a,b),a=o(this.getMain().lastChild),this.$$bodyWidthRevise=u(a),this.$$bodyHeightRevise=t(a),this._uTitle.cache(!0,!0),this._uClose.cache(!0,!0)},E.$dispose=function(){if(k(H,this)>=0)try{this.$hide()}catch(a){}B.$dispose.call(this)},E.$focus=function(){B.$focus.call(this),a(this)},E.$hide=function(){var a=k(H,this);a>=0&&H.splice(a,1),a>H.length-I&&(this._bFlag&&(a==H.length?y():H[a]._bFlag=!0,this._bFlag=!1),I--),B.$hide.call(this),x(this)},E.$setSize=function(a,b){this._bAutoHeight&&(b=null),B.$setSize.call(this,a,b),this.$locate();var c=this.getMain().lastChild.style;c.width=this.getBodyWidth()+"px",this._bAutoHeight||(c.height=this.getBodyHeight()+"px"),this._bAutoTitle&&this._uTitle.$setSize(this.getWidth()-this.$getBasicWidth())},E.$show=function(){H.push(this),B.$show.call(this),z(this)},E.center=function(){if(a=this.getOuter(),a.style.position=this.$$position="absolute",a=a.offsetParent,a&&"BODY"!=a.tagName&&"HTML"!=a.tagName)b=a.offsetWidth,c=a.offsetHeight;else var a=r(),b=a.right+a.left,c=a.bottom+a.top;this.setPosition(j((b-this.getWidth())/2,0),j((c-this.getHeight())/2,0))},E.hide=function(){for(var a,b=k(H,this);a=H[++b];)if(a._bFlag)return!1;return B.hide.call(this)},E.init=function(){B.init.call(this),this._uTitle.init(),this._uClose.init(),this._bFlag?(this._bFlag=!1,this.$hide()):this.$show()},E.setTitle=function(a){this._uTitle.setContent(a||"")},E.show=function(){I&&k(H,this)<H.length-I&&I++;var b=B.show.call(this);return b?this._bAutoCenter&&this.center():a(this),b},E.$resize=function(){var a=this.getMain().lastChild.style;B.$resize.call(this),a.width="",a.height=""},E.getHeight=function(){return this._bAutoHeight&&this.cache(!0,!0),B.getHeight.call(this)},E.showModal=function(c){this._bFlag||(k(H,this)<H.length-I&&I++,y(c!==b?c:.05,32766+2*I),this._bFlag=!0,B.show.call(this)?this._bAutoCenter&&this.center():a(this))}}(),function(){function a(a){if(t(a._eInput,a),!a._bHidden)for(var b in B)q(a._eInput,b,B[b])}var b,c=ecui,d=c.dom,e=c.string,f=c.ui,g=c.util,h=document,i=RegExp,j=navigator.userAgent,k=/msie (\d+\.\d)/i.test(j)?h.documentMode||i.$1-0:b,l=d.create,m=d.insertBefore,n=d.setInput,o=d.setStyle,p=e.encodeHTML,q=g.attachEvent,r=g.blank,s=g.detachEvent,t=(g.timer,c.$bind),u=c.inherits,v=c.triggerEvent,w=c.wrapEvent,x=f.Control,y=x.prototype,z=f.InputControl=u(x,null,function(a,c){if("INPUT"==a.tagName||"TEXTAREA"==a.tagName){var d=a;m(a=l(d.className,d.style.cssText,"span"),d).appendChild(d),d.className=""}else d=a.getElementsByTagName("INPUT")[0]||a.getElementsByTagName("TEXTAREA")[0],d||(d=n(null,c.name,c.inputType),d.defaultValue=d.value=c.value===b?"":c.value.toString(),a.appendChild(d));return o(a,"display","inline-block"),d.style.border="0px",c.hidden&&(d.style.display="none"),c.checked&&(d.defaultChecked=d.checked=!0),a},function(b,c){this._bHidden=c.hidden,this._eInput=b.getElementsByTagName("INPUT")[0]||b.getElementsByTagName("TEXTAREA")[0],g.validator&&(this._aValidateRules=g.validator.collectRules(c)),a(this)}),A=z.prototype,B={};B.blur=B.focus=function(a){var b=a.type;a=w(a).target.getControl(),a["$"+b]=y["$"+b],a[b](),delete a["$"+b]},B.dragover=B.drop=function(a){w(a).exit()},k?B.propertychange=function(a){"value"==a.propertyName&&v(w(a).target.getControl(),"change")}:B.input=function(){v(this.getControl(),"change")},A.$dispose=function(){this._eInput.getControl=b,this._eInput=null,y.$dispose.call(this)},A.$reset=function(){this.$ready()},A.$setParent=function(a){y.$setParent.call(this,a),(a=this._eInput.form)&&a.getControl&&a.getControl().addItem(this.getName(),this)},A.$setSize=function(a,b){y.$setSize.call(this,a,b),this._eInput.style.width=this.getBodyWidth()+"px",this._eInput.style.height=this.getBodyHeight()+"px"},A.$submit=r,A.disable=function(){if(y.disable.call(this)){var a=this.getBody();return this._bHidden?this._eInput.disabled=!0:(a.removeChild(this._eInput),"password"!=this._eInput.type&&(a.innerHTML=p(this._eInput.value))),!0}return!1},A.enable=function(){if(y.enable.call(this)){var a=this.getBody();return this._bHidden?this._eInput.disabled=!1:(a.innerHTML="",a.appendChild(this._eInput)),!0}return!1},A.getInput=function(){return this._eInput},A.getName=function(){return this._eInput.name},A.getSelectionEnd=k?function(){var a=h.selection.createRange().duplicate();return a.moveStart("character",-this._eInput.value.length),a.text.length}:function(){return this._eInput.selectionEnd},A.getSelectionStart=k?function(){var a=h.selection.createRange().duplicate(),b=this._eInput.value.length;return a.moveEnd("character",b),b-a.text.length}:function(){return this._eInput.selectionStart},A.getValue=function(){return this._eInput.value},A.setCaret=k?function(a){var b=this._eInput.createTextRange();b.collapse(),b.select(),b.moveStart("character",a),b.collapse(),b.select()}:function(a){this._eInput.setSelectionRange(a,a)},A.setName=function(b){var c=n(this._eInput,b||"");this._eInput!=c&&(a(this),this._eInput=c)},A.setValue=function(a){var b=this._eInput,c=B.propertychange;c&&s(b,"propertychange",c),b.value=a,this._bDisabled&&!this._bHidden&&"password"!=this._eInput.type&&(this.getBody().innerHTML=p(a)),c&&q(b,"propertychange",c)},A.validate=function(){return!0},A.setDefaultValue=function(){var a=this.getValue();this._eInput.defaultValue=a},function(){function a(a){A["$"+a]=function(){y["$"+a].call(this);var b=this._eInput;s(b,a,B[a]);try{b[a]()}catch(c){}q(b,a,B[a])}}a("blur"),a("focus")}()}(),function(){function a(b,c,d){var e=b._nValue,f=b.getMouseDirection();b._oStop(),-1==f&&0>c||1==f&&c>0?b.setValue(e+c):e=-1,b._oStop=b._nValue!=e?n(a,d||200,null,b,c,40):l}function b(a){var b,c=a.getParent();c&&(c.$scroll(),z[b=c.getUID()]||(n(function(){delete z[b],u(c,"scroll",!1)}),z[b]=!0))}var c=ecui,d=c.dom,e=c.ui,f=c.util,g=Math,h=g.floor,i=g.max,j=g.min,k=d.children,l=f.blank,m=f.setDefault,n=f.timer,o=c.$fastCreate,p=c.drag,q=c.getActived,r=c.getMouseX,s=c.getMouseY,t=c.inherits,u=c.triggerEvent,v=e.Control,w=v.prototype,x=e.Button,y=x.prototype,z=e.Scrollbar=t(v,"ui-scrollbar",function(a,b){m(b,"userSelect",!1),m(b,"focusable",!1);var c=this.getType();a.innerHTML='<div class="'+c+"-prev"+this.Button.TYPES+'" style="position:absolute;top:0px;left:0px"></div><div class="'+c+"-next"+this.Button.TYPES+'" style="position:absolute;top:0px;left:0px"></div><div class="'+this.Thumb.TYPES+'" style="position:absolute"></div>'},function(a){a=k(a),this._nValue=this._nTotal=0,this._nStep=1,this._uPrev=o(this.Button,a[0],this,{focusable:!1}),this._uNext=o(this.Button,a[1],this,{focusable:!1}),this._uThumb=o(this.Thumb,a[2],this,{focusable:!1}),this._oStop=l}),A=z.prototype,B=(A.Thumb=t(x,"ui-scrollbar-thumb")).prototype,C=(A.Button=t(x,"ui-scrollbar-button")).prototype;B.$activate=function(a){y.$activate.call(this,a),p(this,a,this._oRange)},B.$dragmove=function(a,c,d){y.$dragmove.call(this,a,c,d);var e=this.getParent(),f=e.$calculateValue(c,d);e.$setValue(f==e._nTotal?f:f-f%e._nStep),b(e)},B.setRange=function(a,b,c,d){this._oRange={top:a,right:b,bottom:c,left:d}},C.$activate=function(b){y.$activate.call(this,b);var c=this.getParent();a(c,c.getMouseDirection()*i(c._nStep,5))},C.$deactivate=function(a){y.$deactivate.call(this,a),this.getParent()._oStop()},C.$mouseout=function(a){y.$mouseout.call(this,a),q()==this&&this.getParent()._oStop(!0)},C.$mouseover=function(a){y.$mouseover.call(this,a),q()==this&&this.getParent()._oStop(!0)},A.$activate=function(b){w.$activate.call(this,b),a(this,this.getMouseDirection()*this.$getPageStep())},A.$cache=function(a,b){w.$cache.call(this,a,b),this._uPrev.cache(!0,!0),this._uNext.cache(!0,!0),this._uThumb.cache(!0,!0)},A.$deactivate=function(a){w.$deactivate.call(this,a),this._oStop()},A.$hide=function(){w.$hide.call(this),A.setValue.call(this,0)},A.$mouseout=function(a){w.$mouseout.call(this,a),q()==this&&this._oStop(!0)},A.$mouseover=function(a){w.$mouseover.call(this,a),q()==this&&this._oStop(!0)},A.$setPageStep=function(a){this._nPageStep=a},A.$setSize=function(a,b){w.$setSize.call(this,a,b),this.$locate()},A.$setValue=function(a){this._nValue=a},A.getStep=function(){return this._nStep},A.getTotal=function(){return this._nTotal},A.getValue=function(){return this._nValue},A.init=function(){w.init.call(this),this._uPrev.init(),this._uNext.init(),this._uThumb.init()},A.setStep=function(a){a>0&&(this._nStep=a)},A.setTotal=function(a){a>=0&&this._nTotal!=a&&(this._nTotal=a,this._nValue>a&&(this._nValue=a,b(this)),this.$flushThumb())},A.setValue=function(a){a=j(i(0,a),this._nTotal),this._nValue!=a&&(this._nValue=a,b(this),this.$flushThumb())},A.skip=function(a){this.setValue(this._nValue+a*this._nStep)};var D=e.VScrollbar=t(z,"ui-vscrollbar"),E=D.prototype;E.$calculateValue=function(a,b){var c=this._uThumb,d=c._oRange;return(b-d.top)/(d.bottom-this._uPrev.getHeight()-c.getHeight())*this._nTotal},E.$flushThumb=function(){var a=this._uThumb,b=this._nTotal,c=this.getHeight(),d=this._uPrev.getHeight(),e=this.getBodyHeight(),f=i(h(e*c/(c+b)),a.getMinimumHeight()+5);b&&(a.$setSize(0,f),a.setPosition(0,d+h(this._nValue/b*(e-f))),a.setRange(d,0,e+d,0))},E.$getPageStep=function(){var a=this.getHeight();return this._nPageStep||a-a%this._nStep},E.$setSize=function(a,b){A.$setSize.call(this,a,b);var c=this.getBodyWidth(),d=this.$$paddingTop,e=this._uNext;this._uPrev.$setSize(c,d),e.$setSize(c,this.$$paddingBottom),this._uThumb.$setSize(c),e.setPosition(0,this.getBodyHeight()+d),this.$flushThumb()},E.getMouseDirection=function(){return s(this)<this._uThumb.getY()?-1:s(this)>this._uThumb.getY()+this._uThumb.getHeight()?1:0};var F=e.HScrollbar=t(z,"ui-hscrollbar"),G=F.prototype;G.$calculateValue=function(a){var b=this._uThumb,c=b._oRange;return(a-c.left)/(c.right-this._uPrev.getWidth()-b.getWidth())*this._nTotal},G.$flushThumb=function(){var a=this._uThumb,b=this._nTotal,c=this.getWidth(),d=this._uPrev.getWidth(),e=this.getBodyWidth(),f=i(h(e*c/(c+b)),a.getMinimumWidth()+5);b&&(a.$setSize(f),a.setPosition(d+h(this._nValue/b*(e-f)),0),a.setRange(0,e+d,0,d))},G.$getPageStep=function(){var a=this.getWidth();return a-a%this._nStep},G.$setSize=function(a,b){A.$setSize.call(this,a,b);var c=this.getBodyHeight(),d=this.$$paddingLeft,e=this._uNext;this._uPrev.$setSize(d,c),e.$setSize(this.$$paddingRight,c),this._uThumb.$setSize(0,c),e.setPosition(this.getBodyWidth()+d,0),this.$flushThumb()},G.getMouseDirection=function(){return r(this)<this._uThumb.getX()?-1:r(this)>this._uThumb.getX()+this._uThumb.getWidth()?1:0}}(),function(){function a(a){z(v(k(A(a).target)),"scroll")}var b=ecui,c=b.dom,d=b.ui,e=b.util,f=Math,g=f.max,h=f.min,i=f.floor,j=c.create,k=c.getParent,l=c.getPosition,m=c.getStyle,n=c.moveElements,o=e.attachEvent,p=e.blank,q=e.detachEvent,r=e.toNumber,s=b.$fastCreate,t=b.calcHeightRevise,u=b.calcWidthRevise,v=b.findControl,w=b.getKey,x=b.getScrollNarrow,y=b.inherits,z=b.triggerEvent,A=b.wrapEvent,B=d.Control,C=B.prototype,D=d.VScrollbar,E=d.HScrollbar,F=y(B,null,null,function(b){q(b,"scroll",a),o(b,"scroll",a)}),G=F.prototype;G.$hide=G.hide=function(){this.getMain().style[this._aProperty[0]]="hidden",G.setValue.call(this,0)},G.$setValue=function(a){this.getMain()[this._aProperty[1]]=h(g(0,a),this.getTotal())},G.$show=G.show=function(){this.getMain().style[this._aProperty[0]]="scroll"},G.getHeight=function(){return this._aProperty[4]?this.getMain()[this._aProperty[4]]:x()},G.getTotal=function(){return r(this.getMain().lastChild.style[this._aProperty[2]])},G.getValue=function(){return this.getMain()[this._aProperty[1]]},G.getWidth=function(){return this._aProperty[3]?this.getMain()[this._aProperty[3]]:x()},G.isShow=function(){return"hidden"!=this.getMain().style[this._aProperty[0]]},G.setTotal=function(a){this.getMain().lastChild.style[this._aProperty[2]]=a+"px"},G.setValue=function(a){this.$setValue(a),z(this.getParent(),"scroll")},G.$cache=G.$getPageStep=G.$setPageStep=G.$setSize=G.alterClass=G.cache=G.getStep=G.init=G.setPosition=G.setStep=G.skip=p;var H=y(F,null,null,function(){this._aProperty=["overflowY","scrollTop","height",null,"offsetHeight"]}),I=y(F,null,null,function(){this._aProperty=["overflowX","scrollLeft","width","offsetWidth",null]}),J=y(B),K=J.prototype;!function(){for(var a in C)K[a]=p}();var L=d.Panel=y(B,"ui-panel",function(a,b){var c=b.vScroll!==!1,d=b.hScroll!==!1,e=this.getType(),f=j(e+"-body","position:absolute;top:0px;left:0px"+(d?";white-space:nowrap":""));a.style.overflow="hidden",n(a,f,!0),a.innerHTML=(b.browser?'<div style="position:absolute;top:0px;left:0px;overflow:auto;padding:0px;border:0px"><div style="width:1px;height:1px;padding:0px;border:0px"></div></div>':(c?'<div class="'+e+"-vscrollbar"+this.VScrollbar.TYPES+'" style="position:absolute"></div>':"")+(d?'<div class="'+e+"-hscrollbar"+this.HScrollbar.TYPES+'" style="position:absolute"></div>':"")+(c&&d?'<div class="'+e+"-corner"+B.TYPES+'" style="position:absolute"></div>':""))+'<div class="'+e+'-layout" style="position:relative;overflow:hidden;padding:0px"></div>',a.lastChild.appendChild(f)},function(a,b){var c,d=0,e=b.browser,f=b.vScroll!==!1,g=b.hScroll!==!1,h=[[f,"_uVScrollbar",e?H:this.VScrollbar],[g,"_uHScrollbar",e?I:this.HScrollbar],[f&&g,"_uCorner",e?J:B]];for(this.$setBody(a.lastChild.lastChild),this._bAbsolute=b.absolute,this._nWheelDelta=b.wheelDelta,a=a.firstChild,e&&(this._eBrowser=a);c=h[d++];)c[0]&&(this[c[1]]=s(c[2],a,this),e||(a=a.nextSibling))}),M=L.prototype;M.VScrollbar=D,M.HScrollbar=E,M.$cache=function(a,b){C.$cache.call(this,a,b);var c=this.getBody(),d=c.offsetWidth,e=c.offsetHeight;if(a=m(k(c)),this.$$bodyWidthRevise=u(a),this.$$bodyHeightRevise=t(a),this._bAbsolute)for(var f=0,h=c.all||c.getElementsByTagName("*"),i=l(c);c=h[f++];)c.offsetWidth&&"absolute"==m(c,"position")&&(a=l(c),d=g(d,a.left-i.left+c.offsetWidth),e=g(e,a.top-i.top+c.offsetHeight));this.$$mainWidth=d,this.$$mainHeight=e,this._uVScrollbar&&this._uVScrollbar.cache(!0,!0),this._uHScrollbar&&this._uHScrollbar.cache(!0,!0),this._uCorner&&this._uCorner.cache(!0,!0)},M.$dispose=function(){this._eBrowser=null,C.$dispose.call(this)},M.$keydown=M.$keypress=function(a){var b=w(),c=b%2?this._uHScrollbar:this._uVScrollbar;return b>=37&&40>=b&&!a.target.value?(c&&c.skip(b+b%2-39),!1):void 0},M.$mousewheel=function(a){if(this.isHovered()&&(b=this._uVScrollbar,b&&b.isShow())){var b,c=b.getValue(),d=this._nWheelDelta||i(20/b.getStep())||1;return b.skip(a.detail>0?d:-d),a.stopPropagation(),c==b.getValue()}},M.$scroll=function(){var a=this.getBody().style;a.left=-g(this.getScrollLeft(),0)+"px",a.top=-g(this.getScrollTop(),0)+"px"},M.$setSize=function(a,b){C.$setSize.call(this,a,b),this.$locate();var c=this.$getBasicWidth(),d=this.$getBasicHeight(),e=this.$$paddingLeft+this.$$paddingRight,f=this.$$paddingTop+this.$$paddingBottom,g=this.getWidth()-c,h=this.getHeight()-d,i=this.$$mainWidth,j=this.$$mainHeight,l=this._eBrowser,m=this._uVScrollbar,n=this._uHScrollbar,o=this._uCorner,p=m?m.getWidth():0,q=n?n.getHeight():0,r=g-p,s=h-q,t=r+e,u=s+f;if(m&&m.setPosition(t,0),n&&n.setPosition(0,u),o&&o.setPosition(t,u),g>=i&&h>=j)m&&m.$hide(),n&&n.$hide(),o&&o.$hide(),r=g,s=h;else for(;;){if(o){if(i>r&&j>s){n.$setSize(t),n.setTotal(l?i+c:i-r),n.$show(),m.$setSize(0,u),m.setTotal(l?j+d:j-s),m.$show(),o.$setSize(p,q),o.$show();break}o.$hide()}n&&(i>g?(n.$setSize(g+e),n.setTotal(l?i+c:i-g),n.$show(),m&&m.$hide(),r=g):n.$hide()),m&&(j>h?(m.$setSize(0,h+f),m.setTotal(l?j+d:j-h),m.$show(),n&&n.$hide(),s=h):m.$hide());break}r-=this.$$bodyWidthRevise,s-=this.$$bodyHeightRevise,0>r&&(r=0),0>s&&(s=0),m&&m.$setPageStep(s),n&&n.$setPageStep(r),l&&(o=l.style,o.width=g+e+"px",o.height=h+f+"px"),o=k(this.getBody()).style,o.width=r+"px",o.height=s+"px"},M.getScrollLeft=function(){var a=this._uHScrollbar;return a?a.getValue():-1},M.getScrollTop=function(){var a=this._uVScrollbar;return a?a.getValue():-1},M.init=function(){C.init.call(this),this._uVScrollbar&&this._uVScrollbar.init(),this._uHScrollbar&&this._uHScrollbar.init(),this._uCorner&&this._uCorner.init()},M.reset=function(){this._uVScrollbar&&this._uVScrollbar.setValue(0),this._uHScrollbar&&this._uHScrollbar.setValue(0)}}(),function(){var a,b=ecui,c=b.array,d=b.dom,e=b.string,f=b.ui,g=b.util,h=c.indexOf,i=c.remove,j=d.children,k=d.create,l=d.insertBefore,m=e.trim,n=g.blank,o=g.callSuper,p=b.$fastCreate,q=b.getOptions,r=b.inherits,s=b.triggerEvent,t=f.Control,u=t.prototype,v=f.Item=r(t,"ui-item",function(a,b){a.style.overflow="hidden",null!=b.prompt&&(a.title=b.prompt)}),w=v.prototype,x=f.Items={};w.$click=function(a){u.$click.call(this,a);var b=this.getParent();b&&s(b,"itemclick",a,[h(x[b.getUID()],this)])},x.$append=function(a){return a instanceof(this.Item||v)&&o(this,"$append")!==!1?(x[this.getUID()].push(a),this.$alterItems(),void 0):!1},x.$cache=function(){o(this,"$cache");for(var a,b=0,c=x[this.getUID()];a=c[b++];)a.cache(!0,!0)},x.$dispose=function(){delete x[this.getUID()],o(this,"$dispose")},x.$initItems=function(){this.$alterItems=this.$initItems=n,x[this.getUID()]=[];for(var a,b=0,c=j(this.getBody());a=c[b++];)this.add(a);delete this.$alterItems},x.$remove=function(a){o(this,"$remove"),i(x[this.getUID()],a),this.$alterItems()},x.add=function(a,b,c){var d,e=x[this.getUID()];return a instanceof v?a.setParent(this):("string"==typeof a&&(this.getBody().appendChild(d=k()),d.innerHTML=a,a=d),d=this.Item||v,a.className=m(a.className)+" "+this.getType()+"-item"+d.TYPES,c=c||q(a),c.parent=this,c.select=!1,e.push(a=p(d,a,this,c)),this.$alterItems()),a.getParent()&&(d=e[b])&&d!=a&&(l(a.getOuter(),d.getOuter()),e.splice(b,0,e.pop())),a},x.append=function(b,c){this.add(b,a,c)},x.getItems=function(){return x[this.getUID()].slice()},x.init=function(){o(this,"init"),this.$alterItems()},x.remove=function(a){return"number"==typeof a&&(a=x[this.getUID()][a]),a&&a.setParent(),a||null},x.setItemSize=function(a,b){for(var c,d=0,e=x[this.getUID()];c=e[d++];)c.$setSize(a,b)}}(),function(){function a(a,c){if(c!==a._nStatus){a.setClass(a.getPrimary()+["-checked","","-part"][c]),a._nStatus=c;var d=a.getInput();d.defaultChecked=d.checked=!c,a._cSubject&&b(a._cSubject)}}function b(b){for(var d,e,f=0;e=b._aDependents[f++];){if(d!==c&&d!=e._nStatus){d=2;break}d=e._nStatus}d!==c&&a(b,d)}var c,d=ecui,e=d.array,f=d.ui,g=d.util,h=e.remove,i=g.setDefault,j=d.$connect,k=d.getKey,l=d.inherits,m=f.InputControl,n=m.prototype,o=f.Checkbox=l(m,"ui-checkbox",function(a,b){i(b,"hidden",!0),i(b,"inputType","checkbox")},function(a,b){this._bDefault=this.getInput().defaultChecked,this._aDependents=[],j(this,this.setSubject,b.subject)}),p=o.prototype;p.$click=function(a){n.$click.call(this,a),this.setChecked(!!this._nStatus)},p.$dispose=function(){var a,b,c=this._aDependents.slice(0);for(this.setSubject(),a=0;b=c[a];a++)b.setSubject();n.$dispose.call(this)},p.$keydown=p.$keypress=p.$keyup=function(a){n["$"+a.type].call(this,a),32==k()&&("keyup"==a.type&&this.setChecked(!!this._nStatus),a.preventDefault())},p.$ready=function(){this._aDependents.length||a(this,this.getInput().checked?0:1)},p.$reset=function(a){this.getInput().checked=this._bDefault,n.$reset.call(this,a)},p.getDependents=function(){return this._aDependents.slice()},p.getSubject=function(){return this._cSubject||null},p.isChecked=function(){return!this._nStatus},p.setChecked=function(b){a(this,b?0:1);for(var c,d=0;c=this._aDependents[d++];)c.setChecked(b)},p.setDefaultValue=function(){this._bDefault=this.isChecked()},p.setSubject=function(a){var c=this._cSubject;c!=a&&(this._cSubject=a,c&&(h(c._aDependents,this),b(c)),a&&(a._aDependents.push(this),b(a)))}}(),function(){function a(a,c){if(c!==b){var d=a.getInput();d.defaultChecked=d.checked=c}a.setClass(a.getPrimary()+(a.isChecked()?"-checked":""))}var b,c=ecui,d=c.ui,e=c.util,f=e.setDefault,g=c.getKey,h=c.inherits,i=c.query,j=d.InputControl,k=j.prototype,l=d.Radio=h(j,"ui-radio",function(a,b){f(b,"hidden",!0),f(b,"inputType","radio")},function(){this._bDefault=this.getInput().defaultChecked}),m=l.prototype;m.$click=function(a){k.$click.call(this,a),this.setChecked(!0)},m.$keydown=m.$keypress=m.$keyup=function(a){k["$"+a.type].call(this,a),32==a.which&&("keyup"==a.type&&32==g()&&this.setChecked(!0),a.preventDefault())},m.$ready=function(){a(this)},m.$reset=function(a){this.getInput().checked=this._bDefault,k.$reset.call(this,a)},m.getItems=function(){var a=0,b=this.getInput(),c=b.form,d=b.name,e=[];if(d){if(c){for(b=c[d];d=b[a++];)d.getControl&&e.push(d.getControl());return e}return i({type:l,custom:function(a){return!a.getInput().form&&a.getName()==d}})}return[this]},m.isChecked=function(){return this.getInput().checked},m.setChecked=function(b){if(this.isChecked()!=b)if(b)for(var c,d=0,e=this.getItems();c=e[d++];)a(c,c==this);else a(this,!1)},m.setDefaultValue=function(){this._bDefault=this.isChecked()}}(),function(){function a(a){var b=a._uOptions,c=b.$getSection("VScrollbar"),d=b.getOuter(),e=r(a.getOuter()),f=a._cSelected,g=e.top+a.getHeight();q(d)||(j.body.appendChild(d),a.cache(!1,!0),a.$alterItems()),b.isShow()&&(f&&H(f),c.setValue(c.getStep()*n(a.getItems(),f)),a=b.getHeight(),b.setPosition(e.left,g+a<=y().bottom?g:e.top-a))}function b(a,b){b!==a._cSelected&&(a._uText.setContent(b?b.getBody().innerHTML:""),K.setValue.call(a,b?b._sValue:""),a._cSelected=b,a._uOptions.isShow()&&H(b))}var c,d=ecui,e=d.array,f=d.dom,g=d.string,h=d.ui,i=d.util,j=document,k=Math,l=k.max,m=k.min,n=e.indexOf,o=f.children,p=f.create,q=f.getParent,r=f.getPosition,s=f.getText,t=(f.insertAfter,f.insertBefore),u=f.moveElements,v=f.remove,w=g.encodeHTML,x=i.extend,y=i.getView,z=i.setDefault,A=d.$fastCreate,B=d.getAttributeName,C=d.getFocused,D=d.inherits,E=d.intercept,F=d.mask,G=d.restore,H=d.setFocused,I=d.triggerEvent,J=h.InputControl,K=J.prototype,L=h.Button,M=h.Scrollbar,N=h.Panel,O=N.prototype,P=h.Item,Q=P.prototype,R=h.Items,S=h.Select=D(J,"ui-select",function(a,b){var c=a.name||b.name||"",d=this.getType(),e=b.id||"id_notset",f=p(d+"-options"+this.Options.TYPES,"position:absolute;z-index:65535;display:none");if(f.setAttribute("ecui_id",e),z(b,"hidden",!0),"SELECT"==a.tagName){var g=0,h=[],i=a.options,j=a;for(b.value=a.value,a=t(p(a.className,a.style.cssText,"span"),a),v(j);j=i[g];)h[g++]="<div "+B()+'="value:'+w(j.value)+'">'+j.text+"</div>";f.innerHTML=h.join("")}else u(a,f);return a.innerHTML='<span class="'+d+"-text"+P.TYPES+'"></span><span class="'+d+"-button"+L.TYPES+'" style="position:absolute"></span><input name="'+c+'" value="'+w(b.value||"")+'">',a.appendChild(f),a},function(a,b){a=o(a),this._uText=A(P,a[0],this,{capturable:!1}),this._uButton=A(L,a[1],this,{capturable:!1}),this._uOptions=A(this.Options,v(a[3]),this,{hScroll:!1,browser:b.browser}),this.$setBody(this._uOptions.getBody()),this._nOptionSize=b.optionSize||5,this.$initItems()}),T=S.prototype,U=(T.Options=D(N)).prototype,V=(T.Item=D(P,null,null,function(a,b){this._sValue=b.value===c?s(a):""+b.value})).prototype;x(T,R),U.$dispose=function(){this.hide(),O.$dispose.call(this)},U.$hide=function(){O.$hide.call(this),F(),G()},V.$mouseover=function(a){Q.$mouseover.call(this,a),H(this)},V.getValue=function(){return this._sValue},V.setValue=function(a){var b=this.getParent();this._sValue=a,b&&this==b._cSelected&&K.setValue.call(b,a)},T.$activate=function(b){b.getControl()instanceof M||(K.$activate.call(this,b),this._uOptions.show(),E(this),F(0,65534),a(this),b.stopPropagation())},T.$alterItems=function(){var a=this._uOptions,b=a.$getSection("VScrollbar"),c=this._nOptionSize,d=this.getBodyHeight(),e=this.getWidth(),f=this.getItems().length;q(a.getOuter())&&(b.setStep(d),this.setItemSize(e-a.getMinimumWidth()-(f>c?b.getWidth():0),d),a.$$mainHeight=f*d+a.$$bodyHeightRevise,a.$setSize(e,(m(f,c)||1)*d+a.getMinimumHeight()))},T.$cache=function(a,b){(q(this._uOptions.getOuter())?R:K).$cache.call(this,a,b),this._uText.cache(!1,!0),this._uButton.cache(!1,!0),this._uOptions.cache(!1,!0)},T.$intercept=function(a){this._uOptions.hide();for(var c=a.getControl();c;c=c.getParent())if(c instanceof this.Item){c!=this._cSelected&&(b(this,c),I(this,"change"));break}a.exit()},T.$keydown=T.$keypress=function(a){K["$"+a.type](a);var c=this._uOptions,d=c.$getSection("VScrollbar"),e=this._nOptionSize,f=a.which,g=this.getItems(),h=g.length,i=C();if(this.isFocused()){if(40==f||38==f)return h&&(c.isShow()?(H(g[f=m(l(0,n(g,i)+f-39),h-1)]),f-=d.getValue()/d.getStep(),d.skip(0>f?f:f>=e?f-e+1:0)):this.setSelectedIndex(m(l(0,n(g,this._cSelected)+f-39),h-1))),!1;if(27==f||13==f&&c.isShow())return c.hide(),13==f&&(b(this,i),I(this,"change")),!1}},T.$mousewheel=function(a){if(this.isFocused()){var b=this._uOptions,c=this.getItems(),d=c.length;b.isShow()?b.$mousewheel(a):(b=n(c,this._cSelected)+(a.detail>0?1:-1),this.setSelectedIndex(d?m(l(0,b),d-1):null),b>=0&&d>b&&I(this,"change")),a.exit()}},T.$ready=function(){this.setValue(this.getValue())},T.remove=function(a){return"number"==typeof a&&(a=this.getItems()[a]),a==this._cSelected&&b(this),R.remove.call(this,a)},T.add=function(a,b,c){return a=R.add.call(this,a,b,c),q(this._uOptions.getOuter())&&a.cache(!0,!0),a},T.$setSize=function(a,b){K.$setSize.call(this,a,b),this.$locate(),b=this.getBodyHeight(),this._uText.$setSize(a=this.getBodyWidth()-b,b),this._uButton.$setSize(b,b),this._uButton.setPosition(a,0)},T.getSelected=function(){return this._cSelected||null},T.setOptionSize=function(b){this._nOptionSize=b,this.$alterItems(),a(this)},T.setSelectedIndex=function(a){b(this,this.getItems()[a])},T.setValue=function(a){for(var c,d=0,e=this.getItems();c=e[d++];)if(c._sValue==a)return b(this,c),void 0;b(this)}}(),function(){function a(a,b){return a._eChildren=b,b.className=a.getType()+"-children",b.style.cssText="",b}function b(a){a.setClass(a.getPrimary()+(a._aChildren.length?a._bCollapsed?"-collapsed":"-expanded":""))}function c(a,b,c){return a.className=(s(a.className)||b.getPrimary())+b.constructor.agent.TYPES,v(b.constructor,a,null,t(t({},c),x(a)))}function d(a,c){a._eChildren&&a._bCollapsed!=c&&(a._eChildren.style.display=(a._bCollapsed=c)?"none":"",b(a))}var e=ecui,f=e.array,g=e.dom,h=e.string,i=e.ui,j=e.util,k=f.indexOf,l=f.remove,m=g.addClass,n=g.children,o=g.create,p=g.first,q=g.getStyle,r=g.insertAfter,s=(g.removeClass,h.trim),t=j.extend,u=j.toNumber,v=e.$fastCreate,w=e.getMouseX,x=e.getOptions,y=e.inherits,z=e.triggerEvent,A=i.Control,B=A.prototype,C=i.TreeView=y(A,"ui-treeview",function(b,c){c.resizable=!1;var d=p(b);if(d&&"LABEL"==d.tagName){for(var e=0,f=n(b).slice(1),g=a(this,b.appendChild(o()));d=f[e++];)g.appendChild(d);m(b,c.current=c.primary+(c.collapsed?"-collapsed":"-expanded")),c.collapsed&&(g.style.display="none")}},function(a,b){var d=this._aChildren=[];this._bCollapsed=b.collapsed||!1,this._bExpandSelected=b.expandSelected!==!1;for(var e,f=0,g=n(a.lastChild);e=g[f];)delete b.current,(d[f++]=c(e,this,b)).$setParent(this)}),D=C.prototype;D.$click=function(a){a.getControl()==this&&(B.$click.call(this,a),w(this)<=u(q(this.getBody(),"paddingLeft"))?(this[a=this.isCollapsed()?"expand":"collapse"](),z(this,a)):this.select())},D.$dispose=function(){this._eChildren=null,B.$dispose.call(this)},D.$hide=function(){B.$hide.call(this),this._eChildren&&(this._eChildren.style.display="none")},D.$setParent=function(a){var c=this.getRoot(),d=this.getParent();this==c._cSelected||this==c?(c._cSelected&&c._cSelected.alterClass("-selected"),c._cSelected=null):(l(d._aChildren,this),b(d)),B.$setParent.call(this,a),this._eChildren&&r(this._eChildren,this.getOuter())},D.$show=function(){B.$show.call(this),this._eChildren&&!this._bCollapsed&&(this._eChildren.style.display="")},D.add=function(d,e,f){var g,h=this._aChildren;return this._eChildren||(a(this,o()),r(this._eChildren,this.getOuter()),this._eChildren.style.display=this._bCollapsed?"none":""),(g=h[e])?g=g.getOuter():(e=h.length,g=null),"string"==typeof d?(g=this._eChildren.insertBefore(o(),g),g.innerHTML=d,d=c(g,this,f)):this._eChildren.insertBefore(d.getOuter(),g),d.$setParent(this),h.splice(e,0,d),b(this),d},D.collapse=function(){d(this,!0)},D.expand=function(){d(this,!1)},D.getChildren=function(){return this._aChildren.slice()},D.getFirst=function(){return this._aChildren[0]||null},D.getLast=function(){return this._aChildren[this._aChildren.length-1]||null},D.getNext=function(){var a=this.getParent();return a instanceof C&&a._aChildren[k(a._aChildren,this)+1]||null},D.getPrev=function(){var a=this.getParent();return a instanceof C&&a._aChildren[k(a._aChildren,this)-1]||null},D.getRoot=function(){for(var a,b=this;(a=b.getParent())instanceof C&&k(a._aChildren,b)>=0;b=a);return b},D.getSelected=function(){return this.getRoot()._cSelected||null},D.init=function(){B.init.call(this);for(var a,b=0,c=this._aChildren;a=c[b++];)a.init()},D.isCollapsed=function(){return!this._eChildren||this._bCollapsed},D.select=function(){var a=this.getRoot();a._cSelected!=this&&(a._cSelected&&a._cSelected.alterClass("-selected"),this.alterClass("+selected"),a._cSelected=this),this._bExpandSelected&&this.expand()}}(),function(){function a(a,b){return a=new Date(a.getFullYear(),a.getMonth(),a.getDate()),b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),a>=b}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=b.util,g=Date,h=f.extend,i=c.indexOf,j=d.addClass,k=d.getParent,l=d.removeClass,m=d.setText,n=b.$fastCreate,o=b.inherits,p=b.triggerEvent,q=e.Control,r=e.MonthView=o(q,"ui-monthview",null,function(a,b){var c,d=0,e=this.getType(),f=[];for(a.style.overflow="auto";7>d;)f[d]='<td class="'+e+"-title"+this.Cell.TYPES+(6==d?e+"-title-last":"")+'">'+r.WEEKNAMES[d++]+"</td>";for(f[d]="</tr></thead><tbody><tr>";++d<50;)f[d]='<td class="'+e+"-item"+this.Cell.TYPES+(d%7?"":e+"-item-last")+'"></td>'+(d%7?"":"</tr><tr>");for(a.innerHTML='<table cellspacing="0" cellpadding="0"><thead><tr>'+f.join("")+"</tr></tbody></table>",this._aCells=[],f=a.getElementsByTagName("TD"),d=0;c=f[d];)this._aCells[d++]=n(this.Cell,c,this,{resizable:!1});this._oRange=b.range||{},this._oCurRange=h({},this._oRange),this.setDate(b.year,b.month),this.setDay(b.day)}),s=r.prototype,t=(s.Cell=o(q)).prototype;r.WEEKNAMES=["ä¸","äº","ä¸","å","äº","å­","æ¥"],s.$setSelected=function(a){this._uCellSel&&this._uCellSel.alterClass("-selected"),a&&(a.alterClass("+selected"),this._uCellSel=a)},t.$click=function(a){var b=this.getParent(),c=i(b._aCells,this);p(b,7>c?"titleclick":"dateclick",a,7>c?[c]:[new g(b._nYear,b._nMonth,this._nDay)])!==!1&&b.$setSelected(this)},s.getMonth=function(){return this._nMonth+1},s.getYear=function(){return this._nYear},s.move=function(a){var b=new g(this._nYear,this._nMonth+a,1);this.setDate(b.getFullYear(),b.getMonth()+1)},s.setDay=function(a){var b,c,d=this._aCells;if(!a)return this.$setSelected(),void 0;for(b=0;c=d[b];b++)if(!c.isDisabled()&&c._nDay==a){this.$setSelected(c);break}},s.getDay=function(){var a;return this._uCellSel&&(a=this._uCellSel._nDay),a},s.setDate=function(a,b){var c,d,e=7,f=new g,a=a||f.getFullYear(),b=b?b-1:f.getMonth(),h=new g(a,b,0),i=1-h.getDay(),n=h.getDate(),o=new g(a,b+1,0).getDate(),p=this._oCurRange.begin,q=this._oCurRange.end;if(this._nYear!=a||this._nMonth!=b)for(this._nYear=a,this._nMonth=b,c=new g(a,b,1);h=this._aCells[e++];)(b=i>0&&o>=i)?(c.setDate(i),(!p||c>=p)&&(!q||q>=c)?h.enable():h.disable()):h.disable(),(36==e||43==e)&&(h.isDisabled()?j:l)(k(h.getOuter()),this.getType()+"-extra"),d=b?i:i>o?i-o:n+i,this.setCellHTML&&this.setCellHTML(h,d,i)!==!1||m(h.getBody(),d),h._nDay=i++},s.setRange=function(b,c,d){var e,f,h=new g(this._nYear,this._nMonth,1),i=new g(this._nYear,this._nMonth+1,0).getDate();for(d===!0&&(this._oRange.begin=b,this._oRange.end=c),b?this._oRange.begin&&(b=a(b,this._oRange.begin)?b:this._oRange.begin):b=this._oRange.begin,c?this._oRange.end&&(c=a(this._oRange.end,c)?c:this._oRange.end):c=this._oRange.end,f=0;e=this._aCells[f++];)e._nDay>0&&e._nDay<=i&&(h.setDate(e._nDay),b&&!a(h,b)||c&&!a(c,h)?e.disable():e.enable());
this._oCurRange.begin=b,this._oCurRange.end=c}}(),function(){function a(a){return this.getControl=null,b(this,a)}function b(a,b){var c=z(a).getControl(),d=c.getParent();return H(d.Cell,a,c,E({colIndex:b},d._aHCells[t(c._aElements,a)]._oOptions))}function c(a){for(var b,c,d=0,e=a.getParent()._aHCells;c=e[d];)if((b=a._aElements[d++])&&b!=c.getMain()){for(c=c.getWidth()-c.getMinimumWidth();null===a._aElements[d];)c+=e[d++].getWidth();b.style.width=c+"px"}}function d(a){var b=1,c=this.getParent()[this instanceof Q?"_aRows":"_aHCells"],d=c.length,e=this.getValue();if(a=q(p(0,a),this.getTotal()),a!=e){if(a>e){if(1==d)return P.setValue.call(this,this.getTotal()),void 0;for(;;b++)if(a<=c[b].$$pos){e<c[b-1].$$pos&&b--;break}}else for(b=d;b--;)if(a>=c[b].$$pos){d-1>b&&e>c[b+1].$$pos&&b++;break}P.setValue.call(this,c[b].$$pos)}}function e(a){var b=a.__$$colspan;return null==b&&(b=a.__$$colspan=a._eMain.getAttribute("colspan")),b>1}var f,g=ecui,h=g.array,i=g.dom,j=g.string,k=g.ui,l=g.util,m=document,n=Math,o=RegExp,p=n.max,q=n.min,r=navigator.userAgent,s=/msie (\d+\.\d)/i.test(r)?m.documentMode||o.$1-0:f,t=h.indexOf,u=i.children,v=i.create,w=i.first,x=i.getPosition,y=i.getAttribute,z=i.getParent,A=i.insertBefore,B=(i.insertHTML,i.next),C=i.remove,D=j.trim,E=l.extend,F=l.toNumber,G=l.getView,H=g.$fastCreate,I=g.dispose,J=g.getOptions,K=g.inherits,L=g.triggerEvent,M=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],N=k.Control,O=N.prototype,P=k.Scrollbar.prototype,Q=k.VScrollbar,R=k.Panel,S=R.prototype,T=k.Table=K(R,"ui-table",function(a,b){var c,d;if(this.getType(),b.wheelDelta=1,"TABLE"==a.tagName){var e=a;A(a=v(e.className),e).appendChild(e),b.width&&(a.style.width=b.width),b.height&&(a.style.height=b.height),e.className=""}return d=a.getElementsByTagName("TABLE")[0],c=u(d),d.setAttribute("cellSpacing","0"),"THEAD"!=c[0].tagName&&A(v("","","thead"),c[0]).appendChild(u(c[0])[0]),a},function(a){var b=0,c=this.getType(),e=this._aRows=[],g=this._aHCells=[],h=[],i=a.getElementsByTagName("TABLE")[0],j=u(i),k=j[0],l=1;for(i=u(j[0]),l=i.length,j=i.concat(u(j[1])),(i=this.$getSection("VScrollbar"))&&(i.setValue=d),(i=this.$getSection("HScrollbar"))&&(i.setValue=d),i=v(c+"-head"+N.TYPES,"position:absolute;top:0px;overflow:hidden"),i.innerHTML='<div style="white-space:nowrap;position:absolute"><table cellspacing="0"><tbody></tbody></table></div>',(this._uHead=H(N,this.getMain().appendChild(i),this)).$setBody(k);i=j[b];b++)i.className=D(i.className)+this.Row.TYPES,j[b]=w(i),h[b]=1,(e[b]=H(this.Row,i,this))._aElements=[];for(k=0;;k++)for(b=0;i=e[b];b++)if(!(h[b]-->1))if(a=j[b]){if(i._aElements[k]===f){i._aElements[k]=a,j[b]=B(a);for(var m=+y(a,"rowSpan")||1,n=h[b]=+y(a,"colSpan")||1;m--;)for(m||n--,i=n;i--;)e[b+m]._aElements.push(m?!1:null)}}else{if(i._aElements[k]===!1)continue;for(k=0;;k++)for(c={},b=0;i=e[b];b++){if(a=i._aElements[k],a===f)return this._aHeadRows=this._aRows.splice(0,l),void 0;a&&(l>b?(E(c,J(a)),a.className=D(a.className)+this.HCell.TYPES,g[k]=H(this.HCell,a,this,{colIndex:k}),g[k]._oOptions=E({},c)):(a.className=(D(a.className)||c.primary||"")+this.Cell.TYPES,a.getControl=Y()))}}}),U=T.prototype,V=(U.Row=K(N,"ui-table-row")).prototype,W=(U.HCell=K(N,"ui-table-hcell",function(a,b){this.$$colIndex=b.colIndex})).prototype,X=(U.Cell=K(N,"ui-table-cell",function(a,b){b.resizable=!1,this.$$colIndex=b.colIndex})).prototype,Y=8==s?function(a){var c;return function(){return c=c||b(this,a)}}:function(){return a};V.$dispose=function(){this._aElements=null,O.$dispose.call(this)},V.$getElements=function(){return this._aElements.slice()},V.$hide=function(){for(var a,b,c,d=0,e=this.getParent(),g=t(e._aRows,this),h=e._aRows[g+1];e._aHCells[d];d++)if(c=this._aElements[d],c===!1)c=e.$getElement(g-1,d),b!=c&&(c.setAttribute("rowSpan",+y(c,"rowSpan")-1),b=c);else if(c&&(a=+y(c,"rowSpan"))>1){for(c.setAttribute("rowSpan",a-1),a=d+1;b=h._aElements[a++],!b&&b!==f;);c.getControl().$setParent(h),h.getBody().insertBefore(c,b||null)}O.$hide.call(this),e.repaint()},V.$show=function(){for(var a,b,c,d=0,e=this.getParent(),g=t(e._aRows,this),h=e._aRows[g+1];e._aHCells[d];d++)if(c=this._aElements[d],c===!1)c=e.$getElement(g-1,d),b!=c&&(c.setAttribute("rowSpan",+y(c,"rowSpan")+1),b=c);else if(c&&h&&h._aElements[d]===!1){for(c.setAttribute("rowSpan",+y(c,"rowSpan")+1),a=d+1;b=this._aElements[a++],!b&&b!==f;);c.getControl().$setParent(this),this.getBody().insertBefore(c,b||null)}O.$show.call(this),e.resize()},V.getCell=function(a){return this._aElements[a]?this._aElements[a].getControl(a):null},V.getCells=function(){for(var a=this._aElements.length,b=[];a--;)b[a]=this.getCell(a);return b},V.$cache=function(a,b){O.$cache.call(this,a,b)},V.setSize=function(a,b){for(var c=this._aElements.length,d=this.getHeight();c--;)this._aElements[c]&&this._aElements[c].getControl().$setSize(null,b);this.getParent()[b>d?"resize":"repaint"]()},W.$hide=function(){this.$setStyles("display","none",-this.getWidth())},W.$setStyles=function(a,b,c){var d,e=0,f=this.getParent(),g=f._aHeadRows.concat(f._aRows),h=this.getBody(),i=f._aHCells,j=t(i,this),k=z(z(z(h))).style;for(h.style[a]=b,c&&(k.width=w(f.getBody()).style.width=F(k.width)+c+"px");k=g[e++];)if(h=k._aElements,k=h[j],k&&(k.style[a]=b),c&&k!==!1){for(d=j;!(k=h[d]);d--);var l=-i[d].getMinimumWidth(),m=0;do i[d].getOuter().style.display||(l+=i[d].getWidth(),m++);while(null===h[++d]);l>0?(k.style.display="",k.style.width=l+"px",k.setAttribute("colSpan",m)):k.style.display="none"}c>0?f.resize():f.repaint()},W.$show=function(){this.$setStyles("display","",this.getWidth())},W.getCell=function(a){return this.getParent().getCell(a,t(this._aHCells,this))},W.getCells=function(){for(var a,b=0,c=t(this.getParent()._aHCells,this),d=[];a=this.getParent()._aRows[b];)d[b++]=a.getCell(c);return d},W.$cache=function(a,b){O.$cache.call(this,a,b),this.getParent().$cacheByFakeColMaxWidth(this)},W.setSize=function(a){var b=this.getWidth();this.$setSize(a),this.$setStyles("width",a-this.$getBasicWidth()+"px",a-b)},X.$cache=function(a,b){O.$cache.call(this,a,b),this.getParent().getParent().$cacheByFakeColMaxWidth(this)},X.getHeight=function(){return this.getOuter().offsetHeight},X.getWidth=function(){return this.getOuter().offsetWidth},U.$cache=function(a,b){S.$cache.call(this,a,b),this._uHead.cache(!1,!0),this.$$paddingTop=this._uHead.getBody().offsetHeight;for(var c=0,d=0;a=this._aRows[c++];)a.$$pos=d,a.cache(!0,!0),a.getOuter().style.display||(d+=a.getHeight());for(c=0,d=0;a=this._aHCells[c++];)a.$$pos=d,a.cache(!0,!0),a.getOuter().style.display||(d+=a.getWidth());this.$$mainWidth=d},U.$getElement=function(a,b){var c=this._aRows,d=c[a]&&c[a]._aElements,e=d&&d[b];if(e===f)e=null;else if(!e){for(;e===!1;e=(d=c[--a]._aElements)[b]);for(;!e;e=d[--b]);}return e},U.$pagescroll=function(){S.$pagescroll.call(this),this._uVScrollbar||(this._uHead.getOuter().style.top=p(G().top-x(this.getOuter()).top,0)+"px")},U.$scroll=function(){S.$scroll.call(this),this._uHead.getMain().lastChild.style.left=this.getBody().style.left},U.$setSize=function(a,b){var c,d=this.getBody(),e=this.$getSection("VScrollbar"),f=this.$getSection("HScrollbar"),g=this.$$mainWidth,h=this.$$mainHeight,i=e&&e.getWidth(),j=f&&f.getHeight(),k=this.$getBasicWidth(),l=this.$getBasicHeight(),m=g+k,n=h+l,o=a-k,p=b-l;this.getMain().style.paddingTop=this.$$paddingTop+"px",w(d).style.width=this._uHead.getMain().lastChild.lastChild.style.width=g+"px",o>=g&&p>=h?(a=m,b=n):e&&f&&g>o-i&&h>p-j||(c=m+(!e||p>=h?0:i),a=f?q(a,c):c,c=n+(!f||o>=g?0:j),b=e?q(b,c):c),S.$setSize.call(this,a,b),this._uHead.$setSize(F(z(d).style.width)+this._uHead.$getBasicWidth(),this.$$paddingTop)},U.addColumn=function(a,b){var c,d,e=0,g=this._aHeadRows.length,h=this._aHeadRows.concat(this._aRows),i=a.primary||"",j=v(i+this.HCell.TYPES,"","td"),k=H(this.HCell,j,this);for(j.innerHTML=a.title||"",i+=this.Cell.TYPES;c=h[e];e++)if(d=c._aElements[b],null!==d){for(m=b;!d&&(d=c._aElements[++m],d!==f););g>e?(c._aElements.splice(b,0,c.getBody().insertBefore(j,d)),j.setAttribute("rowSpan",g-e),this._aHCells.splice(b,0,k),e=g-1):(c._aElements.splice(b,0,d=c.getBody().insertBefore(v(i,"","td"),d)),d.getControl=Y())}else{var l=this.$getElement(e-g,b),m=+y(l,"rowspan")||1;for(l.setAttribute("colSpan",+y(l,"colSpan")+1),c._aElements.splice(b,0,d);--m;)h[++e]._aElements.splice(b,0,!1)}return k.cache(),k.$setSize(a.width),k.$setStyles("width",j.style.width,a.width),k._oOptions=E({},a),k},U.addRow=function(a,b){var c,d=0,e=1,f=this.getBody().lastChild.lastChild,g=v(),h=['<table><tbody><tr class="'+this.Row.TYPES+'">'],i=[],j=this._aRows[b];for(j||(b=this._aRows.length);c=this._aHCells[d];)if(j&&j._aElements[d]===!1||a[d]===!1)i[d++]=!1;else{i[d]=!0,h[e++]='<td class="'+this.Cell.TYPES+'" style="';for(var k=d,l=c.isShow()?1:0,m=c.getWidth()-c.getMinimumWidth();(c=this._aHCells[++d])&&null===a[d];)i[d]=null,c.isShow()&&(l++,m+=c.getWidth());i[k]=!0,h[e++]=(l?"width:"+m+'px" colSpan="'+l:"display:none")+'">'+(a[k]||"")+"</td>"}for(h[e]="</tr></tbody></table>",g.innerHTML=h.join(""),g=g.lastChild.lastChild.lastChild,f.insertBefore(g,j?j.getOuter():null),j=H(this.Row,g,this),this._aRows.splice(b--,0,j),d=0,g=g.firstChild,c=null;this._aHCells[d];d++)(k=i[d])?(i[d]=g,g.getControl=Y(),g=g.nextSibling):k===!1&&(k=this.$getElement(b,d),k!=c&&(k.setAttribute("rowSpan",(+y(k,"rowSpan")||1)+1),c=k));return j._aElements=i,this.resize(),j},U.getCell=function(a,b){return a=this._aRows[a],a&&a.getCell(b)||null},U.getColumnCount=function(){return this._aHCells.length},U.getHCell=function(a){return this._aHCells[a]||null},U.getHCells=function(){return this._aHCells.slice()},U.getRow=function(a){return this._aRows[a]||null},U.getRowCount=function(){return this._aRows.length},U.getRows=function(){return this._aRows.slice()},U.init=function(){A(this._uHead.getBody(),this._uHead.getMain().lastChild.lastChild.firstChild),this.$$mainHeight-=this.$$paddingTop,S.init.call(this);for(var a,b=0;a=this._aHCells[b++];)a.$setSize(a.getWidth());for(b=0;a=this._aHeadRows[b++];)c(a);for(b=0;a=this._aRows[b++];)c(a)},U.removeColumn=function(a){var b=0,c=this._aHCells,d=c[a];if(d)for(d.hide(),C(d.getOuter()),I(d),c.splice(a,1);d=this._aRows[b++];){if(c=d._aElements,d=c[a]){if(null===c[a+1]){c.splice(a+1,1);continue}C(d),d.getControl!=Y()&&I(d.getControl())}c.splice(a,1)}},U.removeRow=function(a){var b,c=0,d=this._aRows[a],e=this._aRows[a+1],f=d.getBody();if(d){for(d.hide();this._aHCells[c];c++)if((b=d._aElements[c])&&z(b)!=f){for(e._aElements[c]=b;null===d._aElements[++c];)e._aElements[c]=null;c--}C(d.getOuter()),I(d),this._aRows.splice(a,1),this.repaint()}},U.$getFakeDom=function(){var a,b=this,c=this.$$fakeDom;return c||(c=this.$$fakeDom=document.createElement("div"),a=c.style,a.position="absolute",a.top="0",a.left="-10000px",a.visibility="hidden",document.body.appendChild(c)),this.$$remover||(this.$$remover=setTimeout(function(){document.body.removeChild(c),c=b.$$fakeDom=a=b.$$remover=null},0)),c},U.$cacheByFakeColMaxWidth=function(a){if(8>s){var b=this.$$fakeColMaxWidthMap;b||(b=this.$$fakeColMaxWidthMap={});var c=a.$$colIndex,d=this.$getFakeDom();d.innerHTML=a.getOuter().innerHTML;var f,h=d.offsetWidth+(g.isContentBox()?a.$getBasicWidth():0);if(e(a)?f=h:(f=b[c],(!f||h>f)&&(b[c]=f=h)),!e(a)){for(var i,j=0;i=this._aRows[j];j++){var k=i.getCell(c);k&&!e(k)&&(k.$$width=f)}for(var i,j=0;i=this._aHeadRows[j];j++){var k=i.getCell(c);k&&!e(k)&&(k.$$width=f)}}}},function(){function a(a){var b=a.replace("mouse","");a="$"+a,V[a]=function(c){O[a].call(this,c),L(this.getParent(),"row"+b,c)},X[a]=function(c){O[a].call(this,c),L(this.getParent().getParent(),"cell"+b,c)}}for(var b=0;7>b;)a(M[b++])}()}(),function(){function a(a){var b=q(a.getBody().style.left);a._uPrev[b<a._uPrev.getWidth()?"enable":"disable"](),a._uNext[b>a.getBodyWidth()-a.$$titleWidth-a._uNext.getWidth()?"enable":"disable"]()}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=b.util,g=Math,h=g.max,i=g.min,j=c.indexOf,k=d.create,l=d.moveElements,m=d.remove,n=d.first,o=d.setStyle,p=f.extend,q=f.toNumber,r=b.$fastCreate,s=b.inherits,t=b.triggerEvent,u=e.Control,v=u.prototype,w=e.Button,x=e.Item,y=x.prototype,z=e.Items,A=e.Tab=s(u,"ui-tab",null,function(a,b){var c=this.getType(),d=k(c+"-title","position:relative;overflow:hidden");this._oSelected=b.selected||0,d.innerHTML='<div class="'+c+"-prev"+this.Button.TYPES+'" style="position:absolute;display:none;left:0px"></div><div class="'+c+"-next"+this.Button.TYPES+'" style="position:absolute;display:none"></div><div class="'+c+'-items" style="position:absolute;white-space:nowrap"></div>',l(a,b=d.lastChild),a.appendChild(d),this.$setBody(b),this.$initItems(),this._uNext=r(this.Button,b=b.previousSibling,this),this._uPrev=r(this.Button,b.previousSibling,this)}),B=A.prototype,C=(B.Button=s(w,"ui-tab-button")).prototype,D=(B.Item=s(x,null,null,function(a,b){var c=b.parent;if("LABEL"!=a.tagName){var d,e=n(a);l(a,d=k(b.primary+"-container"),!0),a.appendChild(e),this.setContainer(d)}o(a,"display","inline-block"),c&&b.selected&&(c._oSelected=this)})).prototype;p(B,z),C.$click=function(b){v.$click.call(this,b);var c=this.getParent(),d=c.getBody().style,e=c._aPosition,f=c.$getLeftMostIndex();f=i(h(0,f+(c._uPrev==this?q(d.left)!=e[f]?0:-1:1)),e.length-1),d.left=h(e[f],c.getBodyWidth()-c.$$titleWidth-c._uNext.getWidth())+"px",a(c)},D.$cache=function(a,b){y.$cache.call(this,a,b),this.$$marginLeft=q(a.marginLeft),this.$$marginRight=q(a.marginRight)},D.$click=function(a){y.$click.call(this,a),this.getParent().setSelected(this)},D.$dispose=function(){this._eContainer=null,y.$dispose.call(this)},D.$setParent=function(a){var b=this._eContainer;y.$setParent.call(this,a),b&&(a?a.getMain().appendChild(b):m(b))},D.getContainer=function(){return this._eContainer},D.setContainer=function(a){var b=this.getParent();this._eContainer&&m(this._eContainer),(this._eContainer=a)&&("none"==(this._sContainer=a.style.display)&&(this._sContainer=""),b&&(b.getMain().appendChild(a),a.style.display=b._cSelected==this?this._sContainer:"none"))},B.$alterItems=function(){this._aPosition&&this.$setSize(this.getWidth());for(var a,b=0,c=this.getItems(),d=this._aPosition=[this._uPrev.getWidth()],e={$$marginRight:0};a=c[b++];e=a)d[b]=d[b-1]-h(e.$$marginRight,a.$$marginLeft)-a.getWidth()},B.$cache=function(a,b){z.$cache.call(this,a,b),this._uPrev.cache(!0,!0),this._uNext.cache(!0,!0),this.$$titleWidth=this.getBody().offsetWidth},B.$getLeftMostIndex=function(){for(var a=q(this.getBody().style.left),b=this._aPosition,c=b.length;c--;)if(a<=b[c])return c},B.$remove=function(a){if(this._cSelected==a){var b=this.getItems(),c=j(b,a);this.setSelected(c==b.length-1?c-1:c+1)}z.$remove.call(this,a)},B.$setSize=function(b,c){v.$setSize.call(this,b,c);var d=this._uPrev,e=this._uNext,f=this.getBody().style;b=this.getBodyWidth(),this.$$titleWidth>b?(b-=e.getWidth(),e.getOuter().style.left=b+"px",this._bButton?(b-=this.$$titleWidth,q(f.left)<b&&(f.left=b+"px")):(d.$show(),e.$show(),f.left=d.getWidth()+"px",this._bButton=!0),a(this)):this._bButton&&(d.$hide(),e.$hide(),f.left="0px",this._bButton=!1)},B.getSelected=function(){return this._cSelected},B.init=function(){this._uPrev.init(),this._uNext.init(),z.init.call(this);for(var a,b=0,c=this.getItems();a=c[b++];)a.$setSize(a.getWidth(),a.getHeight());this.setSelected(this._oSelected)},B.setSelected=function(b){var c,d=0,e=this.getItems(),f=this._uPrev,g=this.getBody().style,h=q(g.left);if("number"==typeof b&&(b=e[b]),this._cSelected!=b){for(;c=e[d++];)c._eContainer&&(c._eContainer.style.display=c==b?c._sContainer:"none");this._cSelected&&this._cSelected.alterClass("-selected"),b&&(b.alterClass("+selected"),c=this._aPosition[j(e,b)]-(f.isShow()?0:f.getWidth()),c>h?g.left=c+"px":(c-=b.getWidth()+(f.isShow()?f.getWidth():0)+(this._uNext.isShow()?this._uNext.getWidth():0)-this.getBodyWidth(),h>c&&(g.left=c+"px")),a(this)),this._cSelected=b,t(this,"change")}}}(),function(){var a,b=ecui,c=b.dom,d=b.ui,e=b.util,f=c.getText,g=c.setInput,h=e.extend,i=b.inherits,j=d.Panel,k=d.Item,l=k.prototype,m=d.Items,n=d.Listbox=i(j,"ui-listbox",function(a,b){b.hScroll=!1},function(a,b){this._sName=b.name||"",this.$initItems()}),o=n.prototype,p=(o.Item=i(k,null,null,function(b,c){b.appendChild(this._eInput=g(null,c.parent._sName,"hidden")).value=c.value===a?f(b):c.value,this.setSelected(!!c.selected)})).prototype;h(o,m),p.$click=function(a){l.$click.call(this,a),this.setSelected(!this.isSelected())},p.$dispose=function(){this._eInput=null,l.$dispose.call(this)},p.$setParent=function(a){l.$setParent.call(this,a),a instanceof n&&(this._eInput=g(this._eInput,a._sName))},p.isSelected=function(){return!this._eInput.disabled},p.setSelected=function(a){this.alterClass("selected",this._eInput.disabled=a===!1)},o.$alterItems=function(){var a=this.getItems(),b=this.$getSection("VScrollbar"),c=a.length&&a[0].getHeight();c&&(b.setStep(c),this.setItemSize(this.getBodyWidth()-(a.length*c>this.getBodyHeight()?b.getWidth():0),c),this.$setSize(0,this.getHeight()))},o.getName=function(){return this._sName},o.getSelected=function(){for(var a,b=0,c=this.getItems(),d=[];a=c[b++];)a.isSelected()&&d.push(a);return d},o.selectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)a.setSelected()},o.setName=function(a){for(var b,c=0,d=this.getItems();b=d[c++];)b._eInput=g(b._eInput,a);this._sName=a}}(),function(){var a=ecui,b=a.ui,c=a.util,d=a.inherits,e=a.$connect,f=a.triggerEvent,g=c.blank,h=b.Control,i=h.prototype,j=["click","mouseover","mouseout","mouseup","mousedown"],k=b.Label=d(h,"ui-label",null,function(a,b){this._bResizable=!1,e(this,this.setFor,b["for"])}),l=k.prototype;l.setFor=function(a){this._cFor=a},l.$setSize=g,function(){var a,b;for(a=0;b=j[a];a++)l["$"+b]=function(a){return function(b){i["$"+a].call(this,b);var c=this._cFor;c&&!c.isDisabled()&&f(c,a,b)}}(b)}()}(),function(){var a=ecui,b=a.dom,c=a.ui,d=(a.util,a.inherits),e=b.create,f=a.$connect,g=a.$fastCreate,h=c.Checkbox,i=c.TreeView,j=i.prototype,k=c.CheckTree=d(i,"ui-check-tree",function(a,b){this._oSuperior=b.superior;for(var c=0,d=this._uCheckbox=g(h,a.insertBefore(e(h.types[0]),a.firstChild),this,{name:b.name,value:b.value,disabled:b.disabled}),i=this.getChildren();a=i[c++];)b=a._oSuperior,b!==!1&&(a=a._uCheckbox,b?f(a,a.setSubject,b):a.setSubject(d))}),l=k.prototype;l.$cache=function(a,b){j.$cache.call(this,a,b),this._uCheckbox.cache(!0,!0)},l.init=function(){j.init.call(this),this._uCheckbox.init()},l.getChecked=function(){for(var a,b=0,c=this.getChildren(),d=this.isChecked()?[this]:[];a=c[b++];)d=d.concat(a.getChecked());return d},l.getValue=function(){return this._uCheckbox.getValue()},l.isChecked=function(){return this._uCheckbox.isChecked()},l.setChecked=function(a){this._uCheckbox.setChecked(a)},l.disable=function(){this._uCheckbox.disable(),j.disable.call(this)},l.enable=function(){this._uCheckbox.enable(),l.enable.call(this)},l.add=function(a,b,c){var d=j.add.call(this,a,b,c);return d._oSuperior!==!1&&(d._oSuperior?d._uCheckbox.setSubject(d._oSuperior):d._uCheckbox.setSubject(this._uCheckbox)),d},l.$ready=function(){this._uCheckbox.$ready()}}(),function(){function a(a){b.hide(),this._fAction&&this._fAction.call(null,a)}var b,c=ecui,d=c.dom,e=d.create,f=c.create,g=c.dispose,h=[];c.$messagebox=function(c,d,i,j){b||(b=f("Form",{main:e("ui-form ui-messagebox"),hide:!0,parent:document.body,autoCenter:!0,closeButton:!1}),n=b.getBody(),n.innerHTML='<div class="ui-messagebox-text"></div><div class="ui-messagebox-bottom"></div>');var k,l=0,m=i.length,n=b.getBody(),o=n.lastChild;if(!b.isShow()){for(;m>h.length;)h.push(f("Button",{element:e("ui-button","","span"),parent:o}));for(g(n=n.firstChild),n.innerHTML=c;k=h[l];l++)m>l?(k.setContent(i[l].text),k.$show(),k._fAction=i[l].action,k.onclick=a,i[l].className?k.setClass(i[l].className):k.setClass(k.getPrimary())):k.$hide();b.setTitle(d||"æç¤º"),b.showModal(j)}},c.alert=function(a,b){c.$messagebox(a,"æç¤º",[{text:"ç¡®å®",className:"ui-button-g",action:b}])},c.confirm=function(a,b,d){c.$messagebox(a,"ç¡®è®¤",[{text:"ç¡®å®",className:"ui-button-g",action:b},{text:"åæ¶",action:d}])}}(),function(){function a(a,b){return w(a,b),b._eFill=a.lastChild,b}function b(a){for(var b,c=0,d=a.getParent(),e=d.getHCells(),f=a.$getElements(),g=a.getBody(),h=p(a._eFill),i=h.firstChild;e[c];)c==d._nLeft&&(i=g.firstChild),(b=f[c++])&&(i!=b?(c<=d._nLeft||c>d._nRight?h:g).insertBefore(b,i):i=i.nextSibling),c==d._nRight&&(i=a._eFill.nextSibling)}function c(a){for(var c,d=0;c=a._aLockedHeadRow[d++];)b(c);for(var c,d=0;c=a._aLockedRow[d++];)b(c)}var d=ecui,e=d.array,f=d.dom,g=d.ui,h=d.util,i=Math,j=i.max,k=RegExp,l=navigator.userAgent,m=e.indexOf,n=f.children,o=f.create,p=f.getParent,q=f.getAttribute,r=f.insertBefore,s=f.remove,t=(h.blank,h.toNumber),u=d.$fastCreate,v=d.dispose,w=d.$bind,x=d.inherits,y=/firefox\/(\d+\.\d)/i.test(l)?k.$1-0:void 0;eventNames=["mousedown","mouseover","mousemove","mouseout","mouseup","click","dblclick","focus","blur","activate","deactivate","keydown","keypress","keyup","mousewheel"],UI_CONTROL=g.Control,UI_CONTROL_CLASS=UI_CONTROL.prototype,UI_TABLE=g.Table,UI_TABLE_CLASS=UI_TABLE.prototype,UI_TABLE_ROW=UI_TABLE_CLASS.Row,UI_TABLE_ROW_CLASS=UI_TABLE_ROW.prototype;var z=g.SlowLockedTable=x(UI_TABLE,"*locked-table",null,function(b,c){var d,e=0,f=this.getType(),g=this._aHeadRows,h=g.concat(this._aRows),i=o("","position:absolute;top:0px;left:0px;overflow:hidden"),j=[],k=this._aLockedRow=[],l=this._aLockedHeadRow=[];for(this._nLeft=c.leftLock||0,this._nRight=this.getColumnCount()-(c.rightLock||0);b=h[e];)b=b.getMain(),j[e++]='<tr class="'+b.className+'" style="'+b.style.cssText+'"><td style="padding:0px;border:0px"></td></tr>';for(i.innerHTML='<div class="'+f+'-locked-head" style="position:absolute;top:0px;left:0px"><div style="white-space:nowrap;position:absolute"><table cellspacing="0"><thead>'+j.splice(0,g.length).join("")+'</thead></table></div></div><div class="'+f+'-locked-layout" style="position:absolute;left:0px;overflow:hidden"><div style="white-space:nowrap;position:absolute;top:0px;left:0px"><table cellspacing="0"><tbody>'+j.join("")+"</tbody></table></div></div>",d=this._uLockedHead=u(UI_CONTROL,i.firstChild,this),d.$setBody(b=d.getMain().lastChild.lastChild.firstChild),e=0,j=n(b);d=j[e];)l[e]=a(d,g[e++]);for(d=this._uLockedMain=u(UI_CONTROL,b=i.lastChild,this),d.$setBody(b=b.lastChild),e=0,j=n(b.lastChild.lastChild);d=j[e];)k[e]=a(d,this._aRows[e++]);r(i.firstChild,this._uHead.getOuter()),r(i.firstChild,p(this.getBody()))});UI_LOCKED_TABLE_CLASS=z.prototype,UI_LOCKED_TABLE_ROW_CLASS=(UI_LOCKED_TABLE_CLASS.Row=x(UI_TABLE_CLASS.Row)).prototype,UI_LOCKED_TABLE_ROW_CLASS.$dispose=function(){this._eFill=null,UI_TABLE_ROW_CLASS.$dispose.call(this)},UI_LOCKED_TABLE_CLASS.$cache=function(a,b){UI_TABLE_CLASS.$cache.call(this,a,b);var c=0,d=this.getRows(),e=this.getHCells(),f=e[this._nLeft].$$pos;for(this.$$paddingTop=j(this.$$paddingTop,this._uLockedHead.getBody().offsetHeight),this.$$mainWidth-=(this.$$paddingLeft=f)+(this.$$paddingRight=this._nRight<e.length?this.$$mainWidth-e[this._nRight].$$pos:0);a=e[c++];)a.$$pos-=f;for(c=0,f=0;a=d[c++];)a.getCell(this._nLeft).cache(!1,!0),a.$$pos=f,f+=j(a.getHeight(),a._eFill.offsetHeight);f&&(this.$$mainHeight=f,this._bCreated||(this.$$mainHeight+=this.$$paddingTop)),this._uLockedHead.cache(!1,!0),this._uLockedMain.cache(!1,!0)},UI_LOCKED_TABLE_CLASS.$pagescroll=function(){UI_TABLE_CLASS.$pagescroll.call(this),this._uVScrollbar||(this._uLockedHead.getOuter().style.top=this._uHead.getOuter().style.top)},UI_LOCKED_TABLE_CLASS.$resize=function(){var a=this.getMain().style;a.paddingLeft=a.paddingRight="",this.$$paddingLeft=this.$$paddingRight=0,UI_TABLE_CLASS.$resize.call(this)},UI_LOCKED_TABLE_CLASS.$scroll=function(){UI_TABLE_CLASS.$scroll.call(this),this._uLockedMain.getBody().style.top=this.getBody().style.top},UI_LOCKED_TABLE_CLASS.$setSize=function(a,b){var c=this.getMain().style,d=0,e=p(this.getBody()),f=this._uLockedHead,g=(this._uLockedMain,p(p(f.getBody())).style);c.paddingLeft=this.$$paddingLeft+"px",c.paddingRight=this.$$paddingRight+"px",UI_TABLE_CLASS.$setSize.call(this,a,b),c=this._uHead.getWidth()+this.$$paddingLeft+this.$$paddingRight,(0>c||isNaN(c))&&(c=0),f.$setSize(c,this.$$paddingTop),g.height=this.$$paddingTop+"px",this._uLockedMain.$setSize(c,t(e.style.height)),g.width=this._uLockedMain.getBody().lastChild.style.width=c+"px",this._uLockedMain.getOuter().style.top=this.$$paddingTop+"px",this._uHead.getOuter().style.left=this.$$paddingLeft+"px",a=e.style.width;var h,i=this._aLockedHeadRow;for(b=this.$$paddingTop/i.length,d=0;c=i[d];d++)c._eFill.style.width=a,c._eFill.style.height=b+"px",c=c.getCell(this._nLeft),c&&(h=y?0:c.$getBasicHeight(),isNaN(h)&&(h=0),c=c.getOuter(),g=q(c,"rowSpan")||0,g&&(g=parseInt(g,10)),c.style.height=j(g*b-h,0)+"px");for(i=this._aLockedRow,d=0;c=i[d];d++)c._eFill.style.width=a},UI_LOCKED_TABLE_CLASS.addColumn=function(a,b){return b>=0&&(b<this._nLeft&&this._nLeft++,b<this._nRight&&this._nRight++),UI_TABLE_CLASS.addColumn.call(this,a,b)},UI_LOCKED_TABLE_CLASS.removeRow=function(a){var b,c=this._aRows[a],d=c._eFill.parentNode;c&&(c.hide(),b=c.getOuter(),v(c),s(b,!0),s(d,!0),this._aRows.splice(a,1),this._aLockedRow.splice(a,1),this.repaint())},UI_LOCKED_TABLE_CLASS.addRow=function(c,d){var e=UI_TABLE_CLASS.addRow.call(this,c,d),d=m(this.getRows(),e),f=this._aLockedRow[d],g=e.getMain(),h=o();return h.innerHTML='<table cellspacing="0"><tbody><tr class="'+g.className+'" style="'+g.style.cssText+'"><td style="padding:0px;border:0px"></td></tr></tbody></table>',h=a(g=h.lastChild.lastChild.lastChild,e),f=f?f._eFill.parentNode:null,this._uLockedMain.getBody().lastChild.lastChild.insertBefore(g,f),this._aLockedRow.splice(d,0,h),b(h),this.repaint(),e},UI_LOCKED_TABLE_CLASS.init=function(){c(this),UI_TABLE_CLASS.init.call(this)},UI_LOCKED_TABLE_CLASS.removeColumn=function(a){UI_TABLE_CLASS.removeColumn.call(this,a),a>=0&&(a<this._nLeft&&this._nLeft--,a<this._nRight&&this._nRight--)},function(){function a(a){UI_LOCKED_TABLE_ROW_CLASS[a]=function(b){UI_CONTROL_CLASS[a].call(this,b),p(this._eFill).className=this.getMain().className}}for(var b=0;11>b;)a("$"+eventNames[b++])}()}(),function(){function a(a,b){var c,d=new Date,e=null,f=[d.getFullYear(),d.getMonth(),d.getDate()],g={y:0,M:1,d:2};return/^(\d+)([yMd])$/.test(a)?(e=e||{},c=f.slice(),c[g[k.$2]]-=parseInt(k.$1,10),e.begin=new Date(c[0],c[1],c[2])):"[object String]"==Object.prototype.toString.call(a)&&(e=e||{},e.begin=new Date(a)),/^(\d+)([yMd])$/.test(b)?(e=e||{},c=f.slice(),c[g[k.$2]]+=parseInt(k.$1,10),e.end=new Date(c[0],c[1],c[2])):"[object String]"==Object.prototype.toString.call(b)&&(e=e||{},e.end=new Date(b)),e}function b(a){var b=a._eText;""==b.innerHTML?(a._uCancel.hide(),a._bTip&&(b.innerHTML=M)):a._uCancel.show()}function c(a,b){var c=a._uMonthView,d=a._uMonthSlt.getValue(),e=a._uYearSlt.getValue();(c.getMonth()!=d||c.getYear()!=e)&&c.setDate(e,d),a._oDateSel&&c.getMonth()==a._oDateSel.getMonth()+1&&c.getYear()==a._oDateSel.getFullYear()&&(b=a._oDateSel.getDate()),c.setDay(b)}function d(a){var b=a._eText;""==b.innerHTML?(a._uCancel.hide(),a._bTip&&(b.innerHTML=UI_MULTI_CALENDAR_STR_DEFAULT)):a._uCancel.show()}var e=ecui,f=e.array,g=e.dom,h=e.ui,i=e.string,j=e.util,k=RegExp,l=document,m=(f.push,g.children),n=g.create,o=(g.getParent,g.getPosition),p=g.moveElements,q=(g.setText,i.formatDate),r=j.getView,s=e.$fastCreate,t=e.inherits,u=e.triggerEvent,v=e.setFocused,w=h.Control,x=w.prototype,y=h.Button,z=y.prototype,A=h.InputControl,B=A.prototype,C=h.Select,D=h.MonthView;D.Cell;var E=h.Calendar=t(A,"ui-calendar",function(a,b){b.hidden=!0},function(b,c){var d,e,f,g=n(),h=this.getTypes()[0];g.innerHTML='<div class="'+h+'-text"></div><div class="'+h+'-cancel"></div><div class="'+h+'-button"></div>'+'<div class="'+h+'-layer" style="position:absolute;display:none"></div>',d=m(g),this._bTip=c.tip!==!1,c.date?(e=c.date.split("-"),this._oDate=new Date(e[0],parseInt(e[1],10)-1,e[2])):this._oDate=c.date===!1?null:new Date,f=a(c.start,c.end),this._eText=d[0],this._uCancel=s(this.Cancel,d[1],this),this._uButton=s(w,d[2],this),l.body.appendChild(d[3]),this._uLayer=s(this.Layer,d[3],this,{date:this._oDate,range:f}),p(g,b,!0)}),F=E.prototype,G=(F.Cancel=t(w)).prototype,H=F.Layer=t(w,"ui-calendar-layer",null,function(a,b){var c,d,e=[],f=this.getTypes()[0],g=this.Button,h=this.Select,i=this.MonthView,j=(b.date,(new Date).getFullYear());for(e.push('<div class="'+f+'-buttons"><div class="'+f+"-btn-prv"+y.TYPES+'"></div><select class="'+f+"-slt-year"+C.TYPES+'">'),d=j-5;j+5>d;d++)e.push('<option value="'+d+'">'+d+"</option>");for(e.push('</select><select class="'+f+"-slt-month"+C.TYPES+'">'),d=1;12>=d;d++)e.push('<option value="'+d+'">'+(10>d?"0":"")+d+"</option>");e.push('</select><div class="'+f+"-btn-nxt"+y.TYPES+'"></div></div>'),e.push('<div class="'+f+"-month-view"+D.TYPES+'"></div>'),a.innerHTML=e.join(""),a=m(a),c=m(a[0]),this._uPrvBtn=s(g,c[0],this),this._uPrvBtn._nStep=-1,this._uYearSlt=s(h,c[1],this),this._uMonthSlt=s(h,c[2],this),this._uNxtBtn=s(g,c[3],this),this._uNxtBtn._nStep=1,a=a[1],this._sMode=b.mode,this._uMonthView=s(i,a,this,{range:b.range,mode:b.mode})}),I=H.prototype,J=(I.Button=t(y,null)).prototype,K=(I.Select=t(C,null)).prototype,L=(I.MonthView=t(D,null)).prototype,M='<span class="ui-calendar-default">è¯·éæ©ä¸ä¸ªæ¥æ</span>',N="yyyy-MM-dd";F.getDate=function(){return this._oDate},F.setDate=function(a){var c=(this._uLayer,null!=a?q(a,N):"");this._uLayer.isShow()&&this._uLayer.hide(),this._eText.innerHTML=c,this.setValue(c),this._oDate=a,b(this)},F.$activate=function(a){var b,c=this._uLayer,d=o(this.getOuter()),e=d.top+this.getHeight();B.$activate.call(this,a),c.isShow()||(c.setDate(this.getDate()),c.show(),b=c.getHeight(),c.setPosition(d.left,e+b<=r().bottom?e:d.top-b),v(c))},F.$cache=function(a,b){B.$cache.call(this,a,b),this._uButton.cache(!1,!0),this._uLayer.cache(!0,!0)},F.init=function(){B.init.call(this),this.setDate(this._oDate),this._uLayer.init()},F.clear=function(){this.setDate(null)},G.$click=function(){var a=this.getParent();a._uLayer,x.$click.call(this),a.setDate(null)},G.$activate=z.$activate,I.$blur=function(){this.hide()},I.setDate=function(a,b){var d=this._uMonthSlt,e=this._uYearSlt,f=null!=a?a.getFullYear():(new Date).getFullYear(),g=null!=a?a.getMonth()+1:(new Date).getMonth()+1;b||(this._oDateSel=a),d.setValue(g),e.setValue(f),c(this,b?null:a?a.getDate():null)},I.getDate=function(){var a=this._uMonthView;return new Date(a.getYear(),a.getMonth()-1)},I.$cache=function(a,b){this._uPrvBtn.cache(!0,!0),this._uNxtBtn.cache(!0,!0),this._uMonthSlt.cache(!0,!0),this._uYearSlt.cache(!0,!0),this._uMonthView.cache(!0,!0),x.$cache.call(this,a,b)},I.init=function(){x.init.call(this),this._uMonthSlt.init(),this._uYearSlt.init(),this._uMonthView.init()},I.ondateclick=function(a,b){var c=this.getParent();c.getDate&&c.getDate().getTime()==b.getTime()||!u(c,"change",null,[b])||c.setDate(b),this.hide()},K.onchange=function(){var a=this.getParent();c(a),u(a,"viewchange",null,[a.getDate().getFullYear(),a.getDate().getMonth()+1])},J.$click=function(){var a,b=this._nStep,c=this.getParent(),d=c.getDate();a=new Date(d.getFullYear(),d.getMonth()+b,1),c.setDate(a,!0),u(c,"viewchange",null,[a.getFullYear(),a.getMonth()+1])},L.ondateclick=function(a,b){u(this.getParent(),"dateclick",a,[b])};var O=h.MultiCalendar=t(E,"ui-multi-calendar",function(a,b){b.hidden=!0},function(a,b){var c,d=n();d.innerHTML='<input type="hidden" name="'+(b.beginname?b.beginname:"beginDate")+'" />'+'<input type="hidden" name="'+(b.endname?b.endname:"endDate")+'" />',b.bdate&&(c=b.bdate.split("-"),this._oBegin=new Date(c[0],parseInt(c[1],10)-1,c[2])),b.edate&&(c=b.edate.split("-"),this._oEnd=new Date(c[0],parseInt(c[1],10)-1,c[2])),c=m(d),this._eBeginInput=c[0],this._eEndInput=c[1],p(d,a,!0)}),P=O.prototype,Q=P.Layer=t(w,"ui-multi-calendar-layer",null,function(a,b){var c=this.getTypes()[0],d=[],e=b.range||{};
d.push('<div class="'+c+'-cal-area"><div class="'+c+'-text"><strong>èµ·å§æ¶é´ï¼</strong><span></span></div><div class="'+H.TYPES+'"></div></div>'),d.push('<div class="'+c+'-cal-area"><div class="'+c+'-text"><strong>ç»ææ¶é´ï¼</strong><span></span></div><div class="'+H.TYPES+'"></div></div>'),d.push('<div class="'+c+'-buttons"><div class="ui-button-g'+y.TYPES+'">ç¡®å®</div><div class="'+y.TYPES+'">åæ¶</div></div>'),a.innerHTML=d.join(""),a=m(a),this._eBeginText=a[0].firstChild.lastChild,this._eEndText=a[1].firstChild.lastChild,this._uBeginCal=s(this.Cal,a[0].lastChild,this,{range:e}),this._uBeginCal._sType="begin",this._uEndCal=s(this.Cal,a[1].lastChild,this,{range:e}),this._uEndCal._sType="end",this._uSubmitBtn=s(this.Button,a[2].firstChild,this),this._uSubmitBtn._sType="submit",this._uCancelBtn=s(this.Button,a[2].lastChild,this),this._uCancelBtn._sType="cancel"}),R=Q.prototype;UI_MULTI_CALENDAR_LAY_CAL_CLASS=(R.Cal=t(H)).prototype,UI_MULTI_CALENDAR_LAY_BUTTON_CLASS=(R.Button=t(y)).prototype,UI_MULTI_CALENDAR_STR_DEFAULT='<span class="ui-multi-calendar-default">è¯·éæ©æ¶é´èå´</span>',P.init=function(){B.init.call(this),this.setDate({begin:this._oBegin,end:this._oEnd}),this._uLayer.init()},P.setDate=function(a){var b,c,e=[];null==a&&(a={begin:null,end:null}),b=a.begin?q(a.begin,N):"",c=a.end?q(a.end,N):"",this._oBegin=a.begin,this._oEnd=a.end,this._eBeginInput.value=b,this._eEndInput.value=c,this._oBegin&&e.push(b),this._oEnd&&e.push(c),1==e.length?(e.push(this._oEnd?"ä¹å":"ä¹å"),e=e.join("")):e=2==e.length?e.join("è³"):"",this._eText.innerHTML=e,d(this)},P.getDate=function(){return{begin:this._oBegin,end:this._oEnd}},R.setDate=function(a){this._oBeginDate=a.begin,this._oEndDate=a.end,this._eBeginText.innerHTML=a.begin?q(a.begin,N):"",this._eEndText.innerHTML=a.end?q(a.end,N):"",this._uBeginCal.setDate(a.begin),this._uBeginCal.setRange(void 0,a.end),this._uEndCal.setDate(a.end),this._uEndCal.setRange(a.begin)},R.$blur=function(){x.$blur.call(this),this.hide()},R.init=function(){x.init.call(this),this._uBeginCal.init(),this._uEndCal.init()},R.ondateset=function(){var a=this.getParent(),b=this._oBeginDate,c=this._oEndDate;u(a,"dateset",[b,c])&&a.setDate({begin:b,end:c}),this.hide()},R.$setDate=function(a,b){var c=b.charAt(0).toUpperCase()+b.substring(1);this["_e"+c+"Text"].innerHTML=q(a,N),this["_o"+c+"Date"]=a,"begin"==b?this._uEndCal.setRange(a):this._uBeginCal.setRange(void 0,a)},UI_MULTI_CALENDAR_LAY_CAL_CLASS.$blur=function(){x.$blur.call(this)},UI_MULTI_CALENDAR_LAY_CAL_CLASS.ondateclick=function(a,b){var c=this.getParent();this._oDateSel=b,c.$setDate(b,this._sType)},UI_MULTI_CALENDAR_LAY_CAL_CLASS.setRange=function(a,b){this._uMonthView.setRange(a,b)},UI_MULTI_CALENDAR_LAY_BUTTON_CLASS.$click=function(){var a=this.getParent();z.$click.call(this),"submit"==this._sType?u(a,"dateset"):a.hide()}}(),function(){var a=ecui,b=a.ui,c=a.inherits,d=b.Select,e=d.prototype,f=b.Combox=c(d,"*ui-combox",function(){this.$getSection("Text").getOuter().style.display="none"},function(a,b){b.hidden=!1}),g=f.prototype;g.$setSize=function(a,b){e.$setSize.call(this,a,b),this.getInput().style.width=this.$getSection("Text").getWidth()+"px"}}(),function(){function a(){var a;return s||(a=document.body.appendChild(h(v.TYPES)),s=g(v,a),s.cache(),s.init()),s}var b=ecui,c=(b.array,b.dom),d=b.ui,e=b.util,f=b.string,g=b.$fastCreate,h=(b.setFocused,c.create),i=c.children,j=(c.moveElements,c.getPosition),k=b.inherits,l=(b.isContentBox,b.getStatus,e.getView),m=(b.triggerEvent,f.trim),n=d.Control,p=n.prototype,q=500,r=200,s=(b.REPAINT,null),t=d.Tip=k(n,"ui-tip",function(a,b){b.message=m(a.innerHTML)||b.message,a.innerHTML=""},function(a,b){this._sTarget=b.target,this._sMessage=b.message,this._oTimer=null}),u=t.prototype,v=u.Layer=k(n,"ui-tip-layer",function(a){a.appendChild(h(this.getTypes()+"-corner")),a.appendChild(h())},function(a){a=i(a),this._eCorner=a[0],this.$setBody(a[1])}),w=v.prototype;u.$mouseover=function(){var a=this;p.$mouseover.call(this),clearTimeout(this._oTimer),this._bShow||(this._oTimer=setTimeout(function(){a.open()},q))},u.$mouseout=function(){var a=this;p.$mouseout.call(this),clearTimeout(this._oTimer),this._bShow&&(this._oTimer=setTimeout(function(){a.close()},r))},u.$getTarget=function(a){return document.getElementById(a)},u.setTarget=function(a){this._sTarget=a},u.open=function(){var b=a();this._sTarget?(o=this.$getTarget(this._sTarget),o&&(b.getBody().innerHTML="[object String]"==Object.prototype.toString.call(o)?o:o.innerHTML)):this._sMessage&&b.setContent(this._sMessage),b.show(this),this._bShow=!0},u.close=function(){a().hide(),this._bShow=!1},w.show=function(a){var b=j(a.getOuter()),c=this.getTypes()[0],d=l(),e=13,f=a.getWidth(),g=a.getHeight(),h=9,i=[];a&&(this._uHost=a),p.show.call(this),this.resize(),b.left+this.getWidth()>d.right?(b.left=b.left+f-this.getWidth()+h,i.push("-right")):(b.left=b.left-h,i.push("-left")),b.top-e-this.getHeight()<d.top&&b.top+g+e+this.getHeight()<d.bottom?(b.top+=g+e,i.push("-bottom")):(b.top-=e+this.getHeight(),i.push("-top")),this._eCorner.className=c+"-corner "+c+"-corner"+i.join(""),this.setPosition(b.left,b.top)},w.$mouseover=function(){p.$mouseover.call(this),this._uHost.$mouseover()},w.$mouseout=function(){p.$mouseout.call(this),this._uHost.$mouseout()},w.$resize=function(){var a=this._eMain,b=a.style;b.width=this._sWidth,b.height=this._sHeight,this.repaint()}}(),function(){function a(b,c){var d,e,f;for(d=0;e=c[d];d++)f=e.text,e=s({},e),e.notRoot=!0,f=b.add(f,null,e),e.children&&e.children.length>0&&a(f,e.children)}var b=ecui,c=b.array,d=b.dom,e=b.ui,f=b.util,g=b.string,h=b.$fastCreate,i=b.inherits,j=b.getMouseX,k=b.triggerEvent,l=b.dispose,m=(b.getOptions,d.create),n=d.getStyle,o=(d.first,d.moveElements,d.getPosition),p=(d.setStyle,d.addClass),q=d.ieVersion,r=f.toNumber,s=f.extend,t=(f.blank,xutil.graphic.unionBoundBox),u=(c.indexOf,g.trim,e.Control),v=u.prototype,w=e.TreeView,x=w.prototype,y=e.PlFloatMenu=i(w,"ui-float-menu",null,function(a,b){var c,d=this.getTypes()[0];b.url&&(this._sUrl=b.url,delete b.url,p(a,d+"-pointer")),b.value&&(this._sValue=b.value,delete b.value),b.text&&(this._sText=b.text),b.isNew&&(a.appendChild(m(d+"-icon-new")),delete b.isNew),b.prompt&&a.setAttribute("title",b.prompt),b.floatTree&&(this._oFloaterDatasource=b.floatTree,a.appendChild(m(d+"-icon-arror")),delete b.floatTree),b.collapsed=!1,this._bRootHide=!0,b.notRoot||(document.body.appendChild(c=m("ui-float-menu-floater","display:none")),this._uFloater=h(this.Floater,c,this,{}),b.notRoot=!0)}),z=y.prototype,A=z.Floater=i(u,"ui-float-menu-floater",null,function(){this.getTypes()[0],this._aLineList=[]}),B=A.prototype,C=(B.Line=i(u,"ui-float-menu-floater-line")).prototype;z.select=function(a){var b,c,d,e,f,g,h=this.getRoot();if(null===a)return h.setSelected(null),void 0;if(c=(a=String(a)).indexOf(":"),c>=0?(f=a.slice(0,c),g=a.slice(c+1,a.length)||null):f=a,this._sValue&&this._sValue==f){for(h.setSelected(this),b=this;(b=b.getParent())&&b instanceof y;)b.expand();h._sFloaterValue=g,h._uFloater.select(g)}else for(d=0;e=this._aChildren[d];d++)e.select(a)},z.setSelected=function(a){var b;if(this==this.getRoot()){if(this._cSelected!=a){if(this._cSelected)for(this._cSelected.alterClass("-selected"),b=this._cSelected;(b=b.getParent())&&b instanceof y;)b.alterClass("-half-selected");if(a)for(a.alterClass("+selected"),b=a;(b=b.getParent())&&b instanceof y;)b.alterClass("+half-selected");this._cSelected=a}a&&this._bExpandSelected&&a.expand()}},z.getSelected=function(){return this._cSelected?this._cSelected.$wrapItemData():null},z.getBoundBox=function(){return t.apply(this,this.$getAllBounds())},z.$getAllBounds=function(a){var b,c,d;if(a=a||[],this.isShow()&&(d=o(this.getOuter()),d.width=this.getWidth(),d.height=this.getHeight(),a.push(d)),this._aChildren)for(b=0;c=this._aChildren[b];b++)a=c.$getAllBounds(a);return a},z.setData=function(b){var c,d;if(this.select(null),this.getRoot()===this){for(d=0;c=this._aChildren[d];d++)l(c);this._aChildren=[],this._eChildren.innerHTML="",a(this,b),this.init()}},z.init=function(){var a,b=this._eMain;x.init.call(this),this._aChildren&&this._aChildren.length>0&&(a=m(this.getPrimary()+"-icon"),b.insertBefore(a,b.firstChild)),this.collapse(),this.getRoot()==this&&(this._bRootHide&&(this.getOuter().style.display="none"),this.expand())},z.$wrapItemData=function(){return{menuId:this._sValue,menuName:this._sText,menuUrl:this._sUrl}},z.$floaterselect=function(a,b){this==this.getRoot()&&(this.setSelected(b||null),this._uFloater.hide(),this._sFloaterValue=a.value,k(this,"change",null,[{menuId:a.value,menuName:a.text,menuUrl:a.url}]))},z.$mousemove=function(a){var b=this.getRoot(),c=b._uFloater;this!=b&&(b._uHoveredMenu!=this&&(b._uHoveredMenu&&b._uHoveredMenu.alterClass("-hover"),this.alterClass("+hover"),b._uHoveredMenu=this),c.getMenuShowMe()!=this&&(this._oFloaterDatasource?(c.setData(this,this._oFloaterDatasource,b._sFloaterValue),c.show(this)):c.getMenuShowMe()&&c.hide()),a.exit())},z.$mouseover=function(a){a.exit()},z.$mouseout=function(){this.getRoot()==this&&(this.getRoot()._uHoveredMenu&&(this.getRoot()._uHoveredMenu.alterClass("-hover"),this.getRoot()._uHoveredMenu=null),this.getRoot()._uFloater&&this.getRoot()._uFloater.hide())},z.$click=function(a){if(a.getControl()==this){v.$click.call(this,a);var b=this.getRoot(),c=!1;this._aChildren.length>0&&(!this._sUrl||j(this)<=r(n(this.getBody(),"paddingLeft")))&&(c=!0,a.exit(),this[a=this.isCollapsed()?"expand":"collapse"](),k(this,a)),!c&&this._sUrl&&(b.setSelected(this),k(b,"change",this.$wrapItemData()))}},B.setData=function(a,b,c){var d,e,f,g,b=b||[];for(this.hide(),this.clear(),this._uMenuHovered=a,d=0;e=b[d];d++)g=e.lineType||C.DEFAULT_KEY,this.getBody().appendChild(f=m("ui-float-menu-floater-line")),f=C.create(g,f,this,{datasource:e}),this._aLineList.push(f),d<b.length-1&&f.alterClass("+separater");this.select(c)},B.getMenuShowMe=function(){return this._uMenuShowMe},B.show=function(a){this._uMenuShowMe=a,v.show.call(this),this.$layout()},B.hide=function(){this._uMenuShowMe=null,v.hide.call(this)},B.$layout=function(){var a,b,c=this.getParent(),d=this._uMenuHovered,e=(c.getBoundBox(),o(d.getOuter())),f=d.getWidth();this.getHeight(),a=e.left+f,b=e.top-2,this.setPosition(a-(q?1:2),b)},B.select=function(a){var b,c;for(b=0;c=this._aLineList[b];b++)c.select(a)},B.clear=function(){var a,b;for(a=0;b=this._aLineList[a];a++)l(b);this._aLineList=[],this._uMenuHovered=null,this.getBody().innerHTML=""},B.$dispose=function(){this.getBody().innerHTML="",v.$dispose.call(this)},B.$floaterlineselect=function(a,b){var c,d;for(c=0;d=this._aLineList[c];c++)d!==a&&d.select(null);k(this.getParent(),"floaterselect",null,[b,this._uMenuHovered])},C.lineControlTypeSet={},C.DEFAULT_KEY="",C.registerLineControlType=function(a,b){C.lineControlTypeSet[a]=b},C.create=function(a,b,c,d){return h(C.lineControlTypeSet[a],b,c,d)},C.select=function(){},C.$dispose=function(){this.getBody().innerHTML="",v.$dispose.call(this)}}(),function(){var a=ecui,b=a.array,c=a.dom,d=a.ui,e=a.util,f=a.string,g=a.$fastCreate,h=a.inherits,i=(a.getMouseX,a.triggerEvent),j=(a.dispose,a.getOptions,c.create),k=(c.getStyle,c.first,c.moveElements,e.toNumber,e.extend),l=(e.blank,b.indexOf,f.trim),m=d.Control,n=m.prototype,o=d.Button,p=d.PlFloatMenu.prototype.Floater.prototype.Line,q=p.prototype,r=h(p,"ui-float-menu-floater-radio-line",null,function(a,b){var c,d,e=(this.getTypes()[0],b.datasource),f=this,h=e.children||[];this._sUrl=e.url,this._sText=e.text,this._sValue=e.value,this._aBtnList=[];for(var c,l=j(),d=0;c=h[d];d++)l.innerHTML='<div class="ui-button-g ui-button q-btn-table">'+c.text+"</div>",a.appendChild(l.firstChild),this._aBtnList.push(g(o,a.lastChild,this,{})),this._aBtnList[this._aBtnList.length-1].onclick=function(a){return function(){i(f,"itemselect",null,[a])}}(k({},c))}),s=r.prototype;q.registerLineControlType(q.DEFAULT_KEY,r),q.select=function(a){var b,c,d;if(null!==a&&void 0!==a&&""!==(a=l(a))){if(b=a.split(":"),c=b[0],d=b[1],c!=this._sValue)return;(void 0===d||""===l(d))&&(d=c),this.selectItem(d)}else this.selectItem(null)},s.selectItem=function(){},s.$itemselect=function(a){i(this.getParent(),"floaterlineselect",null,[this,{value:this._sValue,text:this._sText,url:a.url}])},s.$dispose=function(){this.getBody().innerHTML="",n.$dispose.call(this)}}(),function(){var a=ecui,b=a.dom,c=a.ui,d=a.inherits,e=b.create,f=b.moveElements,g=c.Button,h=c.PlButton=d(g,"ui-button",function(a,b){var c=e(),d=this.getTypes()[0];f(a,c,!0),a.innerHTML='<span class="'+d+'-inner"></span>',f(c,a.firstChild,!0),b.icon&&(c=e(d+"-icon","","span"),a.appendChild(c))}),i=h.prototype;i.setInner=function(a){this.getBody().firstChild.innerHTML=a,this.$resize()},i.hideForce=function(){this.$hide()},i.showForce=function(){this.$show()}}(),function(){var a=ecui,b=(a.array,a.dom),c=a.ui,d=a.util,e=(a.string,a.$fastCreate,a.inherits),f=(a.triggerEvent,a.dispose,d.blank),g=b.create,h=(b.getStyle,d.extend,c.Control);h.prototype;var i=c.Container=e(h,"ui-container",function(){g(),this.getTypes()[0]}),j=i.prototype;j.setSize=f,j.createSubControl=function(a){g()},j.removeSubControl=function(){},j.createSubDom=function(){var a=g();return this.getBody().appendChild(a),a}}(),function(){var a=ecui.array,b=ecui.dom,c=ecui.ui,d=ecui.util,e=ecui.string,f=Math.max,g=a.indexOf,h=ecui.$fastCreate,i=ecui.inherits,j=ecui.triggerEvent;ecui.dispose,b.moveElements;var k=b.remove,l=e.encodeHTML,m=xutil.string.template,n=xutil.string.textLength,o=xutil.string.textSubstr;d.blank;var p=xutil.dom.q,q=b.create;b.getStyle,d.extend,c.Control;var r=c.Tab,s=r.prototype;c.Items;var t=c.Button,u=c.TabContainer=i(r),v=u.prototype,w=(v.Item=i(s.Item,null,null,function(a,b){this.getType(),a.innerHTML=m(y,{currClass:this._sClass,content:a.innerHTML,close:b.canClose?z:""}),this._oMemo=b.memo,b.canClose&&(this._uCloseBtn=h(this.CloseBtn,p("q-close-btn",a)[0],this,{primary:"ui-tab-close-btn"}))})).prototype,x=(w.CloseBtn=i(t)).prototype;(v.Button=i(s.Button,null,function(a){var b=this.getType();a.appendChild(q(b+"-icon"))})).prototype;var y=['<div class="#{currClass}-ledge"></div>','<div class="#{currClass}-lledge"></div>','<div class="#{currClass}-inner">','<span class="#{currClass}-text">#{content}</span>',"#{close}","</div>",'<div class="#{currClass}-lledge"></div>','<div class="#{currClass}-ledge"></div>'].join(""),z=['<span class="ui-tab-close-btn q-close-btn">','<span class="ui-tab-close-btn-icon"></span>',"</span>"].join("");v.$dispose=function(){u.superClass.$dispose.call(this)},v.$alterItems=function(){this.cache(!0,!0),u.superClass.$alterItems.call(this)},v.addTab=function(a,b){b=b||{},b.canClose=b.canClose||!1;var c=b.tabEl;c||(c=q(),this.getBody().appendChild(c)),"LABEL"!=c.tagName&&(c.innerHTML="<label>"+b.title+"</label>");var d=this.add(c,b.index,b);return b.contentEl&&d.setContainer(b.contentEl),"[object Function]"==Object.prototype.toString.call(a)&&(a=a(d.getContainer(),this,d,b)),{tabItem:d,tabContent:a}},v.selectTab=function(a){this.setSelected(a)},v.$closeTab=function(a){this.remove(a)},w.getMemo=function(){return this._oMemo},w.setTitle=function(a){var b=p(this._sClass+"-text",this.getOuter())[0],c=this.getParent();if(b){var d,e=l(a);d=n(a)>36?l(o(a,0,36)+"..."):e,b.innerHTML='<label title="'+e+'">'+d+"</label>",c.$alterItems();var h=c.getBody().style,i=parseInt(h.left),j=g(c.getItems(),this),k=c._aPosition[j]-(c._uPrev.isShow()?0:c._uPrev.getWidth());i+c.getBodyWidth()+k-this.getWidth()<0&&(h.left=f(c._aPosition[j],c.getBodyWidth()-c.$$titleWidth-c._uNext.getWidth())+"px")}},w.setContainer=function(a){var b=this.getParent();this._eContainer&&k(this._eContainer),(this._eContainer=a)&&("none"==(this._sContainer=a.style.display)&&(this._sContainer=""),b&&(a.style.display=b._cSelected==this?this._sContainer:"none"))},w.$click=function(){var a=this.getParent(),b=a.getSelected();j(a,"beforechange",null,[this,b])!==!1&&(v.Item.superClass.$click.apply(this,arguments),j(a,"afterchange",null,[this,b]))},x.$click=function(a){var b=this.getParent(),c=b.getParent();j(c,"tabclose",null,[b])!==!1&&(c.$closeTab(b),c.$alterItems()),a.stopPropagation()}}(),function(){function a(a,b,c){c=null!=c?new Date(c):new Date;var d,e={},f=[c.getFullYear(),c.getMonth(),c.getDate()],g={y:0,M:1,d:2};return/^([-+]?)(\d+)([yMd])$/.test(a)?(d=f.slice(),o.$1&&"+"!=o.$1?d[g[o.$3]]-=parseInt(o.$2,10):d[g[o.$3]]+=parseInt(o.$2,10),e.begin=new Date(d[0],d[1],d[2])):Object.prototype.toString.call(a)in{"[object String]":1,"[object Date]":1}&&(e.begin=new Date(a)),/^([-+]?)(\d+)([yMd])$/.test(b)?(d=f.slice(),o.$1&&"+"!=o.$1?d[g[o.$3]]-=parseInt(o.$2,10):d[g[o.$3]]+=parseInt(o.$2,10),e.end=new Date(d[0],d[1],d[2])):Object.prototype.toString.call(b)in{"[object String]":1,"[object Date]":1}&&(e.end=new Date(b)),e?e:{}}function b(a){var b=a.getDay(),c=-((b+6)%7),d=(7-b)%7;return{monday:new Date(a.getTime()+c*S),sunday:new Date(a.getTime()+d*S)}}function c(a,b,c,d,e,f){return a==d?b==e?c==f?0:c>f?1:-1:b>e?1:-1:a>d?1:-1}function d(a,b){return c(a.getFullYear(),a.getMonth(),a.getDate(),b.getFullYear(),b.getMonth(),b.getDate())}function e(a){var b;return a===!1?b=null:"[object Date]"==Object.prototype.toString.call(a)?b=a:"[object String]"==Object.prototype.toString.call(a)&&(b=a.split("-"),b=new Date(b[0],parseInt(b[1],10)-1,b[2])),b}function f(a,b){return b?a?a.getTime()>b.getTime()?b:a:b:a}function g(a,b){return b?a?a.getTime()>b.getTime()?a:b:b:a}var h=ecui,i=h.array,j=h.dom,k=h.ui,l=h.string,m=h.util,n=Date,o=RegExp,p=document,q=j.children,r=j.create;j.getParent;var s=j.getPosition,t=j.moveElements;j.setText;var u=j.addClass,v=l.formatDate;l.getByteLength,l.encodeHTML,l.sliceByte;var w=i.indexOf,x=m.getView,y=m.blank,z=h.$fastCreate,A=h.inherits,B=h.triggerEvent,C=h.setFocused,D=k.Control;D.prototype;var E=k.InputControl,F=E.prototype,G=k.Panel;G.prototype;var H=k.Calendar.prototype,I=H.Layer.prototype,J=I.Select.prototype,K=k.Button;k.MonthView.prototype;var L=k.IstCalendar=A(E,"ui-calendar",function(a,b){b.hidden=!0},function(b,c){var d,f=r(),g=this.getTypes()[0];this._sMode=c.mode||"DAY",("WEEK"==this._sMode||"RANGE"==this._sMode)&&u(b,g+"-range-mode"),this._sViewMode=c.viewMode||"POP","FIX"==this._sViewMode&&u(b,g+"-fix-view"),f.innerHTML=['<span class="'+g+"-btn-prv "+g+'-btn"></span>','<span class="'+g+'-text"></span>','<span class="'+g+"-btn-nxt "+g+'-btn"></span>','<span class="'+g+"-btn-cal "+g+'-btn"></span>','<div class="'+g+'-layer" style="position:absolute;display:none"></div>'].join(""),d=q(f),this._oDate=e(c.date),"RANGE"==this._sMode&&(this._oDateEnd=e(c.dateEnd)),this._oRange=a(c.start,c.end,c.now),this._eText=d[1],c.shiftBtnDisabled&&(d[0].style.display="none"),this._uBtnPrv=z(this.Button,d[0],this,{command:"prv",icon:!0}),c.shiftBtnDisabled&&(d[2].style.display="none"),this._uBtnNxt=z(this.Button,d[2],this,{command:"nxt",icon:!0}),"FIX"==this._sViewMode&&(d[3].style.display="none"),this._uBtnCal=z(this.Button,d[3],this,{command:"cal",icon:!0}),"POP"==this._sViewMode&&p.body.appendChild(d[4]),this._uLayer=z(this.Layer,d[4],this,{date:this._oDate,range:this._oRange,mode:this._sMode}),t(f,b,!0),"FIX"==this._sViewMode&&this.$showLayer()}),M=L.prototype,N=(M.Button=A(K,null,function(a,b){var c=r(),d=this.getType();t(a,c,!0),a.innerHTML='<span class="'+d+'-inner"></span>',t(c,a.firstChild,!0),b.icon&&(c=r(d+"-icon","","span"),a.appendChild(c)),this._sCommand=b.command})).prototype,O=(M.Layer=A(H.Layer)).prototype,P=(O.MonthView=A(H.Layer.prototype.MonthView,null,function(a,b){this._sMode=b.mode,this._oCellSelSet={},this._oCellHoverSet={}})).prototype,Q=(P.Cell=A(H.Layer.prototype.MonthView.prototype.Cell)).prototype;(J.Options=A(J.Options,null,null,function(a){u(a,"ui-calendar-select-options")})).prototype;var R="yyyy-MM-dd",S=864e5,T=new Date(0);N.$click=function(a){var b=this.getParent();switch(this._sCommand){case"prv":b.go(-1,-1);break;case"nxt":b.go(1,1);break;case"cal":b.$showLayer()}a.exit()},M.$setSize=new Function,M.$showLayer=function(){var a=this._uLayer,b=s(this.getOuter()),c=b.top+this.getHeight();if(!a.isShow()&&(a.setDate(this.getDate()),a.show(),C(a),"POP"==this._sViewMode)){var d=a.getHeight();a.setPosition(b.left,c+d<=x().bottom?c:b.top-d)}},M.getMode=function(){return this._sMode},M.$flush=function(){var a=this._oDate,b=this._oRange;b.begin&&b.begin.getTime()==a.getTime()?this._uBtnPrv.disable():this._uBtnPrv.enable(),b.end&&b.end.getTime()==a.getTime()?this._uBtnNxt.disable():this._uBtnNxt.enable()},M.$click=function(a){F.$click.call(this),a.target==this._eText&&this.$showLayer()},M.$activate=function(a){var b,c=this._uLayer,d=s(this.getOuter()),e=d.top+this.getHeight();F.$activate.call(this,a),c.isShow()||(c.setDate(this.getDate(),this.getDateEnd(),null,!0),c.show(),b=c.getHeight(),c.setPosition(d.left,e+b<=x().bottom?e:d.top-b),C(c))},M.go=function(a,b){var c,d=new Date(this._oDate.getFullYear(),this._oDate.getMonth(),this._oDate.getDate()+a);"RANGE"==this._sMode&&(c=new Date(this._oDateEnd.getFullYear(),this._oDateEnd.getMonth(),this._oDateEnd.getDate()+b)),this.setDate(d,c,null,!0),B(this,"change",null,[d,c])},M.getDate=function(){return this._oDate},M.getDateEnd=function(){return this._oDateEnd},M.getWeekInfo=function(){return b(this._oDate)},M.setDate=function(a,c,d,e){this._uLayer;var h,i,j=this._oRange;j.begin&&j.begin.getTime()>a.getTime()||j.end&&j.end.getTime()<a.getTime()||("POP"==this._sViewMode&&this._uLayer.isShow()&&!d&&this._uLayer.hide(),null!=a?"WEEK"==this._sMode?(i=b(a),h=v(g(i.monday,j.begin),R)+" è³ "+v(f(i.sunday,j.end),R)):"RANGE"==this._sMode?(e&&this._sRangeSelStatus||(this._sRangeSelStatus="END"),h=v(a,R),c?h+=" è³ "+v(c,R):"POP"==this._sViewMode&&(h+=['<span class="',this.getType(),'-fake-text">'," è³ "+v(T,R),"</span>"].join(""))):h=v(a,R):h="",this._eText.innerHTML=h,this.setValue(h.replace(/\//g,"-")),this._oDate=a,"RANGE"==this._sMode&&(this._oDateEnd=c),"FIX"==this._sViewMode&&this._uLayer.setDate(a),this.$flush())},M.init=function(){F.init.call(this),this._uLayer.init(),this.setDate(this.getDate(),this.getDateEnd())},M.$cache=function(a,b){F.$cache.call(this,a,b),this._uLayer.cache(!0,!0)},M.setRange=function(a,b){var c=this._uLayer._uMonthView;c.setRange(a,b,!0)},O.ondateclick=function(a,b){var c=this.getParent();if("RANGE"==this._sMode||c.getDate()&&c.getDate().getTime()==b.getTime())if("RANGE"==this._sMode)if(this._oDateSel=null,"BEGIN"==c._sRangeSelStatus){c._sRangeSelStatus="END";var e=c.getDate(),f=b;if(e&&f&&d(e,f)>0){var g=f;f=e,e=g}c.setDate(e,f,!1,!0),B(c,"change",null,[c.getDate(),b])}else c._sRangeSelStatus="BEGIN",c.setDate(b,null,!0,!0);else this.hide();else c.setDate(b,null,null,!0),B(c,"change",null,[b])},O.hide=function(){if("FIX"!=this.getParent()._sViewMode){if(this.isShow()){var a=this.getParent();a&&B(a,"layerhide")}M.Layer.superClass.hide.apply(this,arguments)}},P.$setSelected=function(a){function b(a){a.alterClass("-selected")}function c(a){a.alterClass("+selected")}var d=this;if(this._uCellSel&&("WEEK"==this._sMode?this.$travelWeek(this._uCellSel,b):"DAY"==this._sMode&&b(this._uCellSel)),a&&("WEEK"==this._sMode?this.$travelWeek(a,c):"DAY"==this._sMode&&c(a),this._uCellSel=a),"RANGE"==this._sMode){var e=this.getParent()?this.getParent().getParent():null;if(e&&"BEGIN"==e._sRangeSelStatus){for(var f in this._oCellSelSet)b(this._oCellSelSet[f]),delete this._oCellSelSet[f];var g=this.$getCellByDate(e.getDate());g&&(this._oCellSelSet[g.index]=g.cell,c(g.cell))}else if(e&&"END"==e._sRangeSelStatus)this.$travelMonth(function(a,f,g){var h;g&&(h=d.$isCellInRange(a,e.getDate(),e.getDateEnd())),!g||!h||f in d._oCellSelSet?h&&g||!(f in d._oCellSelSet)||(delete d._oCellSelSet[f],b(a)):(d._oCellSelSet[f]=a,c(a))});else for(var f in this._oCellSelSet)delete this._oCellSelSet[f],b(this._oCellSelSet[f])}},P.$setHovered=function(a,b){function c(a){a.alterClass("+hover")}function e(a){a.alterClass("-hover")}var f=w(this._aCells,a),g=this;if(a)if("WEEK"==this._sMode)this.$travelWeek(a,b?c:e);else if("DAY"==this._sMode)b?c(a):e(a);else if("RANGE"==this._sMode){var h=this.getParent().getParent(),i=h.getDate(),j=new Date(this._nYear,this._nMonth,a._nDay);if(i&&j&&d(i,j)>0){var k=j;j=i,i=k}"BEGIN"==h._sRangeSelStatus?this.$travelMonth(function(a,d,f){var h;f&&(h=g.$isCellInRange(a,i,j)),b&&f&&h&&!(d in g._oCellHoverSet)?(g._oCellHoverSet[d]=a,c(a)):b&&f&&h||!(d in g._oCellHoverSet)||(delete g._oCellHoverSet[d],e(a))}):(this.$travelMonth(function(a,c,d){b&&d||!(c in g._oCellHoverSet)||(delete g._oCellHoverSet[c],e(a))}),b&&(this._oCellHoverSet[f]=a,c(a)))}},P.$travelWeek=function(a,b){if(a){var c=new n(this._nYear,this._nMonth,a._nDay),d=w(this._aCells,a);d-=(c.getDay()+6)%7;for(var e=0;7>e;e++)b.call(this,this._aCells[d+e])}},P.$travelMonth=function(a){for(var b,c,d=new Date(this._nYear,this._nMonth+1,0).getDate(),e=7;b=this._aCells[e];e++)c=b._nDay>0&&b._nDay<=d,a(b,e,c)},P.$getCellByDate=function(a){if(!a||this._nYear!=a.getFullYear()||this._nMonth!=a.getMonth())return null;for(var b,c=a.getDate(),d=0;b=this._aCells[d];d++)if(b._nDay==c)return{cell:b,index:d}},P.$isCellInRange=function(a,b,d){if(!a||!b||!d)return!1;var e=b&&b.getFullYear(),f=b&&b.getMonth(),g=b&&b.getDate(),h=d&&d.getFullYear(),i=d&&d.getMonth(),j=d&&d.getDate();return c(e,f,g,this._nYear,this._nMonth,a._nDay)<=0&&c(this._nYear,this._nMonth,a._nDay,h,i,j)<=0?!0:!1},Q.$mouseover=function(){var a=this.getParent(),b=w(a._aCells,this);b>=7&&a.$setHovered(this,!0)},Q.$mouseout=function(){var a=this.getParent(),b=w(a._aCells,this);b>=7&&a.$setHovered(this,!1)},J.$mousewheel=y}(),function(){function a(a){a.setClass(a.getPrimary()+(a._aChildren.length?a._bCollapsed?"-collapsed":"-expanded":""))}var b=ecui,c=b.array,d=b.ui,c=b.array,e=b.dom,f=b.string,g=b.util,h=(b.$fastCreate,b.getMouseX),i=b.inherits,j=b.getOptions,k=b.dispose,l=b.triggerEvent,m=g.extend,n=c.indexOf,m=g.extend,o=g.toNumber,p=e.getStyle,q=e.first,r=e.insertAfter,s=f.trim,t=g.blank,u=d.Control,v=u.prototype,w=d.TreeView,x=w.prototype,y=d.DataTree=i(w,"ui-data-tree",function(a,b){b.expandSelected=b.expandSelected===!0,q(a)&&"divlabel".indexOf(q(a).tagName.toLowerCase())>=0&&m(b,j(q(a))),b.value&&(b.value+=""),b.resizable=!1},function(a,b){this._aSelected=[],this._sValue=b.value,this._bHideRoot=b.hideRoot===!0,this._bSelectAble=b.selectable!==!1,this._bMultiSelect=b.multi===!0,this._bAsyn=b.asyn,this._bIsLeaf=b.isLeaf,b.asyn&&!b.isLeaf&&this._aChildren.length<=0&&(this.add("Loadding",null),this.collapse(),this._bNeedAsyn=!0)}),z=y.prototype;z.init=function(){x.init.call(this),this._bHideRoot&&this==this.getRoot()&&(this.hide(),this.expand())},z.$setParent=function(b){var c,d=this.getRoot(),e=d._aSelected,f=this.getParent();(c=n(e,this))>=0&&d.$setSelected(this,!1),this!==d&&(remove(f._aChildren,this),a(f)),v.$setParent.call(this,b),this._eChildren&&r(this._eChildren,this.getOuter())},z.getValue=function(){return this._sValue},z.getText=function(){return s(this.getContent().replace(/<[^>]+>/g,""))},z.getSelected=function(){return this==this.getRoot()?this._aSelected.slice():void 0},z.getSelectedValues=function(){var a,b,c=[];if(this==this.getRoot()){for(a=0;b=this._aSelected[a];a++)c.push(b.getValue());return this._bMultiSelect?c:c[0]}},z.setValues=function(a){var b;if(n(a,this._sValue)>=0)for(this.getRoot().$setSelected(this,!0),b=this;(b=b.getParent())&&b instanceof w;)b.isCollapsed()&&b.expand();for(var b,c=0;b=this._aChildren[c];c++)b.setValues(a)},z.getItemByValue=function(a){var b=null;this._sValue==a&&(b=this);for(var c,d=0;(c=this._aChildren[d])&&null==b;d++)b=c.getItemByValue(a);return b},z.load=function(a){var b,c,d;for(b=0;c=this._aChildren[b];b++)k(c);for(this._aChildren=[],this._eChildren.innerHTML="",b=0;c=a[b];b++)d=c.text,c=m({asyn:this._bAsyn},c),delete c.text,this.add(d,null,c).init()},z.$expand=function(a){var b=a.getRoot();a._bNeedAsyn&&(l(b,"load",null,[a.getValue(),function(b){a.load(b)}]),a._bNeedAsyn=!1)},z.$click=function(a){a.getControl()==this&&(v.$click.call(this,a),h(this)<=o(p(this.getBody(),"paddingLeft"))?this.clickEC():this.clickItem())},z.clickEC=function(){var a;this[a=this.isCollapsed()?"expand":"collapse"](),l(this.getRoot(),a,null,[this])},z.clickItem=function(){var a=null;n(this.getRoot()._aSelected,this)>=0?this._bMultiSelect&&(a=!1):a=!0,this.getRoot().setSelected(this),l(this.getRoot(),"select",null,[this,1==a]),null!==a&&l(this.getRoot(),"change",null,[this.getValue(),a])},z.getSelectedText=function(){var a,b,c=[];if(this==this.getRoot()){for(a=0;b=this._aSelected[a];a++)c.push(b.getText());return c.join(",")}},z.setSelectAble=function(a){var b,c=this.getRoot();!this.enable&&(b=n(c._aSelected,this))>=0&&c.$setSelected(this,!1),this._bSelectAble=a},z.$setSelected=function(a,b){var c,d;this==this.getRoot()&&(c=this._aSelected,d=n(c,a),b===!0?0>d&&(c.push(a),a.alterClass("+selected")):b===!1&&d>=0&&(c.splice(d,1),a.alterClass("-selected")))},z.clearSelected=function(){var a,b;if(this==this.getRoot())for(a=this._aSelected;b=a[0];)this.$setSelected(b,!1)},z.setSelected=function(a,b){var c,d;this==this.getRoot()&&a._bSelectAble&&(c=this._aSelected,d=n(c,this),(d=n(c,a))>=0?!b&&this._bMultiSelect&&this.$setSelected(a,!1):(!this._bMultiSelect&&c.length>=1&&this.$setSelected(c[0],!1),this.$setSelected(a,!0)),a&&this._bExpandSelected&&a.expand())},z.$setSize=t}(),function(){function a(a,b){var c=a.getItems();if(a._bSelectAllBtn)if(void 0===b)b=a.getSelected().length===c.length-1,c[0].$setSelected(b);else for(var d,e=0;d=c[e];e++)d.$setSelected(b)}function b(a){var b;if(a){for(var c,d=!1,e=0,f=a.getItems(),g=[];c=f[e++];)c.isSelected()&&(c._bSelectAllBtn?d=!0:g.push(c._sTip));b='<span title="'+g.join(",")+'">',a._sTextAll&&(0!=g.length||d)&&g.length==f.length+(a._bSelectAllBtn?-1:0)?g=a._sTextAll:0==g.length&&a._sTextNone?g=a._sTextNone:(g=g.join(","),a._nTextLen&&g.length>a._nTextLen&&(g=g.substring(0,a._nTextLen)+"...")),a._bTip&&(g=b+g+"</span>"),a.$getSection("Text").setContent(g)}}var c=ecui,d=c.array,e=c.dom,f=c.ui,g=c.util,h=d.indexOf,i=e.getText,j=(e.remove,e.create),k=e.setInput,l=g.extend,m=(g.inherits,c.getKey),n=(c.mask,c.inherits),o=c.triggerEvent,p=f.InputControl,q=p.prototype,r=f.Items,s=f.Select,t=s.prototype,u=t.Item,v=u.prototype,w=f.MultiSelect=n(s,"ui-multi-select",function(a,b){b.hide=!0,b.value&&(b.value=b.value.toString())},function(a,b){b.maxlength&&(this._nTextLen=b.maxlength),b.textAll&&(this._sTextAll=b.textAll),b.textNone&&(this._sTextNone=b.textNone),b.maxSelected?this._nMaxSelected=b.maxSelected:b.selectAllButton&&(this.add("å¨é¨",0,{selectAllButton:!0}),this._bSelectAllBtn=!0),b.tip&&(this._bTip=!0),b.value&&this.setValue(b.value),b.selectAll&&(this._bInitSelectAll=!0),b.minSelected&&(this._nMinSelected=b.minSelected),this._eInput.disabled=!0}),x=w.prototype,y=x.Item=n(u,"ui-multi-select-item",function(a,b){var c=this.getTypes()[0],d=j(c+"-icon");this._bSelectAllBtn=b.selectAllButton,this._sTip=b.tip?b.tip:i(a),a.insertBefore(d,a.firstChild),a=this._eInput=b.parent.getMain().appendChild(k(null,b.parent.getName(),"checkbox")),a.value=void 0===b.value?"":b.value,a.style.display="none"}),z=y.prototype;l(x,r),z.$click=function(a){var b=this.getParent(),c=b.getSelected().length;v.$click.call(this,a),this.isSelected()?(!b._nMinSelected||b._nMinSelected<=c-1)&&this.setSelected(!1):(!b._nMaxSelected||b._nMaxSelected>=c+1)&&this.setSelected(!0)},z.$dispose=function(){this._eInput=null,v.$dispose.call(this)},z.isSelected=function(){return this._eInput.checked},z.$setSelected=function(a){this._eInput.checked=a!==!1,this.setClass(this.getPrimary()+(this._eInput.checked?"-selected":""))},z.setSelected=function(c){this.$setSelected(c),a(this.getParent(),this._bSelectAllBtn?c:void 0),b(this.getParent())},x.$alterItems=function(){t.$alterItems.call(this),a(this),b(this)},x.$append=function(a){t.$append.call(this,a),this.getMain().appendChild(k(a._eInput,this.getName()))},x.$cache=t.$cache,x.$intercept=function(a){for(var b=a.getControl();b;b=b.getParent())if(b instanceof y)return a.target=b.getOuter(),!1;this.$getSection("Options").hide(),o(this,"change"),a.exit()
},x.$keydown=x.$keypress=x.$keyup=function(a){if(q["$"+a.type].call(this,a),!this.$getSection("Options").isShow())return!1;var b=m();return 13==b||32==b?("keyup"==a.type&&(b=this.getActived(),b.setSelected(!b.isSelected())),!1):void 0},x.$mousewheel=function(a){var b=this.$getSection("Options");return b.isShow()&&b.$mousewheel(a),!1},x.$deactivate=t.$deactivate,x.$activate=function(a){var b=a.getControl();b instanceof y||t.$activate.call(this,a)},x.$ready=function(){if(a(this),b(this),this._bInitSelectAll)for(var c,d=0,e=this.getItems();c=e[d++];)!c._bSelectAllBtn&&c.setSelected(!0)},x.$remove=function(a){t.$remove.call(this,a),this.getMain().removeChild(a._eInput)},x.$setSize=t.$setSize,x.getSelected=function(){for(var a,b=0,c=this.getItems(),d=[];a=c[b++];)a.isSelected()&&!a._bSelectAllBtn&&d.push(a);return d},x.getValue=function(){var a,b,c=this.getSelected(),d=[];for(a=0,b=c.length;b>a;a++)c[a]._bSelectAllBtn||d.push(c[a]._eInput.value);return d},x.getAllValue=function(){var a=this.getItems(),b=[],c=0;for(c=0;c<a.length;c++)a[c]._bSelectAllBtn||b.push(a[c].getValue());return b},x.selectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)!a._bSelectAllBtn&&a.setSelected(!0)},x.isSelectAll=function(){for(var a,b=0,c=this.getItems();a=c[b++];)if(!a.isSelected())return!1;return!0},x.setOptionSize=t.setOptionSize,x.setValue=function(c){"[object Array]"!=Object.prototype.toString.call(c)&&(c=c.toString().split(","));for(var d,e=0,f=this.getItems();d=f[e++];)d.setSelected(h(c,d._eInput.value)>=0);a(this),b(this)}}(),function(){function a(a,b){var c=this.getType();k(b);for(var d,e=b.types,f=b.tagNames,g=[],h=[],i=0;d=e[i];i++)"D"==d&&g.push('<option value="day">'+f[i]+"</option>"),"W"==d&&g.push('<option value="week">'+f[i]+"</option>"),"M"==d&&g.push('<option value="month">'+f[i]+"</option>"),"Q"==d&&g.push('<option value="quarter">'+f[i]+"</option>");h.push('<div style="display:none" class="time-box-day"><div data-id="day-calendar" class="ui-calendar"></div></div>'),h.push('<div style="display:none" class="time-box-week"><div data-id="week-calendar" class="ui-calendar"></div></div>'),h.push('<div style="display:none" class="time-box-month"><div class="ui-select"></div><div class="ui-select ml10"></div></div>'),h.push('<div style="display:none" class="time-box-quarter"><div class="ui-select"></div><div class="ui-select ml10"></div></div>');var j=g.join(""),l=h.join(""),m=[];m.push('   <div class="'+c+'-box">'+'<span class="'+c+'-label">æ¶é´ç²åº¦ï¼</span>'+'<select class="'+I.TYPES+'">'+j+"</select>"+"</div>");var n=N.types[0];m.push('<span class="'+n+"-btn-prv "+n+'-btn"></span>'),m.push('  <div class="'+c+'-box">'+l+"</div>"),m.push('<span class="'+n+"-btn-nxt "+n+'-btn"></span>'),a.innerHTML=m.join("")}function b(a,b){k(b);var h=this;h._oRange=b.range,h.typeList={day:null,week:null,month:null,quarter:null},this._nSelectedType=this._getInnerType(b.types[0]);var l=B(a),m=l[0],n=B(m)[1];this._uBtnPre=z(this.Button,l[1],this),this._uBtnNext=z(this.Button,l[3],this),this._uConditionSelect=z(I,n,this,{}),this._uConditionSelect.$setSize(100,20),this._uConditionSelect.$mouseWheel=function(){},this._uConditionSelect.$change=g(this);var o=l[2],p=B(o),q=h.typeList.day=p[0],r=h.typeList.week=p[1],s=h.typeList.month=p[2],t=h.typeList.quarter=p[3];i("D",b)&&f(h,b,q),i("W",b)&&e(h,b,r),i("M",b)&&d(h,b,s),i("Q",b)&&c(h,b,t),this._uBtnPre.onclick=j("pre",this),this._uBtnNext.onclick=j("next",this),setTimeout(function(){var a=h._uConditionSelect.getValue();h._showCalendarByType(a),h._setBtnStatus()},100)}function c(a,b,c){var d=l,e=a._uQuarterSelectYear=z(I,c.firstChild,a,{}),f=a._uQuarterSelectQuarter=z(I,c.lastChild,a,{}),g=function(){var a={},c=b.range.quarter,e=d(c.start,"quarter"),f=d(c.end,"quarter"),g=e.getFullYear(),h=f.getFullYear();c.start.split("-")[1],c.end.split("-")[1];for(var i=[],j=g;h>=j;j++)i.push({text:j+"",value:j});var k=[{text:"ç¬¬ä¸å­£åº¦",value:"Q1"},{text:"ç¬¬äºå­£åº¦",value:"Q2"},{text:"ç¬¬ä¸å­£åº¦",value:"Q3"},{text:"ç¬¬åå­£åº¦",value:"Q4"}];return a.year=i,a.quarter=k,a}();e.$setSize(100,20),f.$setSize(100,20),h(e,g.year),h(f,g.quarter);var i=b.defaults.quarter,j=d(i,"quarter"),k=j.getFullYear(),m=i.split("-")[1];e.setValue(k),f.setValue(m),e.onchange=function(){u.triggerEvent(a,"change",{},null)},f.onchange=function(){u.triggerEvent(a,"change",{},null)}}function d(a,b,c){var d=l,e=a._uMonthSelectYear=z(I,c.firstChild,a,{}),f=a._uMonthSelectMonth=z(I,c.lastChild,a,{}),g=function(a){var b={},c=a.range.month,e=d(c.start,"month"),f=d(c.end,"month"),g=e.getFullYear(),h=f.getFullYear();e.getMonth(),f.getMonth();for(var i=[],j=[],k=["ä¸","äº","ä¸","å","äº","å­","ä¸","å«","ä¹","å","åä¸","åäº"],l=g;h>=l;l++)i.push({text:l+"",value:l});for(var m,l=0;m=k[l];l++)j.push({text:m+"æ",value:l});return b.year=i,b.month=j,b}(b);h(e,g.year),h(f,g.month);var i=b.defaults.month,j=d(i,"month"),k=j.getFullYear(),m=j.getMonth();e.$setSize(100,20),f.$setSize(100,20),e.setValue(k),f.setValue(m),e.onchange=function(){u.triggerEvent(a,"change",{},null)},f.onchange=function(){u.triggerEvent(a,"change",{},null)}}function e(a,b,c){var d=l,e=a._uWeekCalendar=z(N,c.firstChild,a,{mode:"WEEK",viewMode:"POP",shiftBtnDisabled:!0}),f=d(b.defaults.week,"day"),g=b.range.week,h=d(g.start,"day"),i=d(g.end,"day"),j=o(i);new Date(j.getFullYear(),j.getMonth(),j.getDate()+6),o(h),e.setRange(h,i),e.setDate(f),e.$setSize(280,20),e.onchange=function(){u.triggerEvent(a,"change",{},null)}}function f(a,b,c){var d=l,e=a._uDayCalendar=z(N,c.firstChild,a,{mode:"DAY",viewMode:"POP",shiftBtnDisabled:!0}),f=d(b.defaults.day,"day"),g=b.range.day,h=d(g.start,"day"),i=d(g.end,"day");e.setRange(h,i),e.setDate(f),e.$setSize(280,20),e.onchange=function(){u.triggerEvent(a,"change",{},null)}}function g(a){var b=a;return function(){var a=this.getValue();b._showCalendarByType(a),u.triggerEvent(b,"change",{},null)}}function h(a,b){b=b||[];for(var c=0,d=b.length;d>c;c++){var e=b[c];a.add(e.text,c,{value:e.value})}}function i(a,b){for(var c=b.types,d=!1,e=0;e<c.length;e++)if(c[e]===a){d=!0;break}return d}function j(a,b){var c=b;return function(){var b=c._getDateType();new Date;var d=this.className||"";if(!d.match(/disable/))if("day"===b){var e=c._uDayCalendar,f=e.getDate();"pre"===a?f.setDate(f.getDate()-1):f.setDate(f.getDate()+1),e.setDate(f),u.triggerEvent(c,"change",{},null)}else if("week"===b){var e=c._uWeekCalendar,f=e.getDate();"pre"===a?(f.setDate(f.getDate()-7),f=o(f),f.setDate(f.getDate()+6)):(f.setDate(f.getDate()+7),f=o(f)),e.setDate(f),u.triggerEvent(c,"change",{},null)}else if("month"===b){var g=c.getDate().date;g=l(g,"month");var h="pre"==a?-1:1,i=new Date(g.getFullYear(),g.getMonth()+h);i=m(i,"month"),c.setDate({type:"M",date:i}),u.triggerEvent(c,"change",{},null)}else if("quarter"===b){var g=c.getDate().date;g=l(g,"quarter");var h="pre"==a?-3:3,i=new Date(g.getFullYear(),g.getMonth()+h);i=m(i,"quarter"),c.setDate({type:"Q",date:i}),u.triggerEvent(c,"change",{},null)}}}function k(a){var b=m,c=new Date,d="";"[object String]"==Object.prototype.toString.call(a.types)&&(a.types=a.types.split(",")),a.types||(a.types=["D","W","M","Q"]),a.tagNames||(a.tagNames=["æ¥æ°æ®","å¨æ°æ®","ææ°æ®","å­£åº¦æ°æ®"]),a.range||(a.range={});var e=a.range;if(e.day||(d=b(c,"day"),e.day={start:"2008-01-01",end:d}),e.week||(d=b(c,"week"),e.week={start:"2008-01-01",end:d}),!e.month){var f=new Date,g=f.getFullYear();f=g>2011?b(f,"month"):"2012-01",e.month={start:"2008-01",end:f}}if(!e.quarter){var f=new Date,h=f.getFullYear();f=h>2011?b(f,"quarter"):"2012-Q1",e.quarter={start:"2008-01",end:f}}a.defaults||(a.defaults={});var i=new Date,j=a.defaults;j.day=j.day||b(i,"day"),j.week=j.week||b(i,"week"),j.month=j.month||b(i,"month"),j.quarter=j.quarter||b(i,"quarter")}function l(a,b){var c=null,d=[];return null==a||""==a?null:("day"===b||"week"===b?(d=a.split("-"),c=new Date(d[0],+d[1]-1,d[2])):"month"===b?(d=a.split("-"),c=new Date(d[0],+d[1]-1,1)):"quarter"===b&&(d=a.split("-"),q=a.slice(-1),c=new Date(d[0],3*q-3,1)),c)}function m(a,b){if(!a||"[object Date]"!=Object.prototype.toString.call(a))return"";b=b||"day";var c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate(),f=[];if("day"===b||"week"===b)f.push(c),f.push(10>d?"0"+d:d),f.push(10>e?"0"+e:e);else if("month"===b)f.push(c),f.push(10>d?"0"+d:d);else if("quarter"===b){f.push(c);var g=Math.ceil(d/3);f.push("Q"+g)}return f.join("-")}function n(){function a(a){var b="";return a>=1&&3>=a?b="Q1":a>=4&&6>=a?b="Q2":a>=7&&9>=a?b="Q3":a>=10&&12>=a&&(b="Q4"),b}var b=this,c=b._getDateType(),d=b._oRange,e=d,f=b._uBtnPre,g=b._uBtnNext;if(this.getType()+"-btn-disable","day"==c){var h=b.getDate();e=l(d.day.end,"day");var i=l(d.day.start,"day");h=l(h.date,"day"),h.getTime()>=e.getTime()?g.disable():g.enable(),h.getTime()<=i.getTime()?f.disable():f.enable()}else if("week"==c){var h=b.getDate();h=l(h.date,"day"),e=l(d.week.end,"week");var j=o(e),i=l(d.week.start,"week");h.getTime()>=j.getTime()?g.disable():g.enable(),j=o(i),h.getTime()<=j.getTime()?f.disable():f.enable()}else if("month"==c){var k=b._uMonthSelectYear.getValue(),m=b._uMonthSelectMonth.getValue(),h=l(d.month.end,"month"),n=l(d.month.start,"month"),p=n.getMonth(),q=n.getFullYear(),r=h.getFullYear(),s=h.getMonth(),t=!1;(k>r||k==r&&m>=s||k==q&&p>m+1)&&(t=!0),t?g.disable():g.enable(),h=l(d.month.start,"month");var u=l(d.month.end,"month");de_month=u.getMonth(),de_year=u.getFullYear(),r=h.getFullYear(),s=h.getMonth();var v=!1;(r>k||k==r&&s>=m||k==de_year&&m-1>de_month)&&(v=!0),v?f.disable():f.enable()}else if("quarter"==c){var k=b._uQuarterSelectYear.getValue(),m=b._uQuarterSelectQuarter.getValue(),h=l(d.quarter.end,"quarter"),n=l(d.quarter.start,"quarter"),q=n.getFullYear(),w=a(n.getMonth()+1),r=h.getFullYear(),x=a(h.getMonth()+1),t=!1;(k>r||k==r&&m>=x||k==q&&+m.slice(1)+1<w.slice(1))&&(t=!0),t?g.disable():g.enable(),h=l(d.quarter.start,"quarter"),r=h.getFullYear(),x=a(h.getMonth()+1);var u=l(d.quarter.end,"quarter");de_year=u.getFullYear(),de_q=a(u.getMonth()+1);var v=!1;(r>k||k==r&&x>=m||k==de_year&&+m.slice(1)-1>de_q.slice(1))&&(v=!0),v?f.disable():f.enable()}}function o(a){var b=a.getDay(),c=a.getDate(),d=a.getFullYear(),e=a.getMonth(),f=null;return c-=b>=1?b-1:6,f=new Date(d,e,c)}function p(){var a=this._getDateType(),b=null,c={type:"D",date:""};if("day"===a)b=this._uDayCalendar.getDate(),b=m(b),c={type:"D",date:b};else if("week"===a)b=this._uWeekCalendar.getDate(),b=o(b),b=m(b),c={type:"W",date:b};else if("month"===a){var d=this._uMonthSelectYear.getValue(),e=this._uMonthSelectMonth.getValue();b=new Date(d,e,1),b=m(b,"month"),c={type:"M",date:b}}else if("quarter"===a){var d=this._uQuarterSelectYear.getValue(),f=this._uQuarterSelectQuarter.getValue();d&&f?(b=d+"-"+f,c={type:"Q",date:b}):b=""}return c}function r(a){this._uConditionSelect.setValue(a);var b=this.typeList,c=a,d=this._nSelectedType;b[d].style.display="none",b[c].style.display="block",this._nSelectedType=c}function s(a){var b=a.type||"M",c=this._getInnerType(b),d=a.date,e=this._nSelectedType;if(d){if("D"===b){var f=l(d,"day");this._uDayCalendar.setDate(f),c="day"}else if("W"===b){var f=l(d,"week");f=o(f),this._uWeekCalendar.setDate(f),c="week"}else if("M"===b){var f=l(d,"month"),g=f.getFullYear(),h=f.getMonth();this._uMonthSelectYear.setValue(g),this._uMonthSelectMonth.setValue(h),c="month"}else if("Q"===b){var f=l(d,"quarter");if(7==d.length)var g=d.slice(0,4),i=d.slice(-2);this._uQuarterSelectYear.setValue(g),this._uQuarterSelectQuarter.setValue(i),c="quarter"}c!=e&&this._showCalendarByType(c)}}function t(a){K(M,"resize",L);var b=this.getOuter();for(key in this)/_u\w+/.test(key)&&y(this[key]);b.innerHTML="",O.client.call(this,b,a),this.cache(!0,!0),this.init(),this.$resize(),J(M,"resize",L)}var u=ecui,v=u.ui,w=u.dom,x=(u.string,u.util),y=u.dispose,z=u.$fastCreate,A=u.inherits,B=(u.findControl,w.first,w.last,w.children),C=w.create,D=(w.remove,w.addClass,w.removeClass,w.setText,w.moveElements),E=(x.blank,v.Control),F=(E.prototype,v.Button),G=(F.prototype,v.InputControl),H=(G.prototype,v.InputControl),I=(H.prototype,v.Select),J=x.attachEvent,K=x.detachEvent,L=u.repaint,M=window,N=v.IstCalendar,O=v.CalendarPlus=A(E,"ui-calendar-plus",a,b),P=O.prototype;P.Button=A(F,null,function(a){var b=C(),c=this.getType();D(a,b,!0),a.innerHTML='<span class="'+c+'-inner"></span>',D(b,a.firstChild,!0),b=C(c+"-icon","","span"),a.appendChild(b)}),P.$setSize=new Function,P.setData=function(c){var d=this.getOuter();this.$disposeInner(),d.innerHTML="",this.$setBody(d),a.call(this,d,c),b.call(this,d,c)},P.$disposeInner=function(){for(var a in this)this.hasOwnProperty(a)&&a.indexOf("_u")>=0&&this[a]instanceof E&&(y(this[a]),this[a]=null)},P._getInnerType=function(a){var b={D:"day",W:"week",M:"month",Q:"quarter"};return b[a]},P._setBtnStatus=n,P._showCalendarByType=r,P._getDateType=function(){return this._nSelectedType},P.$change=function(){this._setBtnStatus()},P.render=t,P.setDate=s,P.getDate=p}(),function(){function a(a,b){var c,d=this.getType(),e=[],f=0;for(this._oModel=b.model,a.style.overflow="auto";7>f;)e[f]='<td class="'+d+"-title"+this.Cell.TYPES+(6==f?d+"-title-last":"")+'">'+this.WEEKNAMES[f++]+"</td>";for(e[f]="</tr></thead><tbody><tr>";++f<50;)e[f]='<td class="'+d+"-item"+this.Cell.TYPES+(f%7?"":d+"-item-last")+'"></td>'+(f%7?"":"</tr><tr>");for(a.innerHTML='<table cellspacing="0" cellpadding="0"><thead><tr>'+e.join("")+"</tr></tbody></table>",this._aCells=[],e=a.getElementsByTagName("TD"),f=0;c=e[f];f++)this._aCells[f]=r(7>f?this.HCell:this.Cell,c,this,{resizable:!1})}function b(a,b,c){for(var d,e={},f=0;d=z(b[f]);f++)d[0]==a[0]&&d[1]==a[1]&&(e[c[d[2]]]=1);return e}function c(a,b,c){for(var d,e,f={},g=a[0],h=a[1],i=0;d=z(b[i]);i++){e=D(d);for(var j=0;7>j;j++,e.setDate(e.getDate()+1))e.getFullYear()==g&&e.getMonth()==h&&(f[c[e.getDate()]]=1)}return f}function d(a,b){var c,d,e,f=this.getType();for(this._oModel=b.model,a.style.overflow="auto",d=0,c=[];12>d;d++)c.push('<td class="'+f+"-item"+this.Cell.TYPES+'">'+this.MONTH[d]+"æ"+"</td>"+((d+1)%3?"":"</tr><tr>"));for(a.innerHTML='<table cellspacing="0"><tbody><tr>'+c.join("")+"</tr></tbody></table>",this._aCells=[],d=0,c=a.getElementsByTagName("TD"),e;e=c[d];d++)this._aCells[d]=r(this.Cell,e,this,{resizable:!1}),this._aCells[d]._nMonth=d}function e(a,b,c){for(var d,e={},f=0;d=z(b[f]);f++)d[0]==a[0]&&(e[c[d[1]]]=1);return e}function f(a,b){var c,d,e,f=this.getType();for(this._oModel=b.model,a.style.overflow="auto",d=0,c=[];4>d;d++)c.push('<div class="'+f+"-item"+this.Cell.TYPES+'">'+this.QUARTER[d]+"</div>");a.innerHTML=c.join("");var g=[0,3,6,9];for(this._aCells=[],d=0,c=a.getElementsByTagName("div"),e;e=c[d];d++)this._aCells[d]=r(this.Cell,e,this,{resizable:!1}),this._aCells[d]._nMonth=g[d]}var g=ecui,h=g.array,i=g.dom,j=g.ui,k=g.util,l=Date,m=Object.prototype.toString;k.extend,h.indexOf;var n=i.addClass,o=i.getParent,p=i.removeClass,q=i.setText,r=g.$fastCreate,s=g.inherits,t=g.triggerEvent,u=j.Control,v=j.XCalendarUtil={},w=864e5,x=v.compareDate=function(a,b,c){return a=y(a,c,!0),b=y(b,c,!0),a[0]!=b[0]?a[0]>b[0]?1:-1:a[1]!=b[1]?a[1]>b[1]?1:-1:a[2]!=b[2]?a[2]>b[2]?1:-1:0},y=v.formatDateByTimeType=function(a,b,c){return a?("D"==b?a=z(a,!0):"W"==b?a=z(D(a)):"M"==b?(a=z(a,!0),a[2]=1):"Q"==b&&(a=B(a,!0)),c?a:new Date(a[0],a[1],a[2])):void 0},z=v.date2Arr=function(a,b){return null==a?a:F(a)?b?[a[0],a[1],a[2]]:a:[a.getFullYear(),a.getMonth(),a.getDate()]},A=v.arr2Date=function(a,b){return null==a?a:F(a)?new Date(a[0],a[1]||0,a[2]||1):b?new Date(a.getFullYear(),a.getMonth(),a.getDate()):a},B=v.getQuarterBegin=function(a,b){if(!a)return null;a=z(a);var c=C(a),d=[0,0,3,6,9];return b?[a[0],d[c],1]:new Date(a[0],d[c],1)},C=v.getQuarter=function(a){return a?(a=z(a),Math.floor(a[1]/3)+1):null},D=v.getWorkday=function(a){return a=A(a,!0),a.setDate(a.getDate()-(6+a.getDay())%7),a};v.minDate=function(a){for(var b,c=arguments,d=c[1],e=1;e<c.length;e++)(b=c[e])&&x(d,b,a)>0&&(d=b);return d},v.maxDate=function(a){for(var b,c=arguments,d=c[1],e=1;e<c.length;e++)(b=c[e])&&x(d,b,a)<0&&(d=b);return d},v.initSlt=function(a,b){for(a.setValue(null);a.remove(0););for(var c,d=0;c=b.list[d];d++)a.add(String(c.text),null,{value:c.value});a.setValue(b.selected)};var E=v.isDate=function(a){return"[object Date]"==m.call(a)},F=v.isArray=function(a){return"[object Array]"==m.call(a)};v.isString=function(a){return"[object String]"==m.call(a)},v.isNumber=function(a){return"[object Number]"==m.call(a)},v.setSltValue=function(a,b){a&&a.setValue(b)},v.getSltValue=function(a){return a?a.getValue():void 0},v.getWeekInfo=function(a){var b=a.getDay(),c=-((b+6)%7),d=(7-b)%7,e={monday:new Date(a.getTime()+c*w),sunday:new Date(a.getTime()+d*w)};return e.workday=e.monday,e.weekend=e.sunday,e},v.cloneADate=function(a){if(a){for(var b,c=[],d=0;d<a.length;d++)(b=a[d])&&c.push(E(b)?new Date(b.getTime()):b.slice());return c}};var G=s(u,"ui-x-calendar-view"),H=G.prototype;UI_X_CALENDAR_VIEW_CELL_CLASS=(H.Cell=s(u)).prototype,UI_X_CALENDAR_VIEW_HCELL_CLASS=(H.HCell=s(u)).prototype,H.WEEKNAMES=["ä¸","äº","ä¸","å","äº","å­","æ¥"],H.MONTH=["ä¸","äº","ä¸","å","äº","å­","ä¸","å«","ä¹","å","åä¸","åäº"],H.QUARTER=["ç¬¬ä¸å­£åº¦ï¼Q1ï¼ä¸æè³ä¸æï¼","ç¬¬äºå­£åº¦ï¼Q2ï¼åæè³å­æï¼","ç¬¬ä¸å­£åº¦ï¼Q3ï¼ä¸æè³ä¹æï¼","ç¬¬åå­£åº¦ï¼Q4ï¼åæè³åäºæï¼"],H.$setSize=new Function,H.getModel=function(){return this._oModel},H.setView=function(a){this.$setView(a),this.$flushByRange(),this.$flushSelected(),this.$flushHover()},H.$flushByRange=function(){var a=this._oModel,b=a.getRange(),c=b.start,d=b.end;this._oModel.getDate();var e=a.getTimeType();"W"==e&&(e="D"),this.$forEachCell(function(a){var b=a.getCellInfo();(!c||x(b,c,e)>=0)&&(!d||x(d,b,e)>=0)?a.open():a.close()})},H.$doFlushSelected=function(a,b){var c,d,e=this._oModel,f=e.getDate(),g=e.getSelMode(),h=this.getViewInfo();"RANGE"==g&&f[0]&&f[1]?d=f:c=a(h,f,this.cellValue2IndexMap),this.$forEachCell(function(a,e){if(!a._bClosed){var f,g,h=a.getUnitInfo(),i=d?x(h,d[0],b)>=0&&x(d[1],h,b)>=0:e in c;i?(f=!0,g="+"):(f=!1,g="-"),f!=a._bSelected&&(a._bSelected=f,a.alterClass(g+"selected"))}})},H.$doFlushHover=function(a,b){var c,d,e=this.getModel(),f=e.getSelMode(),g=e.getHoverDate(),h=this.getViewInfo();"RANGE"==f&&g[0]&&g[1]?d=g:c=a(h,g,this.cellValue2IndexMap),this.$forEachCell(function(a,e){if(!a._bClosed){var f=a.getUnitInfo();(d?x(f,d[0],b)>=0&&x(d[1],f,b)>=0:e in c)?!a._bHover&&(a.alterClass("+hover"),a._bHover=!0):a._bHover&&(a.alterClass("-hover"),a._bHover=!1)}})},UI_X_CALENDAR_VIEW_CELL_CLASS.close=function(){this._bSelected&&(this.alterClass("-selected"),this._bSelected=!1),this._bHover&&(this.alterClass("-hover"),this._bHover=!1),this._bClosed=!0,this.disable()},UI_X_CALENDAR_VIEW_CELL_CLASS.open=function(){this._bClosed=!1,this.enable()},UI_X_CALENDAR_VIEW_CELL_CLASS.$mouseover=function(){var a=this.getParent();this.getUnitInfo(),a.getModel().updateHoverDate(A(this.getUnitInfo()),!0),a.$flushHover()},UI_X_CALENDAR_VIEW_CELL_CLASS.$mouseout=function(){var a=this.getParent();this.getUnitInfo(),a.getModel().updateHoverDate(A(this.getUnitInfo()),!1),a.$flushHover()},UI_X_CALENDAR_VIEW_CELL_CLASS.$click=function(){var a=this.getParent(),b=a.getModel();b.udateDateByClick(A(this.getUnitInfo()))&&(a.$flushSelected(),t(a,"change",null,[b.getDate()]),t(a,"dateclick",null,[A(this.getUnitInfo())]))};var I=j.XCalendarMDView=s(G,null,null,a),J=I.prototype,K=(J.Cell=s(H.Cell)).prototype;J.$flushSelected=function(){return this.$doFlushSelected(b,"D")},J.$flushHover=function(){this.$doFlushHover(b,"D")},J.$forEachCell=function(a){for(var b,c=new l(this._nYear,this._nMonth+1,0).getDate(),d=7;(b=this._aCells[d])&&!(b._nDay>0&&b._nDay<=c&&a.call(this,b,d)===!1);d++);},J.isCurrView=function(a){return a=z(a),a[0]==this._nYear&&a[1]==this._nMonth},J.getViewInfo=function(){return[this._nYear,this._nMonth]},J.$setView=function(a){a=z(a);var b,c,d=7,e=a[0],f=a[1],g=new l(e,f,0),h=1-g.getDay(),i=g.getDate(),j=new l(e,f+1,0).getDate(),k=this._oModel,m=k.getRange(),r=m.start,s=m.end;if(this._nYear!=e||this._nMonth!=f)for(this._nYear=e,this._nMonth=f,this.cellValue2IndexMap={},b=new l(e,f,1);g=this._aCells[d];d++)(f=h>0&&j>=h)?(b.setDate(h),(!r||b>=r)&&(!s||s>=b)?g.open():g.close()):g.close(),(36==d||43==d)&&(g.isDisabled()?n:p)(o(g.getOuter()),this.getType()+"-extra"),c=f?h:h>j?h-j:i+h,this.setCellHTML&&this.setCellHTML(g,c,h)!==!1||q(g.getBody(),c),this.cellValue2IndexMap[h]=d,g._nDay=h++},K.getUnitInfo=function(){var a=this.getParent();return[a._nYear,a._nMonth,this._nDay]},K.getCellInfo=K.getUnitInfo;var L=j.XCalendarMWView=s(G,null,null,a),M=L.prototype,N=(M.Cell=s(H.Cell)).prototype;M.$flushSelected=function(){return this.$doFlushSelected(c,"W")},M.$flushHover=function(){this.$doFlushHover(c,"W")},M.$forEachCell=J.$forEachCell,M.isCurrView=J.isCurrView,M.getViewInfo=J.getViewInfo,M.$setView=J.$setView,N.getUnitInfo=function(){var a=this.getParent();return z(D([a._nYear,a._nMonth,this._nDay]))},N.getCellInfo=function(){var a=this.getParent();return[a._nYear,a._nMonth,this._nDay]};var O=j.XCalendarYMView=s(G,null,null,d),P=O.prototype,Q=(P.Cell=s(H.Cell)).prototype;P.$flushSelected=function(){return this.$doFlushSelected(e,"M")},P.$flushHover=function(){this.$doFlushHover(e,"M")},P.$forEachCell=function(a){for(var b,c=0;(b=this._aCells[c])&&a.call(this,b,c)!==!1;c++);},P.isCurrView=function(a){return a=z(a),a[0]==this._nYear},P.getViewInfo=function(){return[this._nYear]},P.$setView=function(a){if(a=z(a),this._nYear=a[0],!this.cellValue2IndexMap)for(var b,c=this.cellValue2IndexMap={},d=0;b=this._aCells[d];d++)c[b._nMonth]=d},Q.getUnitInfo=function(){var a=this.getParent();return[a._nYear,this._nMonth,1]},Q.getCellInfo=Q.getUnitInfo;var R=j.XCalendarYQView=s(G,null,null,f),S=R.prototype,T=(S.Cell=s(H.Cell)).prototype;S.$flushSelected=function(){return this.$doFlushSelected(e,"Q")},S.$flushHover=function(){this.$doFlushHover(e,"Q")},S.$forEachCell=P.$forEachCell,S.isCurrView=P.isCurrView,S.getViewInfo=P.getViewInfo,S.$setView=P.$setView,T.getUnitInfo=Q.getUnitInfo,T.getCellInfo=Q.getUnitInfo}(),function(){function a(a,c,d,e){var f={},g=f.offsetBase=b(d||new Date);g=[g.getFullYear(),g.getMonth(),g.getDate()];var h,i={y:0,m:1,d:2};if(/^([-+]?)(\d+)([ymd])$/.test((a||"").toLowerCase())?(h=g.slice(),q.$1&&"+"!=q.$1?h[i[q.$3]]-=parseInt(q.$2,10):h[i[q.$3]]+=parseInt(q.$2,10),f.start=new Date(h[0],h[1],h[2])):f.start=b(a),/^([-+]?)(\d+)([yMd])$/.test((c||"").toLowerCase())?(h=g.slice(),q.$1&&"+"!=q.$1?h[i[q.$3]]-=parseInt(q.$2,10):h[i[q.$3]]+=parseInt(q.$2,10),f.end=new Date(h[0],h[1],h[2])):f.end=b(c),f.start&&f.end&&u(f.start,f.end,e)>0){var j=f.end;f.end=f.start,f.start=j}return f?f:{}}function b(a){var d;if(null==a)d=null;else if(z(a)){d=[];for(var e=0;e<a.length;e++)d.push(b(a[e]))}else y(a)?d=a:A(a)?d=c(a):B(a)&&(d=new Date(a));return d}function c(a){if(W.test(a))return new Date(q.$1,(q.$3||1)-1,q.$5||1);if(X.test(a)){var b=[0,0,3,6,9];return new Date(q.$1,b[q.$2],1)}return null}function d(a,b,c){return b=Number(b),a=v(a,!0),"D"==c||"W"==c?a.setMonth(a.getMonth()+b):("M"==c||"Q"==c)&&a.setFullYear(a.getFullYear()+b),a}function e(a,b,c){return a=v(a,!0),b=Number(b),"D"==c?a.setDate(a.getDate()+b):"W"==c?a.setDate(a.getDate()+7*b):"M"==c?a.setMonth(a.getMonth()+b):"Q"==c&&a.setMonth(a.getMonth()+3*b),a}function f(a,b){if(b.model)this._oModel=b.model;else{var c=this._oModel.DEFAULT;b.selMode||(b.selMode=c.selMode),b.timeType||(b.timeType=c.timeType),b.selModeList||(b.selModeList=c.selModeList),this._oModel=new this.Model(b)}}function g(a){var b=this.getTypes()[0],c=this,d=[],e=this.StepButton,f=this.Select,g=this._oModel,h=g.getTimeType();g.getDate(),g.getRange();var i,j,k="D"==h||"W"==h,l={D:{clz:this.MDView,st:"-md-view",btns:"-buttons-md"},W:{clz:this.MWView,st:"-md-view",btns:"-buttons-md"},M:{clz:this.YMView,st:"-ym-view",btns:"-buttons-ym"},Q:{clz:this.YQView,st:"-yq-view",btns:"-buttons-yq"}}[h];if(d.push('<div class="'+b+"-buttons "+b+l.btns+' ">'),d.push('<div class="'+b+"-btn-prv"+J.TYPES+'"></div>'),d.push('<select class="'+b+"-slt-year"+L.TYPES+'">'),d.push("</select>"),k){for(d.push('<select class="'+b+"-slt-month"+L.TYPES+'">'),j=1;12>=j;j++)d.push('<option value="'+j+'">'+(10>j?"0":"")+j+"</option>");d.push("</select>")}d.push('<div class="'+b+"-btn-nxt"+J.TYPES+'"></div>'),d.push("</div>"),d.push('<div class="'+b+'-selmode"></div>'),d.push('<div class="'+b+l.st+" "+l.clz.TYPES+'"></div>'),a.innerHTML=d.join(""),a=r(a),i=r(a[0]),j=0,this._uPrvBtn=F(e,i[j++],this),this._uPrvBtn._nStep=-1,this._uYearSlt=F(f,i[j++],this),k&&(this._uMonthSlt=F(f,i[j++],this)),this._uNxtBtn=F(e,i[j++],this),this._uNxtBtn._nStep=1,this._uSelMode=F(this.SelMode,a[1],this),this._uCalView=F(l.clz,a[2],this,{model:g}),this._uCalView.onchange=function(a){H(c,"change",null,[a])},this._uCalView.ondateclick=function(a){H(c,"dateclick",null,[a])},this.render()}function h(a){this._aDate=[],this._aDefaultDate=[],this._oRange={},this._aHoverDate=[],this.setDatasource(a)}var i=ecui,j=i.array,k=i.dom,l=i.ui,m=i.string,n=i.util,p=l.XCalendarUtil,q=RegExp;Object.prototype.toString,j.push;var r=k.children;k.create,k.getParent,k.getPosition,k.moveElements,k.setText;var s=k.addClass;m.formatDate,n.getView;var t=m.encodeHTML,u=p.compareDate;p.date2Arr;var v=p.arr2Date;p.getWorkday;var w=p.minDate,x=p.maxDate,y=p.isDate,z=p.isArray,A=p.isString,B=p.isNumber,C=p.cloneADate,D=p.setSltValue,E=p.getSltValue;p.getWeekInfo,p.getQuarter,p.initSlt;var F=i.$fastCreate,G=i.inherits,H=i.triggerEvent;i.setFocused;var I=l.Control;I.prototype;var J=l.Button;J.prototype;var K=l.InputControl;K.prototype;var L=l.Select,M=l.XCalendarMDView,N=l.XCalendarMWView,O=l.XCalendarYMView,P=l.XCalendarYQView,Q=l.XCalendarLayer=G(I,"ui-x-calendar-layer",null,function(a,b){f.call(this,a,b),g.call(this,a,b)}),R=Q.prototype,S=(R.StepButton=G(J,null)).prototype,T=(R.Select=G(L,null)).prototype;UI_X_CALENDAR_LAYER_MD_VIEW_CLASS=(R.MDView=G(M,null)).prototype,UI_X_CALENDAR_LAYER_MW_VIEW_CLASS=(R.MWView=G(N,null)).prototype,UI_X_CALENDAR_LAYER_YM_VIEW_CLASS=(R.YMView=G(O,null)).prototype,UI_X_CALENDAR_LAYER_YQ_VIEW_CLASS=(R.YQView=G(P,null)).prototype,T.Options=G(T.Options,null,null,function(a){s(a,"ui-x-calendar-layer-select-options")}),UI_X_CALENDAR_LAYER_SEL_MODE_CLASS=(R.SelMode=G(I,"ui-x-calendar-layer-selmode")).prototype;var U=R.Model=h,V=U.prototype;V.DEFAULT={selMode:"SINGLE",timeType:"D",selModeList:[{text:"åé",value:"SINGLE",prompt:"åé¡¹éæ©"},{text:"èå´å¤é",value:"RANGE",prompt:"èå´éæ©ï¼ç¹å»ä¸ä¸éæ©å¼å§å¼ï¼åç¹å»ä¸ä¸éæ©ç»æå¼"},{text:"ä»»æå¤é",value:"MULTIPLE",prompt:"å¯ä»¥éæ©ç¦»æ£çå¤é¡¹"}]};var W=/^(\d+)(\-(\d+)(\-(\d+))?)?$/,X=/^(\d+)\-Q(\d)/;R.$setSize=new Function,R.setDatasource=function(a,b){this._oModel.setDatasource(a),!b&&this.render()},R.$flushCalView=function(){this._oModel.getTimeType();var a=this._uCalView,b=[];(o=Number(E(this._uYearSlt)))&&b.push(o),(o=Number(E(this._uMonthSlt)))&&b.push(o-1),a.setView(b)},R.render=function(a){a=a||{};var b=this.getModel();if(!a.remainSlt&&this.$resetSltDatasource(),!a.remainSelMode&&this.$resetSelModeCtrl(),!a.remainTimeView){var c=this._oModel.getDate(),d=a.viewDate||c[c.length-1]||(a=new Date,a.setFullYear(Math.min(Math.max(b._nYearRangeStart,a.getFullYear()),b._nYearRangeEnd)),a);D(this._uYearSlt,d.getFullYear()),D(this._uMonthSlt,d.getMonth()+1),this.$resetStepBtn()}this.$flushCalView()},R.$resetSelModeCtrl=function(){var a=this.getTypes()[0],b=this._uSelMode,c=b.getOuter(),d=this.getModel(),e=d.getSelModeList(),f=d.getSelMode();c.innerHTML="",c.style.display=e&&e.length?"":"none";var g,h,i,j,k=[];for(g=0;h=e[g];g++)j=h.prompt?' title="'+t(h.prompt)+'" ':"",i=h.value==f?' checked="checked" ':"",k.push("<input "+j+' type="radio" name="'+a+"-selmode-radio-"+this.getUID()+'" class="'+a+'-selmode-radio" '+i+' data-selmode="'+h.value+'"/>'),k.push("<span "+j+' class="'+a+'-selmode-text">'+t(h.text)+"</span>");c.innerHTML=k.join("")},R.$resetSltDatasource=function(){var a=this._oModel.getRange(),b=this._uYearSlt,c=this.getModel();if(b){var d,e=(a.offsetBase||new Date).getFullYear(),f=a.start?a.start.getFullYear():e-5,g=a.end?a.end.getFullYear():e+5,h=Number(E(b));for(b.setValue(null);b.remove(0););for(var i=f;g>=i;i++)b.add(String(i),null,{value:Number(i)}),i==h&&(d=i);c._nYearRangeStart=f,c._nYearRangeEnd=g,b.setValue(null!=d?d:f),this.$resetStepBtn()}},R.$resetStepBtn=function(){var a=Number(E(this._uYearSlt)),b=Number(E(this._uMonthSlt)),c=this.getModel(),e=c.getTimeType(),f=[a,b-1];f=d(f,1,e),this._uNxtBtn[f.getFullYear()>c._nYearRangeEnd?"disable":"enable"](),f=[a,b-1],f=d(f,-1,e),this._uPrvBtn[f.getFullYear()<c._nYearRangeStart?"disable":"enable"]()},R.getDate=function(){return this._oModel.getDate()},R.getModel=function(){return this._oModel},R.getValue=R.getDate,R.getTimeType=function(){return this._oModel.getTimeType()},R.init=function(){this._uMonthSlt&&this._uMonthSlt.init(),this._uYearSlt&&this._uYearSlt.init(),this._uCalView.init(),Q.superClass.init.call(this)},T.onchange=function(){var a=this.getParent();a.$resetStepBtn(),a.$flushCalView()},S.onclick=function(){var a=this.getParent(),b=a._uYearSlt,c=a._uMonthSlt,e=[Number(E(b)),Number((E(c)||1)-1),1];e=d(e,this._nStep,a.getModel().getTimeType()),D(b,e.getFullYear()),D(c,e.getMonth()+1),a.$resetStepBtn(),a.$flushCalView()},UI_X_CALENDAR_LAYER_SEL_MODE_CLASS.onclick=function(a){var b=this.getParent(),c=a.target;if("INPUT"==c.tagName){var d=b.getModel();d.setDatasource({selMode:c.getAttribute("data-selmode")}),b.$flushCalView(),H(b,"change",null,[d.getDate()])}},V.setDatasource=function(b){b=b||{},null!=b.forbidEmpty&&(this._bForbidEmpty=b.forbidEmpty||!1),b.timeType&&(this._sTimeType=b.timeType,this._sCellTimeType=b.cellTimeType,"W"==this._sCellTimeType&&(this._sCellTimeType="D"));var c;b.selModeList&&(c=this._aSelModeList=b.selModeList);var d;if((d=b.selMode)||c){var e=this._sSelMode;this._sSelMode=d||c[0].value,this.$switchSelMode(e,d)}var f=b.range;f&&(this._oRange=a(f.start,f.end,f.offsetBase,this._sCellTimeType),this.$clipByRange(this._aDate));var g=b.defaultDate;g&&(this._aDefaultDate=this.$parseADate(g));var h=b.date;h&&(this._aDate=this.$parseADate(h)),this._bForbidEmpty&&!this._aDate.length&&(this._aDate=C(this._aDefaultDate)),"SINGLE"==this._sSelMode?this._aDate=this._aDate.slice(0,1):"RANGE"==this._sSelMode&&(this._aDate=this._aDate.slice(0,2))},V.$parseADate=function(a){var a=b(a)||[];if(z(a)||(a=[a]),"RANGE"==this._sSelMode&&a[0]&&a[1]&&u(a[0],a[1],this._sCellTimeType)>0){var c=a[1];a[1]=a[0],a[0]=c}return this.$clipByRange(a),a},V.getDate=function(){return this._aDate},V.getDefaultDate=function(){return this._aDefaultDate},V.getTimeType=function(){return this._sTimeType},V.goStep=function(a){for(var b,c=0;c<this._aDate.length;c++)(b=this._aDate[c])&&(this._aDate[c]=e(b,a,this._sTimeType))},V.getHoverDate=function(){return this._aHoverDate||[]},V.getSelMode=function(){return this._sSelMode},V.getSelModeList=function(){return this._aSelModeList},V.getRange=function(){return this._oRange},V.$clipByRange=function(a){for(var b,c=this.getRange(),d=this._sTimeType,e=0;e<a.length;)(b=a[e])&&(!c.start||u(b,c.start,d)>=0)&&(!c.end||u(c.end,b,d)>=0)?e++:"RANGE"==this._sSelMode?a=[]:a.splice(e,1)},V.testEdge=function(a){var b,c=this._sTimeType,d=this.getDate().slice(),f=this.getRange(),g=f.start,h=f.end;return g||(g=[this._nYearRangeStart,0,1]),h||(h=[this._nYearRangeEnd,11,31]),d.length?0>a&&g?(b=w.apply(null,[c].concat(d)),u(e(b,a,c),g,c)>=0):a>0&&h?(b=x.apply(null,[c].concat(d)),u(e(b,a,c),h,c)<=0):!0:!1},V.udateDateByClick=function(a){var b=this.getDate(),c=this.getSelMode(),d=!0,e=this._sTimeType;if("RANGE"==c)b[0]&&!b[1]?b[1]=a:b=[a];else if("SINGLE"==c)b[0]&&0==u(b[0],a,e)?d=!1:b[0]=a;else if("MULTIPLE"==c){for(var f,g=!1,h=0;f=b[h];)0==u(f,a,e)?(b.splice(h,1),g=!0):h++;!g&&b.push(a)}return this.setDatasource({date:b}),d},V.updateHoverDate=function(a,b){var c=[],d=this.getDate();b?(c="RANGE"==this._sSelMode&&d[0]&&!d[1]?u(d[0],a,this._sTimeType)>0?[a,d[0]]:[d[0],a]:[a],this._aHoverDate=c):this._aHoverDate=[]},V.$switchSelMode=function(a,b){a!=b&&null!=a&&null!=b&&(this._aDate=[])}}(),function(){var a=ecui,b=a.array,c=a.dom,d=a.ui,e=a.string,f=a.util,g=d.XCalendarUtil,h=document;Object.prototype.toString;var i=c.children,j=c.create;
c.getParent;var k=c.getPosition,l=c.moveElements;c.setText;var m=c.addClass,n=e.formatDate;e.getByteLength;var o=e.encodeHTML;e.sliceByte,b.indexOf;var p=f.getView;f.blank;var q=f.extend,r=g.getWeekInfo,s=g.getQuarter,t=g.minDate,u=g.maxDate;Array.prototype.slice;var v=a.$fastCreate,w=a.inherits,x=a.triggerEvent,y=a.setFocused,z=d.Control;z.prototype;var A=d.InputControl,B=A.prototype,C=d.Select,D=d.Button,E=d.XCalendarLayer,F=d.XCalendar=w(A,"ui-x-calendar",function(a,b){b.hidden=!0},function(a,b){var c,d,e,f,g,k=this.getTypes()[0],m=[],n=0,p=this._bShiftBtnDisabled=b.shiftBtnDisabled;this._oTextOptions={blankText:b.blankText,rangeLinkStr:b.rangeLinkStr,weekLinkStr:b.weekLinkStr};var q=b.headText;null==q&&(q="æ¶é´ç²åº¦ï¼",m.push('<span class="'+k+'-head-text">'+o(q)+"</span>"),n++),m.push('<select class="'+k+"-slt-timetype"+C.TYPES+'">'),m.push("</select>"),e=n++,m.push('<span class="'+k+"-btn-prv "+k+'-btn"></span>','<span class="'+k+'-text"></span>','<span class="'+k+"-btn-cancel "+k+'-btn"></span>','<span class="'+k+"-btn-cal "+k+'-btn"></span>','<span class="'+k+"-btn-nxt "+k+'-btn"></span>'),f=n,n+=5,g=n;var r=["D","W","M","Q"];for(c=0;d=r[c];c++)m.push('<div class="'+k+'-layer" style="position:absolute;display:none"></div>'),n++;var s=j();s.innerHTML=m.join("");var t,u=i(s);null!=e&&(this._uTimeTypeSlt=v(this.Select,u[e],this)),this._eText=u[f+1],t=u[f],p&&(t.style.display="none"),this._uBtnPrv=v(this.Button,t,this,{command:"prv",icon:!0}),t=u[f+2],this._uBtnCancel=v(this.Button,t,this,{command:"cancel",icon:!0}),t=u[f+3],this._uBtnCal=v(this.Button,t,this,{command:"cal",icon:!0}),t=u[f+4],p&&(t.style.display="none"),this._uBtnNxt=v(this.Button,t,this,{command:"nxt",icon:!0});var w=this._oLayers={};for(c=0,c=0;d=r[c];c++)t=u[g+c],h.body.appendChild(t),w[d]=t;l(s,a,!0),this.setDatasource(b)}),G=F.prototype,H=(G.Button=w(D,null,function(a,b){var c=j(),d=this.getType();l(a,c,!0),a.innerHTML='<span class="'+d+'-inner"></span>',l(c,a.firstChild,!0),b.icon&&(c=j(d+"-icon","","span"),a.appendChild(c)),this._sCommand=b.command})).prototype,I=(G.Select=w(C,null)).prototype;I.Options=w(I.Options,null,null,function(a){m(a,"ui-x-calendar-select-options")});var J=(G.Layer=w(E)).prototype,K=J.Model,L=K.prototype,M="yyyy-MM-dd",N="yyyy-MM";new Date(0),G.setDatasource=function(a,b,c){a=a||{};var d=a.timeTypeOpt||{},e=this._aTimeTypeList=a.timeTypeList||[{text:"æ¥",value:"D"},{text:"å¨",value:"W"},{text:"æ",value:"M"},{text:"å­£",value:"Q"}],f=this._oModels=this._oModels||{};this._sTimeType=a.timeType||(e.length?e[0].value:void 0),a.disableCancelBtn&&this._uBtnCancel.hide(),a.disablePreviousBtn&&this._uBtnPrv.hide(),a.disableNextBtn&&this._uBtnNxt.hide();for(var g,h,i,j=0;g=e[j];j++)g=g.value,h=d[g]=q({timeType:g},d[g]),i=L.DEFAULT,h.selMode||(h.selMode=i.selMode),h.timeType||(h.timeType=i.timeType),h.selModeList||(h.selModeList=i.selModeList),h.defaultDate||(h.defaultDate=h.date),h.forbidEmpty=a.forbidEmpty||!1,f[g]?f[g].setDatasource(h):f[g]=new K(h);!b&&this.render(c)},G.render=function(a){a=a||{};var b=this._sTimeType;if(b){var c=this._oModels,d=this._aTimeTypeList,e=this._oLayers;!a.remainSlt&&this.$resetTimeTypeSlt();for(var f,g,h,i=0;f=d[i];i++)f=f.value,h=!1,e[f]instanceof z||(e[f]=v(this.Layer,e[f],this,{model:c[f]}),e[f].init(),h=!0),g=e[f],f==b?g._bLayerShow&&!a.remainLayer&&g.hide():e[f].hide();this.$flushThis()}},G.$setSize=new Function,G.$resetTimeTypeSlt=function(){var a=this._aTimeTypeList,b=this._uTimeTypeSlt;if(b){for(b.setValue(null);b.remove(0););for(var c,d=0;c=a[d];d++)b.add(String(c.text),null,{value:c.value});b.setValue(this._sTimeType)}},G.$showLayer=function(){var a=this.getCurrLayer(),b=this._bShiftBtnDisabled?this._eText:this._uBtnPrv.getOuter(),c=k(b),d=c.top+this.getHeight();if(!a._bLayerShow){a.render({remainSlt:!0,remainSelMode:!0}),a.show(),y(a);var e=a.getHeight();a.setPosition(c.left,d+e<=p().bottom?d:c.top-e)}},G.$clear=function(){this.getModel(),this.getModel().setDatasource({date:[]}),this.$flushThis()},G.$flushThis=function(){this._oDate;var a=this.getModel(),b=this.$getShowText();this._eText.innerHTML=b.shortHTML,b.fullText&&this._eText.setAttribute("title",b.fullText),this._uBtnPrv[a.testEdge(-1)?"enable":"disable"](),this._uBtnNxt[a.testEdge(1)?"enable":"disable"]()},G.$getSingleText=function(a){options=this._oTextOptions||{};var b=this.getModel(),c=this._sTimeType;if(!a)return"";if("D"==c)return n(a,M);if("W"==c){var d=r(a),e=b.getRange();return n(e.start?u("D",d.workday,e.start):d.workday,M)+(options.weekLinkStr||" ~ ")+n(e.end?t("D",d.weekend,e.end):d.weekend,M)}return"M"==c?n(a,N):"Q"==c?a.getFullYear()+"-Q"+s(a):void 0},G.$getShowText=function(){options=this._oTextOptions||{};var a,b,c,d=this.getType(),e=this.getModel(),f=e.getDate(),g=this._sTimeType,h=e.getSelMode(),i=options.rangeLinkStr||" è³ ";if(!f[0])return shortHTML=['<span class="',d,"-blank",'">',o(options.blankText||"è¯·éæ©æ¶é´"),"</span>"].join(""),{shortHTML:shortHTML,fullText:""};if("SINGLE"==h)b=a=this.$getSingleText(f[0],options);else if("RANGE"==h)"W"==g?(a=this.$getSingleText(f[0],options),c=this.$getSingleText(f[1],options),b="["+a+"]"+i+(c?"["+c+"]":""),a+=", ..."):a=b=this.$getSingleText(f[0],options)+i+this.$getSingleText(f[1],options);else if("MULTIPLE"==h){a=this.$getSingleText(f[0],options)+", ...",b=[];for(var j=0;j<f.length;j++)b.push(this.$getSingleText(f[j],options));b="["+b.join("], [")+"]"}return{shortHTML:o(a),fullText:b}},G.$click=function(a){B.$click.call(this),a.target==this._eText&&this.$showLayer()},G.$activate=function(a){B.$activate.call(this,a),this.$showLayer()},G.$goStep=function(a){this.getModel().goStep(a),this.getCurrLayer().render({remainSlt:!0,remainSelMode:!0}),this.$flushThis()},G.getModel=function(){return this.getCurrLayer().getModel()},G.getCurrLayer=function(){return this._oLayers[this._sTimeType]},G.getDate=function(){return this.getModel().getDate()},G.getValue=G.getDate,G.getTimeType=function(){return this.getModel().getTimeType()},G.getSelMode=function(){return this.getModel().getSelMode()},G.init=function(){B.init.call(this),this._uBtnCal.init(),this._uBtnCancel.init(),this._uBtnNxt.init(),this._uBtnPrv.init(),this._uTimeTypeSlt.init()},H.$click=function(a){var b,c=this.getParent();switch(this._sCommand){case"prv":c.$goStep(-1),b=!0;break;case"nxt":c.$goStep(1),b=!0;break;case"cal":c.$showLayer();break;case"cancel":c.$clear(),b=!0}x(c,"change",null,[c.getModel().getDate().slice()]),a.exit()},I.onchange=function(){var a=this.getParent();a._sTimeType=this.getValue(),a.$flushThis(),x(a,"change",null,[a.getModel().getDate().slice()])},J.$blur=function(){this.hide()},J.onchange=function(){var a=this.getParent();a.$flushThis(),this._bLayerChanged=!0},J.ondateclick=function(){var a=this.getModel(),b=a.getSelMode();a.getDate(),"SINGLE"==b&&this.hide()},J.show=function(){this._bLayerShow=!0,this._bLayerChanged=!1,G.Layer.superClass.show.apply(this,arguments)},J.hide=function(){if(this._bLayerShow){var a=this.getParent(),b=this.getModel(),c=b.getSelMode(),d=b.getDate();"RANGE"==c&&d[0]&&!d[1]&&(d[1]=new Date(d[0].getTime()),a.$flushThis()),a&&x(a,"layerhide"),this._bLayerChanged&&(x(a,"change",null,[this.getModel().getDate().slice()]),this._bLayerChanged=!1)}this._bLayerShow=!1,G.Layer.superClass.hide.apply(this,arguments)}}(),function(){function a(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function b(){for(var a=0,b=arguments,c=b.length,d={};c>a;a++)d[b[a++]]=b[a];return d}function c(a,b){return parseInt(a,b||10)}function d(a){return"string"==typeof a}function e(a){return"object"==typeof a}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}function g(a){return"number"==typeof a}function h(a){return fb.log(a)/fb.LN10}function i(a){return fb.pow(10,a)}function j(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function k(a){return a!==L&&null!==a}function l(a,b,c){var f,g,h="setAttribute";if(d(b))k(c)?a[h](b,c):a&&a.getAttribute&&(g=a.getAttribute(b));else if(k(b)&&e(b))for(f in b)a[h](f,b[f]);return g}function m(a){return f(a)?a:[a]}function n(){var a,b,c=arguments,d=c.length;for(a=0;d>a;a++)if(b=c[a],"undefined"!=typeof b&&null!==b)return b}function o(b,c){rb&&c&&c.opacity!==L&&(c.filter="alpha(opacity="+100*c.opacity+")"),a(b.style,c)}function p(b,c,d,e,f){var g=db.createElement(b);return c&&a(g,c),f&&o(g,{padding:0,border:Kb,margin:0}),d&&o(g,d),e&&e.appendChild(g),g}function q(b,c){var d=function(){};return d.prototype=new b,a(d.prototype,c),d}function r(a,b,d,e){var f=O.lang,g=a,h=isNaN(b=lb(b))?2:b,i=void 0===d?f.decimalPoint:d,j=void 0===e?f.thousandsSep:e,k=0>g?"-":"",l=String(c(g=lb(+g||0).toFixed(h))),m=l.length>3?l.length%3:0;return k+(m?l.substr(0,m)+j:"")+l.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+j)+(h?i+lb(g-l).toFixed(h).slice(2):"")}function s(a,b){return new Array((b||2)+1-String(a).length).join(0)+a}function t(a,b,c,d){var e,f;for(c=n(c,1),e=a/c,b||(b=[1,2,2.5,5,10],d&&d.allowDecimals===!1&&(1===c?b=[1,2,5,10]:.1>=c&&(b=[1/c]))),f=0;f<b.length&&(a=b[f],!(e<=(b[f]+(b[f+1]||b[f]))/2));f++);return a*=c}function u(a,b){var c,d,e=b||[[Rb,[1,2,5,10,20,25,50,100,200,500]],[Sb,[1,2,5,10,15,30]],[Tb,[1,2,5,10,15,30]],[Ub,[1,2,3,4,6,8,12]],[Vb,[1,2]],[Wb,[1,2]],[Xb,[1,2,3,4,6]],[Yb,null]],f=e[e.length-1],g=S[f[0]],h=f[1];for(d=0;d<e.length;d++)if(f=e[d],g=S[f[0]],h=f[1],e[d+1]){var i=(g*h[h.length-1]+S[e[d+1][0]])/2;if(i>=a)break}return g===S[Yb]&&5*g>a&&(h=[1,2,5]),g===S[Yb]&&5*g>a&&(h=[1,2,5]),c=t(a/g,h),{unitRange:g,count:c,unitName:f[0]}}function v(b,c,d,e){var f,g,h=[],i={},j=O.global.useUTC,k=new Date(c),l=b.unitRange,m=b.count;l>=S[Sb]&&(k.setMilliseconds(0),k.setSeconds(l>=S[Tb]?0:m*hb(k.getSeconds()/m))),l>=S[Tb]&&k[$](l>=S[Ub]?0:m*hb(k[U]()/m)),l>=S[Ub]&&k[_](l>=S[Vb]?0:m*hb(k[V]()/m)),l>=S[Vb]&&k[ab](l>=S[Xb]?1:m*hb(k[X]()/m)),l>=S[Xb]&&(k[bb](l>=S[Yb]?0:m*hb(k[Y]()/m)),g=k[Z]()),l>=S[Yb]&&(g-=g%m,k[cb](g)),l===S[Wb]&&k[ab](k[X]()-k[W]()+n(e,1)),f=1,g=k[Z]();for(var o=k.getTime(),p=k[Y](),q=k[X]();d>o;)h.push(o),l===S[Yb]?o=T(g+f*m,0):l===S[Xb]?o=T(g,p+f*m):j||l!==S[Vb]&&l!==S[Wb]?(o+=l*m,l<=S[Ub]&&0===o%S[Vb]&&(i[o]=Vb)):o=T(g,p,q+f*m*(l===S[Vb]?1:7)),f++;return h.push(o),h.info=a(b,{higherRanks:i,totalRange:l*m}),h}function w(){this.color=0,this.symbol=0}function x(a,b,c,d,e,f,g,h,i){var j,k=g.x,l=g.y,m=k+c+(i?h:-a-h),n=l-b+d+15;return 7>m&&(m=c+k+h),m+a>c+e&&(m-=m+a-(c+e),n=l-b+d-h,j=!0),d+5>n?(n=d+5,j&&l>=n&&n+b>=l&&(n=l+d+h)):n+b>d+f&&(n=d+f-b-h),{x:m,y:n}}function y(a,b){var c,d,e=a.length;for(d=0;e>d;d++)a[d].ss_i=d;for(a.sort(function(a,d){return c=b(a,d),0===c?a.ss_i-d.ss_i:c}),d=0;e>d;d++)delete a[d].ss_i}function z(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function A(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function B(a){var b;for(b in a)a[b]&&a[b].destroy&&a[b].destroy(),delete a[b]}function C(a){N||(N=p(Db)),a&&N.appendChild(a),N.innerHTML=""}function D(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;eb.console&&console.log(c)}function E(a){return parseFloat(a.toPrecision(14))}function F(a,b){Q=n(a,b.animation)}function G(){var a=O.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";T=a?Date.UTC:function(a,b,c,d,e,f){return new Date(a,b,n(c,1),n(d,0),n(e,0),n(f,0)).getTime()},U=b+"Minutes",V=b+"Hours",W=b+"Day",X=b+"Date",Y=b+"Month",Z=b+"FullYear",$=c+"Minutes",_=c+"Hours",ab=c+"Date",bb=c+"Month",cb=c+"FullYear"}function H(a){return uc=jc(uc,a.xAxis),vc=jc(vc,a.yAxis),a.xAxis=a.yAxis=L,O=jc(O,a),G(),O}function I(){return O}function J(){}function K(b,f){function g(b){function d(a,b){var c=this;c.pos=a,c.type=b||"",c.isNew=!0,b||c.addLabel()}function e(a){var b=this;return a&&(b.options=a,b.id=a.id),b}function f(a,b,c,d){var e=this;e.isNegative=b,e.options=a,e.x=c,e.stack=d,e.alignOptions={align:a.align||(Kc?b?"left":"right":"center"),verticalAlign:a.verticalAlign||(Kc?"middle":b?"bottom":"top"),y:n(a.y,Kc?4:b?14:-6),x:n(a.x,Kc?b?-6:6:0)},e.textAlign=a.textAlign||(Kc?b?"right":"left":"center")}function g(){var a,b=[],c=[];mb=nb=null,fc(Ub.series,function(d){if(d.visible||!Wc.ignoreHiddenSeries){var e,g,h,i,j,l,m,o,p,q,r,s=d.options,t=s.threshold,u=[],v=0;if(_b&&0>=t&&(t=s.threshold=null),Ob)m=d.xData,m.length&&(mb=kb(n(mb,m[0]),z(m)),nb=jb(n(nb,m[0]),A(m)));else{var w,x,y,B,C=d.cropped,D=d.xAxis.getExtremes(),E=!!d.modifyValue;for(e=s.stacking,zb="percent"===e,e&&(j=s.stack,i=d.type+n(j,""),l="-"+i,d.stackKey=i,g=b[i]||[],b[i]=g,h=c[l]||[],c[l]=h),zb&&(mb=0,nb=99),m=d.processedXData,o=d.processedYData,r=o.length,a=0;r>a;a++)if(p=m[a],q=o[a],null!==q&&q!==L&&(e?(w=t>q,x=w?h:g,y=w?l:i,q=x[p]=k(x[p])?x[p]+q:q,Sb[y]||(Sb[y]={}),Sb[y][p]||(Sb[y][p]=new f(Tb.stackLabels,w,p,j)),Sb[y][p].setTotal(q)):E&&(q=d.modifyValue(q)),C||(m[a+1]||p)>=D.min&&(m[a-1]||p)<=D.max))if(B=q.length)for(;B--;)null!==q[B]&&(u[v++]=q[B]);else u[v++]=q;!zb&&u.length&&(mb=kb(n(mb,u[0]),z(u)),nb=jb(n(nb,u[0]),A(u))),k(t)&&(mb>=t?(mb=t,wb=!0):t>nb&&(nb=t,xb=!0))}}})}function l(a,b,c){var d,e,f=E(hb(b/a)*a),g=E(ib(c/a)*a),h=[];for(d=f;g>=d&&(h.push(d),d=E(d+a),d!==e);)e=d;return h}function m(a,b,c,d){var e=[];if(d||(Ub._minorAutoInterval=null),a>=.5)a=gb(a),e=l(a,b,c);else if(a>=.08){var f,g,j,k,m,o,p,q=hb(b);for(f=a>.3?[1,2,4]:a>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],g=q;c+1>g&&!p;g++)for(k=f.length,j=0;k>j&&!p;j++)m=h(i(g)*f[j]),m>b&&e.push(o),o>c&&(p=!0),o=m}else{var r=i(b),s=i(c),u=Tb[d?"minorTickInterval":"tickInterval"],v="auto"===u?null:u,w=Tb.tickPixelInterval/(d?5:1),x=d?cc/Fb.length:cc;a=n(v,Ub._minorAutoInterval,(s-r)*w/(x||1)),a=t(a,null,fb.pow(10,hb(fb.log(a)/fb.LN10))),e=ic(l(a,r,s),h),d||(Ub._minorAutoInterval=a/5)}return d||(Cb=a),e}function o(){var a,b,c,d=[];if(_b)for(c=Fb.length,b=1;c>b;b++)d=d.concat(m(Db,Fb[b-1],Fb[b],!0));else for(a=hc+(Fb[0]-hc)%Db;gc>=a;a+=Db)d.push(a);return d}function p(){var a,b,c,d,e,f,g,h,i=nb-mb>=dc;Ob&&dc===L&&!_b&&(k(Tb.min)||k(Tb.max)?dc=null:(fc(Ub.series,function(a){for(e=a.xData,f=a.xIncrement?1:e.length-1,c=f;c>0;c--)d=e[c]-e[c-1],(b===L||b>d)&&(b=d)}),dc=kb(5*b,nb-mb))),dc>gc-hc&&(a=(dc-gc+hc)/2,g=[hc-a,n(Tb.min,hc-a)],i&&(g[2]=mb),hc=A(g),h=[hc+dc,n(Tb.max,hc+dc)],i&&(h[2]=nb),gc=z(h),dc>gc-hc&&(g[0]=gc-dc,g[1]=n(Tb.min,gc-dc),hc=A(g)))}function q(a){var b,c,d=Tb.tickInterval,e=Tb.tickPixelInterval;if(qc?(vb=fd[Ob?"xAxis":"yAxis"][Tb.linkedTo],c=vb.getExtremes(),hc=n(c.min,c.dataMin),gc=n(c.max,c.dataMax),Tb.type!==vb.options.type&&D(11,1)):(hc=n(ob,Tb.min,mb),gc=n(pb,Tb.max,nb)),_b&&(!a&&kb(hc,mb)<=0&&D(10,1),hc=h(hc),gc=h(gc)),ec&&(ob=hc=jb(hc,gc-ec),pb=gc,a&&(ec=null)),p(),Gc||zb||qc||!k(hc)||!k(gc)||(b=gc-hc||1,k(Tb.min)||k(ob)||!nc||!(0>mb)&&wb||(hc-=b*nc),k(Tb.max)||k(pb)||!oc||!(nb>0)&&xb||(gc+=b*oc)),Cb=hc===gc||void 0===hc||void 0===gc?1:qc&&!d&&e===vb.options.tickPixelInterval?vb.tickInterval:n(d,Gc?1:(gc-hc)*e/(cc||1)),Ob&&!a&&fc(Ub.series,function(a){a.processData(hc!==sb||gc!==ub)}),ab(),Ub.beforeSetTickPositions&&Ub.beforeSetTickPositions(),Ub.postProcessTickInterval&&(Cb=Ub.postProcessTickInterval(Cb)),$b||_b||(Eb=fb.pow(10,hb(fb.log(Cb)/fb.LN10)),k(Tb.tickInterval)||(Cb=t(Cb,null,Eb,Tb))),Ub.tickInterval=Cb,Db="auto"===Tb.minorTickInterval&&Cb?Cb/5:Tb.minorTickInterval,Fb=Tb.tickPositions||Cc&&Cc.apply(Ub,[hc,gc]),Fb||(Fb=$b?(Ub.getNonLinearTimeTicks||v)(u(Cb,Tb.units),hc,gc,Tb.startOfWeek,Ub.ordinalPositions,Ub.closestPointRange,!0):_b?m(Cb,hc,gc):l(Cb,hc,gc)),!qc){var f=Fb[0],g=Fb[Fb.length-1];Tb.startOnTick?hc=f:hc>f&&Fb.shift(),Tb.endOnTick?gc=g:g>gc&&Fb.pop(),Jc||(Jc={x:0,y:0}),!$b&&Fb.length>Jc[bc]&&Tb.alignTicks!==!1&&(Jc[bc]=Fb.length)}}function s(){if(Jc&&Jc[bc]&&!$b&&!Gc&&!qc&&Tb.alignTicks!==!1){var a=Hb,b=Fb.length;if(Hb=Jc[bc],Hb>b){for(;Fb.length<Hb;)Fb.push(E(Fb[Fb.length-1]+Cb));S*=(b-1)/(Hb-1),gc=Fb[Fb.length-1]}k(a)&&Hb!==a&&(Ub.isDirty=!0)}}function w(){var a,b,c,d;if(sb=hc,ub=gc,R=cc,cc=Qb?X:Y,d=cc!==R,fc(Ub.series,function(a){(a.isDirtyData||a.isDirty||a.xAxis.isDirty)&&(c=!0)}),d||c||qc||ob!==qb||pb!==rb){if(g(),q(),qb=ob,rb=pb,!Ob)for(a in Sb)for(b in Sb[a])Sb[a][b].cum=Sb[a][b].total;Ub.isDirty||(Ub.isDirty=d||hc!==sb||gc!==ub)}}function x(b,c,d,e,f){d=n(d,!0),f=a(f,{min:b,max:c}),mc(Ub,"setExtremes",f,function(){ob=b,pb=c,Ub.isDirtyExtremes=!0,d&&fd.redraw(e)})}function y(){var a=Tb.offsetLeft||0,b=Tb.offsetRight||0;V=n(Tb.left,yb+a),W=n(Tb.top,tb),X=n(Tb.width,Ac-a+b),Y=n(Tb.height,tc),Z=Wb-Y-W,$=Vb-X-V,cc=Qb?X:Y,Ub.left=V,Ub.top=W,Ub.len=cc}function C(){return{min:_b?E(i(hc)):hc,max:_b?E(i(gc)):gc,dataMin:mb,dataMax:nb,userMin:ob,userMax:pb}}function F(a){var b=_b?i(hc):hc,c=_b?i(gc):gc;return b>a||null===a?a=b:a>c&&(a=c),_(a,0,1,0,1)}function G(a){var b=new e(a).render();return sc.push(b),b}function H(){var a,b,c=Ub.series.length&&k(hc)&&k(gc),e=c||n(Tb.showEmpty,!0),f=0,g=0,h=Tb.title,i=Tb.labels,j=[-1,1,1,-1][Rb];if(cb||(cb=Lc.g("axis").attr({zIndex:7}).add(),db=Lc.g("grid").attr({zIndex:Tb.gridZIndex||1}).add()),Kb=0,c||qc)fc(Fb,function(a){Dc[a]?Dc[a].addLabel():Dc[a]=new d(a)}),fc(Fb,function(a){(0===Rb||2===Rb||{1:"left",3:"right"}[Rb]===i.align)&&(Kb=jb(Dc[a].getLabelSize(),Kb))}),Ic&&(Kb+=16*(Ic-1));else for(b in Dc)Dc[b].destroy(),delete Dc[b];h&&h.text&&(Q||(Q=Ub.axisTitle=Lc.text(h.text,0,0,h.useHTML).attr({zIndex:7,rotation:h.rotation||0,align:h.textAlign||{low:"left",middle:"center",high:"right"}[h.align]}).css(h.style).add(),Q.isNew=!0),e&&(f=Q.getBBox()[Qb?"height":"width"],g=n(h.margin,Qb?5:10),a=h.offset),Q[e?"show":"hide"]()),ac=j*n(Tb.offset,Bb[Rb]),Nb=n(a,Kb+g+(2!==Rb&&Kb&&j*Tb.labels[Qb?"y":"x"])),Bb[Rb]=jb(Bb[Rb],Nb+f+j*ac)}function I(){var a,b,f,g,h,j=Tb.title,l=Tb.stackLabels,m=Tb.alternateGridColor,p=Tb.lineWidth,q=fd.hasRendered,r=q&&k(sb)&&!isNaN(sb),s=Ub.series.length&&k(hc)&&k(gc),t=s||n(Tb.showEmpty,!0);if((s||qc)&&(Db&&!Gc&&fc(o(),function(a){Ec[a]||(Ec[a]=new d(a,"minor")),r&&Ec[a].isNew&&Ec[a].render(null,!0),Ec[a].isActive=!0,Ec[a].render()}),fc(Fb.slice(1).concat([Fb[0]]),function(a,b){b=b===Fb.length-1?0:b+1,(!qc||a>=hc&&gc>=a)&&(Dc[a]||(Dc[a]=new d(a)),r&&Dc[a].isNew&&Dc[a].render(b,!0),Dc[a].isActive=!0,Dc[a].render(b))}),m&&fc(Fb,function(a,b){0===b%2&&gc>a&&(Fc[a]||(Fc[a]=new e),g=a,h=Fb[b+1]!==L?Fb[b+1]:gc,Fc[a].options={from:_b?i(g):g,to:_b?i(h):h,color:m},Fc[a].render(),Fc[a].isActive=!0)}),Ub._addedPlotLB||(fc((Tb.plotLines||[]).concat(Tb.plotBands||[]),function(a){G(a)}),Ub._addedPlotLB=!0)),fc([Dc,Ec,Fc],function(a){var b;for(b in a)a[b].isActive?a[b].isActive=!1:(a[b].destroy(),delete a[b])}),p&&(a=V+(Pb?X:0)+ac,b=Wb-Z-(Pb?Y:0)+ac,f=Lc.crispLine([Lb,Qb?V:a,Qb?b:W,Mb,Qb?Vb-$:a,Qb?b:Wb-Z],p),eb?eb.animate({d:f}):eb=Lc.path(f).attr({stroke:Tb.lineColor,"stroke-width":p,zIndex:7}).add(),eb[t?"show":"hide"]()),Q&&t){var u=Qb?V:W,v=c(j.style.fontSize||12),w={low:u+(Qb?0:cc),middle:u+cc/2,high:u+(Qb?cc:0)}[j.align],x=(Qb?W+Y:V)+(Qb?1:-1)*(Pb?-1:1)*Nb+(2===Rb?v:0);Q[Q.isNew?"attr":"animate"]({x:Qb?w:x+(Pb?X:0)+ac+(j.x||0),y:Qb?x-(Pb?Y:0)+ac:w+(j.y||0)}),Q.isNew=!1}if(l&&l.enabled){var y,z,A,B=Ub.stackTotalGroup;B||(Ub.stackTotalGroup=B=Lc.g("stack-labels").attr({visibility:Ib,zIndex:6}).translate(yb,tb).add());for(y in Sb){z=Sb[y];for(A in z)z[A].render(B)}}Ub.isDirty=!1}function J(a){for(var b=sc.length;b--;)sc[b].id===a&&sc[b].destroy()}function K(a,b){Tb.title=jc(Tb.title,a),Q=Q.destroy(),Ub.isDirty=!0,n(b,!0)&&fd.redraw()}function M(){Bc.resetTracker&&Bc.resetTracker(),I(),fc(sc,function(a){a.render()}),fc(Ub.series,function(a){a.isDirty=!0})}function N(a,c){Ub.categories=b.categories=Gc=a,fc(Ub.series,function(a){a.translate(),a.setTooltipPoints(!0)}),Ub.isDirty=!0,n(c,!0)&&fd.redraw()}function O(){var a;lc(Ub);for(a in Sb)B(Sb[a]),Sb[a]=null;Ub.stackTotalGroup&&(Ub.stackTotalGroup=Ub.stackTotalGroup.destroy()),fc([Dc,Ec,Fc,sc],function(a){B(a)}),fc([eb,cb,db,Q],function(a){a&&a.destroy()}),eb=cb=db=Q=null}var Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,mb,nb,ob,pb,qb,rb,sb,ub,vb,wb,xb,zb,Ab,Cb,Db,Eb,Fb,Hb,Kb,Nb,Ob=b.isX,Pb=b.opposite,Qb=Kc?!Ob:Ob,Rb=Qb?Pb?0:2:Pb?1:3,Sb={},Tb=jc(Ob?uc:vc,[zc,xc,yc,wc][Rb],b),Ub=this,Zb=Tb.type,$b="datetime"===Zb,_b="logarithmic"===Zb,ac=Tb.offset||0,bc=Ob?"x":"y",cc=0,dc=Tb.minRange||Tb.maxZoom,ec=Tb.range,gc=null,hc=null,nc=Tb.minPadding,oc=Tb.maxPadding,pc=0,qc=k(Tb.linkedTo),rc=Tb.events,sc=[],Cc=Tb.tickPositioner,Dc={},Ec={},Fc={},Gc=Tb.categories,Hc=Tb.labels.formatter||function(){var a,b=this.value,c=this.dateTimeLabelFormat;return a=c?P(c,b):0===Cb%1e6?b/1e6+"M":0===Cb%1e3?b/1e3+"k":!Gc&&b>=1e3?r(b,0):b},Ic=Qb&&Tb.labels.staggerLines,Mc=Tb.reversed,Nc=Gc&&"between"===Tb.tickmarkPlacement?.5:0;d.prototype={addLabel:function(){var b,c,d,e=this,f=e.pos,g=Tb.labels,h=Gc&&Qb&&Gc.length&&!g.step&&!g.staggerLines&&!g.rotation&&Ac/Gc.length||!Qb&&Ac/2,j=f===Fb[0],l=f===Fb[Fb.length-1],m=Gc&&k(Gc[f])?Gc[f]:f,n=e.label,o=Fb.info;$b&&o&&(d=Tb.dateTimeLabelFormats[o.higherRanks[f]||o.unitName]),e.isFirst=j,e.isLast=l,b=Hc.call({axis:Ub,chart:fd,isFirst:j,isLast:l,dateTimeLabelFormat:d,value:_b?E(i(m)):m}),c=h&&{width:jb(1,gb(h-2*(g.padding||10)))+Jb},c=a(c,g.style),k(n)?n&&n.attr({text:b}).css(c):e.label=k(b)&&g.enabled?Lc.text(b,0,0,g.useHTML).attr({align:g.align,rotation:g.rotation}).css(c).add(cb):null},getLabelSize:function(){var a=this.label;return a?(this.labelBBox=a.getBBox())[Qb?"height":"width"]:0},getLabelSides:function(){var a=this.labelBBox,b=Tb.labels,c=a.width,d=c*{left:0,center:.5,right:1}[b.align]-b.x;return[-d,c-d]},handleOverflow:function(a){var b=!0,c=this.isFirst,d=this.isLast,e=this.label,f=e.x;if(c||d){var g=this.getLabelSides(),h=g[0],i=g[1],j=fd.plotLeft,k=j+Ub.len,l=Dc[Fb[a+(c?1:-1)]],m=l&&l.label.x+l.getLabelSides()[c?0:1];c&&!Mc||d&&Mc?j>f+h&&(f=j-h,l&&f+i>m&&(b=!1)):f+i>k&&(f=k-i,l&&m>f+h&&(b=!1)),e.x=f}return b},render:function(a,b){var d,e,f,g,h,i=this,j=i.type,l=i.label,m=i.pos,o=Tb.labels,p=i.gridLine,q=j?j+"Grid":"grid",r=j?j+"Tick":"tick",s=Tb[q+"LineWidth"],t=Tb[q+"LineColor"],u=Tb[q+"LineDashStyle"],v=Tb[r+"Length"],w=Tb[r+"Width"]||0,x=Tb[r+"Color"],y=Tb[r+"Position"],z=i.mark,A=o.step,B=b&&Yb||Wb,C=!0;g=Qb?_(m+Nc,null,null,b)+T:V+ac+(Pb?(b&&Xb||Vb)-$-V:0),h=Qb?B-Z+ac-(Pb?Y:0):B-_(m+Nc,null,null,b)-T,s&&(d=bb(m+Nc,s,b),p===L&&(f={stroke:t,"stroke-width":s},u&&(f.dashstyle=u),j||(f.zIndex=1),i.gridLine=p=s?Lc.path(d).attr(f).add(db):null),!b&&p&&d&&p.animate({d:d})),w&&("inside"===y&&(v=-v),Pb&&(v=-v),e=Lc.crispLine([Lb,g,h,Mb,g+(Qb?0:-v),h+(Qb?v:0)],w),z?z.animate({d:e}):i.mark=Lc.path(e).attr({stroke:x,"stroke-width":w}).add(cb)),l&&!isNaN(g)&&(g=g+o.x-(Nc&&Qb?Nc*S*(Mc?-1:1):0),h=h+o.y-(Nc&&!Qb?Nc*S*(Mc?1:-1):0),k(o.y)||(h+=.9*c(l.styles.lineHeight)-l.getBBox().height/2),Ic&&(h+=16*(a/(A||1)%Ic)),l.x=g,l.y=h,i.isFirst&&!n(Tb.showFirstLabel,1)||i.isLast&&!n(Tb.showLastLabel,1)?C=!1:Ic||!Qb||"justify"!==o.overflow||i.handleOverflow(a)||(C=!1),A&&a%A&&(C=!1),C?(l[i.isNew?"attr":"animate"]({x:l.x,y:l.y}),l.show(),i.isNew=!1):l.hide())},destroy:function(){B(this)}},e.prototype={render:function(){var a,b,c,d,e,f,g,i,j=this,l=(Ub.pointRange||0)/2,m=j.options,o=m.label,p=j.label,q=m.width,r=m.to,s=m.from,t=m.value,u=m.dashStyle,v=j.svgElem,w=[],x=m.color,y=m.zIndex,B=m.events;if(_b&&(s=h(s),r=h(r),t=h(t)),q)w=bb(t,q),i={stroke:x,"stroke-width":q},u&&(i.dashstyle=u);else{if(!k(s)||!k(r))return;s=jb(s,hc-l),r=kb(r,gc+l),a=bb(r),w=bb(s),w&&a?w.push(a[4],a[5],a[1],a[2]):w=null,i={fill:x}}if(k(y)&&(i.zIndex=y),v)w?v.animate({d:w},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()});else if(w&&w.length&&(j.svgElem=v=Lc.path(w).attr(i).add(),B)){b=function(a){v.on(a,function(b){B[a].apply(j,[b])})};for(c in B)b(c)}return o&&k(o.text)&&w&&w.length&&X>0&&Y>0?(o=jc({align:Qb&&a&&"center",x:Qb?!a&&4:10,verticalAlign:!Qb&&a&&"middle",y:Qb?a?16:10:a?6:-4,rotation:Qb&&!a&&90},o),p||(j.label=p=Lc.text(o.text,0,0).attr({align:o.textAlign||o.align,rotation:o.rotation,zIndex:y}).css(o.style).add()),d=[w[1],w[4],n(w[6],w[1])],e=[w[2],w[5],n(w[7],w[2])],f=z(d),g=z(e),p.align(o,!1,{x:f,y:g,width:A(d)-f,height:A(e)-g}),p.show()):p&&p.hide(),j},destroy:function(){var a=this;B(a),j(sc,a)}},f.prototype={destroy:function(){B(this)},setTotal:function(a){this.total=a,this.cum=a},render:function(a){var b=this,c=b.options.formatter.call(b);b.label?b.label.attr({text:c,visibility:Gb}):b.label=fd.renderer.text(c,0,0).css(b.options.style).attr({align:b.textAlign,rotation:b.options.rotation,visibility:Gb}).add(a)},setOffset:function(a,b){var c=this,d=c.isNegative,e=Ub.translate(c.total,0,0,0,1),f=Ub.translate(0),g=lb(e-f),h=fd.xAxis[0].translate(c.x)+a,i=fd.plotHeight,j={x:Kc?d?e:e-g:h,y:Kc?i-h-b:d?i-e-g:i-e,width:Kc?g:b,height:Kc?b:g};c.label&&c.label.align(c.alignOptions,null,j).attr({visibility:Ib})}},_=function(a,b,c,d,e){var f,g=1,h=0,i=d?U:S,j=d?sb:hc,k=Tb.ordinal||_b&&e;return i||(i=S),c&&(g*=-1,h=cc),Mc&&(g*=-1,h-=g*cc),b?(Mc&&(a=cc-a),f=a/i+j,k&&(f=Ub.lin2val(f))):(k&&(a=Ub.val2lin(a)),f=g*(a-j)*i+h+g*pc),f},bb=function(a,b,c){var d,e,f,g,h,i=_(a,null,null,c),j=c&&Yb||Wb,k=c&&Xb||Vb;return d=f=gb(i+T),e=g=gb(j-i-T),isNaN(i)?h=!0:Qb?(e=W,g=j-Z,(V>d||d>V+X)&&(h=!0)):(d=V,f=k-$,(W>e||e>W+Y)&&(h=!0)),h?null:Lc.crispLine([Lb,d,e,Mb,f,g],b||0)},ab=function(){var a,b,c=gc-hc,d=0;Ob&&(qc?d=vb.pointRange:fc(Ub.series,function(c){d=jb(d,c.pointRange),b=c.closestPointRange,!c.noSharedTooltip&&k(b)&&(a=k(a)?kb(a,b):b)}),Ub.pointRange=d,Ub.closestPointRange=a),U=S,Ub.translationSlope=S=cc/(c+d||1),T=Qb?V:Z,pc=S*(d/2)},kd.push(Ub),fd[Ob?"xAxis":"yAxis"].push(Ub),Kc&&Ob&&Mc===L&&(Mc=!0),a(Ub,{addPlotBand:G,addPlotLine:G,adjustTickAmount:s,categories:Gc,getExtremes:C,getPlotLinePath:bb,getThreshold:F,isXAxis:Ob,options:Tb,plotLinesAndBands:sc,getOffset:H,render:I,setAxisSize:y,setAxisTranslation:ab,setCategories:N,setExtremes:x,setScale:w,setTickPositions:q,translate:_,redraw:M,removePlotBand:J,removePlotLine:J,reversed:Mc,setTitle:K,series:[],stacks:Sb,destroy:O});for(Ab in rc)kc(Ub,Ab,rc[Ab]);_b&&(Ub.val2lin=h,Ub.lin2val=i)}function q(a){function b(){fc(l,function(a){a&&a.destroy()}),u&&(u=u.destroy())}function d(){var b,c=this,d=c.points||m(c),e=d[0].series;return b=[e.tooltipHeaderFormatter(d[0].key)],fc(d,function(a){e=a.series,b.push(e.tooltipFormatter&&e.tooltipFormatter(a)||a.point.tooltipFormatter(e.tooltipOptions.pointFormat))}),b.push(a.footerFormat||""),b.join("")}function e(a,b){return s=r?a:(2*s+a)/3,t=r?b:(t+b)/2,8>=sb?(u.attr({x:a,y:t}),void 0):(u.attr({x:s,y:t}),Mc=lb(a-s)>1||lb(b-t)>1?function(){e(a,b)}:null,void 0)}function f(){if(!r){var a=fd.hoverPoints;u.hide(),a&&fc(a,function(a){a.setState()}),fd.hoverPoints=null,r=!0}}function g(){fc(l,function(a){a&&a.hide()})}function h(b){var c,g,h,j,o,q,s,t,v={},w=[],y=b.tooltipPos,z=a.formatter||d,A=fd.hoverPoints;if(!p||b.series&&b.series.noSharedTooltip?v=b.getLabelConfig():(o=0,A&&fc(A,function(a){a.setState()}),fd.hoverPoints=b,fc(b,function(a){a.setState(Pb),o+=a.plotY,w.push(a.getLabelConfig())}),j=b[0].plotX,o=gb(o)/b.length,v={x:b[0].category},v.points=w,b=b[0]),q=z.call(v),i=b.series,j=n(j,b.plotX),o=n(o,b.plotY),c=gb(y?y[0]:Kc?Ac-o:j),g=gb(y?y[1]:Kc?tc-j:o),h=p||!i.isCartesian||i.tooltipOutsidePlot||cc(c,g),q!==!1&&h?(r&&(u.show(),r=!1),u.attr({text:q}),t=a.borderColor||b.color||i.color||"#606060",u.attr({stroke:t}),s=x(u.width,u.height,yb,tb,Ac,tc,{x:c,y:g},n(a.distance,12),Kc),e(gb(s.x),gb(s.y))):f(),k){k=m(k);for(var B,C,D,E=k.length;E--;)D=b.series[E?"yAxis":"xAxis"],k[E]&&D&&(B=D.getPlotLinePath(E?n(b.stackY,b.y):b.x,1),l[E]?l[E].attr({d:B,visibility:Ib}):(C={"stroke-width":k[E].width||1,stroke:k[E].color||"#C0C0C0",zIndex:k[E].zIndex||2},k[E].dashStyle&&(C.dashstyle=k[E].dashStyle),l[E]=Lc.path(B).attr(C).add()))}mc(fd,"tooltipRefresh",{text:q,x:c+yb,y:g+tb,borderColor:t})}var i,j=a.borderWidth,k=a.crosshairs,l=[],o=a.style,p=a.shared,q=c(o.padding),r=!0,s=0,t=0;o.padding=0;var u=Lc.label("",0,0,null,null,null,a.useHTML).attr({padding:q,fill:a.backgroundColor,"stroke-width":j,r:a.borderRadius,zIndex:8}).css(o).hide().add();return zb||u.shadow(a.shadow),{shared:p,refresh:h,hide:f,hideCrosshairs:g,destroy:b}}function s(b){function c(b){var c,d,e,f,g;return b=b||eb.event,b.target||(b.target=b.srcElement),b.originalEvent&&(b=b.originalEvent),b.event&&(b=b.event),c=b.touches?b.touches.item(0):b,Hc=hc(Rb),d=Hc.left,e=Hc.top,rb?(f=b.x,g=b.y):(f=c.pageX-d,g=c.pageY-e),a(b,{chartX:gb(f),chartY:gb(g)})}function d(a){var b={xAxis:[],yAxis:[]};return fc(kd,function(c){var d=c.translate,e=c.isXAxis,f=Kc?!e:e;b[e?"xAxis":"yAxis"].push({axis:c,value:d(f?a.chartX-yb:tc-a.chartY+tb,!0)})}),b}function e(a){var c,d,e,f,g=fd.hoverPoint,h=fd.hoverSeries,i=Vb,j=Kc?a.chartY:a.chartX-yb;if(dc&&b.shared&&(!h||!h.noSharedTooltip)){for(d=[],e=ld.length,f=0;e>f;f++)ld[f].visible&&ld[f].options.enableMouseTracking!==!1&&!ld[f].noSharedTooltip&&ld[f].tooltipPoints.length&&(c=ld[f].tooltipPoints[j],c._dist=lb(j-c.plotX),i=kb(i,c._dist),d.push(c));for(e=d.length;e--;)d[e]._dist>i&&d.splice(e,1);d.length&&d[0].plotX!==Oc&&(dc.refresh(d),Oc=d[0].plotX)}h&&h.tracker&&(c=h.tooltipPoints[j],c&&c!==g&&c.onMouseOver())}function f(){var a=fd.hoverSeries,b=fd.hoverPoint;b&&b.onMouseOut(),a&&a.onMouseOut(),dc&&(dc.hide(),dc.hideCrosshairs()),Oc=null}function g(){if(s){var a={xAxis:[],yAxis:[]},b=s.getBBox(),c=b.x-yb,d=b.y-tb;r&&(fc(kd,function(e){if(e.options.zoomEnabled!==!1){var f=e.translate,g=e.isXAxis,h=Kc?!g:g,i=f(h?c:tc-d-b.height,!0,0,0,1),j=f(h?c+b.width:tc-d,!0,0,0,1);a[g?"xAxis":"yAxis"].push({axis:e,min:kb(i,j),max:jb(i,j)})}}),mc(fd,"selection",a,Uc)),s=s.destroy()}o(Rb,{cursor:"auto"}),fd.mouseIsDown=ec=r=!1,lc(db,Ab?"touchend":"mouseup",g)}function h(a){var b=k(a.pageX)?a.pageX:a.page.x,c=k(a.pageX)?a.pageY:a.page.y;Hc&&!cc(b-Hc.left-yb,c-Hc.top-tb)&&f()}function i(){f(),Hc=null}function j(){var b=!0;Rb.onmousedown=function(a){a=c(a),!Ab&&a.preventDefault&&a.preventDefault(),fd.mouseIsDown=ec=!0,fd.mouseDownX=n=a.chartX,p=a.chartY,kc(db,Ab?"touchend":"mouseup",g)};var j=function(a){if(!(a&&a.touches&&a.touches.length>1)){a=c(a),Ab||(a.returnValue=!1);var d=a.chartX,f=a.chartY,g=!cc(d-yb,f-tb);if(Ab&&"touchstart"===a.type&&(l(a.target,"isTracker")?fd.runTrackerClick||a.preventDefault():hd||g||a.preventDefault()),g&&(yb>d?d=yb:d>yb+Ac&&(d=yb+Ac),tb>f?f=tb:f>tb+tc&&(f=tb+tc)),ec&&"touchstart"!==a.type){if(r=Math.sqrt(Math.pow(n-d,2)+Math.pow(p-f,2)),r>10){var h=cc(n-yb,p-tb);if(id&&(u||v)&&h&&(s||(s=Lc.rect(yb,tb,w?1:Ac,x?1:tc,0).attr({fill:Wc.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),s&&w){var i=d-n;s.attr({width:lb(i),x:(i>0?0:i)+n})}if(s&&x){var j=f-p;s.attr({height:lb(j),y:(j>0?0:j)+p})}h&&!s&&Wc.panning&&fd.pan(d)}}else g||e(a);return b=g,g||!id}};Rb.onmousemove=j,kc(Rb,"mouseleave",i),kc(db,"mousemove",h),Rb.ontouchstart=function(a){(u||v)&&Rb.onmousedown(a),j(a)},Rb.ontouchmove=j,Rb.ontouchend=function(){r&&f()},Rb.onclick=function(b){var e=fd.hoverPoint;if(b=c(b),b.cancelBubble=!0,!r)if(e&&(l(b.target,"isTracker")||l(b.target.parentNode,"isTracker"))){var f=e.plotX,g=e.plotY;a(e,{pageX:Hc.left+yb+(Kc?Ac-g:f),pageY:Hc.top+tb+(Kc?tc-f:g)}),mc(e.series,"click",a(b,{point:e})),e.firePointEvent("click",b)}else a(b,d(b)),cc(b.chartX-yb,b.chartY-tb)&&mc(fd,"click",b);r=!1}}function m(){fd.trackerGroup&&(fd.trackerGroup=Cc=fd.trackerGroup.destroy()),lc(Rb,"mouseleave",i),lc(db,"mousemove",h),Rb.onclick=Rb.onmousedown=Rb.onmousemove=Rb.ontouchstart=Rb.ontouchend=Rb.ontouchmove=null}var n,p,r,s,t=zb?"":Wc.zoomType,u=/x/.test(t),v=/y/.test(t),w=u&&!Kc||v&&Kc,x=v&&!Kc||u&&Kc;Cc||(fd.trackerGroup=Cc=Lc.g("tracker").attr({zIndex:9}).add()),b.enabled&&(fd.tooltip=dc=q(b),Nc=setInterval(function(){Mc&&Mc()},32)),j(),a(this,{zoomX:u,zoomY:v,resetTracker:f,normalizeMouseEvent:c,destroy:m})}function G(a){var b,c=a.type||Wc.type||Wc.defaultSeriesType,d=pc[c],e=fd.hasRendered;return e&&(Kc&&"column"===c?d=pc.bar:Kc||"bar"!==c||(d=pc.column)),b=new d,b.init(fd,a),!e&&b.inverted&&(Kc=!0),b.isCartesian&&(id=b.isCartesian),ld.push(b),b}function H(a,b,c){var d;return a&&(F(c,fd),b=n(b,!0),mc(fd,"addSeries",{options:a},function(){d=G(a),d.isDirty=!0,fd.isDirtyLegend=!0,b&&fd.redraw()})),d}function I(){Wc.alignTicks!==!1&&fc(kd,function(a){a.adjustTickAmount()
}),Jc=null}function J(a){var b,c,d=fd.isDirtyLegend,e=fd.isDirtyBox,f=ld.length,g=f,h=fd.clipRect;for(F(a,fd);g--;)if(c=ld[g],c.isDirty&&c.options.stacking){b=!0;break}if(b)for(g=f;g--;)c=ld[g],c.options.stacking&&(c.isDirty=!0);fc(ld,function(a){a.isDirty&&"point"===a.options.legendType&&(d=!0)}),d&&Ec.renderLegend&&(Ec.renderLegend(),fd.isDirtyLegend=!1),id&&(jd||(Jc=null,fc(kd,function(a){a.setScale()})),I(),Qc(),fc(kd,function(a){a.isDirtyExtremes&&(a.isDirtyExtremes=!1,mc(a,"afterSetExtremes",a.getExtremes())),(a.isDirty||e)&&(a.redraw(),e=!0)})),e&&(Pc(),h&&(oc(h),h.animate({width:fd.plotSizeX,height:fd.plotSizeY+1}))),fc(ld,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),Bc&&Bc.resetTracker&&Bc.resetTracker(),Lc.draw(),mc(fd,"redraw")}function K(b){var c=mb.loading;qc||(qc=p(Db,{className:Hb+"loading"},a(c.style,{left:yb+Jb,top:tb+Jb,width:Ac+Jb,height:tc+Jb,zIndex:10,display:Kb}),Rb),rc=p("span",null,c.labelStyle,qc)),rc.innerHTML=b||mb.lang.loading,sc||(o(qc,{opacity:0,display:""}),nc(qc,{opacity:c.style.opacity},{duration:c.showDuration||0}),sc=!0)}function N(){qc&&nc(qc,{opacity:0},{duration:mb.loading.hideDuration||100,complete:function(){o(qc,{display:Kb})}}),sc=!1}function R(a){var b,c,d;for(b=0;b<kd.length;b++)if(kd[b].options.id===a)return kd[b];for(b=0;b<ld.length;b++)if(ld[b].options.id===a)return ld[b];for(b=0;b<ld.length;b++)for(d=ld[b].points||[],c=0;c<d.length;c++)if(d[c].id===a)return d[c];return null}function S(){var a,b,c=mb.xAxis||{},d=mb.yAxis||{};c=m(c),fc(c,function(a,b){a.index=b,a.isX=!0}),d=m(d),fc(d,function(a,b){a.index=b}),a=c.concat(d),fc(a,function(a){b=new g(a)}),I()}function T(){var a=[];return fc(ld,function(b){a=a.concat(gc(b.points,function(a){return a.selected}))}),a}function U(){return gc(ld,function(a){return a.selected})}function V(){var a=O.lang,b=Wc.resetZoomButton,c=b.theme,d=c.states,e="chart"===b.relativeTo?null:{x:yb,y:tb,width:Ac,height:tc};fd.resetZoomButton=Lc.button(a.resetZoom,null,null,Vc,c,d&&d.hover).attr({align:b.position.align,title:a.resetZoomTitle}).add().align(b.position,!1,e)}function W(a,b){pb=jc(mb.title,a),qb=jc(mb.subtitle,b),fc([["title",a,pb],["subtitle",b,qb]],function(a){var b=a[0],c=fd[b],d=a[1],e=a[2];c&&d&&(c=c.destroy()),e&&e.text&&!c&&(fd[b]=Lc.text(e.text,0,0,e.useHTML).attr({align:e.align,"class":Hb+b,zIndex:e.zIndex||4}).css(e.style).add().align(e,!1,ob))})}function X(){Tb=(Qb||Nb).offsetWidth,Ub=(Qb||Nb).offsetHeight,fd.chartWidth=Vb=Wc.width||Tb||600,fd.chartHeight=Wb=Wc.height||(Ub>19?Ub:400)}function Y(){Nb=Wc.renderTo,Sb=Hb+Cb++,d(Nb)&&(Nb=db.getElementById(Nb)),Nb||D(13,!0),Nb.innerHTML="",Nb.offsetWidth||(Qb=Nb.cloneNode(0),o(Qb,{position:Eb,top:"-9999px",display:""}),db.body.appendChild(Qb)),X(),fd.container=Rb=p(Db,{className:Hb+"container"+(Wc.className?" "+Wc.className:""),id:Sb},a({position:Fb,overflow:Gb,width:Vb+Jb,height:Wb+Jb,textAlign:"left",lineHeight:"normal"},Wc.style),Qb||Nb),fd.renderer=Lc=Wc.forExport?new Dc(Rb,Vb,Wb,!0):new M(Rb,Vb,Wb),zb&&Lc.create(fd,Rb,Vb,Wb);var b,e;vb&&Rb.getBoundingClientRect&&(b=function(){o(Rb,{left:0,top:0}),e=Rb.getBoundingClientRect(),o(Rb,{left:-(e.left-c(e.left))+Jb,top:-(e.top-c(e.top))+Jb})},b(),kc(eb,"resize",b),kc(fd,"destroy",function(){lc(eb,"resize",b)}))}function Z(){function a(a){var c=Wc.width||Nb.offsetWidth,d=Wc.height||Nb.offsetHeight,e=a?a.target:eb;c&&d&&(e===eb||e===db)&&((c!==Tb||d!==Ub)&&(clearTimeout(b),b=setTimeout(function(){Tc(c,d,!1)},100)),Tb=c,Ub=d)}var b;kc(eb,"resize",a),kc(fd,"destroy",function(){lc(eb,"resize",a)})}function $(){fd&&mc(fd,"endResize",null,function(){jd-=1})}function _(){for(var a="bar",b=Kc||Wc.inverted||Wc.type===a||Wc.defaultSeriesType===a,c=mb.series,d=c&&c.length;!b&&d--;)c[d].type===a&&(b=!0);fd.inverted=Kc=b}function ab(){var b,d=mb.labels,e=mb.credits;W(),Ec=fd.legend=new md,fc(kd,function(a){a.setScale()}),Qc(),fc(kd,function(a){a.setTickPositions(!0)}),I(),Qc(),Pc(),id&&fc(kd,function(a){a.render()}),fd.seriesGroup||(fd.seriesGroup=Lc.g("series-group").attr({zIndex:3}).add()),fc(ld,function(a){a.translate(),a.setTooltipPoints(),a.render()}),d.items&&fc(d.items,function(){var b=a(d.style,this.style),e=c(b.left)+yb,f=c(b.top)+tb+12;delete b.left,delete b.top,Lc.text(this.html,e,f).attr({zIndex:2}).css(b).add()}),e.enabled&&!fd.credits&&(b=e.href,fd.credits=Lc.text(e.text,0,0).on("click",function(){b&&(location.href=b)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position)),fd.hasRendered=!0}function bb(){var a,b=Rb&&Rb.parentNode;if(null!==fd){for(mc(fd,"destroy"),lc(fd),a=kd.length;a--;)kd[a]=kd[a].destroy();for(a=ld.length;a--;)ld[a]=ld[a].destroy();fc(["title","subtitle","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector"],function(a){var b=fd[a];b&&(fd[a]=b.destroy())}),fc([Zb,ac,$b,Ec,dc,Lc,Bc],function(a){a&&a.destroy&&a.destroy()}),Zb=ac=$b=Ec=dc=Lc=Bc=null,Rb&&(Rb.innerHTML="",lc(Rb),b&&C(Rb),Rb=null),clearInterval(Nc);for(a in fd)delete fd[a];fd=null,mb=null}}function cb(){var a="onreadystatechange",b="complete";return!xb&&eb==eb.top&&db.readyState!==b||zb&&!eb.canvg?(zb?Ic.push(cb,mb.global.canvasToolsURL):db.attachEvent(a,function(){db.detachEvent(a,cb),db.readyState===b&&cb()}),void 0):(Y(),mc(fd,"init"),Highcharts.RangeSelector&&mb.rangeSelector.enabled&&(fd.rangeSelector=new Highcharts.RangeSelector(fd)),Rc(),Sc(),_(),S(),fc(mb.series||[],function(a){G(a)}),Highcharts.Scroller&&(mb.navigator.enabled||mb.scrollbar.enabled)&&(fd.scroller=new Highcharts.Scroller(fd)),fd.render=ab,fd.tracker=Bc=new s(mb.tooltip),ab(),Lc.draw(),f&&f.apply(fd,[fd]),fc(fd.callbacks,function(a){a.apply(fd,[fd])}),Qb&&(Nb.appendChild(Rb),C(Qb)),mc(fd,"load"),void 0)}var mb,nb=b.series;b.series=null,mb=jc(O,b),mb.series=b.series=nb;var ob,pb,qb,tb,ub,wb,yb,Bb,Nb,Qb,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb,$b,_b,ac,bc,cc,dc,ec,qc,rc,sc,tc,Ac,Bc,Cc,Ec,Fc,Gc,Hc,Jc,Kc,Lc,Mc,Nc,Oc,Pc,Qc,Rc,Sc,Tc,Uc,Vc,Wc=mb.chart,Xc=Wc.margin,Yc=e(Xc)?Xc:[Xc,Xc,Xc,Xc],Zc=n(Wc.marginTop,Yc[0]),$c=n(Wc.marginRight,Yc[1]),_c=n(Wc.marginBottom,Yc[2]),ad=n(Wc.marginLeft,Yc[3]),bd=Wc.spacingTop,cd=Wc.spacingRight,dd=Wc.spacingBottom,ed=Wc.spacingLeft,fd=this,gd=Wc.events,hd=gd&&!!gd.click,id=Wc.showAxes,jd=0,kd=[],ld=[],md=function(){function b(a,b){var c=a.legendItem,d=a.legendLine,e=a.legendSymbol,f=A.color,g=b?j.itemStyle.color:f,h=b?a.color:f;c&&c.css({fill:g}),d&&d.attr({stroke:h}),e&&e.attr({stroke:h,fill:h})}function d(a){var b,c=a.legendItem,d=a.legendLine,e=a._legendItemPos,f=e[0],g=e[1],h=a.legendSymbol,i=a.checkbox;c&&c.attr({x:D?f:Fc-f,y:g}),d&&d.translate(D?f:Fc-f,g-4),h&&(b=f+h.xOff,h.attr({x:D?b:Fc-b,y:g+h.yOff})),i&&(i.x=f,i.y=g)}function e(a){var b=a.checkbox;fc(["legendItem","legendLine","legendSymbol"],function(b){a[b]&&a[b].destroy()}),b&&C(a.checkbox)}function f(){q&&(q=q.destroy()),r&&(r=r.destroy())}function g(){fc(k,function(a){var b=a.checkbox,c=r.alignAttr;b&&o(b,{left:c.translateX+a.legendItemWidth+b.x-40+Jb,top:c.translateY+b.y-11+Jb})})}function h(a){var c,d,e,f,g,h,i,k=a.legendItem,o=a.series||a,q=o.options,w=q&&q.borderWidth||0;if(!k){if(h=/^(bar|pie|area|column)$/.test(o.type),a.legendItem=k=Lc.text(j.labelFormatter.call(a),0,0,j.useHTML).css(a.visible?x:A).on("mouseover",function(){a.setState(Pb),k.css(z)}).on("mouseout",function(){k.css(a.visible?x:A),a.setState()}).on("click",function(){var b="legendItemClick",c=function(){a.setVisible()};a.firePointEvent?a.firePointEvent(b,null,c):mc(a,b,null,c)}).attr({align:D?"left":"right",zIndex:2}).add(r),!h&&q&&q.lineWidth){var y={"stroke-width":q.lineWidth,zIndex:2};q.dashStyle&&(y.dashstyle=q.dashStyle),a.legendLine=Lc.path([Lb,(-u-v)*(D?1:-1),0,Mb,-v*(D?1:-1),0]).attr(y).add(r)}h?(e=Lc.rect(f=-u-v,g=-11,u,12,2).attr({zIndex:3}).add(r),D||(f+=u)):q&&q.marker&&q.marker.enabled&&(i=q.marker.radius,e=Lc.symbol(a.symbol,f=-u/2-v-i,g=-4-i,2*i,2*i).attr(a.pointAttr[Ob]).attr({zIndex:3}).add(r),D||(f+=u/2)),e&&(e.xOff=f+w%2/2,e.yOff=g+w%2/2),a.legendSymbol=e,b(a,a.visible),q&&q.showCheckbox&&(a.checkbox=p("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},j.itemCheckboxStyle,Rb),kc(a.checkbox,"click",function(b){var c=b.target;mc(a,"checkboxClick",{checked:c.checked},function(){a.select()})}))}c=k.getBBox(),d=a.legendItemWidth=j.itemWidth||u+v+c.width+B,K=c.height,t&&l-I+d>(N||Vb-2*B-I)&&(l=I,m+=E+K+F),!t&&m+j.y+K>Wb-bd-dd&&(m=J,l+=H,H=0),H=jb(H,d),n=jb(n,m+F),a._legendItemPos=[l,m],t?l+=d:m+=E+K+F,s=N||jb(l-I+(t?0:d),s)}function i(){l=I,m=J,s=0,n=0,r||(r=Lc.g("legend").attr({zIndex:7}).add()),k=[],fc(O,function(a){var b=a.options;b.showInLegend&&(k=k.concat(a.legendItems||("point"===b.legendType?a.data:a)))}),y(k,function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0)}),P&&k.reverse(),fc(k,h),Fc=N||s,Gc=n-G+K,(L||M)&&(Fc+=2*B,Gc+=2*B,q?Fc>0&&Gc>0&&(q[q.isNew?"attr":"animate"](q.crisp(null,null,null,Fc,Gc)),q.isNew=!1):(q=Lc.rect(0,0,Fc,Gc,j.borderRadius,L||0).attr({stroke:j.borderColor,"stroke-width":L||0,fill:M||Kb}).add(r).shadow(j.shadow),q.isNew=!0),q[k.length?"show":"hide"]()),fc(k,d);for(var b,e=["left","right","top","bottom"],f=4;f--;)b=e[f],w[b]&&"auto"!==w[b]&&(j[2>f?"align":"verticalAlign"]=b,j[2>f?"x":"y"]=c(w[b])*(f%2?-1:1));k.length&&r.align(a(j,{width:Fc,height:Gc}),!0,ob),jd||g()}var j=fd.options.legend;if(j.enabled){var k,l,m,n,q,r,s,t="horizontal"===j.layout,u=j.symbolWidth,v=j.symbolPadding,w=j.style,x=j.itemStyle,z=j.itemHoverStyle,A=jc(x,j.itemHiddenStyle),B=j.padding||c(w.padding),D=!j.rtl,E=j.itemMarginTop||0,F=j.itemMarginBottom||0,G=18,H=0,I=4+B+u+v,J=B+E+G-5,K=0,L=j.borderWidth,M=j.backgroundColor,N=j.width,O=fd.series,P=j.reversed;return i(),kc(fd,"endResize",g),{colorizeItem:b,destroyItem:e,renderLegend:i,destroy:f}}};if(cc=function(a,b){return a>=0&&Ac>=a&&b>=0&&tc>=b},Vc=function(){var a=fd.resetZoomButton;mc(fd,"selection",{resetSelection:!0},Uc),a&&(fd.resetZoomButton=a.destroy())},Uc=function(a){var b;fd.resetZoomEnabled===!1||fd.resetZoomButton||V(),!a||a.resetSelection?fc(kd,function(a){a.options.zoomEnabled!==!1&&(a.setExtremes(null,null,!1),b=!0)}):fc(a.xAxis.concat(a.yAxis),function(a){var c=a.axis;fd.tracker[c.isXAxis?"zoomX":"zoomY"]&&(c.setExtremes(a.min,a.max,!1),b=!0)}),b&&J(n(Wc.animation,fd.pointCount<100))},fd.pan=function(a){var b=fd.xAxis[0],c=fd.mouseDownX,d=b.pointRange/2,e=b.getExtremes(),f=b.translate(c-a,!0)+d,g=b.translate(c+Ac-a,!0)-d,h=fd.hoverPoints;h&&fc(h,function(a){a.setState()}),f>kb(e.dataMin,e.min)&&g<jb(e.dataMax,e.max)&&b.setExtremes(f,g,!0,!1),fd.mouseDownX=a,o(Rb,{cursor:"move"})},Qc=function(){var a,b=mb.legend,c=n(b.margin,10),d=b.x,e=b.y,f=b.align,g=b.verticalAlign;Rc(),!fd.title&&!fd.subtitle||k(Zc)||(a=jb(fd.title&&!pb.floating&&!pb.verticalAlign&&pb.y||0,fd.subtitle&&!qb.floating&&!qb.verticalAlign&&qb.y||0),a&&(tb=jb(tb,a+n(pb.margin,15)+bd))),b.enabled&&!b.floating&&("right"===f?k($c)||(ub=jb(ub,Fc-d+c+cd)):"left"===f?k(ad)||(yb=jb(yb,Fc+d+c+ed)):"top"===g?k(Zc)||(tb=jb(tb,Gc+e+c+bd)):"bottom"===g&&(k(_c)||(wb=jb(wb,Gc-e+c+dd)))),fd.extraBottomMargin&&(wb+=fd.extraBottomMargin),fd.extraTopMargin&&(tb+=fd.extraTopMargin),id&&fc(kd,function(a){a.getOffset()}),k(ad)||(yb+=Bb[3]),k(Zc)||(tb+=Bb[0]),k(_c)||(wb+=Bb[2]),k($c)||(ub+=Bb[1]),Sc()},Tc=function(a,b,c){if(fd){var d=fd.title,e=fd.subtitle;jd+=1,F(c,fd),Yb=Wb,Xb=Vb,k(a)&&(fd.chartWidth=Vb=gb(a)),k(b)&&(fd.chartHeight=Wb=gb(b)),o(Rb,{width:Vb+Jb,height:Wb+Jb}),Lc.setSize(Vb,Wb,c),Ac=Vb-yb-ub,tc=Wb-tb-wb,Jc=null,fc(kd,function(a){a.isDirty=!0,a.setScale()}),fc(ld,function(a){a.isDirty=!0}),fd.isDirtyLegend=!0,fd.isDirtyBox=!0,Qc(),d&&d.align(null,null,ob),e&&e.align(null,null,ob),J(c),Yb=null,mc(fd,"resize"),Q===!1?$():setTimeout($,Q&&Q.duration||500)}},Sc=function(){fd.plotLeft=yb=gb(yb),fd.plotTop=tb=gb(tb),fd.plotWidth=Ac=gb(Vb-yb-ub),fd.plotHeight=tc=gb(Wb-tb-wb),fd.plotSizeX=Kc?tc:Ac,fd.plotSizeY=Kc?Ac:tc,ob={x:ed,y:bd,width:Vb-ed-cd,height:Wb-bd-dd},fc(kd,function(a){a.setAxisSize(),a.setAxisTranslation()})},Rc=function(){tb=n(Zc,bd),ub=n($c,cd),wb=n(_c,dd),yb=n(ad,ed),Bb=[0,0,0,0]},Pc=function(){var a,b=Wc.borderWidth||0,c=Wc.backgroundColor,d=Wc.plotBackgroundColor,e=Wc.plotBackgroundImage,f={x:yb,y:tb,width:Ac,height:tc};a=b+(Wc.shadow?8:0),(b||c)&&(Zb?Zb.animate(Zb.crisp(null,null,null,Vb-a,Wb-a)):Zb=Lc.rect(a/2,a/2,Vb-a,Wb-a,Wc.borderRadius,b).attr({stroke:Wc.borderColor,"stroke-width":b,fill:c||Kb}).add().shadow(Wc.shadow)),d&&($b?$b.animate(f):$b=Lc.rect(yb,tb,Ac,tc,0).attr({fill:d}).add().shadow(Wc.plotShadow)),e&&(_b?_b.animate(f):_b=Lc.image(e,yb,tb,Ac,tc).add()),Wc.plotBorderWidth&&(ac?ac.animate(ac.crisp(null,yb,tb,Ac,tc)):ac=Lc.rect(yb,tb,Ac,tc,0,Wc.plotBorderWidth).attr({stroke:Wc.plotBorderColor,"stroke-width":Wc.plotBorderWidth,zIndex:4}).add()),fd.isDirtyBox=!1},Wc.reflow!==!1&&kc(fd,"load",Z),gd)for(bc in gd)kc(fd,bc,gd[bc]);fd.options=mb,fd.series=ld,fd.xAxis=[],fd.yAxis=[],fd.addSeries=H,fd.animation=zb?!1:n(Wc.animation,!0),fd.Axis=g,fd.destroy=bb,fd.get=R,fd.getSelectedPoints=T,fd.getSelectedSeries=U,fd.hideLoading=N,fd.initSeries=G,fd.isInsidePlot=cc,fd.redraw=J,fd.setSize=Tc,fd.setTitle=W,fd.showLoading=K,fd.pointCount=0,fd.counters=new w,cb()}var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db=document,eb=window,fb=Math,gb=fb.round,hb=fb.floor,ib=fb.ceil,jb=fb.max,kb=fb.min,lb=fb.abs,mb=fb.cos,nb=fb.sin,ob=fb.PI,pb=2*ob/360,qb=navigator.userAgent,rb=/msie/i.test(qb)&&!eb.opera,sb=/msie (\d+\.\d+)/i.test(qb)?document.documentMode||+RegExp.$1:void 0,tb=8===db.documentMode,ub=/AppleWebKit/.test(qb),vb=/Firefox/.test(qb),wb="http://www.w3.org/2000/svg",xb=!!db.createElementNS&&!!db.createElementNS(wb,"svg").createSVGRect,yb=vb&&parseInt(qb.split("Firefox/")[1],10)<4,zb=!xb&&!rb&&!!db.createElement("canvas").getContext,Ab=db.documentElement.ontouchstart!==L,Bb={},Cb=0,Db="div",Eb="absolute",Fb="relative",Gb="hidden",Hb="highcharts-",Ib="visible",Jb="px",Kb="none",Lb="M",Mb="L",Nb="rgba(192,192,192,"+(xb?1e-6:.002)+")",Ob="",Pb="hover",Qb="select",Rb="millisecond",Sb="second",Tb="minute",Ub="hour",Vb="day",Wb="week",Xb="month",Yb="year",Zb="fill",$b="linearGradient",_b="stops",ac="stroke",bc="stroke-width",cc=eb.HighchartsAdapter,dc=cc||{},ec=dc.getScript,fc=dc.each,gc=dc.grep,hc=dc.offset,ic=dc.map,jc=dc.merge,kc=dc.addEvent,lc=dc.removeEvent,mc=dc.fireEvent,nc=dc.animate,oc=dc.stop,pc={};if(eb.Highcharts={},P=function(a,b,c){if(!k(b)||isNaN(b))return"Invalid date";a=n(a,"%Y-%m-%d %H:%M:%S");var d,e=new Date(b),f=e[V](),g=e[W](),h=e[X](),i=e[Y](),j=e[Z](),l=O.lang,m=l.weekdays,o={a:m[g].substr(0,3),A:m[g],d:s(h),e:h,b:l.shortMonths[i],B:l.months[i],m:s(i+1),q:"Q"+(Math.floor(i/3)+1),y:j.toString().substr(2,2),Y:j,H:s(f),I:s(f%12||12),l:f%12||12,M:s(e[U]()),p:12>f?"AM":"PM",P:12>f?"am":"pm",S:s(e.getSeconds()),L:s(gb(b%1e3),3)};for(d in o)a=a.replace("%"+d,o[d]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},w.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}},S=b(Rb,1,Sb,1e3,Tb,6e4,Ub,36e5,Vb,864e5,Wb,6048e5,Xb,2592e6,Yb,31556952e3),R={init:function(a,b,c){b=b||"";var d,e,f,g,h,i=a.shift,j=b.indexOf("C")>-1,k=j?7:3,l=b.split(" "),m=[].concat(c),n=function(a){for(f=a.length;f--;)a[f]===Lb&&a.splice(f+1,0,a[f+1],a[f+2],a[f+1],a[f+2])};if(j&&(n(l),n(m)),a.isArea&&(g=l.splice(l.length-6,6),h=m.splice(m.length-6,6)),1===i&&(m=[].concat(m).splice(0,k).concat(m)),a.shift=0,l.length)for(d=m.length;l.length<d;)e=[].concat(l).splice(l.length-k,k),j&&(e[k-6]=e[k-2],e[k-5]=e[k-1]),l=l.concat(e);return g&&(l=l.concat(g),m=m.concat(h)),[l,m]},step:function(a,b,c,d){var e,f=[],g=a.length;if(1===c)f=d;else if(g===b.length&&1>c)for(;g--;)e=parseFloat(a[g]),f[g]=isNaN(e)?a[g]:c*parseFloat(b[g]-e)+e;else f=b;return f}},cc&&cc.init&&cc.init(R),!cc&&eb.jQuery){var qc=jQuery;ec=qc.getScript,fc=function(a,b){for(var c=0,d=a.length;d>c;c++)if(b.call(a[c],a[c],c,a)===!1)return c},gc=qc.grep,ic=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[d]=b.call(a[d],a[d],d,a);return c},jc=function(){var a=arguments;return qc.extend(!0,null,a[0],a[1],a[2],a[3])},hc=function(a){return qc(a).offset()},kc=function(a,b,c){qc(a).bind(b,c)},lc=function(a,b,c){var d=db.removeEventListener?"removeEventListener":"detachEvent";db[d]&&!a[d]&&(a[d]=function(){}),qc(a).unbind(b,c)},mc=function(b,c,d,e){var f,g=qc.Event(c),h="detached"+c;a(g,d),b[c]&&(b[h]=b[c],b[c]=null),fc(["preventDefault","stopPropagation"],function(a){var b=g[a];g[a]=function(){try{b.call(g)}catch(c){"preventDefault"===a&&(f=!0)}}}),qc(b).trigger(g),b[h]&&(b[c]=b[h],b[h]=null),!e||g.isDefaultPrevented()||f||e(g)},nc=function(a,b,c){var d=qc(a);b.d&&(a.toD=b.d,b.d=1),d.stop(),d.animate(b,c)},oc=function(a){qc(a).stop()},qc.extend(qc.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});var rc=jQuery.fx,sc=rc.step;fc(["cur","_default","width","height"],function(a,b){var c,d=b?sc:rc.prototype,e=d[a];e&&(d[a]=function(a){return a=b?a:this,c=a.elem,c.attr?c.attr(a.prop,a.now):e.apply(this,arguments)})}),sc.d=function(a){var b=a.elem;if(!a.started){var c=R.init(b,b.d,b.toD);a.start=c[0],a.end=c[1],a.started=!0}b.attr("d",R.step(a.start,a.end,a.pos,b.toD))}}var tc={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};O={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/1.1.5/modules/canvas-tools.js"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:jc(tc,{enabled:!1,y:-6,formatter:function(){return this.y}}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:Eb,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:!1,style:{padding:"5px"},itemStyle:{cursor:"pointer",color:"#3E576F"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:Eb,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:Fb,top:"1em"},style:{position:Eb,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:zb,snap:Ab?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var uc={dateTimeLabelFormats:b(Rb,"%H:%M:%S.%L",Sb,"%H:%M:%S",Tb,"%H:%M",Ub,"%H:%M",Vb,"%e. %b",Wb,"%e. %b",Xb,"%b '%y",Yb,"%Y"),endOnTick:!1,gridLineColor:"#C0C0C0",labels:tc,lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},vc=jc(uc,{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:tc.style}}),wc={labels:{align:"right",x:-8,y:null},title:{rotation:270}},xc={labels:{align:"left",x:8,y:null},title:{rotation:90}},yc={labels:{align:"center",x:0,y:14,overflow:"justify"},title:{rotation:0}},zc=jc(yc,{labels:{y:-5,overflow:"justify"}}),Ac=O.plotOptions,Bc=Ac.line;Ac.spline=jc(Bc),Ac.scatter=jc(Bc,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),Ac.area=jc(Bc,{threshold:0}),Ac.areaspline=jc(Ac.area),Ac.column=jc(Bc,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{y:null,verticalAlign:null},threshold:0}),Ac.bar=jc(Ac.column,{dataLabels:{align:"left",x:5,y:null,verticalAlign:"middle"}}),Ac.pie=jc(Bc,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}}),G();var Cc=function(a){function b(a){h=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a),h?i=[c(h[1]),c(h[2]),c(h[3]),parseFloat(h[4],10)]:(h=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a),h&&(i=[c(h[1],16),c(h[2],16),c(h[3],16),1]))}function d(b){var c;return c=i&&!isNaN(i[0])?"rgb"===b?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===b?i[3]:"rgba("+i.join(",")+")":a}function e(a){if(g(a)&&0!==a){var b;for(b=0;3>b;b++)i[b]+=c(255*a),i[b]<0&&(i[b]=0),i[b]>255&&(i[b]=255)}return this}function f(a){return i[3]=a,this}var h,i=[];return b(a),{get:d,brighten:e,setOpacity:f}};J.prototype={init:function(a,b){var c=this;c.element="span"===b?p(b):db.createElementNS(wb,b),c.renderer=a,c.attrSetters={}},animate:function(a,b,c){var d=n(b,Q,!0);oc(this),d?(d=jc(d),c&&(d.complete=c),nc(this,a,d)):(this.attr(a),c&&c())},attr:function(a,b){var e,f,g,h,i,j,m,n=this,o=n.element,p=o.nodeName,q=n.renderer,r=n.attrSetters,s=n.shadows,t=n;if(d(a)&&k(b)&&(e=a,a={},a[e]=b),d(a))e=a,"circle"===p?e={x:"cx",y:"cy"}[e]||e:"strokeWidth"===e&&(e="stroke-width"),t=l(o,e)||n[e]||0,"d"!==e&&"visibility"!==e&&(t=parseFloat(t));else for(e in a)if(j=!1,f=a[e],g=r[e]&&r[e](f,e),g!==!1){if(g!==L&&(f=g),"d"===e)f&&f.join&&(f=f.join(" ")),/(NaN| {2}|^$)/.test(f)&&(f="M 0 0"),n.d=f;else if("x"===e&&"text"===p){for(h=0;h<o.childNodes.length;h++)i=o.childNodes[h],l(i,"x")===l(o,"x")&&l(i,"x",f);n.rotation&&l(o,"transform","rotate("+n.rotation+" "+f+" "+c(a.y||l(o,"y"))+")")}else if("fill"===e)f=q.color(f,o,e);else if("circle"!==p||"x"!==e&&"y"!==e){if("rect"===p&&"r"===e)l(o,{rx:f,ry:f}),j=!0;else if("translateX"===e||"translateY"===e||"rotation"===e||"verticalAlign"===e)n[e]=f,n.updateTransform(),j=!0;else if("stroke"===e)f=q.color(f,o,e);else if("dashstyle"===e){if(e="stroke-dasharray",f=f&&f.toLowerCase(),"solid"===f)f=Kb;else if(f){for(f=f.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),h=f.length;h--;)f[h]=c(f[h])*a["stroke-width"];f=f.join(",")}}else if("isTracker"===e)n[e]=f;else if("width"===e)f=c(f);else if("align"===e)e="text-anchor",f={left:"start",center:"middle",right:"end"}[f];else if("title"===e){var u=db.createElementNS(wb,"title");u.appendChild(db.createTextNode(f)),o.appendChild(u)}}else e={x:"cx",y:"cy"}[e]||e;if("strokeWidth"===e&&(e="stroke-width"),ub&&"stroke-width"===e&&0===f&&(f=1e-6),n.symbolName&&/^(x|y|r|start|end|innerR|anchorX|anchorY)/.test(e)&&(m||(n.symbolAttr(a),m=!0),j=!0),s&&/^(width|height|visibility|x|y|d|transform)$/.test(e))for(h=s.length;h--;)l(s[h],e,f);("width"===e||"height"===e)&&"rect"===p&&0>f&&(f=0),"text"===e?(n.textStr=f,n.added&&q.buildText(n)):j||l(o,e,f)}if(ub&&/Chrome\/(18|19)/.test(qb)&&"text"===p&&(a.x!==L||a.y!==L)){var v=o.parentNode,w=o.nextSibling;v&&(v.removeChild(o),w?v.insertBefore(o,w):v.appendChild(o))}return t},symbolAttr:function(a){var b=this;fc(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(c){b[c]=n(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},crisp:function(a,b,c,d,e){var f,g,h=this,i={},j={};a=a||h.strokeWidth||h.attr&&h.attr("stroke-width")||0,g=gb(a)%2/2,j.x=hb(b||h.x||0)+g,j.y=hb(c||h.y||0)+g,j.width=hb((d||h.width||0)-2*g),j.height=hb((e||h.height||0)-2*g),j.strokeWidth=a;for(f in j)h[f]!==j[f]&&(h[f]=i[f]=j[f]);return i},css:function(b){var c,d=this,e=d.element,f=b&&b.width&&"text"===e.nodeName,g="",h=function(a,b){return"-"+b.toLowerCase()};if(b&&b.color&&(b.fill=b.color),b=a(d.styles,b),d.styles=b,rb&&!xb)f&&delete b.width,o(d.element,b);else{for(c in b)g+=c.replace(/([A-Z])/g,h)+":"+b[c]+";";d.attr({style:g})}return f&&d.added&&d.renderer.buildText(d),d},on:function(a,b){var c=b;return Ab&&"click"===a&&(a="touchstart",c=function(a){a.preventDefault(),b()}),this.element["on"+a]=c,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){var a=this;return a.inverted=!0,a.updateTransform(),a},htmlCss:function(b){var c=this,d=c.element,e=b&&"SPAN"===d.tagName&&b.width;return e&&(delete b.width,c.textWidth=e,c.updateTransform()),c.styles=a(c.styles,b),o(c.element,b),c},htmlGetBBox:function(a){var b=this,c=b.element,d=b.bBox;return(!d||a)&&("text"===c.nodeName&&(c.style.position=Eb),d=b.bBox={x:c.offsetLeft,y:c.offsetTop,width:c.offsetWidth,height:c.offsetHeight}),d},htmlUpdateTransform:function(){if(!this.added)return this.alignOnAdd=!0,void 0;var a=this,b=a.renderer,d=a.element,e=a.translateX||0,f=a.translateY||0,g=a.x||0,h=a.y||0,i=a.textAlign||"left",j={left:0,center:.5,right:1}[i],l=i&&"left"!==i,m=a.shadows;if((e||f)&&(o(d,{marginLeft:e,marginTop:f}),m&&fc(m,function(a){o(a,{marginLeft:e+1,marginTop:f+1})})),a.inverted&&fc(d.childNodes,function(a){b.invertChild(a,d)}),"SPAN"===d.tagName){var p,q,r,s,t=a.rotation,u=0,v=1,w=0,x=c(a.textWidth),y=a.xCorr||0,z=a.yCorr||0,A=[t,i,d.innerHTML,a.textWidth].join(",");A!==a.cTT&&(k(t)&&(u=t*pb,v=mb(u),w=nb(u),o(d,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",v,", M12=",-w,", M21=",w,", M22=",v,", sizingMethod='auto expand')"].join(""):Kb})),p=n(a.elemWidth,d.offsetWidth),q=n(a.elemHeight,d.offsetHeight),p>x&&(o(d,{width:x+Jb,display:"block",whiteSpace:"normal"}),p=x),r=b.fontMetrics(d.style.fontSize).b,y=0>v&&-p,z=0>w&&-q,s=0>v*w,y+=w*r*(s?1-j:j),z-=v*r*(t?s?j:1-j:1),l&&(y-=p*j*(0>v?-1:1),t&&(z-=q*j*(0>w?-1:1)),o(d,{textAlign:i})),a.xCorr=y,a.yCorr=z),o(d,{left:g+y+Jb,top:h+z+Jb}),a.cTT=A}},updateTransform:function(){var a=this,b=a.translateX||0,c=a.translateY||0,d=a.inverted,e=a.rotation,f=[];d&&(b+=a.attr("width"),c+=a.attr("height")),(b||c)&&f.push("translate("+b+","+c+")"),d?f.push("rotate(90) scale(-1,1)"):e&&f.push("rotate("+e+" "+a.x+" "+a.y+")"),f.length&&l(a.element,"transform",f.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,c){var d=this;a?(d.alignOptions=a,d.alignByTranslate=b,c||d.renderer.alignedObjects.push(d)):(a=d.alignOptions,b=d.alignByTranslate),c=n(c,d.renderer);var e=a.align,f=a.verticalAlign,g=(c.x||0)+(a.x||0),h=(c.y||0)+(a.y||0),i={};return/^(right|center)$/.test(e)&&(g+=(c.width-(a.width||0))/{right:1,center:2}[e]),i[b?"translateX":"x"]=gb(g),/^(bottom|middle)$/.test(f)&&(h+=(c.height-(a.height||0))/({bottom:1,middle:2}[f]||1)),i[b?"translateY":"y"]=gb(h),d[d.placed?"animate":"attr"](i),d.placed=!0,d.alignAttr=i,d},getBBox:function(b){var c,d,e,f=this,g=f.rotation,h=f.element,i=g*pb;if(h.namespaceURI===wb){try{c=h.getBBox?a({},h.getBBox()):{width:h.offsetWidth,height:h.offsetHeight}}catch(j){}(!c||c.width<0)&&(c={width:0,height:0}),d=c.width,e=c.height,g&&(c.width=lb(e*nb(i))+lb(d*mb(i)),c.height=lb(e*mb(i))+lb(d*nb(i)))}else c=f.htmlGetBBox(b);return c},show:function(){return this.attr({visibility:Ib})},hide:function(){return this.attr({visibility:Gb})},add:function(a){var b,d,e,f,g=this.renderer,h=a||g,i=h.element||g.box,j=i.childNodes,m=this.element,n=l(m,"zIndex");if(this.parentInverted=a&&a.inverted,void 0!==this.textStr&&g.buildText(this),n&&(h.handleZ=!0,n=c(n)),h.handleZ)for(e=0;e<j.length;e++)if(b=j[e],d=l(b,"zIndex"),b!==m&&(c(d)>n||!k(n)&&k(d))){i.insertBefore(m,b),f=!0;break}return f||i.appendChild(m),this.added=!0,mc(this,"add"),this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a,b,c=this,d=c.element||{},e=c.shadows,f=c.box;if(d.onclick=d.onmouseout=d.onmouseover=d.onmousemove=null,oc(c),c.clipPath&&(c.clipPath=c.clipPath.destroy()),c.stops){for(b=0;b<c.stops.length;b++)c.stops[b]=c.stops[b].destroy();c.stops=null}c.safeRemoveChild(d),e&&fc(e,function(a){c.safeRemoveChild(a)}),f&&f.destroy(),j(c.renderer.alignedObjects,c);for(a in c)delete c[a];return null},empty:function(){for(var a=this.element,b=a.childNodes,c=b.length;c--;)a.removeChild(b[c])},shadow:function(a,b){var c,d,e=[],f=this.element,g=this.parentInverted?"(-1,-1)":"(1,1)";if(a){for(c=1;3>=c;c++)d=f.cloneNode(0),l(d,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":.05*c,"stroke-width":7-2*c,transform:"translate"+g,fill:Kb}),b?b.element.appendChild(d):f.parentNode.insertBefore(d,f),e.push(d);this.shadows=e}return this}};var Dc=function(){this.init.apply(this,arguments)};Dc.prototype={Element:J,init:function(a,b,c,d){var e,f=this,g=location;e=f.createElement("svg").attr({xmlns:wb,version:"1.1"}),a.appendChild(e.element),f.isSVG=!0,f.box=e.element,f.boxWrapper=e,f.alignedObjects=[],f.url=rb?"":g.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1"),f.defs=this.createElement("defs").add(),f.forExport=d,f.gradients={},f.setSize(b,c,!1)},destroy:function(){var a=this,b=a.defs;return a.box=null,a.boxWrapper=a.boxWrapper.destroy(),B(a.gradients||{}),a.gradients=null,b&&(a.defs=b.destroy()),a.alignedObjects=null,null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},draw:function(){},buildText:function(a){for(var b,d=a.element,e=n(a.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),f=d.childNodes,g=/style="([^"]+)"/,h=/href="([^"]+)"/,i=l(d,"x"),j=a.styles,k=j&&c(j.width),m=j&&j.lineHeight,p="getComputedStyle",q=f.length;q--;)d.removeChild(f[q]);k&&!a.added&&this.box.appendChild(d),""===e[e.length-1]&&e.pop(),fc(e,function(e,f){var j,n,q=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),j=e.split("|||"),fc(j,function(e){if(""!==e||1===j.length){var r={},s=db.createElementNS(wb,"tspan");
if(g.test(e)&&l(s,"style",e.match(g)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),h.test(e)&&(l(s,"onclick",'location.href="'+e.match(h)[1]+'"'),o(s,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),s.appendChild(db.createTextNode(e)),q?r.dx=3:r.x=i,q||(f&&(!xb&&a.renderer.forExport&&o(s,{display:"block"}),n=eb[p]&&c(eb[p](b,null).getPropertyValue("line-height")),(!n||isNaN(n))&&(n=m||b.offsetHeight||18),l(s,"dy",n)),b=s),l(s,r),d.appendChild(s),q++,k)for(var t,u,v=e.replace(/-/g,"- ").split(" "),w=[];v.length||w.length;)u=a.getBBox().width,t=u>k,t&&1!==v.length?(s.removeChild(s.firstChild),w.unshift(v.pop())):(v=w,w=[],v.length&&(s=db.createElementNS(wb,"tspan"),l(s,{dy:m||16,x:i}),d.appendChild(s),u>k&&(k=u))),v.length&&s.appendChild(db.createTextNode(v.join(" ").replace(/- /g,"-")))}})})},button:function(c,d,e,f,g,h,i){var j,k,l,m,n,o=this.label(c,d,e),p=0,q="style",r={x1:0,y1:0,x2:0,y2:1};return g=jc(b(bc,1,ac,"#999",Zb,b($b,r,_b,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,q,b("color","black")),g),l=g[q],delete g[q],h=jc(g,b(ac,"#68A",Zb,b($b,r,_b,[[0,"#FFF"],[1,"#ACF"]])),h),m=h[q],delete h[q],i=jc(g,b(ac,"#68A",Zb,b($b,r,_b,[[0,"#9BD"],[1,"#CDF"]])),i),n=i[q],delete i[q],kc(o.element,"mouseenter",function(){o.attr(h).css(m)}),kc(o.element,"mouseleave",function(){j=[g,h,i][p],k=[l,m,n][p],o.attr(j).css(k)}),o.setState=function(a){p=a,a?2===a&&o.attr(i).css(n):o.attr(g).css(l)},o.on("click",function(){f.call(o)}).attr(g).css(a({cursor:"default"},l))},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=gb(a[1])+b%2/2),a[2]===a[5]&&(a[2]=a[5]=gb(a[2])+b%2/2),a},path:function(a){return this.createElement("path").attr({d:a,fill:Kb})},circle:function(a,b,c){var d=e(a)?a:{x:a,y:b,r:c};return this.createElement("circle").attr(d)},arc:function(a,b,c,d,f,g){return e(a)&&(b=a.y,c=a.r,d=a.innerR,f=a.start,g=a.end,a=a.x),this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:f||0,end:g||0})},rect:function(a,b,c,d,f,g){e(a)&&(b=a.y,c=a.width,d=a.height,f=a.r,g=a.strokeWidth,a=a.x);var h=this.createElement("rect").attr({rx:f,ry:f,fill:Kb});return h.attr(h.crisp(g,a,b,jb(c,0),jb(d,0)))},setSize:function(a,b,c){var d=this,e=d.alignedObjects,f=e.length;for(d.width=a,d.height=b,d.boxWrapper[n(c,!0)?"animate":"attr"]({width:a,height:b});f--;)e[f].align()},g:function(a){var b=this.createElement("g");return k(a)?b.attr({"class":Hb+a}):b},image:function(b,c,d,e,f){var g,h={preserveAspectRatio:Kb};return arguments.length>1&&a(h,{x:c,y:d,width:e,height:f}),g=this.createElement("image").attr(h),g.element.setAttributeNS?g.element.setAttributeNS("http://www.w3.org/1999/xlink","href",b):g.element.setAttribute("hc-svg-href",b),g},symbol:function(b,c,d,e,f,g){var h,i,j,k=this.symbols[b],l=k&&k(gb(c),gb(d),e,f,g),m=/^url\((.*?)\)$/;if(l)h=this.path(l),a(h,{symbolName:b,x:c,y:d,width:e,height:f}),g&&a(h,g);else if(m.test(b)){var n=function(a,b){a.attr({width:b[0],height:b[1]}).translate(-gb(b[0]/2),-gb(b[1]/2))};i=b.match(m)[1],j=Bb[i],h=this.image(i).attr({x:c,y:d}),j?n(h,j):(h.attr({width:0,height:0}),p("img",{onload:function(){var a=this;n(h,Bb[i]=[a.width,a.height])},src:i}))}return h},symbols:{circle:function(a,b,c,d){var e=.166*c;return[Lb,a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return[Lb,a,b,Mb,a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return[Lb,a+c/2,b,Mb,a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return[Lb,a,b,Mb,a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return[Lb,a+c/2,b,Mb,a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,g=e.r||c||d,h=e.end-1e-6,i=e.innerR,j=mb(f),k=nb(f),l=mb(h),m=nb(h),n=e.end-f<ob?0:1;return[Lb,a+g*j,b+g*k,"A",g,g,0,n,1,a+g*l,b+g*m,Mb,a+i*l,b+i*m,"A",i,i,0,n,0,a+i*j,b+i*k,"Z"]}},clipRect:function(a,b,c,d){var e,f=Hb+Cb++,g=this.createElement("clipPath").attr({id:f}).add(this.defs);return e=this.rect(a,b,c,d,0).add(g),e.id=f,e.clipPath=g,e},color:function(b,c,d){var e,g=/^rgba/;if(b&&b.linearGradient){var h,i,j,k,m=this,n=b[$b],o=!f(n),p=m.gradients,q=n.x1||n[0]||0,r=n.y1||n[1]||0,s=n.x2||n[2]||0,t=n.y2||n[3]||0,u=[o,q,r,s,t,b.stops.join(",")].join(",");return p[u]?h=l(p[u].element,"id"):(h=Hb+Cb++,i=m.createElement($b).attr(a({id:h,x1:q,y1:r,x2:s,y2:t},o?null:{gradientUnits:"userSpaceOnUse"})).add(m.defs),i.stops=[],fc(b.stops,function(a){var b;g.test(a[1])?(e=Cc(a[1]),j=e.get("rgb"),k=e.get("a")):(j=a[1],k=1),b=m.createElement("stop").attr({offset:a[0],"stop-color":j,"stop-opacity":k}).add(i),i.stops.push(b)}),p[u]=i),"url("+this.url+"#"+h+")"}return g.test(b)?(e=Cc(b),l(c,d+"-opacity",e.get("a")),e.get("rgb")):(c.removeAttribute(d+"-opacity"),b)},text:function(a,b,c,d){var e,f=this,g=O.chart.style;return d&&!f.forExport?f.html(a,b,c):(b=gb(n(b,0)),c=gb(n(c,0)),e=f.createElement("text").attr({x:b,y:c,text:a}).css({fontFamily:g.fontFamily,fontSize:g.fontSize}),e.x=b,e.y=c,e)},html:function(b,c,d){var e=O.chart.style,f=this.createElement("span"),g=f.attrSetters,h=f.element,i=f.renderer;return g.text=function(a){return h.innerHTML=a,!1},g.x=g.y=g.align=function(a,b){return"align"===b&&(b="textAlign"),f[b]=a,f.htmlUpdateTransform(),!1},f.attr({text:b,x:gb(c),y:gb(d)}).css({position:Eb,whiteSpace:"nowrap",fontFamily:e.fontFamily,fontSize:e.fontSize}),f.css=f.htmlCss,i.isSVG&&(f.add=function(b){var c,d,e=i.box.parentNode;return b?(c=b.div,c||(c=b.div=p(Db,{className:l(b.element,"class")},{position:Eb,left:b.attr("translateX")+Jb,top:b.attr("translateY")+Jb},e),d=c.style,a(b.attrSetters,{translateX:function(a){d.left=a+Jb},translateY:function(a){d.top=a+Jb},visibility:function(a,b){d[b]=a}}))):c=e,c.appendChild(h),f.added=!0,f.alignOnAdd&&f.htmlUpdateTransform(),f}),f},fontMetrics:function(a){a=c(a||11);var b=24>a?a+4:gb(1.2*a),d=gb(.8*b);return{h:b,b:d}},label:function(b,c,d,e,f,g,h,i){function j(){var a,b=x.element.style;p=(void 0===q||void 0===r||w.styles.textAlign)&&x.getBBox(!0),w.width=(q||p.width)+2*z,w.height=(r||p.height)+2*z,u=z+v.fontMetrics(b&&b.fontSize).b,o||(a=i?-u:0,w.box=o=e?v.symbol(e,0,a,w.width,w.height):v.rect(0,a,w.width,w.height,0,B[bc]),o.add(w)),o.attr(jc({width:w.width,height:w.height},B)),B=null}function l(){var a,b=w.styles,c=b&&b.textAlign,d=z;a=i?0:u,!k(q)||"center"!==c&&"right"!==c||(d+={center:.5,right:1}[c]*(q-p.width)),(d!==x.x||a!==x.y)&&x.attr({x:d,y:a}),x.x=d,x.y=a}function m(a,b){o?o.attr(a,b):B[a]=b}function n(){w.attr({text:b,x:c,y:d,anchorX:f,anchorY:g})}var o,p,q,r,s,t,u,v=this,w=v.g(),x=v.text("",0,0,h).attr({zIndex:1}).add(w),y="left",z=3,A=0,B={},C=w.attrSetters;kc(w,"add",n),C.width=function(a){return q=a,!1},C.height=function(a){return r=a,!1},C.padding=function(a){return k(a)&&a!==z&&(z=a,l()),!1},C.align=function(a){return y=a,!1},C.text=function(a,b){return x.attr(b,a),j(),l(),!1},C[bc]=function(a,b){return A=a%2/2,m(b,a),!1},C.stroke=C.fill=C.r=function(a,b){return m(b,a),!1},C.anchorX=function(a,b){return f=a,m(b,a+A-s),!1},C.anchorY=function(a,b){return g=a,m(b,a-t),!1},C.x=function(a){return a-={left:0,center:.5,right:1}[y]*((q||p.width)+z),s=w.x=gb(a),w.attr("translateX",s),!1},C.y=function(a){return t=w.y=gb(a),w.attr("translateY",a),!1};var D=w.css;return a(w,{css:function(a){if(a){var b={};a=jc({},a),fc(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(c){a[c]!==L&&(b[c]=a[c],delete a[c])}),x.css(b)}return D.call(w,a)},getBBox:function(){return o.getBBox()},shadow:function(a){return o.shadow(a),w},destroy:function(){lc(w,"add",n),lc(w.element,"mouseenter"),lc(w.element,"mouseleave"),x&&(x=x.destroy()),J.prototype.destroy.call(w)}})}},M=Dc;var Ec;if(!xb&&!zb){var Fc={init:function(a,b){var c=this,d=["<",b,' filled="f" stroked="f"'],e=["position: ",Eb,";"];("shape"===b||b===Db)&&e.push("left:0;top:0;width:10px;height:10px;"),tb&&e.push("visibility: ",b===Db?Gb:Ib),d.push(' style="',e.join(""),'"/>'),b&&(d=b===Db||"span"===b||"img"===b?d.join(""):a.prepVML(d),c.element=p(d)),c.renderer=a,c.attrSetters={}},add:function(a){var b=this,c=b.renderer,d=b.element,e=c.box,f=a&&a.inverted,g=a?a.element||a:e;return f&&c.invertChild(d,g),tb&&g.gVis===Gb&&o(d,{visibility:Gb}),g.appendChild(d),b.added=!0,b.alignOnAdd&&!b.deferUpdateTransform&&b.updateTransform(),mc(b,"add"),b},toggleChildren:function(a,b){for(var c=a.childNodes,d=c.length;d--;)o(c[d],{visibility:b}),"DIV"===c[d].nodeName&&this.toggleChildren(c[d],b)},updateTransform:J.prototype.htmlUpdateTransform,attr:function(a,b){var c,e,f,h,i,j,m=this,n=m.element||{},o=n.style,q=n.nodeName,r=m.renderer,s=m.symbolName,t=m.shadows,u=m.attrSetters,v=m;if(d(a)&&k(b)&&(c=a,a={},a[c]=b),d(a))c=a,v="strokeWidth"===c||"stroke-width"===c?m.strokeweight:m[c];else for(c in a)if(e=a[c],j=!1,h=u[c]&&u[c](e,c),h!==!1&&null!==e){if(h!==L&&(e=h),s&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c))i||(m.symbolAttr(a),i=!0),j=!0;else if("d"===c){e=e||[],m.d=e.join(" "),f=e.length;for(var w=[];f--;)w[f]=g(e[f])?gb(10*e[f])-5:"Z"===e[f]?"x":e[f];if(e=w.join(" ")||"x",n.path=e,t)for(f=t.length;f--;)t[f].path=e;j=!0}else if("zIndex"===c||"visibility"===c)tb&&"visibility"===c&&"DIV"===q&&(n.gVis=e,m.toggleChildren(n,e),e===Ib&&(e=null)),e&&(o[c]=e),j=!0;else if("width"===c||"height"===c)e=jb(0,e),this[c]=e,m.updateClipping?(m[c]=e,m.updateClipping()):o[c]=e,j=!0;else if("x"===c||"y"===c)m[c]=e,o[{x:"left",y:"top"}[c]]=e;else if("class"===c)n.className=e;else if("stroke"===c)e=r.color(e,n,c),c="strokecolor";else if("stroke-width"===c||"strokeWidth"===c)n.stroked=e?!0:!1,c="strokeweight",m[c]=e,g(e)&&(e+=Jb);else if("dashstyle"===c){var x=n.getElementsByTagName("stroke")[0]||p(r.prepVML(["<stroke/>"]),null,null,n);x[c]=e||"solid",m.dashstyle=e,j=!0}else"fill"===c?"SPAN"===q?o.color=e:(n.filled=e!==Kb?!0:!1,e=r.color(e,n,c),c="fillcolor"):"translateX"===c||"translateY"===c||"rotation"===c?(m[c]=e,m.updateTransform(),j=!0):"text"===c&&(this.bBox=null,n.innerHTML=e,j=!0);if(t&&"visibility"===c)for(f=t.length;f--;)t[f].style[c]=e;j||(tb?n[c]=e:l(n,c,e))}return v},clip:function(a){var b=this,c=a.members;return c.push(b),b.destroyClip=function(){j(c,b)},b.css(a.getCSS(b.inverted))},css:J.prototype.htmlCss,safeRemoveChild:function(a){var b=a.parentNode;b&&C(a)},destroy:function(){var a=this;return a.destroyClip&&a.destroyClip(),J.prototype.destroy.apply(a)},empty:function(){for(var a,b=this.element,c=b.childNodes,d=c.length;d--;)a=c[d],a.parentNode.removeChild(a)},on:function(a,b){return this.element["on"+a]=function(){var a=eb.event;a.target=a.srcElement,b(a)},this},shadow:function(a,b){var d,e,f,g=[],h=this.element,i=this.renderer,j=h.style,k=h.path;if(k&&"string"!=typeof k.value&&(k="x"),a){for(d=1;3>=d;d++)f=['<shape isShadow="true" strokeweight="',7-2*d,'" filled="false" path="',k,'" coordsize="100,100" style="',h.style.cssText,'" />'],e=p(i.prepVML(f),null,{left:c(j.left)+1,top:c(j.top)+1}),f=['<stroke color="black" opacity="',.05*d,'"/>'],p(i.prepVML(f),null,null,e),b?b.element.appendChild(e):h.parentNode.insertBefore(e,h),g.push(e);this.shadows=g}return this}};Fc=q(J,Fc);var Gc={Element:Fc,isIE8:qb.indexOf("MSIE 8.0")>-1,init:function(a,b,c){var d,e,f=this;f.alignedObjects=[],d=f.createElement(Db),e=d.element,e.style.position=Fb,a.appendChild(d.element),f.box=e,f.boxWrapper=d,f.setSize(b,c,!1),db.namespaces.hcv||(db.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),db.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},clipRect:function(b,c,d,e){var f=this.createElement();return a(f,{members:[],left:b,top:c,width:d,height:e,getCSS:function(b){var c=this,d=c.top,e=c.left,f=e+c.width,g=d+c.height,h={clip:"rect("+gb(b?e:d)+"px,"+gb(b?g:f)+"px,"+gb(b?f:g)+"px,"+gb(b?d:e)+"px)"};return!b&&tb&&a(h,{width:f+Jb,height:g+Jb}),h},updateClipping:function(){fc(f.members,function(a){a.css(f.getCSS(a.inverted))})}})},color:function(a,b,c){var d,e,f=/^rgba/;if(!a||!a[$b]){if(f.test(a)&&"IMG"!==b.tagName)return d=Cc(a),e=["<",c,' opacity="',d.get("a"),'"/>'],p(this.prepVML(e),null,null,b),d.get("rgb");var g=b.getElementsByTagName(c);return g.length&&(g[0].opacity=1),a}var h,i,j,k,l,m,n,o=a[$b],q=o.x1||o[0]||0,r=o.y1||o[1]||0,s=o.x2||o[2]||0,t=o.y2||o[3]||0;return fc(a.stops,function(a,b){f.test(a[1])?(d=Cc(a[1]),h=d.get("rgb"),i=d.get("a")):(h=a[1],i=1),b?(m=h,n=i):(k=h,l=i)}),"fill"!==c?h:(j=90-180*fb.atan((t-r)/(s-q))/ob,e=['<fill colors="0% ',k,",100% ",m,'" angle="',j,'" opacity="',n,'" o:opacity2="',l,'" type="gradient" focus="100%" method="sigma" />'],p(this.prepVML(e),null,null,b),void 0)},prepVML:function(a){var b="display:inline-block;behavior:url(#default#VML);",c=this.isIE8;return a=a.join(""),c?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="'+b+'" />'):a.replace('style="','style="'+b)):a=a.replace("<","<hcv:"),a},text:Dc.prototype.html,path:function(a){return this.createElement("shape").attr({coordsize:"100 100",d:a})},circle:function(a,b,c){return this.symbol("circle").attr({x:a-c,y:b-c,width:2*c,height:2*c})},g:function(a){var b,c;return a&&(c={className:Hb+a,"class":Hb+a}),b=this.createElement(Db).attr(c)},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.css({left:b,top:c,width:d,height:e}),f},rect:function(a,b,c,d,f,g){e(a)&&(b=a.y,c=a.width,d=a.height,g=a.strokeWidth,a=a.x);var h=this.symbol("rect");return h.r=f,h.attr(h.crisp(g,a,b,jb(c,0),jb(d,0)))},invertChild:function(a,b){var d=b.style;o(a,{flip:"x",left:c(d.width)-10,top:c(d.height)-10,rotation:-90})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||d,i=mb(f),j=nb(f),k=mb(g),l=nb(g),m=e.innerR,n=.08/h,o=m&&.25/m||0;return 0===g-f?["x"]:(n>2*ob-g+f?k=-n:o>g-f&&(k=mb(f+o)),["wa",a-h,b-h,a+h,b+h,a+h*i,b+h*j,a+h*k,b+h*l,"at",a-m,b-m,a+m,b+m,a+m*k,b+m*l,a+m*i,b+m*j,"x","e"])},circle:function(a,b,c,d){return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){if(!k(e))return[];var f=a+c,g=b+d,h=kb(e.r||0,c,d);return[Lb,a+h,b,Mb,f-h,b,"wa",f-2*h,b,f,b+2*h,f-h,b,f,b+h,Mb,f,g-h,"wa",f-2*h,g-2*h,f,g,f,g-h,f-h,g,Mb,a+h,g,"wa",a,g-2*h,a+2*h,g,a+h,g,a,g-h,Mb,a,b+h,"wa",a,b,a+2*h,b+2*h,a,b+h,a+h,b,"x","e"]}}};Ec=function(){this.init.apply(this,arguments)},Ec.prototype=jc(Dc.prototype,Gc),M=Ec}var Hc,Ic;zb&&(Hc=function(){},Ic=function(){function a(){var a,c=b.length;for(a=0;c>a;a++)b[a]();b=[]}var b=[];return{push:function(c,d){0===b.length&&ec(d,a),b.push(c)}}}()),M=Ec||Hc||Dc,K.prototype.callbacks=[];var Jc=function(){};Jc.prototype={init:function(a,b,c){var d,e=this,f=a.chart.counters;return e.series=a,e.applyOptions(b,c),e.pointAttr={},a.options.colorByPoint&&(d=a.chart.options.colors,e.options||(e.options={}),e.color=e.options.color=e.color||d[f.color++],f.wrapColor(d.length)),a.chart.pointCount++,e},applyOptions:function(b,c){var d=this,e=d.series,f=typeof b;d.config=b,"number"===f||null===b?d.y=b:"number"==typeof b[0]?(d.x=b[0],d.y=b[1]):"object"===f&&"number"!=typeof b.length?(a(d,b),d.options=b,b.dataLabels&&(e._hasPointLabels=!0)):"string"==typeof b[0]&&(d.name=b[0],d.y=b[1]),d.x===L&&(d.x=c===L?e.autoIncrement():c)},destroy:function(){var a,b=this,c=b.series,d=c.chart.hoverPoints;c.chart.pointCount--,d&&(b.setState(),j(d,b)),b===c.chart.hoverPoint&&b.onMouseOut(),c.chart.hoverPoints=null,(b.graphic||b.dataLabel)&&(lc(b),b.destroyElements()),b.legendItem&&b.series.chart.legend.destroyItem(b);for(a in b)b[a]=null},destroyElements:function(){for(var a,b=this,c=["graphic","tracker","dataLabel","group","connector","shadowGroup"],d=6;d--;)a=c[d],b[a]&&(b[a]=b[a].destroy())},getLabelConfig:function(){var a=this;return{x:a.category,y:a.y,key:a.name||a.category,series:a.series,point:a,percentage:a.percentage,total:a.total||a.stackTotal}},select:function(a,b){var c=this,d=c.series,e=d.chart;a=n(a,!c.selected),c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=a,c.setState(a&&Qb),b||fc(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=!1,a.setState(Ob),a.firePointEvent("unselect"))})})},onMouseOver:function(){var a=this,b=a.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;e&&e!==a&&e.onMouseOut(),a.firePointEvent("mouseOver"),!d||d.shared&&!b.noSharedTooltip||d.refresh(a),a.setState(Pb),c.hoverPoint=a},onMouseOut:function(){var a=this;a.firePointEvent("mouseOut"),a.setState(),a.series.chart.hoverPoint=null},tooltipFormatter:function(a){var b,c,e,f,g,h,i=this,j=i.series,k=j.tooltipOptions,l=String(i.y).split("."),m=l[1]?l[1].length:0,o=a.match(/\{(series|point)\.[a-zA-Z]+\}/g),p=/[{\.}]/;for(h in o)c=o[h],d(c)&&c!==a&&(f=(" "+c).split(p),b={point:i,series:j}[f[1]],g=f[2],e=b!==i||"y"!==g&&"open"!==g&&"high"!==g&&"low"!==g&&"close"!==g?b[g]:(k.valuePrefix||k.yPrefix||"")+r(i[g],n(k.valueDecimals,k.yDecimals,m))+(k.valueSuffix||k.ySuffix||""),a=a.replace(c,e));return a},update:function(a,b,c){var d,f=this,g=f.series,h=f.graphic,i=g.data,j=i.length,k=g.chart;b=n(b,!0),f.firePointEvent("update",{options:a},function(){for(f.applyOptions(a),e(a)&&(g.getAttribs(),h&&h.attr(f.pointAttr[g.state])),d=0;j>d;d++)if(i[d]===f){g.xData[d]=f.x,g.yData[d]=f.y,g.options.data[d]=a;break}g.isDirty=!0,g.isDirtyData=!0,b&&k.redraw(c)})},remove:function(a,b){var c,d=this,e=d.series,f=e.chart,g=e.data,h=g.length;F(b,f),a=n(a,!0),d.firePointEvent("remove",null,function(){for(c=0;h>c;c++)if(g[c]===d){g.splice(c,1),e.options.data.splice(c,1),e.xData.splice(c,1),e.yData.splice(c,1);break}d.destroy(),e.isDirty=!0,e.isDirtyData=!0,a&&f.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series,f=e.options;(f.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),"click"===a&&f.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),mc(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a,b=this,c=jc(b.series.options.point,b.options),d=c.events;b.events=d;for(a in d)kc(b,a,d[a]);this.hasImportedEvents=!0}},setState:function(a){var b,c=this,d=c.plotX,e=c.plotY,f=c.series,g=f.options.states,h=Ac[f.type].marker&&f.options.marker,i=h&&!h.enabled,j=h&&h.states[a],k=j&&j.enabled===!1,l=f.stateMarkerGraphic,m=f.chart,n=c.pointAttr;a=a||Ob,a===c.state||c.selected&&a!==Qb||g[a]&&g[a].enabled===!1||a&&(k||i&&!j.enabled)||(c.graphic?(b=h&&c.graphic.symbolName&&n[a].r,c.graphic.attr(jc(n[a],b?{x:d-b,y:e-b,width:2*b,height:2*b}:{}))):(a&&(l||(b=h.radius,f.stateMarkerGraphic=l=m.renderer.symbol(f.symbol,-b,-b,2*b,2*b).attr(n[a]).add(f.group)),l.translate(d,e)),l&&l[a?"show":"hide"]()),c.state=a)}};var Kc=function(){};Kc.prototype={isCartesian:!0,type:"line",pointClass:Jc,sorted:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(b,c){var d,e,f=this,g=b.series.length;f.chart=b,f.options=c=f.setOptions(c),f.bindAxes(),a(f,{index:g,name:c.name||"Series "+(g+1),state:Ob,pointAttr:{},visible:c.visible!==!1,selected:c.selected===!0}),zb&&(c.animation=!1),e=c.events;for(d in e)kc(f,d,e[d]);(e&&e.click||c.point&&c.point.events&&c.point.events.click||c.allowPointSelect)&&(b.runTrackerClick=!0),f.getColor(),f.getSymbol(),f.setData(c.data,!1)},bindAxes:function(){var a,b=this,c=b.options,d=b.chart;b.isCartesian&&fc(["xAxis","yAxis"],function(e){fc(d[e],function(d){a=d.options,(c[e]===a.index||c[e]===L&&0===a.index)&&(d.series.push(b),b[e]=d,d.isDirty=!0)})})},autoIncrement:function(){var a=this,b=a.options,c=a.xIncrement;return c=n(c,b.pointStart,0),a.pointInterval=n(a.pointInterval,b.pointInterval,1),a.xIncrement=c+a.pointInterval,c},getSegments:function(){var a,b=this,c=-1,d=[],e=b.points,f=e.length;if(f)if(b.options.connectNulls){for(a=f;a--;)null===e[a].y&&e.splice(a,1);e.length&&(d=[e])}else fc(e,function(a,b){null===a.y?(b>c+1&&d.push(e.slice(c+1,b)),c=b):b===f-1&&d.push(e.slice(c+1,b+1))});b.segments=d},setOptions:function(a){var b,c=this,d=c.chart,e=d.options,f=e.plotOptions,g=a.data;return a.data=null,b=jc(f[this.type],f.series,a),b.data=a.data=g,c.tooltipOptions=jc(e.tooltip,b.tooltip),b},getColor:function(){var a=this.chart.options.colors,b=this.chart.counters;this.color=this.options.color||a[b.color++]||"#0000ff",b.wrapColor(a.length)},getSymbol:function(){var a=this,b=a.options.marker,c=a.chart,d=c.options.symbols,e=c.counters;a.symbol=b.symbol||d[e.symbol++],/^url/.test(a.symbol)&&(b.radius=0),e.wrapSymbol(d.length)},addPoint:function(a,b,c,d){var e,f=this,g=f.data,h=f.graph,i=f.area,j=f.chart,k=f.xData,l=f.yData,m=h&&h.shift||0,o=f.options.data;F(d,j),h&&c&&(h.shift=m+1),i&&(c&&(i.shift=m+1),i.isArea=!0),b=n(b,!0),e={series:f},f.pointClass.prototype.applyOptions.apply(e,[a]),k.push(e.x),l.push(4===f.valueCount?[e.open,e.high,e.low,e.close]:e.y),o.push(a),c&&(g[0]&&g[0].remove?g[0].remove(!1):(g.shift(),k.shift(),l.shift(),o.shift())),f.getAttribs(),f.isDirty=!0,f.isDirtyData=!0,b&&j.redraw()},setData:function(a,b){var c,d=this,e=d.points,h=d.options,i=d.initialColor,j=d.chart,l=null;d.xIncrement=null,d.pointRange=d.xAxis&&d.xAxis.categories&&1||h.pointRange,k(i)&&(j.counters.color=i);var m,o=[],p=[],q=a?a.length:[],r=h.turboThreshold||1e3,s=4===d.valueCount;if(q>r){for(c=0;null===l&&q>c;)l=a[c],c++;if(g(l)){var t=n(h.pointStart,0),u=n(h.pointInterval,1);for(c=0;q>c;c++)o[c]=t,p[c]=a[c],t+=u;d.xIncrement=t}else if(f(l))if(s)for(c=0;q>c;c++)m=a[c],o[c]=m[0],p[c]=m.slice(1,5);else for(c=0;q>c;c++)m=a[c],o[c]=m[0],p[c]=m[1]}else for(c=0;q>c;c++)m={series:d},d.pointClass.prototype.applyOptions.apply(m,[a[c]]),o[c]=m.x,p[c]=s?[m.open,m.high,m.low,m.close]:m.y;for(d.data=[],d.options.data=a,d.xData=o,d.yData=p,c=e&&e.length||0;c--;)e[c]&&e[c].destroy&&e[c].destroy();d.isDirty=d.isDirtyData=j.isDirtyBox=!0,n(b,!0)&&j.redraw(!1)},remove:function(a,b){var c=this,d=c.chart;a=n(a,!0),c.isRemoving||(c.isRemoving=!0,mc(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,a&&d.redraw(b)})),c.isRemoving=!1},processData:function(a){var b,c,d,e,f=this,g=f.xData,h=f.yData,i=g.length,j=0,k=i,l=f.xAxis,m=f.options,n=m.cropThreshold,o=f.isCartesian;if(o&&!f.isDirty&&!l.isDirty&&!f.yAxis.isDirty&&!a)return!1;if(o&&f.sorted&&(!n||i>n||f.forceCrop)){var p=l.getExtremes(),q=p.min,r=p.max;if(g[i-1]<q||g[0]>r)g=[],h=[];else if(g[0]<q||g[i-1]>r){for(e=0;i>e;e++)if(g[e]>=q){j=jb(0,e-1);break}for(;i>e;e++)if(g[e]>r){k=e+1;break}g=g.slice(j,k),h=h.slice(j,k),b=!0}}for(e=g.length-1;e>0;e--)c=g[e]-g[e-1],c>0&&(d===L||d>c)&&(d=c);f.cropped=b,f.cropStart=j,f.processedXData=g,f.processedYData=h,null===m.pointRange&&(f.pointRange=d||1),f.closestPointRange=d},generatePoints:function(){var a,b,c,d,e=this,f=e.options,g=f.data,h=e.data,i=e.processedXData,j=e.processedYData,k=e.pointClass,l=i.length,n=e.cropStart||0,o=e.hasGroupedData,p=[];if(!h&&!o){var q=[];q.length=g.length,h=e.data=q}for(d=0;l>d;d++)b=n+d,o?p[d]=(new k).init(e,[i[d]].concat(m(j[d]))):(h[b]?c=h[b]:h[b]=c=(new k).init(e,g[b],i[d]),p[d]=c);if(h&&(l!==(a=h.length)||o))for(d=0;a>d;d++)d!==n||o||(d+=l),h[d]&&h[d].destroyElements();e.data=h,e.points=p},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var a,b=this,c=b.chart,d=b.options,e=d.stacking,f=b.xAxis,g=f.categories,h=b.yAxis,i=b.points,j=i.length,l=!!b.modifyValue,m=h.series,n=m.length;n--;)if(m[n].visible){n===b.index&&(a=!0);break}for(n=0;j>n;n++){var o,p,q=i[n],r=q.x,s=q.y,t=q.low,u=h.stacks[(s<d.threshold?"-":"")+b.stackKey];q.plotX=gb(10*f.translate(r,0,0,0,1))/10,e&&b.visible&&u&&u[r]&&(o=u[r],p=o.total,o.cum=t=o.cum-s,s=t+s,a&&(t=d.threshold),"percent"===e&&(t=p?100*t/p:0,s=p?100*s/p:0),q.percentage=p?100*q.y/p:0,q.stackTotal=p,q.stackY=s),q.yBottom=k(t)?h.translate(t,0,1,0,1):null,l&&(s=b.modifyValue(s,q)),q.plotY="number"==typeof s?gb(10*h.translate(s,0,1,0,1))/10:L,q.clientX=c.inverted?c.plotHeight-q.plotX:q.plotX,q.category=g&&g[q.x]!==L?g[q.x]:q.x}b.getSegments()},setTooltipPoints:function(a){var b,c,d,e,f,g=this,h=g.chart,i=h.inverted,j=[],k=gb((i?h.plotTop:h.plotLeft)+h.plotSizeX),l=g.xAxis,m=[];if(g.options.enableMouseTracking!==!1){for(a&&(g.tooltipPoints=null),fc(g.segments||g.points,function(a){j=j.concat(a)}),l&&l.reversed&&(j=j.reverse()),b=j.length,f=0;b>f;f++)for(e=j[f],c=j[f-1]?j[f-1]._high+1:0,d=e._high=j[f+1]?hb((e.plotX+(j[f+1]?j[f+1].plotX:k))/2):k;d>=c;)m[i?k-c++:c++]=e;g.tooltipPoints=m}},tooltipHeaderFormatter:function(a){var b=this,c=b.tooltipOptions,d=c.xDateFormat||"%A, %b %e, %Y",e=b.xAxis,f=e&&"datetime"===e.options.type;return c.headerFormat.replace("{point.key}",f?P(d,a):a).replace("{series.name}",b.name).replace("{series.color}",b.color)},onMouseOver:function(){var a=this,b=a.chart,c=b.hoverSeries;(Ab||!b.mouseIsDown)&&(c&&c!==a&&c.onMouseOut(),a.options.events.mouseOver&&mc(a,"mouseOver"),a.setState(Pb),b.hoverSeries=a)},onMouseOut:function(){var a=this,b=a.options,c=a.chart,d=c.tooltip,e=c.hoverPoint;e&&e.onMouseOut(),a&&b.events.mouseOut&&mc(a,"mouseOut"),!d||b.stickyTracking||d.shared||d.hide(),a.setState(),c.hoverSeries=null},animate:function(a){var b=this,c=b.chart,d=b.clipRect,f=b.options.animation;f&&!e(f)&&(f={}),a?d.isAnimating||(d.attr("width",0),d.isAnimating=!0):(d.animate({width:c.plotSizeX},f),this.animate=null)},drawPoints:function(){var b,c,d,e,f,g,h,i,j,k=this,l=k.points,m=k.chart;if(k.options.marker.enabled)for(e=l.length;e--;)f=l[e],c=f.plotX,d=f.plotY,j=f.graphic,d===L||isNaN(d)||(b=f.pointAttr[f.selected?Qb:Ob],g=b.r,h=n(f.marker&&f.marker.symbol,k.symbol),i=0===h.indexOf("url"),j?j.animate(a({x:c-g,y:d-g},j.symbolName?{width:2*g,height:2*g}:{})):(g>0||i)&&(f.graphic=m.renderer.symbol(h,c-g,d-g,2*g,2*g).attr(b).add(k.group)))},convertAttribs:function(a,b,c,d){var e,f,g=this.pointAttrToOptions,h={};a=a||{},b=b||{},c=c||{},d=d||{};for(e in g)f=g[e],h[e]=n(a[f],b[e],c[e],d[e]);return h},getAttribs:function(){var a,b,c,d,e,f,g=this,h=Ac[g.type].marker?g.options.marker:g.options,i=h.states,j=i[Pb],l=g.color,m={stroke:l,fill:l},n=g.points,o=[],p=g.pointAttrToOptions;for(g.options.marker?(j.radius=j.radius||h.radius+2,j.lineWidth=j.lineWidth||h.lineWidth+1):j.color=j.color||Cc(j.color||l).brighten(j.brightness).get(),o[Ob]=g.convertAttribs(h,m),fc([Pb,Qb],function(a){o[a]=g.convertAttribs(i[a],o[Ob])}),g.pointAttr=o,b=n.length;b--;){if(c=n[b],h=c.options&&c.options.marker||c.options,h&&h.enabled===!1&&(h.radius=0),e=!1,c.options)for(f in p)k(h[p[f]])&&(e=!0);e?(d=[],i=h.states||{},a=i[Pb]=i[Pb]||{},g.options.marker||(a.color=Cc(a.color||c.options.color).brighten(a.brightness||j.brightness).get()),d[Ob]=g.convertAttribs(h,o[Ob]),d[Pb]=g.convertAttribs(i[Pb],o[Pb],d[Ob]),d[Qb]=g.convertAttribs(i[Qb],o[Qb],d[Ob])):d=o,c.pointAttr=d}},destroy:function(){var a,b,c,d,e,f=this,g=f.chart,h=f.clipRect,i=/AppleWebKit\/533/.test(qb),k=f.data||[];for(mc(f,"destroy"),lc(f),fc(["xAxis","yAxis"],function(a){e=f[a],e&&(j(e.series,f),e.isDirty=!0)}),f.legendItem&&f.chart.legend.destroyItem(f),b=k.length;b--;)c=k[b],c&&c.destroy&&c.destroy();f.points=null,h&&h!==g.clipRect&&(f.clipRect=h.destroy()),fc(["area","graph","dataLabelsGroup","group","tracker"],function(b){f[b]&&(a=i&&"group"===b?"hide":"destroy",f[b][a]())}),g.hoverSeries===f&&(g.hoverSeries=null),j(g.series,f);for(d in f)delete f[d]},drawDataLabels:function(){var a=this,b=a.options,c=b.dataLabels;if(c.enabled||a._hasPointLabels){var d,e,f,g,h,i,j,l=a.points,m=a.dataLabelsGroup,o=a.chart,p=a.xAxis,q=p?p.left:o.plotLeft,r=a.yAxis,s=r?r.top:o.plotTop,t=o.renderer,u=o.inverted,v=a.type,w=b.stacking,x="column"===v||"bar"===v,y=null===c.verticalAlign,z=null===c.y,A=t.fontMetrics(c.style.fontSize),B=A.h,C=A.b;if(x){var D={top:C,middle:C-B/2,bottom:-B+C};w?(y&&(c=jc(c,{verticalAlign:"middle"})),z&&(c=jc(c,{y:D[c.verticalAlign]}))):y?c=jc(c,{verticalAlign:"top"}):z&&(c=jc(c,{y:D[c.verticalAlign]}))}m?m.translate(q,s):m=a.dataLabelsGroup=t.g("data-labels").attr({visibility:a.visible?Ib:Gb,zIndex:6}).translate(q,s).add(),g=c,fc(l,function(l){if(i=l.dataLabel,c=g,f=l.options,f&&f.dataLabels&&(c=jc(c,f.dataLabels)),j=c.enabled){var p=l.barX&&l.barX+l.barW/2||n(l.plotX,-999),q=n(l.plotY,-999),r=null===c.y?l.y>=b.threshold?-B+C:C:c.y;d=(u?o.plotWidth-q:p)+c.x,e=gb((u?o.plotHeight-p:q)+r)}if(!i||!a.isCartesian||o.isInsidePlot(d,e)&&j){if(j){var s=c.align;if(h=c.formatter.call(l.getLabelConfig(),c),"column"===v&&(d+={left:-1,right:1}[s]*l.barW/2||0),!w&&u&&l.y<0&&(s="right",d-=10),c.style.color=n(c.color,c.style.color,a.color,"black"),i?i.attr({text:h}).animate({x:d,y:e}):k(h)&&(i=l.dataLabel=t[c.rotation?"text":"label"](h,d,e,null,null,null,c.useHTML,!0).attr({align:s,fill:c.backgroundColor,stroke:c.borderColor,"stroke-width":c.borderWidth,r:c.borderRadius,rotation:c.rotation,padding:c.padding,zIndex:1}).css(c.style).add(m).shadow(c.shadow)),x&&b.stacking&&i){var y=l.barX,z=l.barY,A=l.barW,D=l.barH;i.align(c,null,{x:u?o.plotWidth-z-D:y,y:u?o.plotHeight-y-A:z,width:u?D:A,height:u?A:D})}}}else l.dataLabel=i.destroy()})}},drawGraph:function(){var a,b,c,d=this,e=d.options,f=d.chart,g=d.graph,h=[],i=d.area,j=d.group,k=e.lineColor||d.color,l=e.lineWidth,m=e.dashStyle,o=f.renderer,p=d.yAxis.getThreshold(e.threshold),q=/^area/.test(d.type),r=[],s=[];fc(d.segments,function(a){if(b=[],fc(a,function(c,f){if(d.getPointSpline)b.push.apply(b,d.getPointSpline(a,c,f));else{if(b.push(f?Mb:Lb),f&&e.step){var g=a[f-1];b.push(c.plotX,g.plotY)}b.push(c.plotX,c.plotY)}}),a.length>1?h=h.concat(b):r.push(a[0]),q){var c,f=[],g=b.length;for(c=0;g>c;c++)f.push(b[c]);if(3===g&&f.push(Mb,b[1],b[2]),e.stacking&&"areaspline"!==d.type)for(c=a.length-1;c>=0;c--)c<a.length-1&&e.step&&f.push(a[c+1].plotX,a[c].yBottom),f.push(a[c].plotX,a[c].yBottom);else f.push(Mb,a[a.length-1].plotX,p,Mb,a[0].plotX,p);s=s.concat(f)}}),d.graphPath=h,d.singlePoints=r,q&&(a=n(e.fillColor,Cc(d.color).setOpacity(e.fillOpacity||.75).get()),i?i.animate({d:s}):d.area=d.chart.renderer.path(s).attr({fill:a}).add(j)),g?(oc(g),g.animate({d:h})):l&&(c={stroke:k,"stroke-width":l},m&&(c.dashstyle=m),d.graph=o.path(h).attr(c).add(j).shadow(e.shadow))},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};c.attr(a).invert(),d&&d.attr(a).invert()}var b=this,c=b.group,d=b.trackerGroup,e=b.chart;kc(e,"resize",a),kc(b,"destroy",function(){lc(e,"resize",a)}),a(),b.invertGroups=a},render:function(){var a,b=this,c=b.chart,d=b.options,e=d.clip!==!1,f=d.animation,g=f&&b.animate,h=g?f&&f.duration||500:0,i=b.clipRect,j=c.renderer;i||(i=b.clipRect=!c.hasRendered&&c.clipRect?c.clipRect:j.clipRect(0,0,c.plotSizeX,c.plotSizeY+1),c.clipRect||(c.clipRect=i)),b.group||(a=b.group=j.g("series"),a.attr({visibility:b.visible?Ib:Gb,zIndex:d.zIndex}).translate(b.xAxis.left,b.yAxis.top).add(c.seriesGroup)),b.drawDataLabels(),g&&b.animate(!0),b.getAttribs(),b.drawGraph&&b.drawGraph(),b.drawPoints(),b.options.enableMouseTracking!==!1&&b.drawTracker(),c.inverted&&b.invertGroups(),e&&!b.hasRendered&&(a.clip(i),b.trackerGroup&&b.trackerGroup.clip(c.clipRect)),g&&b.animate(),setTimeout(function(){i.isAnimating=!1,a=b.group,a&&i!==c.clipRect&&i.renderer&&(e&&a.clip(b.clipRect=c.clipRect),i.destroy())},h),b.isDirty=b.isDirtyData=!1,b.hasRendered=!0},redraw:function(){var a=this,b=a.chart,c=a.isDirtyData,d=a.group;d&&(b.inverted&&d.attr({width:b.plotWidth,height:b.plotHeight}),d.animate({translateX:a.xAxis.left,translateY:a.yAxis.top})),a.translate(),a.setTooltipPoints(!0),a.render(),c&&mc(a,"updatedData")},setState:function(a){var b=this,c=b.options,d=b.graph,e=c.states,f=c.lineWidth;if(a=a||Ob,b.state!==a){if(b.state=a,e[a]&&e[a].enabled===!1)return;a&&(f=e[a].lineWidth||f+1),d&&!d.dashstyle&&d.attr({"stroke-width":f},a?0:500)}},setVisible:function(a,b){var c,d,e,f=this,g=f.chart,h=f.legendItem,i=f.group,j=f.tracker,k=f.dataLabelsGroup,l=f.points,m=g.options.chart.ignoreHiddenSeries,n=f.visible;if(f.visible=a=a===L?!n:a,c=a?"show":"hide",i&&i[c](),j)j[c]();else if(l)for(d=l.length;d--;)e=l[d],e.tracker&&e.tracker[c]();k&&k[c](),h&&g.legend.colorizeItem(f,a),f.isDirty=!0,f.options.stacking&&fc(g.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)
}),m&&(g.isDirtyBox=!0),b!==!1&&g.redraw(),mc(f,c)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){var b=this;b.selected=a=a===L?!b.selected:a,b.checkbox&&(b.checkbox.checked=a),mc(b,a?"select":"unselect")},drawTrackerGroup:function(){var a=this.trackerGroup,b=this.chart;return this.isCartesian&&(a||(this.trackerGroup=a=b.renderer.g().attr({zIndex:this.options.zIndex||1}).add(b.trackerGroup)),a.translate(this.xAxis.left,this.yAxis.top)),a},drawTracker:function(){var a,b,c=this,d=c.options,e=[].concat(c.graphPath),f=e.length,g=c.chart,h=g.renderer,i=g.options.tooltip.snap,j=c.tracker,k=d.cursor,l=k&&{cursor:k},m=c.singlePoints,n=c.drawTrackerGroup();if(f)for(b=f+1;b--;)e[b]===Lb&&e.splice(b+1,0,e[b+1]-i,e[b+2],Mb),(b&&e[b]===Lb||b===f)&&e.splice(b,0,Mb,e[b-2]+i,e[b-1]);for(b=0;b<m.length;b++)a=m[b],e.push(Lb,a.plotX-i,a.plotY,Mb,a.plotX+i,a.plotY);j?j.attr({d:e}):c.tracker=h.path(e).attr({isTracker:!0,stroke:Nb,fill:Kb,"stroke-linejoin":"bevel","stroke-width":d.lineWidth+2*i,visibility:c.visible?Ib:Gb}).on(Ab?"touchstart":"mouseover",function(){g.hoverSeries!==c&&c.onMouseOver()}).on("mouseout",function(){d.stickyTracking||c.onMouseOut()}).css(l).add(n)}};var Lc=q(Kc);pc.line=Lc;var Mc=q(Kc,{type:"area"});pc.area=Mc;var Nc=q(Kc,{type:"spline",getPointSpline:function(a,b,c){var d,e,f,g,h,i=1.5,j=i+1,k=b.plotX,l=b.plotY,m=a[c-1],n=a[c+1];if(c&&c<a.length-1){var o,p=m.plotX,q=m.plotY,r=n.plotX,s=n.plotY;d=(i*k+p)/j,e=(i*l+q)/j,f=(i*k+r)/j,g=(i*l+s)/j,o=(g-e)*(f-k)/(f-d)+l-g,e+=o,g+=o,e>q&&e>l?(e=jb(q,l),g=2*l-e):q>e&&l>e&&(e=kb(q,l),g=2*l-e),g>s&&g>l?(g=jb(s,l),e=2*l-g):s>g&&l>g&&(g=kb(s,l),e=2*l-g),b.rightContX=f,b.rightContY=g}return c?(h=["C",m.rightContX||m.plotX,m.rightContY||m.plotY,d||k,e||l,k,l],m.rightContX=m.rightContY=null):h=[Lb,k,l],h}});pc.spline=Nc;var Oc=q(Nc,{type:"areaspline"});pc.areaspline=Oc;var Pc=q(Kc,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){Kc.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&fc(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},translate:function(){var b,c,d=this,e=d.chart,f=d.options,g=f.stacking,h=f.borderWidth,i=0,j=d.xAxis,l=j.reversed,m={};Kc.prototype.translate.apply(d),fc(e.series,function(a){a.type===d.type&&a.visible&&d.options.group===a.options.group&&(a.options.stacking?(b=a.stackKey,m[b]===L&&(m[b]=i++),c=m[b]):c=i++,a.columnIndex=c)});var o=d.points,p=lb(j.translationSlope)*(j.ordinalSlope||j.closestPointRange||1),q=p*f.groupPadding,r=p-2*q,s=r/i,t=f.pointWidth,u=k(t)?(s-t)/2:s*f.pointPadding,v=ib(jb(n(t,s-2*u),1+2*h)),w=(l?i-d.columnIndex:d.columnIndex)||0,x=u+(q+w*s-p/2)*(l?-1:1),y=f.threshold,z=d.yAxis.getThreshold(y),A=n(f.minPointLength,5);fc(o,function(b){var c,e=b.plotY,i=n(b.yBottom,z),j=b.plotX+x,k=ib(kb(e,i)),l=ib(jb(e,i)-k),m=d.yAxis.stacks[(b.y<0?"-":"")+d.stackKey];g&&d.visible&&m&&m[b.x]&&m[b.x].setOffset(x,v),lb(l)<A&&A&&(l=A,k=lb(k-z)>A?i-A:z-(z>=e?A:0)),a(b,{barX:j,barY:k,barW:v,barH:l}),b.shapeType="rect",c={x:j,y:k,width:v,height:l,r:f.borderRadius,strokeWidth:h},h%2&&(c.y-=1,c.height+=1),b.shapeArgs=c,b.trackerArgs=lb(l)<3&&jc(b.shapeArgs,{height:6,y:k-3})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var a,b,c=this,d=c.options,e=c.chart.renderer;fc(c.points,function(f){var g=f.plotY;g===L||isNaN(g)||null===f.y||(a=f.graphic,b=f.shapeArgs,a?(oc(a),a.animate(e.Element.prototype.crisp.apply({},[b.strokeWidth,b.x,b.y,b.width,b.height]))):f.graphic=a=e[f.shapeType](b).attr(f.pointAttr[f.selected?Qb:Ob]).add(c.group).shadow(d.shadow))})},drawTracker:function(){var a,b,c,d=this,e=d.chart,f=e.renderer,g=+new Date,h=d.options,i=h.cursor,j=i&&{cursor:i},k=d.drawTrackerGroup();fc(d.points,function(i){b=i.tracker,a=i.trackerArgs||i.shapeArgs,delete a.strokeWidth,null!==i.y&&(b?b.attr(a):i.tracker=f[i.shapeType](a).attr({isTracker:g,fill:Nb,visibility:d.visible?Ib:Gb}).on(Ab?"touchstart":"mouseover",function(a){c=a.relatedTarget||a.fromElement,e.hoverSeries!==d&&l(c,"isTracker")!==g&&d.onMouseOver(),i.onMouseOver()}).on("mouseout",function(a){h.stickyTracking||(c=a.relatedTarget||a.toElement,l(c,"isTracker")!==g&&d.onMouseOut())}).css(j).add(i.group||k))})},animate:function(a){var b=this,c=b.points,d=b.options;a||(fc(c,function(a){var c=a.graphic,e=a.shapeArgs,f=b.yAxis,g=d.threshold;c&&(c.attr({height:0,y:k(g)?f.getThreshold(g):f.translate(f.getExtremes().min,0,1,0,1)}),c.animate({height:e.height,y:e.y},d.animation))}),b.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&fc(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),Kc.prototype.remove.apply(a,arguments)}});pc.column=Pc;var Qc=q(Pc,{type:"bar",init:function(){this.inverted=!0,Pc.prototype.init.apply(this,arguments)}});pc.bar=Qc;var Rc=q(Kc,{type:"scatter",sorted:!1,translate:function(){var a=this;Kc.prototype.translate.apply(a),fc(a.points,function(b){b.shapeType="circle",b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){for(var a,b=this,c=b.options.cursor,d=c&&{cursor:c},e=b.points,f=e.length;f--;)a=e[f].graphic,a&&(a.element._i=f);b._hasTracking?b._hasTracking=!0:b.group.attr({isTracker:!0}).on(Ab?"touchstart":"mouseover",function(a){b.onMouseOver(),a.target._i!==L&&e[a.target._i].onMouseOver()}).on("mouseout",function(){b.options.stickyTracking||b.onMouseOut()}).css(d)}});pc.scatter=Rc;var Sc=q(Jc,{init:function(){Jc.prototype.init.apply(this,arguments);var b,c=this;return a(c,{visible:c.visible!==!1,name:n(c.name,"Slice")}),b=function(){c.slice()},kc(c,"select",b),kc(c,"unselect",b),c},setVisible:function(a){var b,c=this,d=c.series.chart,e=c.tracker,f=c.dataLabel,g=c.connector,h=c.shadowGroup;c.visible=a=a===L?!c.visible:a,b=a?"show":"hide",c.group[b](),e&&e[b](),f&&f[b](),g&&g[b](),h&&h[b](),c.legendItem&&d.legend.colorizeItem(c,a)},slice:function(a,b,c){var d,e=this,f=e.series,g=f.chart,h=e.slicedTranslation;F(c,g),b=n(b,!0),a=e.sliced=k(a)?a:!e.sliced,d={translateX:a?h[0]:g.plotLeft,translateY:a?h[1]:g.plotTop},e.group.animate(d),e.shadowGroup&&e.shadowGroup.animate(d)}}),Tc=q(Kc,{type:"pie",isCartesian:!1,pointClass:Sc,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var a=this,b=a.points;fc(b,function(b){var c=b.graphic,d=b.shapeArgs,e=-ob/2;c&&(c.attr({r:0,start:e,end:e}),c.animate({r:d.r,start:d.start,end:d.end},a.options.animation))}),a.animate=null},setData:function(){Kc.prototype.setData.apply(this,arguments),this.processData(),this.generatePoints()},translate:function(){this.generatePoints();var a,b,d,e,f,g,h,i=0,j=this,k=-.25,l=1e3,m=j.options,n=m.slicedOffset,o=n+m.borderWidth,p=m.center.concat([m.size,m.innerSize||0]),q=j.chart,r=q.plotWidth,s=q.plotHeight,t=j.points,u=2*ob,v=kb(r,s),w=m.dataLabels.distance;p=ic(p,function(a,b){return f=/%$/.test(a),f?[r,s,v,v][b]*c(a)/100:a}),j.getX=function(a,b){return d=fb.asin((a-p[1])/(p[2]/2+w)),p[0]+(b?-1:1)*mb(d)*(p[2]/2+w)},j.center=p,fc(t,function(a){i+=a.y}),fc(t,function(c){e=i?c.y/i:0,a=gb(k*u*l)/l,k+=e,b=gb(k*u*l)/l,c.shapeType="arc",c.shapeArgs={x:p[0],y:p[1],r:p[2]/2,innerR:p[3]/2,start:a,end:b},d=(b+a)/2,c.slicedTranslation=ic([mb(d)*n+q.plotLeft,nb(d)*n+q.plotTop],gb),g=mb(d)*p[2]/2,h=nb(d)*p[2]/2,c.tooltipPos=[p[0]+.7*g,p[1]+.7*h],c.labelPos=[p[0]+g+mb(d)*w,p[1]+h+nb(d)*w,p[0]+g+mb(d)*o,p[1]+h+nb(d)*o,p[0]+g,p[1]+h,0>w?"center":u/4>d?"left":"right",d],c.percentage=100*e,c.total=i}),this.setTooltipPoints()},render:function(){var a=this;a.getAttribs(),this.drawPoints(),a.options.enableMouseTracking!==!1&&a.drawTracker(),this.drawDataLabels(),a.options.animation&&a.animate&&a.animate(),a.isDirty=!1},drawPoints:function(){var b,c,d,e,f,g=this,h=g.chart,i=h.renderer,j=g.options.shadow;fc(g.points,function(g){c=g.graphic,f=g.shapeArgs,d=g.group,e=g.shadowGroup,j&&!e&&(e=g.shadowGroup=i.g("shadow").attr({zIndex:4}).add()),d||(d=g.group=i.g("point").attr({zIndex:5}).add()),b=g.sliced?g.slicedTranslation:[h.plotLeft,h.plotTop],d.translate(b[0],b[1]),e&&e.translate(b[0],b[1]),c?c.animate(f):g.graphic=i.arc(f).attr(a(g.pointAttr[Ob],{"stroke-linejoin":"round"})).add(g.group).shadow(j,e),g.visible===!1&&g.setVisible(!1)})},drawDataLabels:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=this,o=m.data,p=m.chart,q=m.options.dataLabels,r=n(q.connectorPadding,10),s=n(q.connectorWidth,1),t=n(q.softConnector,!0),u=q.distance,v=m.center,w=v[2]/2,x=v[1],y=u>0,z=[[],[]],A=2;if(q.enabled)for(Kc.prototype.drawDataLabels.apply(m),fc(o,function(a){a.dataLabel&&z[a.labelPos[7]<ob/2?0:1].push(a)}),z[1].reverse(),k=function(a,b){return b.y-a.y},f=z[0][0]&&z[0][0].dataLabel&&z[0][0].dataLabel.getBBox().height;A--;){var B,C,D,E=[],F=[],G=z[A],H=G.length;for(C=x-w-u;x+w+u>=C;C+=f)E.push(C);if(B=E.length,H>B){for(j=[].concat(G),j.sort(k),l=H;l--;)j[l].rank=l;for(l=H;l--;)G[l].rank>=B&&G.splice(l,1);H=G.length}for(l=0;H>l;l++){a=G[l],e=a.labelPos;var I,J,K=9999;for(J=0;B>J;J++)I=lb(E[J]-e[1]),K>I&&(K=I,D=J);if(l>D&&null!==E[l])D=l;else if(H-l+D>B&&null!==E[l])for(D=B-H+l;null===E[D];)D++;else for(;null===E[D];)D++;F.push({i:D,y:E[D]}),E[D]=null}for(F.sort(k),l=0;H>l;l++){a=G[l],e=a.labelPos,d=a.dataLabel;var L=F.pop(),M=e[1];i=a.visible===!1?Gb:Ib,D=L.i,h=L.y,(M>h&&null!==E[D+1]||h>M&&null!==E[D-1])&&(h=M),g=m.getX(0===D||D===E.length-1?M:h,A),d.attr({visibility:i,align:e[6]})[d.moved?"animate":"attr"]({x:g+q.x+({left:r,right:-r}[e[6]]||0),y:h+q.y}),d.moved=!0,y&&s&&(b=a.connector,c=t?[Lb,g+("left"===e[6]?5:-5),h,"C",g,h,2*e[2]-e[4],2*e[3]-e[5],e[2],e[3],Mb,e[4],e[5]]:[Lb,g+("left"===e[6]?5:-5),h,Mb,e[2],e[3],Mb,e[4],e[5]],b?(b.animate({d:c}),b.attr("visibility",i)):a.connector=b=m.chart.renderer.path(c).attr({"stroke-width":s,stroke:q.connectorColor||a.color||"#606060",visibility:i,zIndex:3}).translate(p.plotLeft,p.plotTop).add())}}},drawTracker:Pc.prototype.drawTracker,getSymbol:function(){}});pc.pie=Tc;var Uc="dataGrouping",Vc=Kc.prototype,Wc=Vc.processData,Xc=Vc.generatePoints,Yc=Vc.destroy,Zc=Vc.tooltipHeaderFormatter,$c="number",_c={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:b(Rb,["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],Sb,["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],Tb,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],Ub,["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],Vb,["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],Wb,["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],Xb,["%B %Y","%B","-%B %Y"],Yb,["%Y","%Y","-%Y"])},ad=[[Rb,[1,2,5,10,20,25,50,100,200,500]],[Sb,[1,2,5,10,15,30]],[Tb,[1,2,5,10,15,30]],[Ub,[1,2,3,4,6,8,12]],[Vb,[1]],[Wb,[1]],[Xb,[1,3,6]],[Yb,null]],bd={sum:function(a){var b,c=a.length;if(!c&&a.hasNulls)b=null;else if(c)for(b=0;c--;)b+=a[c];return b},average:function(a){var b=a.length,c=bd.sum(a);return typeof c===$c&&b&&(c/=b),c},open:function(a){return a.length?a[0]:a.hasNulls?null:L},high:function(a){return a.length?A(a):a.hasNulls?null:L},low:function(a){return a.length?z(a):a.hasNulls?null:L},close:function(a){return a.length?a[a.length-1]:a.hasNulls?null:L},ohlc:function(a,b,c,d){return a=bd.open(a),b=bd.high(b),c=bd.low(c),d=bd.close(d),typeof a===$c||typeof b===$c||typeof c===$c||typeof d===$c?[a,b,c,d]:void 0}};Vc.groupData=function(a,b,c,d){var e,f,g,h,i=this,j=i.data,k=i.options.data,l=[],m=[],n=a.length,o=!!b,p=[],q=[],r=[],s=[],t="function"==typeof d?d:bd[d];for(h=0;n>=h;h++){for(;(c[1]!==L&&a[h]>=c[1]||h===n)&&(e=c.shift(),g=t(p,q,r,s),g!==L&&(l.push(e),m.push(g)),p=[],q=[],r=[],s=[],h!==n););if(h===n)break;if(f=o?b[h]:null,"ohlc"===d){var u=i.cropStart+h,v=j&&j[u]||i.pointClass.prototype.applyOptions.apply({},[k[u]]),w=v.open,x=v.high,y=v.low,z=v.close;typeof w===$c?p.push(w):null===w&&(p.hasNulls=!0),typeof x===$c?q.push(x):null===x&&(q.hasNulls=!0),typeof y===$c?r.push(y):null===y&&(r.hasNulls=!0),typeof z===$c?s.push(z):null===z&&(s.hasNulls=!0)}else typeof f===$c?p.push(f):null===f&&(p.hasNulls=!0)}return[l,m]},Vc.processData=function(){var a,b=this,c=b.options,d=c[Uc],e=d&&d.enabled,f=b.groupedData;if(b.forceCrop=e,Wc.apply(b,arguments)!==!1&&e){fc(f||[],function(a,b){a&&(f[b]=a.destroy?a.destroy():null)});var g,h=b.chart,i=b.processedXData,j=b.processedYData,k=h.plotSizeX,l=b.xAxis,m=n(l.groupPixelWidth,d.groupPixelWidth),o=i.length,p=h.series,q=b.pointRange;if(!l.groupPixelWidth){for(g=p.length;g--;)p[g].xAxis===l&&p[g].options[Uc]&&(m=jb(m,p[g].options[Uc].groupPixelWidth));l.groupPixelWidth=m}if(o>k/m||d.forced){a=!0,b.points=null;var r=l.getExtremes(),s=r.min,t=r.max,w=l.getGroupIntervalFactor&&l.getGroupIntervalFactor(s,t,i)||1,x=m*(t-s)/k*w,y=(l.getNonLinearTimeTicks||v)(u(x,d.units||ad),s,t,null,i,b.closestPointRange),z=Vc.groupData.apply(b,[i,j,y,d.approximation]),A=z[0],B=z[1];if(d.smoothed){for(g=A.length-1,A[g]=t;g--&&g>0;)A[g]+=x/2;A[0]=s}b.currentDataGrouping=y.info,null===c.pointRange&&(b.pointRange=y.info.totalRange),b.closestPointRange=y.info.totalRange,b.processedXData=A,b.processedYData=B}else b.currentDataGrouping=null,b.pointRange=q;b.hasGroupedData=a}},Vc.generatePoints=function(){var a=this;Xc.apply(a),a.groupedData=a.hasGroupedData?a.points:null},Vc.tooltipHeaderFormatter=function(a){var b,c,d,e,f,g,h,i=this,j=i.options,k=i.tooltipOptions,l=j.dataGrouping,m=k.xDateFormat,n=i.xAxis;if(n&&"datetime"===n.options.type&&l){if(c=i.currentDataGrouping,d=l.dateTimeLabelFormats,c)e=d[c.unitName],1===c.count?m=e[0]:(m=e[1],b=e[2]);else if(!m)for(g in S)if(S[g]>=n.closestPointRange){m=d[g][0];break}f=P(m,a),b&&(f+=P(b,a+c.totalRange-1)),h=k.headerFormat.replace("{point.key}",f)}else h=Zc.apply(i,[a]);return h},Vc.destroy=function(){for(var a=this,b=a.groupedData||[],c=b.length;c--;)b[c]&&b[c].destroy();Yc.apply(a)},Ac.line[Uc]=Ac.spline[Uc]=Ac.area[Uc]=Ac.areaspline[Uc]=_c,Ac.column[Uc]=jc(_c,{approximation:"sum",groupPixelWidth:10}),Ac.ohlc=jc(Ac.column,{lineWidth:1,dataGrouping:{approximation:"ohlc",enabled:!0,groupPixelWidth:5},tooltip:{pointFormat:'<span style="color:{series.color};font-weight:bold">{series.name}</span><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var cd=q(Jc,{applyOptions:function(b){var c=this,d=c.series,e=0;return"object"==typeof b&&"number"!=typeof b.length?(a(c,b),c.options=b):b.length&&(5===b.length&&("string"==typeof b[0]?c.name=b[0]:"number"==typeof b[0]&&(c.x=b[0]),e++),c.open=b[e++],c.high=b[e++],c.low=b[e++],c.close=b[e++]),c.y=c.high,c.x===L&&d&&(c.x=d.autoIncrement()),c}}),dd=q(pc.column,{type:"ohlc",valueCount:4,pointClass:cd,pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},translate:function(){var a=this,b=a.yAxis;pc.column.prototype.translate.apply(a),fc(a.points,function(a){null!==a.open&&(a.plotOpen=b.translate(a.open,0,1,0,1)),null!==a.close&&(a.plotClose=b.translate(a.close,0,1,0,1))})},drawPoints:function(){var a,b,c,d,e,f,g,h,i=this,j=i.points,k=i.chart;fc(j,function(j){j.plotY!==L&&(g=j.graphic,a=j.pointAttr[j.selected?"selected":""],d=a["stroke-width"]%2/2,h=gb(j.plotX)+d,e=gb(j.barW/2),f=["M",h,gb(j.yBottom),"L",h,gb(j.plotY)],null!==j.open&&(b=gb(j.plotOpen)+d,f.push("M",h,b,"L",h-e,b)),null!==j.close&&(c=gb(j.plotClose)+d,f.push("M",h,c,"L",h+e,c)),g?g.animate({d:f}):j.graphic=k.renderer.path(f).attr(a).add(i.group))})},animate:null});pc.ohlc=dd,Ac.candlestick=jc(Ac.column,{dataGrouping:{approximation:"ohlc",enabled:!0},lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:Ac.ohlc.tooltip,threshold:null,upColor:"white"});var ed=q(dd,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},getAttribs:function(){dd.prototype.getAttribs.apply(this,arguments);var a=this,b=a.options,c=b.states,d=b.upColor,e=jc(a.pointAttr);e[""].fill=d,e.hover.fill=c.hover.upColor||d,e.select.fill=c.select.upColor||d,fc(a.points,function(a){a.open<a.close&&(a.pointAttr=e)})},drawPoints:function(){var a,b,c,d,e,f,g,h,i,j,k=this,l=k.points,m=k.chart;fc(l,function(l){h=l.graphic,l.plotY!==L&&(a=l.pointAttr[l.selected?"selected":""],f=a["stroke-width"]%2/2,g=gb(l.plotX)+f,b=gb(l.plotOpen)+f,c=gb(l.plotClose)+f,d=fb.min(b,c),e=fb.max(b,c),j=gb(l.barW/2),i=["M",g-j,e,"L",g-j,d,"L",g+j,d,"L",g+j,e,"L",g-j,e,"M",g,e,"L",g,gb(l.yBottom),"M",g,d,"L",g,gb(l.plotY),"Z"],h?h.animate({d:i}):l.graphic=m.renderer.path(i).attr(a).add(k.group))})}});pc.candlestick=ed;var fd=Dc.prototype.symbols;Ac.flags=jc(Ac.column,{dataGrouping:null,fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:7,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},threshold:null,y:-30}),pc.flags=q(pc.column,{type:"flags",sorted:!1,noSharedTooltip:!0,init:Kc.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){pc.column.prototype.translate.apply(this);var a,b,c,d,e,f=this,g=f.options,h=f.chart,i=f.points,j=i.length-1,k=g.onSeries,l=k&&h.get(k),m=l&&l.options.step,n=l&&l.points,o=n&&n.length;if(l&&l.visible&&o)for(d=n[o-1].x,i.sort(function(a,b){return a.x-b.x});o--&&i[j]&&(a=i[j],c=n[o],!(c.x<=a.x&&c.plotY!==L&&(a.x<=d&&(a.plotY=c.plotY,c.x<a.x&&!m&&(e=n[o+1],e&&e.plotY!==L&&(a.plotY+=(a.x-c.x)/(e.x-c.x)*(e.plotY-c.plotY)))),j--,o++,0>j))););fc(i,function(a,c){a.plotY===L&&(a.plotY=h.plotHeight),b=i[c-1],b&&b.plotX===a.plotX&&(b.stackIndex===L&&(b.stackIndex=0),a.stackIndex=b.stackIndex+1)})},drawPoints:function(){var b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n.points,p=n.chart,q=p.renderer,r=n.options,s=r.y,t=r.shape,u=r.lineWidth%2/2;for(g=o.length;g--;)h=o[g],c=h.plotX+u,k=h.stackIndex,d=h.plotY,d!==L&&(d=h.plotY+s+u-(k!==L&&k*r.stackDistance)),l=k?L:h.plotX+u,m=k?L:h.plotY,i=h.graphic,j=h.connector,d!==L?(b=h.pointAttr[h.selected?"select":""],i?i.attr({x:c,y:d,r:b.r,anchorX:l,anchorY:m}):i=h.graphic=q.label(h.options.title||r.title||"A",c,d,t,l,m).css(jc(r.style,h.style)).attr(b).attr({align:"flag"===t?"left":"center",width:r.width,height:r.height}).add(n.group).shadow(r.shadow),e=i.box,f=e.getBBox(),h.shapeArgs=a(f,{x:c-("flag"===t?0:e.attr("width")/2),y:d})):i&&(h.graphic=i.destroy())},drawTracker:function(){var a=this;pc.column.prototype.drawTracker.apply(a),fc(a.points,function(a){kc(a.tracker.element,"mouseover",function(){a.graphic.toFront()})})},tooltipFormatter:function(a){return a.point.text},animate:function(){}}),fd.flag=function(a,b,c,d,e){var f=e&&e.anchorX||a,g=e&&e.anchorY||b;return["M",f,g,"L",a,b+d,a,b,a+c,b,a+c,b+d,a,b+d,"M",f,g,"Z"]},fc(["circle","square"],function(a){fd[a+"pin"]=function(b,c,d,e,f){var g=f&&f.anchorX,h=f&&f.anchorY,i=fd[a](b,c,d,e);return g&&h&&i.push("M",g,c+e,"L",g,h),i}}),M===Ec&&fc(["flag","circlepin","squarepin"],function(a){Ec.prototype.symbols[a]=fd[a]});var gd=Ab?"touchstart":"mousedown",hd=Ab?"touchmove":"mousemove",id=Ab?"touchend":"mouseup",jd=b($b,{x1:0,y1:0,x2:0,y2:1},_b,[[0,"#FFF"],[1,"#CCC"]]),kd=[].concat(ad);kd[4]=[Vb,[1,2,3,4]],kd[5]=[Wb,[1,2,3]],a(O,{navigator:{handles:{backgroundColor:"#FFF",borderColor:"#666"},height:40,margin:10,maskFill:"rgba(255, 255, 255, 0.75)",outlineColor:"#444",outlineWidth:1,series:{type:"areaspline",color:"#4572A7",compare:null,fillOpacity:.4,dataGrouping:{approximation:"average",groupPixelWidth:2,smoothed:!0,units:kd},dataLabels:{enabled:!1},id:Hb+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1},xAxis:{tickWidth:0,lineWidth:0,gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",x:3,y:-4}},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},title:{text:null},tickWidth:0}},scrollbar:{height:Ab?20:14,barBackgroundColor:jd,barBorderRadius:2,barBorderWidth:1,barBorderColor:"#666",buttonArrowColor:"#666",buttonBackgroundColor:jd,buttonBorderColor:"#666",buttonBorderRadius:2,buttonBorderWidth:1,rifleColor:"#666",trackBackgroundColor:b($b,{x1:0,y1:0,x2:0,y2:1},_b,[[0,"#EEE"],[1,"#FFF"]]),trackBorderColor:"#CCC",trackBorderWidth:1}}),Highcharts.Scroller=function(a){function b(a){return U.top||a-$-ab-T.chart.spacingBottom}function d(a,b){var c,d={fill:Z.backgroundColor,stroke:Z.borderColor,"stroke-width":1};K||(ib[b]=S.g().css({cursor:"e-resize"}).attr({zIndex:4-b}).add(),c=S.rect(-4.5,0,9,16,3,1).attr(d).add(ib[b]),mb.push(c),c=S.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(d).add(ib[b]),mb.push(c)),ib[b].translate(I+ab+parseInt(a,10),G+$/2-8)}function e(a){var b;K||(lb[a]=S.g().add(O),b=S.rect(-.5,-.5,ab+1,ab+1,W.buttonBorderRadius,W.buttonBorderWidth).attr({stroke:W.buttonBorderColor,"stroke-width":W.buttonBorderWidth,fill:W.buttonBackgroundColor}).add(lb[a]),mb.push(b),b=S.path(["M",ab/2+(a?-1:1),ab/2-3,"L",ab/2+(a?-1:1),ab/2+3,ab/2+(a?2:-2),ab/2]).attr({fill:W.buttonArrowColor}).add(lb[a]),mb.push(b)),a&&lb[a].attr({translateX:J-ab})}function f(b,f,g,h){if(!isNaN(b)){var i,j,k=W.barBorderWidth;if(H=G+db,p=n(z.left,a.plotLeft+ab),q=n(z.len,a.plotWidth-2*ab),I=p-ab,J=q+2*ab,z.getExtremes){var l=a.xAxis[0].getExtremes(),m=null===l.dataMin,o=z.getExtremes(),r=kb(l.dataMin,o.dataMin),s=jb(l.dataMax,o.dataMax);m||r===o.min&&s===o.max||z.setExtremes(r,s,!0,!1)}g=n(g,z.translate(b)),h=n(h,z.translate(f)),C=c(kb(g,h)),D=c(jb(g,h)),E=D-C,K||(V&&(L=S.rect().attr({fill:U.maskFill,zIndex:3}).add(),M=S.rect().attr({fill:U.maskFill,zIndex:3}).add(),N=S.path().attr({"stroke-width":_,stroke:U.outlineColor,zIndex:3}).add()),X&&(O=S.g().add(),i=W.trackBorderWidth,P=S.rect().attr({y:-i%2/2,fill:W.trackBackgroundColor,stroke:W.trackBorderColor,"stroke-width":i,r:W.trackBorderRadius||0,height:ab}).add(O),Q=S.rect().attr({y:-k%2/2,height:ab,fill:W.barBackgroundColor,stroke:W.barBorderColor,"stroke-width":k,r:cb}).add(O),R=S.path().attr({stroke:W.rifleColor,"stroke-width":1}).add(O))),V&&(L.attr({x:p,y:G,width:C,height:$}),M.attr({x:p+D,y:G,width:q-D,height:$}),N.attr({d:[Lb,I,H,Mb,p+C+db,H,p+C+db,H+bb-ab,Lb,p+D-db,H+bb-ab,Mb,p+D-db,H,I+J,H]}),d(C+db,0),d(D+db,1)),X&&(e(0),e(1),O.translate(I,gb(H+$)),P.attr({width:J}),Q.attr({x:gb(ab+C)+k%2/2,width:E-k}),j=ab+C+E/2-.5,R.attr({d:[Lb,j-3,ab/4,Mb,j-3,2*ab/3,Lb,j,ab/4,Mb,j,2*ab/3,Lb,j+3,ab/4,Mb,j+3,2*ab/3],visibility:E>12?Ib:Gb})),K=!0}}function g(b){b=a.tracker.normalizeMouseEvent(b);var c,d,e=b.chartX,f=b.chartY,g=Ab?10:7;f>G&&G+$+ab>f&&(d=!X||G+$>f,d&&fb.abs(e-C-p)<g?(t=!0,w=D):d&&fb.abs(e-D-p)<g?(u=!0,w=C):e>p+C&&p+D>e?(v=e,F=Y.cursor,Y.cursor="ew-resize",x=e-C):e>I&&I+J>e&&(c=d?e-p-E/2:p>e?C-kb(10,E):e>I+J-ab?C+kb(10,E):p+C>e?C-E:D,0>c?c=0:c+E>q&&(c=q-E),c!==C&&a.xAxis[0].setExtremes(z.translate(c,!0),z.translate(c+E,!0),!0,!1)))}function h(b){b=a.tracker.normalizeMouseEvent(b);var c=b.chartX;p>c?c=p:c>I+J-ab&&(c=I+J-ab),t?(y=!0,f(0,0,c-p,w)):u?(y=!0,f(0,0,w,c-p)):v&&(y=!0,x>c?c=x:c>q+x-E&&(c=q+x-E),f(0,0,c-x,c-x+E))}function i(){y&&a.xAxis[0].setExtremes(z.translate(C,!0),z.translate(D,!0),!0,!1),t=u=v=y=x=null,Y.cursor=F}function j(){var b,c,d,e,g,h=hb.xAxis,i=h.getExtremes(),j=i.min,k=i.max,l=i.dataMin,m=i.dataMax,n=k-j,o=r.xData,p=!!h.setExtremes;c=k>=o[o.length-1],b=l>=j,s||(r.options.pointStart=hb.xData[0],r.setData(hb.options.data,!1),g=!0),b&&(e=l,d=e+n),c&&(d=m,b||(e=jb(d-n,r.xData[0]))),p&&(b||c)?h.setExtremes(e,d,!0,!1):(g&&a.redraw(!1),f(jb(j,l),kb(k,m)))}function k(){kc(a.container,gd,g),kc(a.container,hd,h),kc(document,id,i)}function l(){lc(a.container,gd,g),lc(a.container,hd,h),lc(document,id,i),V&&lc(hb,"updatedData",j)}function m(){var c=a.xAxis.length,d=a.yAxis.length,e=a.setSize;if(a.extraBottomMargin=bb+U.margin,G=b(a.chartHeight),V){var f,g=hb.options,h=g.data,i=U.series;s=i.data,g.data=i.data=null,z=new a.Axis(jc({ordinal:hb.xAxis.options.ordinal},U.xAxis,{isX:!0,type:"datetime",index:c,height:$,top:G,offset:0,offsetLeft:ab,offsetRight:-ab,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),A=new a.Axis(jc(U.yAxis,{alignTicks:!1,height:$,top:G,offset:0,index:d,zoomEnabled:!1})),f=jc(hb.options,i,{threshold:null,clip:!1,enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:c,yAxis:d,name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),g.data=h,i.data=s,f.data=s||h,r=a.initSeries(f),kc(hb,"updatedData",j)}else z={translate:function(b,c){var d=a.xAxis[0].getExtremes(),e=a.plotWidth-2*ab,f=d.dataMin,g=d.dataMax-f;return c?b*g/e+f:e*(b-f)/g}};a.setSize=function(c,d,f){z.options.top=A.options.top=G=b(d),e.call(a,c,d,f)},k()}function o(){l(),fc([z,A,L,M,N,P,Q,R,O],function(a){a&&a.destroy&&a.destroy()}),z=A=L=M=N=P=Q=R=O=null,fc([lb,ib,mb],function(a){B(a)})}var p,q,r,s,t,u,v,w,x,y,z,A,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=a.renderer,T=a.options,U=T.navigator,V=U.enabled,W=T.scrollbar,X=W.enabled,Y=document.body.style,Z=U.handles,$=V?U.height:0,_=U.outlineWidth,ab=X?W.height:0,bb=$+ab,cb=W.barBorderRadius,db=_/2,eb=U.baseSeries,hb=a.series[eb]||"string"==typeof eb&&a.get(eb)||a.series[0],ib=[],lb=[],mb=[];return a.resetZoomEnabled=!1,m(),{render:f,destroy:o,series:r,xAxis:z,yAxis:A}},a(O,{rangeSelector:{buttonTheme:{width:28,height:16,padding:1,r:0,zIndex:10}}}),O.lang=jc(O.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From:",rangeSelectorTo:"To:"}),Highcharts.RangeSelector=function(b){function d(a,c,d){var e,f,g,h,i,j,k,l=b.xAxis[0],m=l&&l.getExtremes(),o=b.scroller&&b.scroller.xAxis,p=o&&o.getExtremes&&o.getExtremes(),q=p&&p.dataMin,r=p&&p.dataMax,s=m&&m.dataMin,u=m&&m.dataMax,v=kb(s,n(q,s)),w=jb(u,n(r,u)),x="max"==c.by?w:l&&kb(m.max,w),y=new Date(x),z=c.type,A=c.count,B={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};null!==v&&null!==w&&a!==t&&(B[z]?(h=B[z]*A,e=jb(x-h,v)):"month"===z?(y.setMonth(y.getMonth()-A),e=jb(y.getTime(),v),h=2592e6*A):"ytd"===z?(y=new Date(0),f=new Date(w),j=f.getFullYear(),y.setFullYear(j),String(j)!==P("%Y",y)&&y.setFullYear(j-1),e=i=jb(v||0,y.getTime()),f=f.getTime(),x=kb(w||f,f)):"year"===z?(y.setFullYear(y.getFullYear()-A),e=jb(v,y.getTime()),h=31536e6*A):"all"===z&&l?(e=v,x=w):"[object Function]"==Object.prototype.toString.call(z)&&(k=z({newMax:x,dataMax:w}),null!=k.newMin&&(e=k.newMin),null!=k.newMax&&(x=k.newMax),null!=k.range&&(h=k.range)),D[a]&&D[a].setState(2),l?setTimeout(function(){l.setExtremes(e,x,n(d,1),0,{rangeSelectorButton:c}),t=a},1):(g=b.options.xAxis,g[0]=jc(g[0],{range:h,min:i}),t=a))}function e(){o&&o.blur(),q&&q.blur()}function f(){b.extraTopMargin=25,w=b.options.rangeSelector,v=w.buttons||E;var a=w.selected;kc(y,gd,e),a!==L&&v[a]&&d(a,v[a],!1),kc(b,"load",function(){kc(b.xAxis[0],"afterSetExtremes",function(){D[t]&&D[t].setState(0),t=null})})}function g(a,b){var c=a.hasFocus?w.inputEditDateFormat||"%Y-%m-%d":w.inputDateFormat||"%b %e, %Y";b&&(a.HCTime=b),a.value=P(c,a.HCTime)}function h(d){var e,f="min"===d;return A[d]=p("span",{innerHTML:z[f?"rangeSelectorFrom":"rangeSelectorTo"]},w.labelStyle,m),e=p("input",{name:d,className:Hb+"range-selector",type:"text"},a({width:"80px",height:"16px",border:"1px solid silver",marginLeft:"5px",marginRight:f?"5px":"0",textAlign:"center"},w.inputStyle),m),e.onfocus=e.onblur=function(a){a=a||window.event,e.hasFocus="focus"===a.type,g(e)},e.onchange=function(){var a=e.value,d=Date.parse(a),g=b.xAxis[0].getExtremes();isNaN(d)&&(d=a.split("-"),d=T(c(d[0]),c(d[1])-1,c(d[2]))),isNaN(d)&&(d=i(a)),!isNaN(d)&&(f&&d>=g.dataMin&&d<=q.HCTime||!f&&d<=g.dataMax&&d>=o.HCTime)&&b.xAxis[0].setExtremes(f?d:g.min,f?g.max:d)},e}function i(a){var b=[0,0,3,6,9];return a=a.split("-Q"),2!=a.length?0/0:new Date(parseInt(a[0],10),b[parseInt(a[1],10)],1).getTime()}function j(c,e){var f,i=b.options.chart.style,j=w.buttonTheme,k=w.inputEnabled!==!1,n=j&&j.states,A=b.plotLeft;l||(u=x.text(z.rangeSelectorZoom,A,b.plotTop-10).css(w.labelStyle).add(),f=A+u.getBBox().width+5,fc(v,function(a,c){D[c]=x.button(a.text,f,b.plotTop-25,function(){d(c,a),this.isActive=!0},j,n&&n.hover,n&&n.select).css({textAlign:"center"}).add(),f+=D[c].width+(w.buttonSpacing||0),t===c&&D[c].setState(2)}),k&&(s=m=p("div",null,{position:"relative",height:0,fontFamily:i.fontFamily,fontSize:i.fontSize,zIndex:1}),y.parentNode.insertBefore(m,y),r=m=p("div",null,a({position:"absolute",top:b.plotTop-25+"px",right:b.chartWidth-b.plotLeft-b.plotWidth+"px"},w.inputBoxStyle),m),o=h("min"),q=h("max"))),k&&(g(o,c),g(q,e)),l=!0}function k(){lc(y,gd,e),fc([D],function(a){B(a)}),u&&(u=u.destroy()),o&&(o.onfocus=o.onblur=o.onchange=null),q&&(q.onfocus=q.onblur=q.onchange=null),fc([o,q,A.min,A.max,r,s],function(a){C(a)}),o=q=A=m=r=s=null}var l,m,o,q,r,s,t,u,v,w,x=b.renderer,y=b.container,z=O.lang,A={},D=[],E=[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}];return b.resetZoomEnabled=!1,f(),{render:j,destroy:k}},K.prototype.callbacks.push(function(a){function b(){g=a.xAxis[0].getExtremes(),h.render(jb(g.min,g.dataMin),kb(g.max,g.dataMax))}function c(){g=a.xAxis[0].getExtremes(),i.render(g.min,g.max)}function d(a){h.render(a.min,a.max)}function e(a){i.render(a.min,a.max)}function f(){h&&(lc(a,"resize",b),lc(a.xAxis[0],"afterSetExtremes",d)),i&&(lc(a,"resize",c),lc(a.xAxis[0],"afterSetExtremes",e))}var g,h=a.scroller,i=a.rangeSelector;h&&(kc(a.xAxis[0],"afterSetExtremes",d),kc(a,"resize",b),b()),i&&(kc(a.xAxis[0],"afterSetExtremes",e),kc(a,"resize",c),c()),kc(a,"destroy",f)}),Highcharts.StockChart=function(a,b){var c,d=a.series,e={marker:{enabled:!1,states:{hover:{enabled:!0,radius:5}}},shadow:!1,states:{hover:{lineWidth:2}},dataGrouping:{enabled:!0}};return a.xAxis=ic(m(a.xAxis||{}),function(a){return jc({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},showLastLabel:!0},a,{type:"datetime",categories:null})}),a.yAxis=ic(m(a.yAxis||{}),function(a){return c=a.opposite,jc({labels:{align:c?"right":"left",x:c?-2:2,y:-2},showLastLabel:!1,title:{text:null}},a)}),a.series=null,a=jc({chart:{panning:!0},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:e,spline:e,area:e,areaspline:e,column:{shadow:!1,borderWidth:0,dataGrouping:{enabled:!0}}}},a,{chart:{inverted:!1}}),a.series=d,new K(a,b)};var ld=Vc.init,md=Vc.processData,nd=Jc.prototype.tooltipFormatter;Vc.init=function(){ld.apply(this,arguments);var a=this,b=a.options.compare;b&&(a.modifyValue=function(a,c){var d=this.compareValue;return a="value"===b?a-d:a=100*(a/d)-100,c&&(c.change=a),a})},Vc.processData=function(){var a=this;if(md.apply(this,arguments),a.options.compare)for(var b=0,c=a.processedXData,d=a.processedYData,e=d.length,f=a.xAxis.getExtremes().min;e>b;b++)if(typeof d[b]===$c&&c[b]>=f){a.compareValue=d[b];break}},Jc.prototype.tooltipFormatter=function(a){var b=this;return a=a.replace("{point.change}",(b.change>0?"+":"")+r(b.change,b.series.tooltipOptions.changeDecimals||2)),nd.apply(this,[a])},function(){var a=Vc.init,b=Vc.getSegments;Vc.init=function(){var b,c,d=this;if(a.apply(d,arguments),b=d.chart,c=d.xAxis,c&&c.options.ordinal&&kc(d,"updatedData",function(){delete c.ordinalIndex}),c&&c.options.ordinal&&!c.hasOrdinalExtension){c.hasOrdinalExtension=!0,c.beforeSetTickPositions=function(){var a,b,d,e,f,g,h=this,i=[],j=!1,k=h.getExtremes(),l=k.min,m=k.max;if(h.options.ordinal){if(fc(h.series,function(b,c){if(b.visible!==!1&&(i=i.concat(b.processedXData),a=i.length,c&&a))for(i.sort(function(a,b){return a-b}),c=a-1;c--;)i[c]===i[c+1]&&i.splice(c,1)}),a=i.length,a>2)for(b=i[1]-i[0],g=a-1;g--&&!j;)i[g+1]-i[g]!==b&&(j=!0);j?(h.ordinalPositions=i,d=c.val2lin(l,!0),e=c.val2lin(m,!0),h.ordinalSlope=f=(m-l)/(e-d),h.ordinalOffset=l-d*f):h.ordinalPositions=h.ordinalSlope=h.ordinalOffset=L}},c.val2lin=function(a,b){var c=this,d=c.ordinalPositions;if(d){var e,f,g,h=d.length;for(e=h;e--;)if(d[e]===a){g=e;break}for(e=h-1;e--;)if(a>d[e]||0===e){f=(a-d[e])/(d[e+1]-d[e]),g=e+f;break}return b?g:c.ordinalSlope*(g||0)+c.ordinalOffset}return a},c.lin2val=function(a,b){var c=this,d=c.ordinalPositions;
if(d){var e,f,g,h=c.ordinalSlope,i=c.ordinalOffset,j=d.length-1;if(b)0>a?a=d[0]:a>j?a=d[j]:(j=hb(a),g=a-j);else for(;j--;)if(e=h*j+i,a>=e){f=h*(j+1)+i,g=(a-e)/(f-e);break}return g!==L&&d[j]!==L?d[j]+(g?g*(d[j+1]-d[j]):0):a}return a},c.getExtendedPositions=function(){var a,d,e=c.series[0].currentDataGrouping,f=c.ordinalIndex,g=e?e.count+e.unitName:"raw",h=c.getExtremes();return f||(f=c.ordinalIndex={}),f[g]||(a={series:[],getExtremes:function(){return{min:h.dataMin,max:h.dataMax}},options:{ordinal:!0}},fc(c.series,function(c){d={xAxis:a,xData:c.xData,chart:b},d.options={dataGrouping:e?{enabled:!0,forced:!0,approximation:"open",units:[[e.unitName,[e.count]]]}:{enabled:!1}},c.processData.apply(d),a.series.push(d)}),c.beforeSetTickPositions.apply(a),f[g]=a.ordinalPositions),f[g]},c.getGroupIntervalFactor=function(a,b,c){for(var d,e=0,f=c.length,g=[];f-1>e;e++)g[e]=c[e+1]-c[e];return g.sort(function(a,b){return a-b}),d=g[hb(f/2)],f*d/(b-a)},c.postProcessTickInterval=function(a){var b=this.ordinalSlope;return b?a/(b/c.closestPointRange):a},c.getNonLinearTimeTicks=function(a,b,d,e,f,g,h){var i,j,l,m,n,o=0,p=0,q={},r=[],s=c.options.tickPixelInterval;if(!f||b===L)return v(a,b,d,e);for(m=f.length;m>p&&(n=p&&f[p-1]>d,f[p]<b&&(o=p),(p===m-1||f[p+1]-f[p]>5*g||n)&&(i=v(a,f[o],f[p],e),r=r.concat(i),o=p+1),!n);p++);if(l=i.info,h&&l.unitRange<=S[Ub]){for(p=r.length-1,o=1;p>o;o++)new Date(r[o])[X]()!==new Date(r[o-1])[X]()&&(q[r[o]]=Vb,j=!0);j&&(q[r[0]]=Vb),l.higherRanks=q}if(r.info=l,h&&k(s)){for(var t,u,w,x,y,z=r.length,A=z,B=[],C=[];A--;)u=c.translate(r[A]),w&&(C[A]=w-u),B[A]=w=u;for(C.sort(),x=C[hb(C.length/2)],.6*s>x&&(x=null),A=r[z-1]>d?z-1:z,w=void 0;A--;)u=B[A],y=w-u,w&&.8*s>y&&(null===x||.8*x>y)?(q[r[A]]&&!q[r[A+1]]?(t=A+1,w=u):t=A,r.splice(t,1)):w=u}return r};var e=b.pan;b.pan=function(a){var c=b.xAxis[0],d=!1;if(c.options.ordinal){var f,g,h,i,j,k=b.mouseDownX,l=c.getExtremes(),m=l.dataMax,n=l.min,p=l.max,q=b.hoverPoints,r=c.closestPointRange,s=c.translationSlope*(c.ordinalSlope||r),t=(k-a)/s,u={ordinalPositions:c.getExtendedPositions()},v=c.lin2val,w=c.val2lin;u.ordinalPositions?lb(t)>1&&(q&&fc(q,function(a){a.setState()}),0>t?(i=u,j=c.ordinalPositions?c:u):(i=c.ordinalPositions?c:u,j=u),h=j.ordinalPositions,m>h[h.length-1]&&h.push(m),f=v.apply(i,[w.apply(i,[n,!0])+t,!0]),g=v.apply(j,[w.apply(j,[p,!0])+t,!0]),f>kb(l.dataMin,n)&&g<jb(m,p)&&c.setExtremes(f,g,!0,!1),b.mouseDownX=a,o(b.container,{cursor:"move"})):d=!0}else d=!0;d&&e.apply(b,arguments)}}},Vc.getSegments=function(){var a,c=this,d=c.options.gapSize;b.apply(c),c.xAxis.options.ordinal&&d&&(a=c.segments,fc(a,function(b,e){for(var f=b.length-1;f--;)b[f+1].x-b[f].x>c.xAxis.closestPointRange*d&&a.splice(e+1,0,b.splice(f+1,b.length-f))}))}}(),a(Highcharts,{Chart:K,dateFormat:P,pathAnim:R,getOptions:I,hasBidiBug:yb,numberFormat:r,Point:Jc,Color:Cc,Renderer:M,SVGRenderer:Dc,VMLRenderer:Ec,CanVGRenderer:Hc,seriesTypes:pc,setOptions:H,Series:Kc,addEvent:kc,removeEvent:lc,createElement:p,discardElement:C,css:o,each:fc,extend:a,map:ic,merge:jc,pick:n,splat:m,extendClass:q,placeBox:x,product:"Highstock",version:"1.1.5"})}(),function(){function a(a,b,c,d){var e=Math.round((d-b)/2),f=Math.round(d/2);return["M",0,e,"L",a,e,"L",a,0,"L",a+c,f,"L",a,d,"L",a,e+b,"L",0,e+b,"Z"]}function b(b,c){var d=b.g("arror").add();d.translate(c.x,c.y),b.path(a(40,20,30,40)).attr({fill:"#92AE7E"}).add(d)}function c(a,b,c,d,e){b=b||[];var f,g,i,j,k,l,m=d.width-2*t-2*v,n=a.fontMetrics(z).b+a.fontMetrics(A).b+10,o=t+v,p=d.height-t,q=Math.round((d.height-t-n)*w),r=d.width-2*v-t,s=d.height-n-u,B=v+u,C=x+u,D=d.width,E=12,F=0,G=6,H=0;for(f=0;g=b[f];f++)g.value=h(g.value,0),H+=g.value;c&&(c.value=h(c.value,0));var I=c?Math.max(H,c.value):H,J=e.scale||(0!=I?q/I:0),K=[];for(f=0;g=b[f];f++)K[f]=Math.min(Math.round(g.value*J),q);Math.round(H*J),c&&(markV=Math.min(Math.round(c.value*J),q));var L=a.g("beaker").add();for(L.translate(d.x,d.y),i=o,j=p,f=0;g=b[f];f++)j>p-x?(a.rect(i-2,j-K[f]-2*x,m+4,K[f]+2*x,x).attr({fill:g.color}).add(L),a.rect(i-2,j-K[f]-2*x-2,m+4,2*x+2,j-K[f]>p-x?x:void 0).attr({fill:"white"}).add(L)):a.rect(i,j-K[f],m,K[f]).attr({fill:g.color}).add(L),j-=K[f];if(a.rect(B,n,r,s,C).attr({stroke:"#7A9461","stroke-width":t}).add(L),a.rect(v,n-t,m+2*t,x).attr({"stroke-width":0,fill:"white"}).add(L),a.rect(F+2,n-t+x+3-E,D-4,E,G).attr({stroke:"#7A9461","stroke-width":t,fill:"white"}).add(L),a.rect(v+t,n-t+x+3-t,m,2*t).attr({"stroke-width":0,fill:"white"}).add(L),i=o,j=p,c){a.path(a.crispLine(["M",i,j-markV,"L",i+m,j-markV],3)).attr({"stroke-width":2,stroke:c.color}).add(L);var M=H-c.value,N=0>M?"#FF2300":"green";M=M>0?"+"+M:M,a.label("ç®æ ï¼"+h(c.value,0)+'<br />å®éï¼<span style="font-weight:bold;color:'+N+'">'+h(M,0)+"</span>",i+m+10,j-markV-20).attr({fill:"white",stroke:c.color,"stroke-width":2,padding:5,r:5}).css({fontFamily:"å¾®è½¯éé», Arial"}).add(L).shadow(!0)}for(i=o,j=p,k=Math.round(a.fontMetrics(y).b/2),f=0;g=b[f];f++)l=h(g.value,0),l>0&&a.text(l,i+Math.round(m/2),j-Math.round(K[f]/2)+k).attr({align:"center"}).css({fontSize:y}).add(L),j-=K[f];return i=o+Math.round(m/2),j=a.fontMetrics(z).b,a.text(H,i,j).attr({align:"center"}).css({fontSize:z,fontWeight:"bold",fontFamily:"å¾®è½¯éé», Times",color:e.countColor}).add(L),j+=a.fontMetrics(A).b+3,a.text(e.countDesc,i,j).attr({align:"center"}).css({fontSize:A,fontWeight:"bold",fontFamily:"å¾®è½¯éé», Times",color:"#999"}).add(L),{scale:J}}function d(a,b,c){var d,e,f,g=a.g("legend").add(),i=0,j=0,k=Math.round((C-a.fontMetrics(B).b)/2);for(d=0;e=c[d];d++)a.rect(i,j,C,C).attr({fill:e.color}).add(g),i+=C+5,f=a.text(h(e.text),i,j+C-k).css({fontFamily:"å¾®è½¯éé», Arial",fontSize:B,color:"#222"}).add(g),i+=f.getBBox().width+15;g.translate(b.x,b.y)}function e(a,b,c){a.text(h(b,""),c.x,c.y).css({color:"#555",fontSize:D,fontFamily:"å¾®è½¯éé», Arial",fontWeight:"bold"}).add()}function f(a,b,c){b=b||{},a.label(h(b.text)+"ï¼<br />"+'<span style="color:#7493CB">'+h(b.value),c.x,c.y).attr({fill:"#CCC",r:4}).css({fontFamily:"å¾®è½¯éé», Arial",fontSize:"14px"}).add()}function g(a){var g,h,i=this.renderer,j=a.beakerA||{},k=a.beakerB||{},l=[];for(g=0;h=(j.water||[])[g];g++)h.color=h.color||E[g],l.push(h);for(g=0;h=(k.water||[])[g];g++)h.color=h.color||F[g],l.push(h);j.mark&&(j.mark.color=j.mark.color||"#C0504D"),k.mark&&(k.mark.color=k.mark.color||"#C0504D");var m={x:150,y:50,width:180,height:280},n=c(i,j.water,j.mark,m,{countColor:"#326600",countDesc:"å¤æ®µæ±æ»å¼"}),o={x:m.x+m.width+210,y:m.y+m.height-185,width:120,height:180};c(i,k.water,k.mark,o,{countColor:"#676767",countDesc:"12ç¹åé©³ååæº",scale:n.scale}),b(i,{x:60,y:m.y+180}),b(i,{x:430,y:m.y+180}),d(i,{x:350,y:10},l),e(i,a.title,{x:20,y:10+C}),a.theRate&&f(i,a.theRate,{x:o.x+180,y:o.y+o.height-55})}function h(a,b){return null==b&&(b=" - "),null==a||"[object String]"!=Object.prototype.toString.call(a)&&isNaN(a)?b:a}var i=ecui,j=i.ui,k=i.dom,l=i.util,m=i.string,n=i.util.blank,o=i.inherits;i.triggerEvent,k.children,m.formatDate,m.encodeHTML,l.attachEvent,xutil.number.formatNumber,l.extend,k.create;var p=j.Control,q=p.prototype,r=j.BeakerChart=o(p,"ui-beaker-chart",function(a,b){b.resizable=!1}),s=r.prototype;s.$setSize=n,s.CHART_OPTIONS={global:{useUTC:!1}};var t=4,u=2,v=5,w=.65,x=20,y="12px",z="30px",A="12px",B="12px",C=14,D="14px",E=["#F88E32","#66B2E4","#97C644"],F=["#999999","red","green"];s.init=function(){Highcharts.setOptions(this.CHART_OPTIONS)},s.$dispose=function(){this.$disposeChart(),q.$dispose.call(this)},s.$disposeChart=function(){this._oChart&&(this._oChart.destroy(),this._oChart=null)},s.setData=function(a,b){this._nWidth=965,this._nHeight=a.height,this._oData=a.datasource,!b&&this.render()},s.render=function(){return this.$disposeChart(),this._oData?(this.$createChart(),void 0):(this.$renderEmpty(),void 0)},s.$renderEmpty=function(){this.getMain().innerHTML=" "},s.$createChart=function(){var a=this,b={chart:{renderTo:this.getMain(),width:this._nWidth,height:this._nHeight,events:{load:function(b){return g.apply(this,[a._oData].concat(b))}}},credits:{enabled:!1},title:{text:""}};this._oChart=new Highcharts.Chart(b)}}(),function(){var a=ecui.inherits,b=ecui.ui.Button,c=ecui.dom.moveElements,d=ecui.dom.create,e=ecui.dom.addClass,f=ecui.ui.HButton=a(b,null,function(a,b){b.skin&&(e(a,b.skin),b.primary=b.skin)},function(a){var b=this.getType(),e=d(b+"-text","","span");this.$setBody(e),c(a,e,!0),a.appendChild(d(b+"-inner","")),a.firstChild.appendChild(d(b+"-left","","span")),a.firstChild.appendChild(e),a.firstChild.appendChild(d(b+"-right","","span"))});f.prototype}(),function(){var a=ecui.inherits,b=ecui.ui.HButton;ecui.dom.moveElements,ecui.dom.create;var c=ecui.triggerEvent;ecui.dom.addClass,ecui.util.extend;var d=ecui.ui.SwitchButton=a(b,null,null,function(a,b){this.getType(),this._aStatusList=b.statusList||[];for(var c,d,e=0;d=this._aStatusList[e];e++)if(d.value==b.status){c=e;break}this.$switchStatus(c)}),e=d.prototype;e.$click=function(){d.superClass.$click.apply(this,arguments),this.$switchStatus(),c(this,"change")},e.$switchStatus=function(a){var b=this._aStatusList;if(0!=b.length){var c=null!=a?a:null==this._nIndex?0:(this._nIndex+1)%b.length;this._nIndex=c,this.setText(b[this._nIndex].text)}},e.getValue=function(){return this._aStatusList[this._nIndex].value}}(),function(){function a(a,b){var c={text:{css:[],style:[]},outer:{css:[],style:[]},left:{css:[],style:[]},right:{css:[],style:[]}};return a?(a.arr&&c.right.css.push(b+"-condfmt-arr",b+"-condfmt-arr-"+a.arr),a.bg&&(a.bg.indexOf("#")>=0?c.outer.style.push("background-color:"+a.bg+";"):c.outer.css.push(b+"-condfmt-bg-"+a.bg)),a.tx&&(a.tx.indexOf("#")>=0?c.text.style.push("color:"+a.tx+";"):c.text.css.push(b+"-condfmt-tx-"+a.tx)),a.wt&&c.text.style.push("font-weight:bold;"),c):null}function b(){}function c(a,b,c){var d,e=b.str?b.str:String(null==b.v?" - ":c?C(b.v,c,void 0,void 0,!0):b.v),f=this._oCut[a];return f&&(d=e,e=w(e,f,"gbk"),e.length<d.length?e+="...":h.ieVersion<8&&"ROWHCELL"==a||(d=null)),{value:x(e),prompt:d&&x(d)}}function d(a){return a!==Object(a)&&(a={v:a}),a}function e(a){var b=a.getAttribute("data-cell-pos");return b?(b=b.split("-"),{x:u(b[0]),y:u(b[1])}):null}function f(a){if(a!==Object(a))return!1;for(var b in a)return!1;return!0}var g=ecui,h=g.dom,i=g.array,j=g.ui,k=g.string,l=g.util,m=xutil.dom.q;xutil.ajax,g.$fastCreate;var n=g.inherits,o=g.triggerEvent,p=g.dispose;h.create;var q=h.addClass,r=h.setStyle,s=h.removeClass,t=g.getMouseX,u=l.toNumber;h.getParent;var v=h.getStyle,w=k.sliceByte;h.moveElements,h.getAttribute,h.getPosition;var x=k.encodeHTML;i.remove,l.getView;var y=l.extend,z=g.repaint,A=l.attachEvent,B=l.detachEvent;Array.prototype.push;var C=xutil.number.formatNumber,D=Math;D.min;var E=window,F=j.Control,G=F.prototype,H=j.SlowLockedTable,I=H.prototype,J=j.OlapTable=n(H,"ui-table",function(a,b){this.$setOptions(b),this.$renderHTML(a)}),K=J.prototype,L=(K.Cell=n(I.Cell)).prototype,M=K.HCell.prototype,N="æ°æ®éè¯¯",O=15;K.init=function(){J.superClass.init.call(this),this.$initRowChecked()},K.$setOptions=function(a){this._sEmptyHTML=a.emptyHTML,this._aData=a.datasource||[],this._aColFields=a.colFields||[],this._aColDefine=a.colDefine||[],this._reportTemplateId=a.reportTemplateId,this._aRowHeadFields=a.rowHeadFields||[],this._aRowDefine=a.rowDefine||[],this._oRowCheck={rowCheckMode:a.rowCheckMode,rowChecked:a.rowChecked||[],rowCheckMax:a.rowCheckMax||Number.MAX_VALUE,rowCheckMin:a.rowCheckMin||Number.MIN_VALUE,rowCheckCount:0};for(var b,c=0;b=this._aRowDefine[c];c++)b.selected&&this._oRowCheck.rowChecked.push(c);this._oCut={ROWHCELL:a.rowHCellCut,CCELL:a.cCellCut,HCELL:a.hCellCut},this._oStyle={defaultCCellAlign:a.defaultCCellAlign},this._nLeftLock=a.leftLock=this._bInvalid?0:this._aRowHeadFields.length?this._aRowHeadFields[0].length:0,this._nRightLock=a.rightLock=0,null==a.vScroll&&(a.vScroll=!1),null==a.hScroll&&(a.hScroll=!0)},K.$validate=function(){this._bInvalid=!1;var a=b.call(this,this._aColFields),c=b.call(this,this._aRowHeadFields),d=b.call(this,this._aData);this._aColDefine.length!=a&&(this._bInvalid=!0),c+d!=a&&(this._bInvalid=!0),this._aRowHeadFields.length!=this._aData.length&&(this._bInvalid=!0)},K.setData=function(a){B(E,"resize",z),this.$disposeInner();var b=this.getOuter();b.innerHTML="",this.$setBody(b),this.$resize(),J.client.call(this,b,y({uid:this._sUID,primary:this._sPrimary},a)),this._bCreated=!1,this.cache(!0,!0),this.init(),this.$bindCellLink(),A(E,"resize",z)},K.$disposeInner=function(){var a=this.$dispose;this.$dispose=new Function,p(this),this.$dispose=a},K.$renderHTML=function(a){var b=this.getTypes()[0],c=this._aData||[],d=this._aColFields||[],e=this._aColDefine||[];this._reportTemplateId;var g,h,i,j,k=this._aRowHeadFields||[],l=this._aRowDefine||[],m=this._nLeftLock,n=[];if(r(a,"width","auto"),r(a,"display","block"),n.push("<table>"),this._bInvalid)n.push('<thead><tr><th class="'+b+'-hcell-empty">&nbsp;</th></tr></thead>'),n.push("<tbody><tr><td>"+N+"</td></tr></tbody>");else{if(n.push("<thead>"),d.length)for(g=0;i=d[g];g++){for(n.push("<tr>"),h=0;h<i.length;h++)f(j=i[h])||this.$renderHCell(n,g==d.length-1?e[h]:null,j,h<this._nLeftLock?h:h-this._nLeftLock,g);n.push("</tr>")}else n.push('<tr><th class="'+b+'-hcell-empty">&nbsp;</th></tr>');if(n.push("</thead>"),n.push("<tbody>"),this._bInvalid||!c.length)n.push("<tr>",'<td class="',b,'-cell-empty" align="middle" colspan="',d.length,'">',this._sEmptyHTML,"</td>","</tr>");else for(g=0;i=c[g];g++){if(n.push('<tr class="'+b+'-row">'),m)for(h=0;h<k[g].length;h++)f(j=k[g][h])||this.$renderRowHCell(n,e[h],j,h,g);for(h=0;h<i.length;h++)j=i[h],this.$renderCell(n,e[m+h],l[g],j,h,g);n.push("</tr>")}}return n.push("</tbody></table>"),n=n.join(""),a.innerHTML=n,a},K.$setMeasureDes4Table=function(a){for(var b=this.getOuter(),c=this.getTypes()[0],d=m(c+"-olap-ind-describe",b),e=0;e<d.length;e++){var f=d[e];if(f.getAttribute("uniquename")){var g=f.getAttribute("uniquename");a.descriptions[g]&&(f.title=a.descriptions[g])}}},K.$renderHCell=function(a,b,c,e,f){var g,i=this.getType(),j=[i+"-hcell"],k=[],l=[],m=[];c=d(c),m.push(c.colspan?' colspan="'+c.colspan+'" ':""),m.push(c.rowspan?' rowspan="'+c.rowspan+'" ':""),b&&b.width,b&&b.orderby&&(j.push(i+"-hcell-sort-"+b.orderby),l.push('data-orderby="'+b.orderby+'"')),j.push(i+"-olap-ind-describe"),l.push('data-cell-pos="'+e+"-"+f+'"'),b&&b.uniqueName&&l.push('uniqueName="'+b.uniqueName+'"'),g=this.$renderCellInner("HCELL",null,c,l,j,k);var n=h.ieVersion<8;a.push("<th ",m.join(" ")," ",l.join(" ")," ",' class="',j.join(" "),'" style="',k.join(" "),'">',n?'<div class="'+i+'-hcell-bag">':"",g,n?"</div>":"","</th>")},K.$renderRowHCell=function(a,b,c,e,f){var g,h=this.getType(),i=[h+"-rowhcell"],j=[],k=[],l=[];c=d(c),l.push(c.colspan?' colspan="'+c.colspan+'" ':""),l.push(c.rowspan?' rowspan="'+c.rowspan+'" ':""),b.width&&j.push("width:"+b.width+"px;"),k.push('data-cell-pos="'+e+"-"+f+'"'),k.push('data-row-h="1"'),g=this.$renderCellInner("ROWHCELL",null,c,k,i,j),a.push("<td ",l.join(" ")," ",k.join(" ")," ",' style="',j.join(" "),'" class="',i.join(" "),'">',g,"</td>")},K.$renderCell=function(a,b,c,e,f,g){var h,i=this.getType(),j=[i+"-ccell"],k=[],l=[];e=d(e);var m=b.align||this._oStyle.defaultCCellAlign;m&&j.push(i+"-cell-align-"+m),l.push('data-cell-pos="'+f+"-"+g+'"'),l.push('data-content="1"'),h=this.$renderCellInner("CCELL",b,e,l,j,k),a.push("<td ",l.join(" ")," ",' style="',k.join(" "),'" class="',j.join(" "),'">',h,"</td>")},K.$renderCellInner=function(b,d,e,f,g,h){var i="",j="",k=this.getType(),l=c.call(this,b,e,d&&d.format),m=l.prompt;l=l.value,m&&f.push('title="'+m+'"'),e.indent&&(f.push('data-indent="'+e.indent+'"'),i="margin-left:"+O*e.indent+"px;"),e.drillByLink?(f.push('data-cell-link="true"'),l='<a href="#" class="'+k+'-cell-link" data-cell-link-drill-a="1">'+l+"</a>"):d&&d.linkBridge&&e.cellId&&e.cellId.indexOf("[SUMMARY_NODE].[ALL]")<0&&(f.push('data-cell-link="true"'),l='<a href="#" class="'+k+'-cell-link" data-cell-link-bridge-a="1">'+l+"</a>");var n=a(e.style,k);return n&&(l=(n.left.css.length>0||n.left.style.length>0?'<span class="'+n.left.css.join(" ")+'" style="'+n.left.style.join(" ")+'">'+"</span>":"")+(n.text.css.length>0||n.text.style.length>0?'<span class="'+n.text.css.join(" ")+'" style="'+n.text.style.join(" ")+'">'+l+"</span>":l)+(n.right.css.length>0||n.right.style.length>0?'<span class="'+n.right.css.join(" ")+'" style="'+n.right.style.join(" ")+'">'+"</span>":""),(n.outer.css.length>0||n.outer.style.length>0)&&(g.push.apply(g,n.outer.css),h.push.apply(h,n.outer.style))),null!=e.expand?(f.push('data-e-c="'+(e.expand?"collapsed":"expanded")+'"'),j=k+"-e-c-icon "+k+(e.expand?"-collapsed-icon ":"-expanded-icon "),l=['<div style="'+i+' text-align:left;" class="'+k+'-tree-item">','<div class="'+j+'"></div>',l,"</div>"].join("")):i&&(l='<div style="'+i+'text-align:left;">'+l+"</div>"),l},K.$ready=function(){o(this,"sizechange")},K.$resize=function(){var a=this;I.$resize.call(this),this._bResizeTimeout||(this._bResizeTimeout=!0,setTimeout(function(){a._bResizeTimeout=!1,o(a,"sizechange"),a.$pagescroll()},100))},K.$bindCellLink=function(){for(var a,b,c,d,f,g=this,h=this.getOuter().getElementsByTagName("td"),i=0;a=h[i];i++)if(a.getAttribute("data-cell-link"))for(b=a.getElementsByTagName("a"),d=e(a),f=0;c=b[f];f++)c.getAttribute("data-cell-link-drill-a")?c.onclick=function(a){return function(){return!g._bDisabled&&o(g,"celllinkdrill",null,[a]),!1}}(this._aRowHeadFields[d.y][d.x]):c.getAttribute("data-cell-link-bridge-a")&&(c.onclick=function(a,b){return function(){return!g._bDisabled&&o(g,"celllinkbridge",null,[a,b]),!1}}(this._aColDefine[this._nLeftLock+d.x],this._aRowDefine[d.y]))},K.getContentCell=function(a,b){return a=this._aRows[a],a&&a.getCell((this._nLeftLock||0)+b)||null},K.getValue=function(){for(var a,b=[],c=this._aRows||[],d=0;d<c.length;d++)(a=c[d])&&a._bRowChecked&&b.push({value:this._aRowDefine[d],index:d});return{rowChecked:b,rowDefine:(this._aRowDefine||[]).slice(),colDefine:(this._aColDefine||[]).slice()}},K.$getContentRow=function(a){var b,c;return(b=this._aRows[a])&&(c=b.getCell(this._nLeftLock||0))&&c.getParent()||null},K.$initRowChecked=function(){for(var a,b=this._oRowCheck,c=0;c<(b.rowChecked||[]).length;c++)(a=this.$getContentRow(b.rowChecked[c]))&&this.$setRowChecked(a,!0)},K.$setRowChecked=function(a,b){var c=this.getType(),d=this._oRowCheck,e=this._oRowCheck.rowCheckMode;if("CHECK"==e){if(b&&!a._bRowChecked&&d.rowCheckCount<d.rowCheckMax)return a._bRowChecked=!0,q(a.getMain(),c+"-row-checked"),d.rowCheckCount++,!0;if(!b&&a._bRowChecked&&d.rowCheckCount>d.rowCheckMin)return a._bRowChecked=!1,s(a.getMain(),c+"-row-checked"),d.rowCheckCount--,!0}else if("SELECT"==e){for(var f,g=this._aRows||[],h=0;h<g.length;h++)(f=g[h])&&f._bRowChecked&&(f._bRowChecked=!1,s(f.getMain(),c+"-row-selected"));a._bRowChecked=!0,q(a.getMain(),c+"-row-selected"),d.rowCheckCount=1}return!1},K.$isRowChecked=function(a){return!!a._bRowChecked},M.$click=function(){var a,b=this.getParent();if(G.$click(this),a=this.getOuter().getAttribute("data-orderby")){var c=e(this.getOuter());o(b,"sort",null,[b._aColDefine[(b._nLeftLock||0)+c.x]])}},L.$click=function(a){K.Cell.superClass.$click.call(this,a),a.target&&(a.target.getAttribute("data-cell-link-drill-a")||a.target.getAttribute("data-cell-link-bridge-a"))||this.$handleCellClick()},L.$handleCellClick=function(){var a,b=this.getOuter(),c=this.getParent().getParent();if(b.getAttribute("data-row-h")&&(a=b.getAttribute("data-e-c"))&&t(this)<=u(v(b.firstChild,"marginLeft"))+u(v(b.firstChild,"paddingLeft"))){var d,f,g;(d=e(this.getOuter()))&&(f=c._aRowHeadFields[d.y][d.x],g=c._aRowDefine[d.y]),o(c,"expanded"==a?"collapse":"expand",null,[f,g])}if(b.getAttribute("data-content")){var h;(d=e(this.getOuter()))&&(h=c._aRowDefine[d.y]),o(c,"rowclick",null,[h]);var i=this.getParent(),j=c._oRowCheck.rowCheckMode;if(j){var k,l=c.$isRowChecked(i);"SELECT"==j?(c.$setRowChecked(i,!0),k="rowselect"):"CHECK"==j&&(l&&c.$setRowChecked(i,!1)?k="rowuncheck":!l&&c.$setRowChecked(i,!0)&&(k="rowcheck"));var m=function(a){c.$setRowChecked(i,a)};k&&o(c,k,null,[h,m])}}}}(),function(){function a(a,b,c){var d=b.getTypes()[0],e=[];e.push("<tr>");var f=0,g=0;for(g=0;g<a.length;g++){var i=a[g];if(e.push("<th "),e.push('data-field="'),"[object String]"==Object.prototype.toString.call(i.field)&&e.push(i.field),i.width&&e.push('" style="width:'+i.width+"px;"+"min-width:"+i.width+"px"),i.rowspan&&e.push('" rowspan="'+i.rowspan),i.colspan){e.push('" colspan="'+i.colspan);var j,k=0;for(j=f;j<f+i.colspan;j++)k+=c[1][j].width;e.push('" width="'+k),f+=i.colspan}if(i.sortable&&(e.push('" class="'+d+"-hcell-sort"),i.field&&i.field==b._sSortby&&e.push(" "+d+"-hcell-sort-"+b._sOrderby),i.order&&e.push('" data-orderby="'+i.order)),e.push('">'),i.title){var l=h.ieVersion<8,m=g==a.length-1;e.push(l?'<div class="ui-plane-table-hcell-bag ':"",l&&m?"ui-plane-table-hcell-bag-lastcolumn":"",l?'">':"",i.title,l?"</div>":"")}i.checkbox&&e.push('<input type="checkbox" class="'+d+'-checkbox-all"'+" />"),i.tip&&i.tip.length&&(e.push('<span ecui="type:tip; id:tip-'),e.push(i.field),e.push("; message:"),e.push(i.tip),e.push('"></span>')),e.push("</th>")}return e.push("</tr>"),e.join("")}function b(a,b){var c=0;for(c=0;c<b.length;c++)for(var d=b[c],e=0;e<a.length;e++){var f=a[e];if(f.detail){var g="tip-"+d[f.idField];ecui.get(g)&&(ecui.get(g).onloadData=function(a,b){return function(c){b.loadData(a,c)}}(d,f))}}}function c(a,b){var c,d=[];a=w({},a),a=w(a,F);for(var e in a)c={handler:a[e]},e=e.split(/\s+/),e[0]==b&&(c.selector=e[1],d.push(c));return d}function d(a,b){var c,d,e,f=!0;return a||b?(b.replace(/^([^.#]*)([.#]?)(.*)$/,function(a,b,f,g){c=b,e=f,d=g}),c&&a.tagName.toLowerCase()!=c&&(f=!1),"."!=e||new RegExp("(^|\\s+)"+d+"(\\s+|$)").test(a.className)||(f=!1),"#"==e&&a.id!=d&&(f=!1),f):!1}function e(a){for(var b,c=[],d=0;b=a[d++];)c.push(w({},b));return c}function f(a){var b=a.getAttribute("data-cell-pos");return b?(b=b.split("-"),{x:t(b[0]),y:t(b[1])}):null}var g=ecui,h=g.dom,i=g.array,j=g.ui,k=(g.string,g.util),l=(g.$fastCreate,g.inherits),m=g.triggerEvent,n=g.dispose,o=(g.$dispose,h.create),p=(h.first,h.last,h.children,h.addClass),q=h.setStyle,r=h.setText,s=(h.getText,h.removeClass),t=k.toNumber,u=(h.getParent,h.moveElements,h.getAttribute),v=(h.getPosition,xutil.string.encodeHTML),w=(i.remove,k.getView,k.extend),x=g.repaint,y=k.attachEvent,z=k.detachEvent,A=xutil.number.formatNumber;MATH=Math,MIN=MATH.min,WINDOW=window,UI_LOCKED_TABLE=j.SlowLockedTable,UI_LOCKED_TABLE_CLASS=UI_LOCKED_TABLE.prototype;var B=j.CustomTable=l(UI_LOCKED_TABLE,"ui-table",function(b,c){this._oOptions=c,this._aHeader=c.header,this._sSortby=c.sortby,this._sOrderby=c.orderby,c.datasource||(this._nLeftLock=c.leftLock||0,this._nRightLock=c.rightLock||0);var d=this.getTypes()[0];this._oRowCheck={rowCheckMode:c.rowCheckMode,rowChecked:c.rowChecked||[],rowCheckMax:c.rowCheckMax||Number.MAX_VALUE,rowCheckMin:c.rowCheckMin||Number.MIN_VALUE,rowCheckCount:0};for(var f,g=0;f=(c.datasource||[])[g];g++)f.selected&&this._oRowCheck.rowChecked.push(g);var h=[];h.push("<table><thead>"),c.leftLock=c.leftLock||0,c.rightLock=c.rightLock||0;var i=c.leftLock+c.rightLock;if(c.datasource?(q(b,"width","auto"),q(b,"display","block")):q(b,"width","100%"),c.datasource)if("[object Array]"==Object.prototype.toString.call(c.fields[0])){var g,j=0;for(g=0;g<c.fields.length;g++){var f=c.fields[g];h.push(a(f,this,c.fields))}this._aColumns=[];for(var f,g=0;f=c.fields[0][g];g++)if(f.colspan)for(var k=0;k<f.colspan;k++)this._aColumns.push(w({},c.fields[1][j++]));else this._aColumns.push(w({},f))}else h.push(a(c.fields,this)),this._aColumns=e(c.fields);else{h.push("<tr>");for(var g,g=0;i>=g;g++)h.push("<th></th>");h.push("</tr>")}if(h.push("</thead><tbody>"),c.datasource)if(this._aData=c.datasource,this._aData.length){var g;for(g=0;g<c.datasource.length;g++){var l=c.datasource[g];h.push("<tr>");var k;for(k=0;k<this._aColumns.length;k++){var f=this._aColumns[k];h.push('<td data-content="1" data-cell-pos="'+k+"-"+g+'" class="ui-table-ccell"'),f.align&&h.push(' align="'+f.align+'"'),h.push(">");var m=f.content||f.field;if("function"==typeof m){var n=m.call(null,l,g);if("[object String]"==Object.prototype.toString.call(n))h.push("<span "),h.push(' title="'+v(n)+'">'),h.push(v(n)),h.push("</span>");else{var p=o();p.appendChild(n),h.push(p.innerHTML)}}else{if(f.checkbox)h.push('<input type="checkbox"'),h.push(' class="'+d+'-checkbox"'),h.push(' data-rownum="'+g+'"'),h.push(" />");else{var r=l[m];null==r||""==r?r="-":f.format&&(r=A(r,f.format,void 0,void 0,!0)),h.push('<span class="'),h.push(d+'-cell-limited"'),h.push(' title="'+v(r)+'">'),h.push(v(r)),h.push("</span>")}f.detail&&(h.push('<span ecui="type:tip;asyn:true;id:'),h.push("tip-"+l[f.idField]+'"'))}h.push("</td>")}h.push("</tr>")}}else h.push("<tr>"),h.push('<td class="'+d+"-empty-cell"+'" align="middle" colspan="'+this._aColumns.length+'">'),h.push(c.errorMsg?c.errorMsg:"ææ æ°æ®ï¼è¯·ç¨ååè¯"),h.push("</td>"),h.push("</tr>");else{h.push("<tr>");var g;h.push("<td></td>"),h.push("</tr>"),c.leftLock=0,c.rightLock=0}return h.push("</tbody></table>"),b.innerHTML=h.join(""),b},function(a,c){return c.fields&&c.datasource&&b(c.fields,c.datasource),this.$bindCheckbox(),a}),C=B.prototype,D=(C.Cell=l(UI_LOCKED_TABLE_CLASS.Cell,null,function(a,b){b.primary="ui-table-cell"})).prototype,E=["click","mouseup","mousedown"],F={"click th.ui-table-hcell-sort":function(a,b){var c,d=this.getAttribute("data-field");c=this.className.indexOf("-sort-desc")>=0?"asc":this.className.indexOf("-sort-asc")>=0?"desc":this.getAttribute("data-orderby")||"desc",m(b,"sort",null,[d,c])},"click input.ui-table-checkbox-all":function(a,b){b.$refreshCheckbox(this.checked)},"click input.ui-table-checkbox":function(a,b){b.$refreshCheckbox()}};C.getData=function(){return this._aData},C.$createHeadRow=function(a){for(var b,c=this.getTypes()[0],d=o("","","tr"),e=0;b=a[e];e++){var f=o("","","th");if(d.appendChild(f),b.title&&r(f,b.title),b.tip&&b.tip.length){var g=o("","","span");g.innerHTML="",g.setAttribute("ecui","type:tip; id:"+b.field+"-tip; message:"+b.tip),f.appendChild(g),ecui.init(g)}if(b.width&&q(f,"minWidth",b.width+"px"),b.field&&f.setAttribute("data-field",b.field),b.rowspan&&f.setAttribute("rowSpan",b.rowspan),b.colspan&&f.setAttribute("colSpan",b.colspan),b.sortable&&(p(f,c+"-hcell-sort"),b.field&&b.field==this._sSortby&&p(f,c+"-hcell-sort-"+this._sOrderby)),b.checkbox){var h=o("","","input");h.setAttribute("type","checkbox"),p(h,c+"-checkbox-all"),f.appendChild(h)}}return d},C.getFields=function(){return this._aColumns},C.render=function(a,b,c,d,e){var d=w({},d);d=w(d,this._oOptions),d.leftLock=this._nLeftLock,d.rightLock=this._nRightLock,d.fields=a,d.datasource=b||[];var c=c||{};d.sortby=c.sortby,d.orderby=c.orderby,d.errorMsg=e,b.length||(d.leftLock=0,d.rightLock=0),this.$refresh(d)},C.$bindCheckbox=function(){var a,b,c=this.getBody().getElementsByTagName("input"),d=this.getTypes()[0];for(this._aCheckboxs=[],this._eCheckboxAll=null,a=0;b=c[a];a++)"checkbox"==b.type&&b.className.indexOf(d+"-checkbox-all")>=0?this._eCheckboxAll=b:"checkbox"==b.type&&b.className.indexOf(d+"-checkbox")>=0&&this._aCheckboxs.push(b)},C.$refreshCheckbox=function(a){var b,c,d,e=!0;for(b=0;c=this._aCheckboxs[b];b++)d=c.parentNode.parentNode,void 0!==a?c.checked=a:e=c.checked&&e,c.checked&&this._bCheckedHighlight?d.className+=" highlight":this._bCheckedHighlight&&(d.className=d.className.replace(/\s+highlight/g,""));this._eCheckboxAll&&(this._eCheckboxAll.checked=void 0!==a?a:e)},C.$ready=function(){m(this,"sizechange")},C.$resize=function(){var a=this;UI_LOCKED_TABLE_CLASS.$resize.call(this),m(this,"sizechange"),setTimeout(function(){a.$pagescroll()},500)},C.$pagescroll=function(){UI_LOCKED_TABLE_CLASS.$pagescroll.call(this),this._uHScrollbar},C.getSelection=function(){if(!this._aCheckboxs||!this._aCheckboxs.length)return[];for(var a,b=[],c=0;a=this._aCheckboxs[c++];)if(a.checked){var d=u(a,"data-rownum")-0;b.push(w({},this._aData[d]))}return b},C.init=function(){var a,b,c=this.getOuter(),d=this;if(UI_LOCKED_TABLE_CLASS.init.call(this),!this.eventAdded){for(a=0;b=E[a];a++)y(c,b,function(a){return function(b){var c=b||window.event;c.targetElement=c.target||c.srcElement,d.$fireEventHandler(a,c)}}(b));this.eventAdded=!0}this.$initRowChecked()},C.$fireEventHandler=function(a,b){var e,f,g=c(this.events,a),h=b.targetElement;for(e=0;f=g[e];e++)d(h,f.selector)&&f.handler.call(h,b,this)},C.$refresh=function(a){z(WINDOW,"resize",x),this.$disposeInner();var b=this.getOuter();b.innerHTML="",this.$setBody(b),this.$resize(),B.client.call(this,b,w({uid:this._sUID,primary:this._sPrimary},a)),this._bCreated=!1,this.cache(!0,!0),UI_LOCKED_TABLE_CLASS.init.call(this),this.init(),y(WINDOW,"resize",x)},C.$disposeInner=function(){var a=this.$dispose;this.$dispose=new Function,n(this),this.$dispose=a},C.$getContentRow=function(a){var b,c;return(b=this._aRows[a])&&(c=b.getCell(this._nLeftLock||0))&&c.getParent()||null},C.$initRowChecked=function(){for(var a,b=this._oRowCheck,c=0;c<(b.rowChecked||[]).length;c++)(a=this.$getContentRow(b.rowChecked[c]))&&this.$setRowChecked(a,!0)},C.$setRowChecked=function(a,b){var c=this.getType(),d=this._oRowCheck,e=this._oRowCheck.rowCheckMode;if("CHECK"==e){if(b&&!a._bRowChecked&&d.rowCheckCount<d.rowCheckMax)return a._bRowChecked=!0,p(a.getMain(),c+"-row-checked"),d.rowCheckCount++,!0;if(!b&&a._bRowChecked&&d.rowCheckCount>d.rowCheckMin)return a._bRowChecked=!1,s(a.getMain(),c+"-row-checked"),d.rowCheckCount--,!0}else if("SELECT"==e){for(var f,g=this._aRows||[],h=0;h<g.length;h++)(f=g[h])&&f._bRowChecked&&(f._bRowChecked=!1,s(f.getMain(),c+"-row-selected"));a._bRowChecked=!0,p(a.getMain(),c+"-row-selected"),d.rowCheckCount=1}return!1},C.$isRowChecked=function(a){return!!a._bRowChecked},C.getValue=function(){for(var a,b=[],c=this._aRows||[],d=0;d<c.length;d++)(a=c[d])&&a._bRowChecked&&b.push({value:this._aData[d],index:d});return{rowChecked:b,data:(this._aData||[]).slice()}},D.$click=function(a){C.Cell.superClass.$click.call(this,a),a.target&&(a.target.getAttribute("data-cell-link-drill-a")||a.target.getAttribute("data-cell-link-bridge-a"))||this.$handleCellClick()},D.$handleCellClick=function(){var a=this.getOuter(),b=this.getParent().getParent();if(a.getAttribute("data-content")){var c;(pos=f(this.getOuter()))&&(c=b._aData[pos.y]),m(b,"rowclick",null,[c]);var d=this.getParent(),e=b._oRowCheck.rowCheckMode;if(e){var g,h=b.$isRowChecked(d);"SELECT"==e?(b.$setRowChecked(d,!0),g="rowselect"):"CHECK"==e&&(h&&b.$setRowChecked(d,!1)?g="rowuncheck":!h&&b.$setRowChecked(d,!0)&&(g="rowcheck"));var i=function(a){b.$setRowChecked(d,a)};g&&m(b,g,null,[c,i])}}}}(),function(){function a(){var a=this.getParent(),b=a._nPage,c=a.getMaxPage(),d=this.getStep();u.$click.call(this),"+"==d.charAt(0)?(b+=parseInt(d.substring(1),10),b==a._nPage?b=c:b>c&&(b=a._nPage)):"-"==d.charAt(0)?(b-=parseInt(d.substring(1),10),b==a._nPage?b=1:1>b&&(b=a._nPage)):b=parseInt(d,10),a._nPage!=b&&o(a,"change",null,[b])}function b(a){var b,d,e,f=a._aPageBtn,g=a.getMaxPage(),h=a._nPage,i=a._nShowCount,j=parseInt(i/2,10),k=h-j>0?h-j:1;for(1==h?a._uPrvBtn.disable():a._uPrvBtn.enable(),h==g||0==g?a._uNxtBtn.disable():a._uNxtBtn.enable(),k+i-1>g&&g-i>=0&&(k=g-i+1),d=0;e=f[d];d++)b=k+d,e.setContent(b),e.setStep(b),e.setSelected(h==b),b>g?e.hide():e.show();c(a)}function c(a){var b,c=a._aPageBtn,d=a._aOMSBtn,e=a.getMaxPage();a._bOMSButton&&("1"!=c[0].getContent()?(c[0].setContent(1),c[0].setStep(1),d[0].show()):d[0].hide(),b=c[c.length-1],b.isShow()&&b.getContent()!=e?(b.setContent(e),b.setStep(e),d[1].show()):d[1].hide())}var d=ecui,e=d.dom,f=(d.string,d.array,d.ui),g=d.util,h=Math,i=e.create,j=e.children,k=g.extend,l=g.blank,m=d.$fastCreate,n=d.inherits,o=d.triggerEvent,p=f.Control,q=f.Button,r=f.Select,s=f.Item,t=f.Items,u=p.prototype;q.prototype,s.prototype,r.prototype;var v=f.Pager=n(p,"ui-pager",function(a,b){var c,d,e=this.getTypes()[0],f=[];for(d=this._nShowCount=!b.showCount||b.showCount<3?7:b.showCount,this._bOMSButton=b.omsButton!==!1,f.push('<div class="'+e+"-button-prv "+e+'-button">ä¸ä¸é¡µ</div><div class="'+e+'-items">'),c=0;d>c;c++)(1==c||c==d-1)&&f.push('<div class="'+e+'-item-oms" ecui="disabled:true">...</div>'),f.push('<div class="'+e+'-item"></div>');
f.push('</div><div class="'+e+"-button-nxt "+e+'-button">ä¸ä¸é¡µ</div>'),a.innerHTML=f.join("")},function(a,b){a=j(a),this._bResizable=!1,this._nPage=b.page||1,this._nPageSize=b.pageSize||50,this._nTotal=b.total||0,this._uPrvBtn=m(this.Button,a[0],this),this.$setBody(a[1]),this._uNxtBtn=m(this.Button,a[2],this),this.$initItems()}),w=v.prototype,x=w.Button=n(q,"ui-pager-button",function(a){var b=this.getTypes()[0],c=i(b+"-icon");a.insertBefore(c,a.firstChild)}),y=x.prototype,z=(w.Item=n(s,"ui-pager-item",function(a,b){b.resizeable=!1})).prototype;k(w,t),z.$setSize=l,z.setSelected=function(a){this.alterClass((a?"+":"-")+"selected")},y.setStep=z.setStep=function(a){this._sStep=a+""},y.getStep=z.getStep=function(){return this._sStep},y.$click=z.$click=a,w.getMaxPage=function(){return h.ceil(this._nTotal/this._nPageSize)},w.getTotal=function(){return this._nTotal},w.getTotal=function(){return this._nTotal},w.go=function(a){this._nPage=a,b(this)},w.setPageSize=function(a){this._nPageSize=a,this._nPage=1,b(this)},w.setTotal=function(a){this._nTotal=a,this._nPage=1,b(this)},w.init=function(){var a,c,d=this.getItems();for(this._uPrvBtn.setStep("-1"),this._uNxtBtn.setStep("+1"),this._aOMSBtn=[],this._aPageBtn=[],u.init.call(this),a=0;c=d[a];a++)c.init(),1==a||a==d.length-2?(this._aOMSBtn.push(c),c.hide()):this._aPageBtn.push(c);b(this)},w.$setSize=l}(),function(){var a=ecui,b=a.dom,c=(a.string,a.array,a.ui),d=a.util,e=(b.create,b.children),f=d.extend,g=d.blank,h=a.$fastCreate,i=a.inherits,j=a.triggerEvent,k=c.Control,l=c.Pager,m=c.Select;k.prototype,l.prototype;var n=c.ExtPager=i(k,"ui-ext-pager",function(a,b){var c,d,e=this.getTypes()[0],f=[];for(f.push('<div class="'+e+'-sum">å±<em></em>æ¡è®°å½</div>'),f.push('<div class="ui-pager"></div>'),f.push('<div class="'+e+'-pagesize"><span class="'+e+'-text">æ¯é¡µæ¾ç¤º</span><select class="ui-select" style="width:40px">'),c=0,d=n.PAGE_SIZE.length;d>c;c++)f.push('<option value="'+n.PAGE_SIZE[c]+'">'+n.PAGE_SIZE[c]+"</option>");for(f.push('</select><span class="'+e+'-text">æ¡</span>'),a.innerHTML=f.join(""),b.pageSize=b.pageSize||p,c=0,d=n.PAGE_SIZE.length;d>c&&n.PAGE_SIZE[c]!=b.pageSize;c++);c>=d&&(b.pageSize=p)},function(a,b){var a=e(a),c=this;this._bResizable=!1,this._eTotalNum=a[0].getElementsByTagName("em")[0],this._uPager=h(l,a[1],this,f({},b)),this._uPager.$change=function(a){j(c,"change",null,[a,c._uPager._nPageSize])},this._uSelect=h(m,a[2].getElementsByTagName("select")[0],this),this._uSelect.$change=function(){j(c,"pagesizechange",null,[this.getValue()])}}),o=n.prototype,p=50;n.PAGE_SIZE=[20,50,80],o.init=function(){this._uPager.init(),this._uSelect.init(),this._eTotalNum.innerHTML=this._uPager._nTotal||0,this._uSelect.setValue(this._uPager._nPageSize)},o.render=function(a,b,c){var d=this._uPager;this._uSelect.setValue(c),b||0==b?(this._eTotalNum.innerHTML=b,d._nTotal=b):(this._eTotalNum.innerHTML=d._nTotal||0,d._nTotal=d._nTotal||0),d._nPageSize=c||d._nPageSize,d.go(a)},o.getPageSize=function(){return this._uPager._nPageSize},o.getPage=function(){return this._uPager._nPage},o.getTotal=function(){return this._uPager._nTotal},o.$setSize=g}(),function(){var a=ecui,b=a.ui,c=a.inherits,d=a.triggerEvent;a.dispose;var e=b.Control;e.prototype;var f=b.Breadcrumb=c(e,"ui-breadcrumb",null,function(a,b){this.$setOptions(b)}),g=f.prototype;g.$setSize=new Function,g.$setOptions=function(a){this._oOptions=a||{},this._aDatasource=this._oOptions.datasource||[]},g.setData=function(a){this.$setOptions(a),this.$disposeInner(),this.$renderHTML(),this.$bindEvent()},g.$renderHTML=function(){for(var a,b,c=this.getType(),d=[],e=this.$calculateHide(),f=!1,g=0;a=this._aDatasource[g];g++)b=a.url||"#",g>=e.start&&g<=e.end?f||(d.push('<span class="'+c+'-hide-item">...<span>'),f=!0):a.disabled?d.push('<span class="'+c+'-text-item">'+a.text+"<span>"):d.push('<a href="'+b+'" class="'+c+'-link-item" data-breadcrumb-index="'+g+'">'+a.text+"</a>");var h='<span class="'+c+'-sep">&gt;</span>';this.getBody().innerHTML=d.join(h)},g.$calculateHide=function(){var a={},b=this._oOptions.maxShow,c=this._aDatasource.length;if(c>b)if(1==b)a.start=0,a.end=c-2;else if(b>1){var d=this._oOptions.hidePosPercent;(null==d||0>d||d>1)&&(d=.5);var e=Math.floor((b-1)*d);a.start=e,a.end=c-(b-e)-1}return a},g.$bindEvent=function(){for(var a,b=this,c=this.getBody().getElementsByTagName("a"),e=0;a=c[e];e++)a.getAttribute("data-breadcrumb-index")&&"#"!=a.href&&(a.onclick=function(){if(!b._bDisabled){var a=this.getAttribute("data-breadcrumb-index");d(b,"change",null,[b._aDatasource[a]])}return!1})},g.$disposeInner=function(){this.getBody().innerHTML=""}}(),function(){function a(b,c,d){var e=k.first(b);k.addClass(b,"ui-indtree-wrap");var f=k.getParent(b);f&&!d&&(k.first(f)==k.last(f)?k.addClass(b,"ui-indtree-single"):k.first(f)==b?k.addClass(b,"ui-indtree-first"):k.last(f)==b?k.addClass(b,"ui-indtree-last"):k.addClass(b,"ui-indtree-middle")),k.addClass(e,"ui-indtree-node");var g=i.getOptions(e);g.level=d?1:c._nLevel+1;var h=i.$fastCreate(t.Node,e,c,g),j=h.getParent();h._cPop=j._cPop,h._cTopPar=d?j:j._cTopPar,g.selectAllBtn&&(j._cSelectAllBtn=h);var l=k.children(b)[1];if(!l||0==k.children(l).length)return h;var m=k.create("ui-indtree-icon ui-indtree-icon-collapse","","div");k.insertAfter(m,e),h._cIcon=i.$fastCreate(v.Icon,m,h,{}),k.addClass(l,"ui-indtree-children"),l.style.display="none",h._eChildren=l,h._aChildren=[];for(var n=k.children(l),o=0;o<n.length;o++)h._aChildren.push(a(n[o],h));return h}function b(a){var c=a.getParent();if(a._bExpandSelected=c._bExpandSelected,d(a,a._bSelected),a._aChildren&&a._aChildren.length){var e;for(e=0;e<a._aChildren.length;e++)b(a._aChildren[e])}}function c(a,b){if(a._eChildren){var c=a._cIcon.getOuter();k.removeClass(c,"ui-indtree-icon-expand"),k.removeClass(c,"ui-indtree-icon-collapse"),b?(a._eChildren.style.display="none",k.addClass(c,"ui-indtree-icon-collapse")):(a._eChildren.style.display="",k.addClass(c,"ui-indtree-icon-expand")),a._bCollapse=b;var d=a._cTopPar._cAll,g=e(a._cTopPar,!0);f(d,g)}}function d(a,b){var c=a.getOuter();b?(k.removeClass(c,"ui-indtree-node-selected"),k.addClass(c,"ui-indtree-node-selected"),a._bExpandSelected&&a.$expand()):k.removeClass(c,"ui-indtree-node-selected"),a._bSelected=b}function e(a,b){a._nLevel||(a=a.root);var c=a._nLevel;if(a._aChildren&&a._aChildren.length&&(!b||!a._bCollapse)){var d;for(d=0;d<a._aChildren.length;d++){var f=e(a._aChildren[d],b);f>c&&(c=f)}}return c}function f(a,b){var c,d=a.getItems();for(c=0;b>c;c++)d[c].show();for(c=b;c<d.length;c++)d[c].hide()}function g(a,b){if(a._nLevel==b&&d(a,!0),a._aChildren&&a._aChildren.length){var c;for(c=0;c<a._aChildren.length;c++)g(a._aChildren[c],b)}}function h(a,b){var c=k.create(),d=k.create();c.appendChild(d);var e="value:"+(a.uniqName||a.caption)+";";if(a.selected&&(e+="selected:true;"),/^all\$/.test(a.uniqName)&&(e+="selectAllBtn:true;"),d.setAttribute("ecui",e),d.innerHTML=a.caption,b&&b.appendChild(c),!a.children)return c;var f=k.create();c.appendChild(f);var g=0;for(g=0;g<a.children.length;g++)h(a.children[g],f);return c}var i=ecui,j=i.ui,k=i.dom,l=i.util,m=window,n=document,o=j.Control,p=o.prototype,q=j.Items,r=j.Item;r.prototype,j.IndTree=i.inherits(j.Control,"ui-indtree",function(a,b){this._oOptions=b},function(c,d){if(this._bExpandSelected=d.expandSelected!==!1,!k.first(c))return c;var f=k.create("ui-indtree-pop","display: none; position: absolute; z-index: 32767","div");n.body.appendChild(f),this._cPop=i.$fastCreate(this.Pop,f,this,{}),this.root=a(k.first(c),this,!0);var f=k.create("ui-indtree-all");k.insertBefore(f,k.first(c)),this._cAll=i.$fastCreate(this.All,f,this,{level:e(this.root),data:this._oLevalData}),b(this.root,this._bExpandSelected);var h,j=this._cAll.getItems();for(h=0;h<j.length;h++)j[h]._bChecked&&g(this.root,j[h]._nLevel)});var s=j.IndTree,t=s.prototype;t.$setSize=l.blank,t.getSelected=function(a){var b=a||this.root,c=[];if(b.isSelect()&&c.push(b.getValue()),b._aChildren&&b._aChildren.length){var d;for(d=0;d<b._aChildren.length;d++)c=c.concat(this.getSelected(b._aChildren[d]))}return c},t.getLevelSelected=function(){var a,b=this._cAll,c=b.getItems(),d=[];for(a=0;a<c.length;a++)c[a].isSelect()&&d.push(c[a].getValue());return d},t.Node=i.inherits(j.Control,"ui-indtree-node",function(a,b){b.userSelect=!1,a.style.position="relative";var c=k.create("ui-indtree-node-text","","div");k.moveElements(a,c,!0),a.appendChild(c)},function(a,b){this._sValue=b.value||"",this._bSelected=b.selected||!1,this._nLevel=b.level,b.selectAllBtn&&(this._bSelectAllBtn=b.selectAllBtn)});var u=t.Node,v=u.prototype;v.$collapse=function(){c(this,!0)},v.$expand=function(){c(this,!1)},v.$click=function(a){if(this._bSelected){d(this,!1);var b,c=this._cTopPar._cAll,e=c.getItems();for(b=0;b<e.length;b++)e[b]._nLevel==this._nLevel&&e[b].setChecked(!1)}else d(this,!0);a.stopPropagation()},v.$mouseover=function(a){p.$mouseover.call(this),a.stopPropagation()},v.$mouseout=function(a){p.$mouseout.call(this),a.stopPropagation()},v.isSelect=function(){return this._bSelected||!1},v.getValue=function(){return this._sValue},v.Icon=i.inherits(j.Control,"ui-indtree-icon",function(){},function(){});var w=v.Icon,x=w.prototype;x.$click=function(a){p.$click.call(this);var b=this.getParent();b._bCollapse?b.$expand():b.$collapse(),a.stopPropagation()},v.PopBtn=i.inherits(j.Control,"ui-indtree-btn",function(){},function(){});var y=v.PopBtn,z=y.prototype;z.$mouseover=function(){p.$mouseover.call(this);var a=this.getParent();a._cPop.setParent(this),n.body.appendChild(a._cPop.getOuter()),a._cPop.$render(),a._cPop.$show()},v.$mouseout=function(){p.$mouseout.call(this),this._cPop.$hide()},t.Pop=i.inherits(j.Control,"ui-indtree-pop",function(){},function(){});var A=t.Pop,B=A.prototype;B.$render=function(){var a=this.getParent(),b=a.getParent(),c=this.getOuter();k.removeClass(c,"ui-indtree-pop-selected"),b.isSelect()&&k.addClass(c,"ui-indtree-pop-selected")},B.$show=function(){var a,b,c=this.getParent(),d=c.getParent(),e=l.getView(),f=k.getPosition(d.getOuter()),g=this.getWidth(),h=this.getHeight(),i=d.getWidth(),j=d.getHeight();a=f.left+i-g>=e.left?f.left+i-g:f.left,b=f.top+j+h<=e.bottom?f.top+j:f.top-h,this.setPosition(a,b),p.$show.call(this)},t.All=i.inherits(j.Control,"ui-indtree-all",function(a,b){var c,d=b.level||0;for(c=0;d>c;c++){var e=k.create(),f="level:"+(c+1)+";";f+="value:"+b.data[c].uniqName+";",b.data[c].selected&&(f+="checked:true;"),e.setAttribute("ecui",f);var g=k.create("","","label");g.innerHTML='<span title="'+b.data[c].caption+'" class="ui-indtree-all-text">'+b.data[c].caption+"</span>",e.appendChild(g),0==c&&(e.style.visibility="hidden"),a.appendChild(e)}},function(a){this.$setBody(a),this.$initItems()});var C=t.All,D=C.prototype;l.extend(D,q),D.Item=i.inherits(j.Control,"ui-indtree-all-item",function(a){var b=k.create("","","input");b.setAttribute("type","checkbox"),k.insertBefore(b,k.first(k.first(a)))},function(a,b){this._bChecked=b.checked===!0,this._eCheckbox=k.first(k.first(a)),this._nLevel=b.level,this._sValue=b.value,b.checked&&(this._eCheckbox.checked=!0)});var E=D.Item,F=E.prototype;F.$click=function(){if(this._bChecked=!this._bChecked,this._bChecked){var a=this.getParent().getParent().root;g(a,this._nLevel)}},F.setChecked=function(a){var a=a||!1;if(this._bChecked=a,a){this._eCheckbox.checked=!0;var b=this.getParent().getParent().root;g(b,this._nLevel)}else this._eCheckbox.checked=!1},F.isSelect=function(){return this._bChecked||!1},F.getValue=function(){return this._sValue},t.render=function(a){var b=a.tree;this._oLevalData=a.level,this._oLevalData.unshift({});var c=this.getOuter();l.detachEvent(m,"resize",i.repaint),this.root&&this.root.dispose(),this._cAll&&this._cAll.dispose(),this._cPop&&this._cPop.dispose(),c.innerHTML="",c.appendChild(h(b)),this.$setBody(c),this.$resize(),s.client.call(this,c,this._oOptions),this._bCreated=!1,this.cache(!0,!0),l.attachEvent(m,"resize",l.repaint),this.resize()}}(),function(){function a(a){var b,c=a||window.event;c=c.target||c.srcElement,b=c.parentNode.getControl(),b.getInput().focus()}function b(a,b){a._eTip&&(a._eTip.style.display=b?"":"none")}var c=ecui,d=c.dom,e=c.string,f=c.ui,g=c.util,h=g.attachEvent,i=d.create,j=d.addClass,k=d.removeClass,l=d.remove,m=d.insertAfter,n=(e.trim,c.setFocused,g.blank),o=(c.triggerEvent,c.inherits),p=e.getByteLength,q=f.Control,r=q.prototype,s=f.InputControl,t=s.prototype,u=f.Input=o(s,"ui-input",function(a,b){b.resizable=!1,this._bPromptDisabled=null==b.promptDisabled?!0:b.promptDisabled},function(b,c){var d,e=this.getType();this.getInput().style.border="",c.maxLength&&(this._sMaxLength=c.maxLength),c.tip&&(d=i(e+"-tip","display:none"),d.innerHTML=c.tip,this.getBody().appendChild(d),this._eTip=d,h(this._eTip,"keypressdown",a))}),v=u.prototype,w=f.Textarea=o(u,"ui-textarea",function(a,b){b.inputType="textarea",this._bCountDisabled=b.countDisabled}),x=w.prototype,y="è¿å¯ä»¥è¾å¥$å­",z="å·²ç»è¶è¿$å­",A="gbk";v.$keydown=function(){b(this,!1)},v.$keyup=function(){this.getValue()||b(this,!0)},v.$change=function(){this.$updateCount()},v.$updateCount=function(){var a,b,c=this.getValue(),d=this.getType();this._sMaxLength&&this._eCount&&(a=p(c,A),a>this._sMaxLength?(b=['<span class="',d,'-count-overflow">',Math.ceil((a-this._sMaxLength)/2),"</span>"].join(""),this._eCount.innerHTML=z.replace("$",b)):(b=['<span class="',d,'-count-normal">',Math.floor((this._sMaxLength-a)/2),"</span>"].join(""),this._eCount.innerHTML=y.replace("$",b)))},v.$blur=function(){r.$blur.call(this),this.getValue()||b(this,!0)},v.$focus=function(){r.$focus.call(this),b(this,!1)},v.$setSize=n,v.setValue=function(a){t.setValue.call(this,a),b(this,a?!1:!0),this.$updateCount()},v.init=function(){this.getValue()||b(this,!0);var a=this.getType();this._bPromptDisabled||(this._eBar||(this._eBar=i(a+"-bar"),m(this._eBar,this.getOuter())),this._eBar.appendChild(this._ePrompt=i(a+"-prompt"))),t.init.call(this)},v.setErrorView=function(a,b){a?j(this.getOuter(),this.getType()+"-error"):k(this.getOuter(),this.getType()+"-error"),this._ePrompt&&(this._ePrompt.innerHTML=null==b?"":b)},x.init=function(){var a=this.getType();this._sMaxLength&&!this._bCountDisabled&&(this._eBar||(this._eBar=i(a+"-bar"),m(this._eBar,this.getOuter())),this._eBar.appendChild(this._eCount=i(a+"-count")),this.$updateCount()),w.superClass.init.call(this)},x.$dispose=function(){this._eBar&&l(this._eBar),this._eBar=null,this._eCount=null,this._ePrompt=null,w.superClass.$dispose.call(this)}}(),function(){function a(a){""==a.getValue()?a._uCancel.hide():a._bHideCancel||a._uCancel.show()}var b=ecui,c=(b.array,b.dom),d=b.ui,e=b.util,f=b.string,g=b.$fastCreate,h=b.setFocused,i=b.dispose,j=c.create,k=c.addClass,l=c.children,m=f.encodeHTML,n=c.moveElements,o=c.getPosition,p=b.inherits,q=e.getView,r=e.extend,s=e.blank,t=b.triggerEvent,u=d.Control,v=u.prototype,w=d.Button,x=w.prototype,y=d.InputControl,z=y.prototype,A=d.InputTree=p(y,"ui-input-tree",function(a,b){var c=this.getTypes()[0],d=j();d.innerHTML='<div class="'+c+'-layer" '+' style="position:absolute;display:none; z-index:65535; height:230px; width:250px">'+'<div class="'+E.types[0]+'"></div></div>',d=d.firstChild,n(a,d.lastChild,!0),b._eLayer=document.body.appendChild(d),a.innerHTML='<span class="'+c+'-text"></span>'+'<span class="'+c+'-cancel"></span>'+'<span class="'+c+'-button"></span>'+'<input type="hidden name="'+(b.name||"")+'" />',b.hidden=!0,b.value&&(b.value+="")},function(a,b){var c;b.value&&z.setValue.call(this,b.value),c=l(a),this._eText=c[0],this._uCancel=g(this.Cancel,c[1],this),this._uLayer=g(this.Layer,b._eLayer,this,{asyn:b.asyn}),b._eLayer=null,delete b._eLayer,b.hideCancel===!0&&(this._bHideCancel=!0,this._uCancel.$hide())}),B=A.prototype,C=B.Layer=p(u,"ui-input-tree-layer",null,function(a){a.style.position="absolute"}),D=C.prototype,E=d.DataTree,F=(B.Cancel=p(u)).prototype,G=(D.Tree=p(E)).prototype;B.setData=function(a,b){function c(a){var b=a.children||[];if(0==b.length)d.push('<div ecui="value:',m(String(a.value)),";isLeaf:",!!a.isLeaf,'">',m(a.text),"</div>");else{d.push("<div>",'<label ecui="value:',m(String(a.value)),";isLeaf:",!!a.isLeaf,'">',m(a.text),"</label>");for(var e,f=0;e=b[f];f++)c(e);d.push("</div>")}}if(b=b||{},a&&a.root){var d=[];c(a.root);var e=this._uLayer,f=e.getBody();f.innerHTML=d.join(""),k(f.firstChild,E.types[0]),e._uTree=g(e.Tree,f.firstChild,e,r({collapsed:!0,value:String(a.root.value),isLeaf:a.root.isLeaf},b)),e._uTree.init(),null!=a.selected&&this.setValue(String(a.selected))}},B.$activate=function(){this._uLayer.show()},B.getValue=function(){var a=this._eText.innerHTML,b=this._eInput.value;return{text:a,value:b}},B.init=function(){var a=this.getValue();this.setValue(a),this._uLayer.init(),z.init.call(this)},B.$setText=function(a){a&&a.length>15&&(a=a.substring(0,15)+"..."),this._eText.innerHTML=a},B.setValue=function(b){var c=this._uLayer._uTree;c&&("[object Object]"==Object.prototype.toString.call(b)?(z.setValue.call(this,b.value),c.clearSelected(),c.setValues([b.value]),this.$setText(c.getSelectedText()),a(this)):(b+="",z.setValue.call(this,b),c.clearSelected(),c.setValues([b]),this.$setText(c.getSelectedText()),a(this)))},B.clear=function(){var b=this._uLayer._uTree;b.clearSelected(),z.setValue.call(this,""),this.$setText(""),a(this)},B.clearState=function(){function a(b){b.collapse();var c=b.getChildren();if(c&&c.length)for(var d=0;d<c.length;d++)a(c[d])}var b=this._uLayer._uTree;a(b)},B.getTreeNodeByValue=function(a){return this._uLayer.getTreeNodeByValue(a)},B.setText=function(a){this.$setText(a)},B.expand=function(a,b){var c=this;this._uLayer.expand(a,function(){b.call(c)})},B.selectParent=function(a){var b=this._uLayer.getTreeNodeByValue(a);b!=b.getRoot()&&(b=b.getParent()),this.setValue(b.getValue())},D.init=function(){this._uTree&&this._uTree.init(),v.init.call(this)},D.$blur=function(){this.hide()},D.expand=function(a,b){var c=this._uTree,d=c.getItemByValue(a);d&&(d.expand(),c.onexpand(d,b))},D.getTreeNodeByValue=function(a){return this._uTree.getItemByValue(a)},D.show=function(){var a,b,c,d=this.getParent();v.show.call(this),d&&(a=o(d.getOuter()),c=q(),b=a.top,a.top=b+d.getHeight(),b=a.left,a.left=b+this.getWidth()>c.right?b+d.getWidth()-this.getWidth():b,this.setPosition(a.left,a.top),h(this))},F.$click=function(){var b=this.getParent();v.$click.call(this),b.$setText(""),z.setValue.call(b,""),b._uLayer._uTree.clearSelected(),a(b)},F.$activate=x.$activate,G.onselect=function(b){var c=this.getParent().getParent();z.setValue.call(c,b.getValue()),c.$setText(b.getText()),a(c),this.getParent().hide()},G.onexpand=function(a,b){var c=this.getParent().getParent(),b=b||s,d=c._uLayer.getOuter(),e=d.scrollTop,f=function(){d.scrollTop=e,d=null};a._bNeedAsyn?(t(c,"loadtree",null,[a.getValue(),function(c){a.load(c),b.call(null),f()}]),a._bNeedAsyn=!1):(b.call(null),f())},G.load=function(a){var b,c,d;for(b=0;c=this._aChildren[b];b++)i(c);if(this._aChildren=[],this._eChildren.innerHTML="",!a||a.length<=0)return this.setClass(this.getPrimary()),void 0;for(b=0;c=a[b];b++)d=c.text,c=r({asyn:this._bAsyn},c),delete c.text,this.add(d,null,c).init()}}(),function(){function a(){var a=this.getParent(),b=a.getValue();J(a,"change",b);var c=a.getText(),d=a._nLastText;""!=l(c)&&(l(c)!=l(d)&&(a._eInput.value=""),a._nTimeoutHandler&&clearTimeout(a._nTimeoutHandler),a._nTimeoutHandler=setTimeout(function(){a._nTimeoutHandler=null,J(a,"query",b)},a._nTimeout))}function b(a,b,c){b=b||[];for(var d,e=null,f=0;d=b[f++];)if(d.text==c){e=d.value;break}null!=e&&(a._eInput.value=e,J(a,"select",{value:e,text:c}))}function c(a){var b=a._uOptions,c=b.$getSection("VScrollbar"),d=b.getOuter(),e=u(a.getOuter()),f=a._cSelected,g=e.top+a.getHeight();t(d)?(a.cache(!1,!0),a.$alterItems()):(m.body.appendChild(d),a.cache(!1,!0),a.$alterItems()),b.isShow()&&(c.setValue(c.getStep()*q(a.getItems(),f)),a=b.getHeight(),b.setPosition(e.left,g+a<=A().bottom?g:e.top-a))}function d(a,b){if(b!==a._cSelected){L.setValue.call(a,b?b._sValue:"");var c=b?b.getBody().innerHTML:"";a._uText.setValue(c),a._cSelected=b,a._uOptions.isShow()&&I(b),b&&b._sValue&&(J(a,"select",{value:b._sValue,text:c}),J(a,b._sValue),I(a),a.setFocusToEnd())}}var e,f=ecui,g=f.array,h=f.dom,i=f.string,j=f.ui,k=f.util,l=i.trim,m=document,n=Math,o=n.max,p=n.min,q=g.indexOf,r=h.children,s=h.create,t=h.getParent,u=h.getPosition,v=h.getText,w=(h.insertAfter,h.insertBefore,h.moveElements),x=h.remove,y=i.encodeHTML,z=k.extend,A=k.getView,B=k.setDefault,C=f.$fastCreate,D=(f.getAttributeName,f.getFocused),E=f.inherits,F=f.intercept,G=f.mask,H=f.restore,I=f.setFocused,J=f.triggerEvent,K=j.InputControl,L=K.prototype,M=(j.Button,j.Scrollbar),N=j.Panel,O=N.prototype,P=j.Item,Q=P.prototype,R=j.Items,S=j.Suggest=E(K,"ui-suggest",function(a,b){var c=a.name||b.name||"",d=this.getType(),e=b.id||"id_notset",f=s(d+"-options"+this.Options.TYPES,"position:absolute;z-index:65535;display:none");return f.setAttribute("ecui_id",e),B(b,"hidden",!0),w(a,f),a.innerHTML='<span class="ui-input"></span><input name="'+c+'" value="'+y(b.value||"")+'">',a.appendChild(f),this._nTimeout=400,this._nTimeoutHandler=null,a},function(b,c){c.timeout&&(this._nTimeout=c.timeout),c.hide&&(this.getOuter().style.display="none"),b=r(b),this._nLastText="",this._uText=C(K,b[0],this,{capturable:!1}),this._uOptions=C(this.Options,x(b[2]),this,{hScroll:!1,browser:c.browser}),this.$setBody(this._uOptions.getBody()),this._nOptionSize=c.optionSize||10,this.$initItems(),this._uText.$change=a}),T=S.prototype,U=(T.Options=E(N)).prototype,V=(T.Item=E(P,null,null,function(a,b){this._sValue=b.value===e?v(a):""+b.value})).prototype;z(T,R),U.$dispose=function(){this.hide(),O.$dispose.call(this)},U.$hide=function(){O.$hide.call(this),G(),H()},V.$mouseover=function(a){Q.$mouseover.call(this,a),I(this)},V.getValue=function(){return this._sValue},V.getText=function(){return this._eBody.innerHTML},V.setValue=function(a){var b=this.getParent();this._sValue=a,b&&this==b._cSelected&&L.setValue.call(b,a)},T.$activate=function(a){return a.getControl()instanceof M?void 0:(L.$activate.call(this,a),void 0)},T.$alterItems=function(){var a=this._uOptions,b=a.$getSection("VScrollbar"),c=this._nOptionSize,d=this.getBodyHeight(),e=this.getWidth(),f=this.getItems().length;t(a.getOuter())&&(b.setStep(d),this.setItemSize(e-a.getMinimumWidth()-(f>c?b.getWidth():0),d),a.$$mainHeight=f*d+a.$$bodyHeightRevise,a.$setSize(e,(p(f,c)||1)*d+a.getMinimumHeight()))},T.$cache=function(a,b){(t(this._uOptions.getOuter())?R:L).$cache.call(this,a,b),this._uText.cache(!1,!0),this._uOptions.cache(!1,!0)},T.$intercept=function(a){this._uOptions.hide();for(var b=a.getControl();b;b=b.getParent())if(b instanceof this.Item){if(b!=this._cSelected){d(this,b);var c={text:b.getText(),value:b._sValue};J(this,"change",c)}break}a.exit()},T.$keydown=T.$keypress=function(a){L["$"+a.type](a);var b=this._uOptions,c=b.$getSection("VScrollbar"),e=this._nOptionSize,f=a.which,g=this.getItems(),h=g.length,i=D();if(this.isFocused()){if(40==f||38==f){if(a&&a._oNative.shiftKey)return!0;if(h){if(!b.isShow())return!1;var j=g[f=p(o(0,q(g,i)+f-39),h-1)];I(j),f-=c.getValue()/c.getStep(),c.skip(0>f?f:f>=e?f-e+1:0),a.cancelBubble=!0}return!1}if(27==f||13==f&&b.isShow()){if(b.hide(),13==f&&i instanceof this.Item){d(this,i);var k={text:i.getText(),value:i._sValue};J(this,"change",k)}return!1}0!=f&&I(this._uText)}},T.$mousewheel=function(a){if(this.isFocused()){var b=this._uOptions,c=this.getItems(),d=c.length;b.isShow()?b.$mousewheel(a):(b=q(c,this._cSelected)+(a.detail>0?1:-1),this.setSelectedIndex(d?p(o(0,b),d-1):null)),a.exit()}},T.$ready=function(){this.setValue(this.getValue())},T.remove=function(a){return"number"==typeof a&&(a=this.getItems()[a]),a==this._cSelected,R.remove.call(this,a)},T.add=function(a,b,c){return a=R.add.call(this,a,b,c),t(this._uOptions.getOuter())&&a.cache(!0,!0),a},T.$setSize=function(a,b){L.$setSize.call(this,a,b),this.$locate(),b=this.getBodyHeight(),this._uText.$setSize(a=this.getBodyWidth(),b)},T.getSelected=function(){return this._cSelected||null},T.getText=function(){var a=this._uText.getValue();return a},T.setText=function(a){this._uText.setValue(a)},T.getValue=function(){var a=this._eInput.value,b=this.getText(),c={value:a,text:b};return c},T.setOptionSize=function(a){this._nOptionSize=a,this.$alterItems(),c(this)},T.setSelectedIndex=function(a){d(this,this.getItems()[a])},T.setValue=function(a){var b=a;"[object Object]"==Object.prototype.toString.call(a)&&(b=a.value);for(var c,e=0,f=this.getItems();c=f[e++];)if(c._sValue==b)return d(this,c),this._nLastText=Ovalue.text||c.getBody().innerHTML,void 0;d(this)},T.clear=function(){for(var a=this.getItems()||[],b=a.length;b-->0;)this.remove(0);this._uOptions.reset()},T.update=function(a){this.clear();for(var d,e=null,f=this,g=0;d=a[g++];)e=this.add(d.text,null,{value:d.value}),e.getOuter().title=d.text;this._uOptions.isShow()?f.$alterItems():(this._uOptions.show(),F(this),G(0,65534),c(this));var h=this.getText(h);b(this,a,h),I(f._uText)},T.setFocusToEnd=function(){var a=this._uText;f.setFocused(a),a=a._eInput;var b=a.value.length;if(document.selection){var c=a.createTextRange();c.moveStart("character",b),c.collapse(),c.select()}else"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd&&(a.selectionStart=a.selectionEnd=b)},T.$mousewheel=function(){}}(),function(){function a(a,b){var c=ecui.dom.getPosition(a),d=ecui.dom.getPosition(b),e=Math.max(c.left,d.left),f=Math.min(c.left+a.offsetWidth,d.left+b.offsetWidth),g=Math.max(c.top,d.top),h=Math.min(c.top+a.offsetHeight,d.top+b.offsetHeight);return f>=e&&h>=g}var b=ecui,c=b.ui,d=b.dom,e=b.util,f=c.Control,g=f.prototype,h=c.Items,i=c.Item;i.prototype,c.DraggableList=b.inherits(c.Control,"ui-draggable-list",function(){},function(a,b){this._bDisableSelected=b.disableSelected===!0,b.targets=b.targets||"",this._aTargetIds=b.targets.split(",")||[],this._sClazz=b.clazz,this.$setBody(a),this.$initItems();for(var c=this.getItems(),d=0;d<c.length;d++){var e=c[d];e.$setState(e._sState)}});var j=c.DraggableList,k=j.prototype;k.$setSize=e.blank,k.addTarget=function(a){this._aTargetIds.push(a)},k.Item=b.inherits(i,null,function(a,b){b.userSelect=!1},function(a,b){this._sValue=b.value,this._sText=a.innerHTML,this._sState=b.state||"normal",this._sClazz=b.clazz,this._bFixed=b.fixed,this._sAlign=b.align,this._bConfigBtn=b.configBtn,this._sCalcColumnRefInd=b.calcColumnRefInd,"DIM"==this._sClazz?d.addClass(a,"ui-draggable-list-item-dim"):"IND"==this._sClazz&&d.addClass(a,"ui-draggable-list-item-ind")});var l=k.Item.prototype;e.extend(k,h),k.$dispose=function(){delete h[this.getUID()],this.getOuter().innerHTML="",e.callSuper(this,"$dispose")},k.$alterItems=function(){},k.addItem=function(a,b){var c=d.create();c.innerHTML=a.text,this.getOuter().appendChild(c),this.add(c,b,a)},k.removeItem=function(a){this.remove(this.getItemByValue(a))},k.getClazz=function(){return this._sClazz},l.$activate=function(a){g.$activate.call(this,a),b.drag(this,a)},l.$dragstart=function(){var a=this.getOuter();a.style.zIndex=32768;for(var b=this.getParent(),c=b.getItems(),e=0,f=0;c[f]&&c[f++]!=this;)e=f;if(!b._cPlacehold){var a=d.create("ui-draggable-list-placehold");b._cPlacehold=b.add(a,e,{}),b._cPlacehold.setSize(this.getWidth(),this.getHeight())}},l.$dragmove=function(c){for(var d,e,f=this.getOuter(),g=this.getParent(),h=0;h<g._aTargetIds.length;h++)if(b.get(g._aTargetIds[h])&&a(f,b.get(g._aTargetIds[h]).getOuter())){e=b.get(g._aTargetIds[h]),d=e.getOuter();break}g._cCurDrop&&e!=g._cCurDrop&&b.triggerEvent(g._cCurDrop,"dragout",c,[this]),g._cCurDrop=e,d&&b.triggerEvent(e,"dragover",c,[this])},l.$dragend=function(a){var c=this.getOuter();c.style.position="relative",c.style.zIndex=0,this.setPosition(0,0);var d=this.getParent();null!=d._cPlacehold&&(d.remove(d._cPlacehold),d._cPlacehold=null,d._cCurDrop&&b.triggerEvent(d._cCurDrop,"drop",a,[this]),d._cCurDrop=null)},l.getValue=function(){return this._sValue},l.getText=function(){return this._sText},l.getClazz=function(){return this._sClazz},l.getWrap=function(){return{value:this._sValue,text:this._sText,clazz:this._sClazz,fixed:this._bFixed,align:this._sAlign,configBtn:this._bConfigBtn,calcColumnRefInd:this._sCalcColumnRefInd}},l.setSelected=function(a){var b=this.getOuter();if(d.removeClass(b,"ui-draggable-list-item-selected"),a){d.addClass(b,"ui-draggable-list-item-selected"),this._sState="selected";var c=this.getParent();c._bDisableSelected&&(this.disable(),d.removeClass(b,"ui-draggable-list-item-disabled"),d.removeClass(b,"ui-item-disabled"))}this._bSelected=a},l.$setState=function(a){"disable"==a?(this.disable(),this._sState="disable"):"selected"==a?this.setSelected(!0):(this.enable(),this.setSelected(!1),this._sState="normal")},k.setState=function(a){for(var b=0,c=this.getItems().length;c>b;b++)this.getItems()[b].$setState("normal");if(a.disable&&a.disable.length)for(var b=0;b<a.disable.length;b++)this.getItemByValue(a.disable[b]).$setState("disable");if(a.selected&&a.selected.length)for(var b=0;b<a.selected.length;b++)this.getItemByValue(a.selected[b]).$setState("selected")},k.getItemByValue=function(a){for(var b=this.getItems(),c=0;c<b.length;c++)if(b[c].getValue()==a)return b[c];return null},k.disableAll=function(){for(var a=this.getItems(),b=0;b<a.length;b++)a[b].disable()}}(),function(){function a(a,b){var c=ecui.dom.getPosition(a),d=ecui.dom.getPosition(b),e=Math.max(c.left,d.left),f=Math.min(c.left+a.offsetWidth,d.left+b.offsetWidth),g=Math.max(c.top,d.top),h=Math.min(c.top+a.offsetHeight,d.top+b.offsetHeight);return f>=e&&h>=g}function b(a,b,c){var d,f=a.getItems();for(index=0;index<f.length;index++){var g=f[index],h=g.getOuter();if("LEFT"==c._sAlign){d=0;break}if("DIM"==c._sClazz&&"COLUMN"==a._sName){d=0;break}if(("IND"!=c._sClazz||"COLUMN"!=a._sName||"DIM"!=g._sClazz)&&b.pageX<=e.getPosition(h).left+g.getWidth()&&b.pageY<=e.getPosition(h).top+g.getHeight()&&!g._bDragging){d=index;break}}return d}var c=ecui,d=c.ui,e=c.dom,f=c.array,g=c.util,h=d.Control,i=h.prototype,j=d.Items,k=d.Item;k.prototype,d.DroppableList=c.inherits(h,"ui-droppable-list",function(){},function(a,b){this._sName=b.name,b.targets=b.targets||"",this._aTargetIds=b.targets.split(",")||[],b.source=b.source||"",this._aSourceIds=b.source.split(",")||[],this._bConfigBtn=b.configBtn,this.$setBody(a),this.$initItems()});var l=d.DroppableList,m=l.prototype;g.extend(m,j),m.$alterItems=g.blank,m.$setSize=g.blank,m.add=function(a,b,c){return c=c,c.configBtn=null==c.configBtn?this._bConfigBtn:c.configBtn,j.add.call(this,a,b,c)},m.$dispose=function(){delete j[this.getUID()],this.getOuter().innerHTML="",g.callSuper(this,"$dispose")},m.$mouseover=function(){i.$mouseover.call(this)},m.$dragover=function(a,d){this._cPlacehold&&this.remove(this._cPlacehold);var f=b(this,a,d);if(c.triggerEvent(this,"checkdroppable",null,[d.getWrap(),f,this._sName])===!1)return this._cPlacehold=null,void 0;var g=e.create("ui-droppable-list-placehold");this.getBody().appendChild(g),this._cPlacehold=this.add(g,f,{placehold:!0}),this._cPlacehold.setSize(d.getWidth(),d.getHeight())},m.$dragout=function(){this._cPlacehold&&(this.remove(this._cPlacehold),this._cPlacehold=null)},m.$drop=function(a,d,e){if(!this._cPlacehold)return!1;var f=b(this,a,d);if(this._cPlacehold&&this.remove(this._cPlacehold),this._cNewAdd=this.addByItem(d,f),this!=e||d._nOriginIndex!=f)for(var g,h=0;h<this._aSourceIds.length;h++)g=c.get(this._aSourceIds[h]),g&&g.getClazz()==d.getClazz()&&c.triggerEvent(g,"change",null,[d.getWrap(),f,this._sName,d._nOriginIndex,d._sOriginParName])},m.$throw=function(a,b){for(var d,e=0;e<this._aSourceIds.length;e++)d=c.get(this._aSourceIds[e]),d&&d.getClazz()==b.getClazz()&&c.triggerEvent(d,"change",null,[b.getWrap(),null,this._sName,b._nOriginIndex,b._sOriginParName])},m.count=function(){return j[this.getUID()].length},m.contains=function(a){return f.indexOf(j[this.getUID()],a)>=0},m.addItem=function(a,b){var c=e.create();c.innerHTML=a.text,this.getOuter().appendChild(c),this.add(c,b,a)},m.addTarget=function(a){this._aTargetIds.push(a)
},m.removeItem=function(a){this.remove(this.getItemByValue(a))},m.getItemByValue=function(a){for(var b=this.getItems(),c=0;c<b.length;c++)if(a==b[c].getValue())return b[c];return null},m.getValue=function(){for(var a=this.getItems(),b=[],c=0;c<a.length;c++)b.push(a[c].getValue());return b},m.getWrap=function(){for(var a=this.getItems(),b=[],c=0;c<a.length;c++)b.push(a[c].getWrap());return b},m.addByItem=function(a,b){var c=e.create();return c.innerHTML=a.getText(),this.getBody().appendChild(c),this.add(c,b,a.getWrap())},m.Item=c.inherits(k,null,function(a,b){if(b.userSelect=!1,this._sText=a.innerHTML,!b.placehold&&b.configBtn){var c=e.create("ui-droppable-list-item-icon");this._bConfigBtn=b.configBtn,a.appendChild(c)}},function(a,b){this._sValue=b.value,this._sClazz=b.clazz,this._bFixed=b.fixed,this._sAlign=b.align,this._sCalcColumnRefInd=b.calcColumnRefInd,"DIM"==this._sClazz?e.addClass(a,"ui-droppable-list-item-dim"):"IND"==this._sClazz&&e.addClass(a,"ui-droppable-list-item-ind"),!b.placehold&&b.configBtn&&(this._cIcon=c.$fastCreate(this.Icon,e.last(a),this,{}))});var n=m.Item,o=n.prototype;o.setValue=function(a){this._sValue=a},o.getValue=function(){return this._sValue},o.getText=function(){return this._sText},o.getClazz=function(){return this._sClazz},o.getWrap=function(){return{value:this._sValue,text:this._sText,clazz:this._sClazz,fixed:this._bFixed,align:this._sAlign,configBtn:this._bConfigBtn,calcColumnRefInd:this._sCalcColumnRefInd}},o.$activate=function(a){i.$activate.call(this,a);var b=this.getParent(),d=f.indexOf(j[b.getUID()],this);c.triggerEvent(b,"checkdraggable",null,[this.getWrap(),d,b._sName])!==!1&&(this._sOriginParName=b._sName,this._nOriginIndex=d,c.drag(this,a))},o.$dragstart=function(){},o.$dragmove=function(b){this._bDragging=!0;var d=this.getParent(),e=[];e.push(d);for(var f=0;f<d._aTargetIds.length;f++)c.get(d._aTargetIds[f])&&e.push(c.get(d._aTargetIds[f]));for(var g,h,i=this.getOuter(),f=0;f<e.length;f++)if(a(i,e[f].getOuter())){g=e[f],h=g.getOuter();break}d._cCurDrop&&g!=d._cCurDrop&&c.triggerEvent(d._cCurDrop,"dragout",b,[this]),d._cCurDrop=g,h&&c.triggerEvent(g,"dragover",b,[this])},o.$dragend=function(a){var b=this.getParent();b&&(b._cCurDrop||a.pageX>=e.getPosition(b.getOuter()).left&&a.pageX<=e.getPosition(b.getOuter()).left+b.getWidth()&&a.pageY>=e.getPosition(b.getOuter()).top&&a.pageY<=e.getPosition(b.getOuter()).top+b.getHeight()&&(b._cCurDrop=b),b.remove(this),b._cCurDrop?0==c.triggerEvent(b._cCurDrop,"drop",a,[this,b])&&b.addByItem(this,this._nOriginIndex):c.triggerEvent(b,"throw",a,[this,b]),b._cCurDrop=null,this._bDragging=!1,this._nOriginIndex=null,c.triggerEvent(b,"deactivate",a),c.triggerEvent(b,"blur",a))},o.Icon=c.inherits(h,"ui-droppable-list-item-icon",null,null);var p=o.Icon,q=p.prototype;q.$click=function(a){i.$click.call(this);var b=this.getParent(),d=b.getWrap();c.triggerEvent(b.getParent(),"itemclick",a,[d]),a.stopPropagation()},q.$activate=function(a){i.$activate.call(this),a.stopPropagation()}}(),xui.ui={},function(){function a(a){if(null==a)return null;var b=[0,0,3,6,9];return a=a.split("-Q"),new Date(parseInt(a[0],10),b[parseInt(a[1],10)],1).getTime()}function b(a,b){var c,d,e=this._aXAxis[0].type;if(!b)return a.rangeSelector={enabled:!1},void 0;var f=this._oRangeSelector,g=f&&(f.byAxisType?f.byAxisType[e]:f);if(g){c=[];for(var h,i,j=0;j<g.buttons.length;j++)c.push(h=r({},g.buttons[j])),(i=this.EXT_RANGE_SELECTOR_TYPE[h.type])&&i(h);d=g.selected}else"date"==e?(c=[{type:"month",count:1,text:"1æ"},{type:"month",count:3,text:"3æ"},{type:"month",count:6,text:"6æ"},{type:"year",count:1,text:"1å¹´"},{type:"all",text:"å¨é¨"}],d=4):"month"==e?(c=[{type:"month",count:6,text:"6æ"},{type:"year",count:1,text:"1å¹´"},{type:"all",text:"å¨é¨"}],d=2):(c=[{type:"all",text:"å¨é¨"}],d=0);a.rangeSelector={enabled:!0,buttons:c,selected:d,buttonTheme:{fill:"none",stroke:"none",style:{color:"#282828",fontFamily:"å¾®è½¯éé», Arial"},states:{hover:{fill:"white",stroke:"#50bfc6"},select:{fill:"#d7ebf6",stroke:"#50bfc6"}}},inputEnabled:!0,inputDateFormat:this.EXT_AXIS_FORMAT[e].inputFormat,inputEditDateFormat:this.EXT_AXIS_FORMAT[e].inputFormat,inputStyle:{color:"#3784b7",fontWeight:"bold"},labelStyle:{color:"#b0b0b0",fontWeight:"bold"}}}function c(a,b,c,d,e,f){var g=this,h=[],i=g.series[0];if(!i)return[e,f];for(var j,k,l,m,n,o,p=i.processedXData,q=0,r=p.length;r>q;q++)o=p[q],null!=o&&(o>=e&&(j>o-e||"undefined"==typeof j)&&(l=q,j=o-e),f>=o&&(k>f-o||"undefined"==typeof k)&&(m=q,k=f-o));if("undefined"==typeof m||"undefined"==typeof l)return[e,f];if(n=m-l+1,!d||"date"!=b||365!=n&&366!=n){var s=null==a._aXAxis[0].splitNumber?c?5:n:a._aXAxis[0].splitNumber,t=Math.ceil(n/s);for(q=m;q>=l;q-=t)h.splice(0,0,p[q])}else for(var u={4:1,6:1,9:1,11:1},v=new Date(p[m]),w=v.getDate(),x=v.getMonth(),y=v.getFullYear();;){if(2==x+1&&w>=29?(v=new Date(y,x,29),2!=v.getMonth()+1&&(v=new Date(y,x,28))):v=x+1 in u&&w>=31?new Date(y,x,30):new Date(y,x,w),v.getTime()<p[l])break;h.splice(0,0,v.getTime()),0>=x?(x=11)&&y--:x--}return h}function d(a,b){if(!b||!a)return a;var c=a.getTime();return c<b[0]?new Date(b[0]):b[1]<c?new Date(b[1]):a}function e(a,b){return"bar"==a?"column":a||b||"line"}var f=xutil.dom.ieVersion,g=xutil.dom.addClass,h=xutil.dom.removeClass,i=xutil.object.inheritsObject,j=xutil.number.formatNumber,k=xutil.date.getQuarterBegin,l=xutil.date.dateToString,m=xutil.date.stringToDate,n=xutil.date.getQuarter,o=xutil.date.getWeekend,p=xutil.date.getWorkday,k=xutil.date.getQuarterBegin,q=xutil.string.encodeHTML,r=xutil.object.extend,s=xutil.fn.bind,t=xui.XObject,u="diA^_^",v=xui.ui.HChart=i(t,function(a){var b=a.el;this._sType="xui-h-chart",g(b,this._sType),a.resizable=!1,Highcharts.setOptions(this.CHART_OPTIONS);var c=this._sType;b.innerHTML=['<div class="'+c+'-header">','<div class="'+c+'-legend"></div>',"</div>",'<div class="'+c+'-content"></div>'].join(""),this._eLegend=b.childNodes[0].firstChild,this._eContent=b.childNodes[1]}),w=v.prototype;w.CHART_OPTIONS={colors:["#e98282","#81c1e9","#a6e340","#f6ab1a","#88d915","#0380ea","#3c2dc9","#8e45e9","#f44dce","#e21d3d","#56b3c9","#e26237","#08a267","#faa616","#85d111","#0887e1","#3927c3","#894aec","#fa46c9","#e7193a"],global:{useUTC:!1}};var x=["å¨æ¥","å¨ä¸","å¨äº","å¨ä¸","å¨å","å¨äº","å¨å­"],y=35;w.EXT_RANGE_SELECTOR_TYPE={thisMonth:function(a){a.type=function(a){var b=new Date(a.newMax);return{newMin:new Date(b.getFullYear(),b.getMonth(),1).getTime()}}},thisQuarter:function(a){a.type=function(a){return{newMin:k(new Date(a.newMax)).getTime()}}},thisYear:function(a){a.type=function(a){var b=new Date(a.newMax);return{newMin:new Date(b.getFullYear(),0,1).getTime()}}},xMonth:function(a){a.type=function(b){var c=new Date(b.newMax);return{newMin:new Date(c.getFullYear(),c.getMonth()-a.count+1,1).getTime()}}},xQuarter:function(a){a.type=function(b){var c=k(new Date(b.newMax));return c.setMonth(c.getMonth()-3*(a.count-1)),{newMin:c.getTime()}}}};var z=w.EXT_AXIS_FORMAT={};z.date={parse:function(a){return null!=a?m(a,"yyyy-MM-dd").getTime():void 0},format:function(a){return l(new Date(a),"yyyy-MM-dd")},formatTooltip:function(a){var b=new Date(a);return l(b,"yyyy-MM-dd")+" ("+x[b.getDay()]+")"},inputFormat:"%Y-%m-%d",minRange:1728e5},z.week={parse:z.date.parse,format:function(a,b){var c=new Date(a),e=(b||{}).range;return l(d(p(c),e),"yyyy-MM-dd")+"<br>"+l(d(o(c),e),"yyyy-MM-dd")},formatTooltip:function(a,b){var c=new Date(a),e=(b||{}).range,f=d(p(c),e),g=d(o(c),e);return l(f,"yyyy-MM-dd")+" ("+x[f.getDay()]+")"+" ~ "+l(g,"yyyy-MM-dd")+" ("+x[g.getDay()]+")"},formatNavigator:function(a,b){var c=(b||{}).range;return l(d(p(new Date(a)),c),"yyyy-MM-dd")},inputFormat:"%Y-%m-%d",minRange:12096e5},z.month={parse:function(a){return null!=a?m(a,"yyyy-MM").getTime():void 0},format:function(a){return l(new Date(a),"yyyy-MM")},inputFormat:"%Y-%m",minRange:53568e5},z.quarter={parse:a,format:function(a){var b=new Date(a);return String(b.getFullYear()+"-Q"+n(b))},inputFormat:"%Y-%q",minRange:160704e5},z.year={parse:function(a){return null!=a?new Date(parseInt(a,10),0,1).getTime():void 0},format:function(a){return new Date(a).getFullYear()},inputFormat:"%Y",minRange:632448e5},w.init=function(){},w.setData=function(a,b){a=a||{},this._bSeriesHasValue=null,this._nWidth=a.width,this._nHeight=a.height,this._aXAxis=a.xAxis||[],this._aYAxis=a.yAxis||[],this._aSeries=a.series||[],this._oRangeSelector=a.rangeSelector,this._oLegend=a.legend||{},this._sEmptyHTML=a.emptyHTML||"æ°æ®ä¸ºç©º",!b&&this.render()},w.$setupSeries=function(a){for(var b,c,d=[],f=this._aXAxis[0],g=0;c=this._aSeries[g];g++){if(b={data:[]},b.name=c.name||"",b.yAxis=c.yAxisIndex||0,b.color=c.color||void 0,b.format=c.format||void 0,b.type=e(c.type),null!==c.id&&(b.id=c.id),f.type in this.EXT_AXIS_FORMAT&&!this._bHasPie){b.data=[];for(var h=0;h<c.data.length;h++){var i=this.EXT_AXIS_FORMAT[f.type].parse(f.data[h]);b.data.push([i,c.data[h]])}}else b.data=c.data;d.push(b)}if(this._bHasPie){for(var j,k=0;j=d[k];)"pie"!==j.type?d.splice(k,1):k++;d.length>1&&d.splice(1,d.length-1)}a.series=d},w.$setupTooptip=function(a){var b=this._aXAxis[0];b.type;var c=b.tipCallback,d=this._aSeries,e=this._aYAxis.length>1,f=this.EXT_AXIS_FORMAT[b.type];f=f&&(f.formatTooltip||f.format)||function(a){return a},a.tooltip=this._bHasPie?{formatter:c||function(){var a=this.series.chart.xAxis[0].categories[this.point.x];return["<b>",a,"</b><br />","<b>",this.series.name,"</b>: ",j(this.y,this.series.options.format,null,null,!0)," (",j(this.percentage,"I,III.DD%"),")"].join("")},useHTML:!1,shared:!1}:{useHTML:!1,shared:!0,borderColor:"#c6c6c6",borderWidth:1,formatter:c||function(){var a=[];a.push('<span style="color:#4770A7;line-height:20px;font-size:13px;font-weight:bold;font-family:"å¾®è½¯éé»",Arial">',f(this.x,{range:b.range}),"</span><br />");for(var c,g=0;c=this.points[g];g++){if(null!=c.series.name){sFormat=null;for(var h=0;h<d.length;h++){var i=d[h];if(i.name==c.series.name){sFormat=d[h].format;break}}var k=c.series.yAxis.options;e&&a.push('<span style="color:',k.lineColor,'">',0==k.index?"[å·¦è½´] ":"[å³è½´] ","</span>"),a.push('<span style="color:'+c.series.color+';font-size:12px;font-weight:bold">',c.series.name+": ","</span>",'<span style="text-align:right;color:#000;font-size:12px;font-family:Arial">',null!=sFormat?j(c.y,sFormat,null,null,!0):c.y,"</span>")}g<this.points.length-1&&a.push("<br>")}return a.join("")}}},w.$setupXAxis=function(a){for(var b,d,e,f=this,g=[],h=0;b=this._aXAxis[h];h++){e=b.data,(d=this.EXT_AXIS_FORMAT[b.type])&&e&&e.length>0&&b.range&&(b.range=[b.range[0]?d.parse(b.range[0]):null,b.range[1]?d.parse(b.range[1]):null]);var i={gridLineWidth:0,gridLineColor:"#DBDBDB",tickPosition:"inside",tickLength:5,startOnTick:!1,lineColor:b.color||"#8CA5C9",lineWidth:2,endOnTick:!1,maxPadding:.002,minRange:(this.EXT_AXIS_FORMAT[b.type]||{}).minRange,tickPositioner:function(a,b,d,e){return function(f,g){return c.call(this,a,b,d,e,f,g)}}(f,b.type,b.type in this.EXT_AXIS_FORMAT,b.useYearMonthAdjust),tickPixelInterval:null!=b.tickPixelInterval?b.tickPixelInterval:void 0,title:null!=this._aXAxis[h].title?{enabled:!0,text:this._aXAxis[h].title,align:"high",rotation:0,tickInterval:1,offset:0,y:-12,x:10}:void 0,labels:{overflow:void 0,formatter:function(a,b){return function(){var c=a[b.type];return c?c.format.call(null,this.value,{range:b.range}):this.value}}(this.EXT_AXIS_FORMAT,b),style:{fontFamily:"Arial,Serif,Times",fontSize:"12px",color:"#6B6B6B"}}};if(!e||this._aXAxis[h].type in this.EXT_AXIS_FORMAT&&!this._bHasPie||(i.categories=e),null!=this._aXAxis[h].plotLines){i.plotLines=[];for(var j,k,l,m=0;j=this._aXAxis[h].plotLines[m];m++)null!=j.value?(j.value=this.EXT_AXIS_FORMAT[this._aXAxis[h].type].parse(j.value),i.plotLines.push(j)):(null!=j.valueBefore||null!=j.valueAfter)&&(k=null!=j.valueBefore?j.valueBefore:j.valueAfter,l=null!=j.valueAfter?j.valueAfter:j.valueBefore,j.value=Math.round((this.EXT_AXIS_FORMAT[this._aXAxis[h].type].parse(k)+this.EXT_AXIS_FORMAT[this._aXAxis[h].type].parse(l))/2),i.plotLines.push(j))}g.push(i)}a.xAxis=g.length?g.length>1?g:g[0]:void 0},w.$setupYAxis=function(a){for(var b,c,d=[],e=["right","left"],f=[!1,!0],g=[-7,5],h=["#6F8B9E","#86C1C9"],i="#8CA5C9",k=[30,-17],l=this._aYAxis.length>1,m=0;b=this._aYAxis[m];m++)c={gridLineWidth:1,gridLineColor:"#DBDBDB",lineColor:l?h[m%2]:b.color||i,lineWidth:2,tickPosition:"inside",tickmarkPlacement:"on",labels:{align:e[m%2],x:g[m%2],style:{fontFamily:"Arial,Serif,Times",fontSize:"11px",color:"#6B6B6B"},formatter:b.format?"string"==typeof b.format?function(a){return function(){return j(this.value,a,null,null,!0)}}(b.format):b.format:void 0},opposite:f[m%2],title:null!=b.title&&this.$seriesHasValue()?r({enabled:!0,align:"high",rotation:0,x:k[m%2],y:-10},b.title):void 0},d.push(c);a.yAxis=d.length?d.length>1?d:d[0]:{}},w.$seriesHasValue=function(){if(null!=this._bSeriesHasValue)return this._bSeriesHasValue;for(var a,b=0;b<this._aSeries.length;b++)if((a=this._aSeries[b])&&a.data&&a.data.length){for(var c=!1,d=0;d<a.data.length;d++)null!=a.data[d]&&(c=!0);if(c)return this._bSeriesHasValue=!0}return this._bSeriesHasValue=!1},w.$setupPlotOptions=function(a){var b=a.plotOptions=a.plotOptions||{},c=b.series=b.series||{},d=b.column=b.column||{},e=b.pie=b.pie||{};f||(d.shadow=!0,d.borderWidth=1);for(var g,h=!1,i=0;g=this._aSeries[i];i++)g.stack&&(h=!0);h&&(c.stacking="normal"),this._bHasPie&&r(e,{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){var a=this.series.chart.xAxis[0].categories[this.point.x];return"<b>"+a+"</b>"+": "+j(this.y,this.series.options.format,null,null,!0)}}})},w.$setupLegend=function(a){if(this._bHasPie)a.legend={enabled:!1};else if("pl"==this._oLegend.xMode){var b=this._sType,c=this.CHART_OPTIONS.colors;this._eLegend.style.marginRight=y+"px";for(var d,e,f,h=0;e=this._aSeries[h];h++)d=document.createElement("span"),g(d,b+"-legend-item"),f=e.color||c[h%c.length],d.style.backgroundColor=f,d.setAttribute("rel",f),d.innerHTML=q(e.name)+'<span class="'+b+'-legend-item-icon"></span>',this._eLegend.appendChild(d),d.onclick=s(this.$handleLegendClick,this,h,d);a.legend={enabled:!1}}else a.legend={enabled:!0,align:"center",borderColor:"#FFF",verticalAlign:"top",margin:15}},w.$handleLegendClick=function(a,b){var c=0,d=this._sType;this.$foreachSeries(function(a){a&&a.visible&&c++});var e=this._oChart.series[a];if(e)if(e.visible){if(1>=c)return;e.hide(),g(b,d+"-legend-item-hidden"),b.style.background="#B9B9B9"}else e.show(),h(b,d+"-legend-item-hidden"),b.style.background=b.getAttribute("rel")},w.$setupZoom=function(a){var c=this._aXAxis[0],d=c.type;if(a.chart=a.chart||{},a.navigator=a.navigator||{},d in this.EXT_AXIS_FORMAT&&!this._bHasPie?(a.navigator.enabled=!0,a.scrollbar={enabled:!0},a.chart.zoomType="x",b.call(this,a,!0)):(a.navigator.enabled=!1,a.chart.zoomType="",a.scrollbar={enabled:!1},b.call(this,a,!1)),a.navigator.enabled){a.navigator.height=30,a.navigator.series={dataGrouping:{smoothed:!1}};var e=this.EXT_AXIS_FORMAT[c.type];e=e&&e.formatNavigator||e.format,a.navigator.xAxis={labels:{formatter:function(){return e?e.call(null,this.value,{range:c.range}):this.value},style:{fontFamily:"Arial",fontSize:"11px"}}}}},w.sortPoints=function(a){if(!a)return null;for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b.sort(function(a,b){return a?b?a.y>b.y?-1:a.y<b.y?1:0:1:-1})},w.$foreachSeries=function(a){for(var b=0,c=this._aSeries.length;c>b;b++)a(this._oChart.series[b],b)},w.render=function(){var a=this[u+"el"];return a&&(a.style.minHeight=a.offsetHeight+"px"),this.$disposeChart(),this._aSeries&&0!=this._aSeries.length?(this.$createChart(this.$initOptions()),a&&(a.style.minHeight=""),void 0):(this._eContent.innerHTML='<div class="'+this._sType+'-empty">'+this._sEmptyHTML+"</div>",void 0)},w.$createChart=function(a){this._oChart=this._aXAxis[0].type in this.EXT_AXIS_FORMAT&&!this._bHasPie?new Highcharts.StockChart(a):new Highcharts.Chart(a)},w.$initOptions=function(){var a={chart:{renderTo:this._eContent,zoomType:"x",width:this._nWidth,height:this._nHeight},credits:{enabled:!1},title:{text:""}};this._aYAxis.length>0&&(a.chart.marginRight=y),this._bHasPie=!1;for(var b,c=0;b=this._aSeries[c];c++)"pie"==e(b.type)&&(this._bHasPie=!0);return this.$setupSeries(a),this.$setupPlotOptions(a),this.$setupXAxis(a),this.$setupYAxis(a),this.$setupTooptip(a),this.$setupLegend(a),this.$setupZoom(a),a},w.$disposeChart=function(){this._oChart&&(this._oChart.destroy(),this._oChart=null),this._eContent&&(this._eContent.innerHTML=""),this._eLegend&&(this._eLegend.innerHTML="")},w.dispose=function(){this.$disposeChart(),v.superClass.dispose.call(this)}}(),$namespace("di.config"),function(){var a,b,c=xutil.ajax,d=xutil.lang.isFunction;$link(function(){a=di.config.Lang,b=di.helper.Dialog});var e=$namespace().Ajax=function(){};e.ERROR_RTPL_ID=10011,e.ERROR_SESSION_TIMEOUT=10001,e.ERROR_PARAM=20001;var f={showWaiting:!0};e.handleDefaultFailure=function(c,e,f){switch(c){case 100:case 201:case 301:case 302:case 99999:b.alert(a.SAD_FACE+a.RE_LOGIN,null,!0);break;case 333:b.alert(a.SAD_FACE+a.NO_AUTH_SYSTEM);break;case 20003:var g=e.data.dimName,h=e.data.dimCapture,i=e.data.missedMember;b.alert(a.SAD_FACE+"ç¼ºå°ç»´åº¦èç¹ "+h+"("+g+"): "+i);break;case 20004:var j=e.statusInfo;b.alert(a.SAD_FACE+j);break;case 1:case 403:case 404:case 405:case 500:b.alert(a.SAD_FACE+a.ERROR);break;default:d(f)?f(c,e):b.alert(a.SAD_FACE+a.ERROR)}},e.handleDefaultTimeout=function(){b.hidePrompt()},e.getDefaultParam=function(){var a=new Date,b=[];return b.push("_cltime="+a.getTime()),b.push("_cltimezone="+a.getTimezoneOffset()),b.join("&")},e.showWaiting=function(){b.waitingPrompt(a.AJAX_WAITING)},e.hideWaiting=function(){b.hidePrompt()},c.DEFAULT_FAILURE_HANDLER=e.handleDefaultFailure,c.DEFAULT_ONTIMEOUT=e.handleDefaultTimeout,c.DEFAULT_PARAM=e.getDefaultParam,c.SHOW_WAITING_HANDLER=e.showWaiting,c.HIDE_WAITING_HANDLER=e.hideWaiting,c.DEFAULT_OPTIONS=f}(),$namespace("di.config"),function(){var a=$namespace().Dict=function(){if(!b){a.CLZ={};for(var c,d=0;c=a.CLZ_DEFS[d];d++){if(c.clzKey in a.CLZ)throw new Error("dupicate clzKey: "+c.clzKey);a.CLZ[c.clzKey]=c}b=!0}return a},b=!1;a.DOM_FLAG_BEGIN="<!-- DI_BEGIN^_^DONT_MODIFY_ME -->",a.DOM_FLAG_END="<!-- DI_END^_^DONT_MODIFY_ME -->",a.RTPL_VIRTUAL="RTPL_VIRTUAL",a.RTPL_VIRTUAL_ID="RTPL_VIRTUAL_ID",a.GRAPH_DEFS=[{name:"line",text:"æçº¿",yAxisNameSet:["left","right"]},{name:"bar",text:"æ±",yAxisNameSet:["left","right"]},{name:"pie",text:"é¥¼",yAxisNameSet:[]},{name:"beaker",text:"ç§æ¯",yAxisNameSet:[]}],a.getGraphByType=function(b){for(var c,d=0;c=a.GRAPH_DEFS[d];d++)if(c.name==b)return c},a.REPORT_TYPE={RTPL_OLAP_TABLE:1,RTPL_OLAP_CHART:1,RTPL_PLANE_TABLE:1,RTPL_VIRTUAL:1},a.FLAG_CSS=["di-o_o-body","di-o_o-block","di-o_o-line","di-o_o-item","di-o_o-space-l1"],a.PARAM_PREFIX="DI_P_",a.VTPL_ROOT="asset-d",a.MOLD_PATH="asset-d/-com-/mold",a.DEFAULT_MASK_OPACITY=.5,a.DI_ATTR="data-o_o-di",a.TEST_ATTR="data-o_o-di-test",a.META_STATUS={DISABLED:0,NORMAL:1,SELECTED:2}}(),$namespace("di.config"),function(){var a=$namespace().Lang={},b=xutil.string.template;a.AJAX_FAILURE=function(a){return a+" SERVER ERROR"},a.AJAX_TIMEOUT="è¯·æ±è¶æ¶ï¼è¯·ç¨åéè¯",a.AJAX_WAITING="å è½½ä¸­...",a.SMILE_FACE='&nbsp;<div class="global-smile-face"></div>&nbsp;&nbsp;&nbsp;',a.SAD_FACE='&nbsp;<div class="global-sad-face"></div>&nbsp;&nbsp;&nbsp;',a.OTHER_EDITING=function(a){var c=' style="color: blue; font-weight: bold;" ',d=["<p>ãæ³¨æã</p>","<p>å¨#{0}é¡µä¸­ï¼æ¬æ¥è¡¨å·²è¢«ç¼è¾ä½æªä¿å­ã</p>","<p>å¦æç¡®å®ä¿å­ï¼åä¼ä»¥<span ",c,">æ¬ç¼è¾é¡µ</span>ä¸ºåè¿è¡ä¿å­ï¼æ¾å¼å¶ä»ç¼è¾é¡µä¸­ååºçæ¹å¨ãç¡®å®ä¿å­åï¼</p>"];return b(d.join(""),' "<span '+c+">"+a.join('</span>", "<span '+c+">")+'</span>" ')},a.SOME_ERROR="æ±æ­ï¼åºç°éè¯¯ã",a.NEED_CREATE="è¯·åä¿å­åæ§è¡æ­¤æä½",a.OPT_SUCCESS="æä½æå",a.NO_SEL="è¯·éæ©",a.NO_DATA="ç¼ºå¤±æ°æ®",a.NO_AUTH="æ±æ­ï¼æ¨æ²¡ææ¥çå½åé¡µé¢çæé",a.NO_AUTH_OPERATION="æ±æ­ï¼æ¨æ²¡ææéè¿è¡æ­¤æä½",a.NO_AUTH_SYSTEM="æ±æ­ï¼æ¨æ²¡æç³»ç»æé",a.ERROR="ç³»ç»å¼å¸¸",a.DATA_ERROR="æ°æ®å¼å¸¸",a.ERROR_RTPL_ID="reportTemplateIdéè¯¯æèä¸å­å¨",a.RE_LOGIN="è¯·éæ°ç»é",a.EMPTY_TEXT="æªæ¥è¯¢å°ç¸å³ä¿¡æ¯",a.QUERY_ERROR_TEXT="æ¥è¯¢æ°æ®åºéï¼è¯·æ£æ¥",a.SAVE_FAIL="æ±æ­ï¼ä¿å­å¤±è´¥ï¼è¯·éè¯",a.SAVE_SUCCESS="ä¿å­æå",a.PARAM_ERROR="æ±æ­ï¼åæ°æ ¡éªå¤±è´¥",a.FATAL_DATA_ERROR="æ±æ­ï¼æå¡å¨å¼å¸¸ï¼æä½æ æ³ç»§ç»­",a.INPUT_MANDATORY="å¿å¡«",a.INVALID_FORMAT="æ ¼å¼éè¯¯",a.NUMBER_OVERFLOW="æ°æ®è¿å¤§",a.NUMBER_UNDERFLOW="æ°æ®è¿å°",a.TEXT_OVERFLOW="è¾å¥æå­è¿å¤",a.DOWNLOAD_FAIL="ä¸è½½å¤±è´¥",a.OFFLINE_DOWNLOAD_FAIL="ç¦»çº¿ä¸è½½è¯·æ±å¤±è´¥",a.DELETE_SUCCESS="å é¤æå",a.GET_DIM_TREE_ERROR="æ±æ­ï¼ç»´åº¦æ°æ®è·åå¤±è´¥ï¼è¯·éè¯",a.NEED_DS_ALL_LINKED="è¯·ç¡®ä¿ææç»ä»¶é½æéæ©å¯¹åºçæ°æ®éï¼æ²¡æååå»ºï¼ï¼åè¿è¡ä¸ä¸æ­¥",a.CONFIRM_ADD_SHARE="æ¨ççè¦æ·»å åäº«åï¼",a.CONFIRM_REMOVE_SHARE="æ¨ççè¦åæ¶åäº«åï¼",a.CONFIRM_DELETE="æ¨ççè¦å é¤åï¼",a.DIM_MANDATORY="è¯·ç¡®è®¤æ¯ç§ç»´åº¦é½æå¾éï¼åç¹å»æ¥è¯¢",a.DESC_OVERFLOW="è§£éè¯´ææå­è¿å¤",a.DESC_MANDATORY="è§£éè¯´æå¿å¡«",a.PLAN_OVERFLOW="è·è¿è®¡åæå­è¿å¤",a.PLAN_MANDATORY="è·è¿è®¡åå¿å¡«",a.REASON_ADD_ERROR="åå æ·»å å¤±è´¥ï¼è¯·éè¯",a.DRILL_DIM_DATA_ERROR="[ç»´åº¦æ°æ®æ ¡éªå¤±è´¥]",a.WAITING_HTML='<span class="waiting-icon"></span>&nbsp;<span class="waiting-text">å è½½ä¸­...</span>',a.TIME_DESC=['<div style="border: 1px solid #BBB; padding: 10px;margin-top: 10px; border-radius: 5px;">','<div style="font-weight: bold">&nbsp;&nbsp;æ¶é´è¡¨è¾¾å¼ä¸¾ä¾ï¼</div>',"<br />",'<div>&nbsp;&nbsp;&nbsp;&nbsp;æ¨å¤©ï¼["-1D"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;å­å¤©åå°å½å¤©ï¼["-6D", "0D"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;æ¬æåå°å½å¤©ï¼["0MB", "0D"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;æ¬å¨æ«å°2013-09-20ï¼["0WE", "2013-09-20"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;ä¸å­£åå°æå¹´æ«ï¼["-1QB", "+1YE"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;åå¤©å°ä¸æçåå¤©ï¼["+2D", null, "+1M"]</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;æ¨å¤©æå¨çæçæåå°æ¨å¤©ï¼[null, "-1D", "0MB"]</div>',"<div>&nbsp;&nbsp;&nbsp;&nbsp;ï¼æ³¨ï¼å­æ¯ç¨å¤§å°åé½å¯ä»¥ï¼</div>","<br />","<br />",'<div style="font-weight: bold">&nbsp;&nbsp;æ¶é´è¡¨è¾¾å¼è¯´æï¼</div>',"<br />","<div>&nbsp;&nbsp;&nbsp;&nbsp;æ¶é´è¡¨è¾¾å¼æ¯ä¸ä¸ª ä¸åç» æè äºåç» æè ä¸åç»</div>",'<div style="color: blue;">&nbsp;&nbsp;&nbsp;&nbsp;å¦ï¼["0YB"] æ ["2012-12-12", "5Q"] æ ["-5ME", null, "6D"]</div>',"<div>&nbsp;&nbsp;&nbsp;&nbsp;æ°ç»ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼å§æ¶é´ï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç»å¯¹å¼ï¼å¦2012-12-12ï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æç¸å¯¹äºåºåæ¶é´çåç§»ï¼å¦-5dï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;æ°ç»ç¬¬äºä¸ªåç´ è¡¨ç¤ºç»ææ¶é´ï¼æ ¼å¼åä¸ãï¼å¯ç¼ºçï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;æ°ç»ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºæ¶é´åºé´ï¼ç¸å¯¹äºstartæendçåç§»ï¼å¦-4dï¼ï¼å¯ç¼ºçï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦æå·²ç»å®ä¹äºstartåendï¼årangeå¿½ç¥ã</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦æstartæendåªæä¸ä¸ªè¢«å®ä¹ï¼årangeæ¯ç¸å¯¹äºå®çåç§»ã</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¦æåªæstartè¢«å®ä¹ï¼ååªåstartã</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¾å¦startæ¯+1MEï¼rangeæ¯+5WBï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;è¡¨ç¤ºä¸ä¸ªæ¶é´èå´ï¼ä»ä¸æçæåä¸å¤©å¼å§ï¼å°ä¸ææåä¸å¤©å¾å5å¨çå¨ä¸ä¸ºæ­¢ã</div>","<br />","<div>&nbsp;&nbsp;&nbsp;&nbsp;ä¸åç»ä¸­æ¯ä¸ªåç´ çåæ³ï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;ç¬¬ä¸ç§æåµæ¯ï¼</div>",'<div style="color: blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¨YMDWQï¼å¹´ææ¥å¨å­£ï¼åå«è¡¨ç¤ºæ¶é´ç²åº¦ï¼å¤§å°åé½å¯ä»¥ï¼ï¼</div>','<div style="color: blue;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç¨B/Eè¡¨ç¤ºé¦å°¾ï¼å¦ææ²¡æB/Eæ å¿åä¸èèé¦å°¾</div>',"<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä¾å¦ï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åå¦ç³»ç»æ¶é´ä¸º2012-05-09</div>",'<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+4D"è¡¨ç¤ºç³»ç»æ¶é´å¾å4å¤©ï¼å³2012-05-13 </div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"-2M"è¡¨ç¤ºå¾å2ä¸ªæï¼çå½å¤©ï¼ï¼å³2012-03-13</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"2Q"è¡¨ç¤ºå¾å2ä¸ªå­£åº¦ï¼çå½å¤©ï¼ï¼å³2012-11-13</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1W"è¡¨ç¤ºå¾å1å¨ï¼çå½å¤©ï¼ï¼å³2012-05-20</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1WB"è¡¨ç¤ºå¾å1å¨çå¼å¤´ï¼å¨ä¸ï¼ï¼å³2012-05-14</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"-1WE"è¡¨ç¤ºå¾åä¸å¨çç»æï¼å¨æ¥ï¼ï¼å³2012-05-06</div>','<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"0WE"è¡¨ç¤ºæ¬å¨çç»æï¼å¨æ¥ï¼ï¼å³2012-05-13</div>',"<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;æãå­£ãå¹´åç</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;ç¬¬äºç§æåµæ¯ï¼ç´æ¥æå®æ¥æï¼å¦yyyy-MM-ddï¼</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åè¿åæ­¤æå®æ¥æ</div>","<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å¯ä»¥ç¨ç¸å¯¹æ¶é´æç»å¯¹æ¶é´ï¼</div>","<br />","</div>"].join(""),a.X_CALENDAR_DESC=b(['<div style="border: 1px solid #BBB; padding: 10px;margin-top: 10px; border-radius: 5px;">','<div style="font-weight: bold">&nbsp;&nbsp;è®¾ç½®åå§ååæ°æ ¼å¼ä¸¾ä¾ï¼</div>',"<br />","<div>#{0}{</div>",'<div>#{0}#{0}"forbidEmpty": false,</div>','<div>#{0}#{0}"disableCancelBtn": false,</div>','<div>#{0}#{0}"timeTypeList": [</div>','<div>#{0}#{0}#{0}{ "value": "D", "text": "æ¥" },</div>','<div>#{0}#{0}#{0}{ "value": "W", "text": "å¨" },</div>','<div>#{0}#{0}#{0}{ "value": "M", "text": "æ" },</div>','<div>#{0}#{0}#{0}{ "value": "Q", "text": "å­£" }</div>',"<div>#{0}#{0}],</div>",'<div>#{0}#{0}"timeTypeOpt": {</div>','<div>#{0}#{0}#{0}"D": {</div>','<div>#{0}#{0}#{0}#{0}"selMode": "SINGLE",</div>','<div>#{0}#{0}#{0}#{0}"date": ["-31D", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"range": ["2011-01-01", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"selModeList": [</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "åé", "value": "SINGLE", "prompt": "åé¡¹éæ©" }</div>',"<div>#{0}#{0}#{0}#{0}]</div>","<div>#{0}#{0}#{0}},</div>",'<div>#{0}#{0}#{0}"W": {</div>','<div>#{0}#{0}#{0}#{0}"selMode": "RANGE",</div>','<div>#{0}#{0}#{0}#{0}"date": ["-31D", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"range": ["2011-01-01", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"selModeList": [</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "åé", "value": "SINGLE", "prompt": "åé¡¹éæ©" },</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "èå´å¤é", "value": "RANGE", "prompt": "èå´éæ©ï¼ç¹å»ä¸ä¸éæ©å¼å§å¼ï¼åç¹å»ä¸ä¸éæ©ç»æå¼" }</div>',"<div>#{0}#{0}#{0}#{0}]</div>","<div>#{0}#{0}#{0}},</div>",'<div>#{0}#{0}#{0}"M": {</div>','<div>#{0}#{0}#{0}#{0}"selMode": "MULTIPLE",</div>','<div>#{0}#{0}#{0}#{0}"date": ["-31D", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"range": ["2011-01-01", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"selModeList": [</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "åé", "value": "SINGLE", "prompt": "åé¡¹éæ©" },</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "èå´å¤é", "value": "RANGE", "prompt": "èå´éæ©ï¼ç¹å»ä¸ä¸éæ©å¼å§å¼ï¼åç¹å»ä¸ä¸éæ©ç»æå¼" }</div>',"<div>#{0}#{0}#{0}#{0}]</div>","<div>#{0}#{0}#{0}},</div>",'<div>#{0}#{0}#{0}"Q": {</div>','<div>#{0}#{0}#{0}#{0}"selMode": "SINGLE",</div>','<div>#{0}#{0}#{0}#{0}"date": ["-31D", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"range": ["2011-01-01", "-1D"],</div>','<div>#{0}#{0}#{0}#{0}"selModeList": [</div>','<div>#{0}#{0}#{0}#{0}#{0}{ "text": "åé", "value": "SINGLE", "prompt": "åé¡¹éæ©" }</div>',"<div>#{0}#{0}#{0}#{0}]</div>","<div>#{0}#{0}#{0}}</div>","<div>#{0}#{0}}</div>","<div>#{0}}</div>","</div>"].join(""),Array(4).join("&nbsp;"))}(),function(){var a=$namespace("di.config").Dict,b=xutil.object.extend,c=xutil.lang.isArray,d={DEFAULT_CLZ_KEY:{SNIPPET:"GENERAL_SNIPPET",VCONTAINER:"GENERAL_VCONTAINER",VPART:"GENERAL_VPART",COMPONENT:"GENERAL_COMPONENT"},CLZ_DEFS:[{clzKey:"GENERAL_SNIPPET",clzPath:"di.shared.ui.GeneralSnippet",clzType:"SNIPPET"},{clzKey:"GENERAL_VPART",clzPath:"di.shared.ui.GeneralVPart",clzType:"VPART"},{clzKey:"GENERAL_COMPONENT",clzPath:"di.shared.ui.InteractEntity",clzType:"COMPONENT"},{clzKey:"DI_TABLE",clzPath:"di.shared.ui.DITable",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_OLAP_TABLE"]},{clzKey:"DI_RTPLCLONE",clzPath:"di.shared.ui.DIRtplClone",clzType:"COMPONENT"},{clzKey:"DI_PLANE_TABLE",clzPath:"di.shared.ui.DIPlaneTable",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_PLANE_TABLE"]},{clzKey:"DI_CHART",clzPath:"di.shared.ui.DIChart",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_OLAP_CHART"]},{clzKey:"DI_LITEOLAP_CHART",clzPath:"di.shared.ui.DILiteOlapChart",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_OLAP_TABLE"]},{clzKey:"DI_FORM",clzPath:"di.shared.ui.DIForm",clzType:"COMPONENT",vuiRefCandidate:{input:["HIDDEN_INPUT","DAY_POP_CALENDAR","RANGE_POP_CALENDAR","CALENDAR_PLUS","X_CALENDAR","ECUI_SELECT","ECUI_MULTI_SELECT","ECUI_INPUT_TREE","ECUI_SUGGEST","ECUI_INPUT","MULTI_CHECKBOX"],confirm:["BUTTON","H_BUTTON"]}},{clzKey:"OLAP_META_CONFIG",clzPath:"di.shared.ui.OlapMetaConfig",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_OLAP_TABLE","RTPL_OLAP_CHART"]},{clzKey:"LITEOLAP_META_CONFIG",clzPath:"di.shared.ui.LiteOlapMetaConfig",clzType:"COMPONENT",reportTemplateTypeCandidate:["RTPL_OLAP_TABLE","RTPL_OLAP_CHART"]},{clzKey:"GENERAL_VCONTAINER",clzPath:"di.shared.ui.GeneralVContainer",clzType:"VCONTAINER"},{clzKey:"DI_TAB",clzPath:"di.shared.ui.DITab",clzType:"VCONTAINER"},{clzKey:"FOLD_PANEL",clzPath:"di.shared.ui.FoldPanel",clzType:"VCONTAINER"},{clzKey:"HIDDEN_INPUT",clzPath:"di.shared.vui.HiddenInput",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},clzType:"VUI",rtplParamHandler:["com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4SimpleTextImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4SuggestTextImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TreeImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4HttpTreeImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4ComboBoxImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4ComboBoxTransferImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4HiddenPosImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeFromOutsideImpl"],caption:"éèçè¾å¥"},{clzKey:"H_CHART",clzPath:"xui.ui.HChart",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},adapterPath:"di.shared.adapter.HChartVUIAdapter",clzType:"VUI",caption:"ç»åå¾"},{clzKey:"OLAP_META_DRAGGER",clzPath:"di.shared.vui.OlapMetaDragger",clzType:"VUI",adapterPath:"di.shared.adapter.MetaConfigVUIAdapter",caption:"OLAPç»´åº¦ææ½éæ©å¨"},{clzKey:"TEXT_LABEL",clzPath:"di.shared.vui.TextLabel",clzType:"VUI",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},caption:"ç®åææ¬æ ç­¾"},{clzKey:"OLAP_META_IND_SELECT",clzPath:"di.shared.vui.OlapMetaSelect",clzType:"VUI",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},adapterPath:"di.shared.adapter.MetaConfigVUIAdapter",dataOpt:{ctrlClz:"ecui.ui.Select",optionSize:15},caption:"OLAPææ åéä¸ææ¡"},{clzKey:"OLAP_META_IND_MULTI_SELECT",clzPath:"di.shared.vui.OlapMetaSelect",clzType:"VUI",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},adapterPath:"di.shared.adapter.MetaConfigVUIAdapter",dataOpt:{ctrlClz:"ecui.ui.MultiSelect",optionSize:15},caption:"OLAPææ å¤éä¸ææ¡"},{clzKey:"DAY_POP_CALENDAR",clzPath:"ecui.ui.IstCalendar",clzType:"VUI",adapterMethod:{dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.IstCalendarVUIAdapter",dataOpt:{mode:"DAY",viewMode:"POP"},rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeImpl",caption:"ç®åå¼¹åºå¼æ¥åï¼åæ¥éæ©ï¼"},{clzKey:"RANGE_POP_CALENDAR",clzPath:"ecui.ui.IstCalendar",clzType:"VUI",adapterMethod:{dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.IstCalendarVUIAdapter",dataOpt:{mode:"RANGE",viewMode:"POP"},rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeImpl",caption:"ç®åå¼¹åºå¼æ¥åï¼èå´éæ©ï¼"},{clzKey:"CALENDAR_PLUS",clzPath:"ecui.ui.CalendarPlus",clzType:"VUI",adapterMethod:{dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.CalendarPlusVUIAdapter",rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeImpl",editorDisable:!0,caption:"æ··åæ¥åï¼å­£æå¨åæ¢ï¼"},{clzKey:"X_CALENDAR",clzPath:"ecui.ui.XCalendar",clzType:"VUI",adapterMethod:{dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.XCalendarVUIAdapter",rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TimeImpl",caption:"æ··åæ¥åï¼å­£æå¨åæ¢ï¼åéèå´éåæ¢ï¼"},{clzKey:"OLAP_TABLE",clzPath:"ecui.ui.OlapTable",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},dataOpt:{defaultCCellAlign:"right"},caption:"å¤ç»´è¡¨ï¼éè§è¡¨/äº¤åè¡¨ï¼"},{clzKey:"BEAKER_CHART",clzPath:"ecui.ui.BeakerChart",clzType:"VUI",adapterPath:"di.shared.adapter.BeakerChartVUIAdapter",caption:"ç§æ¯å¾"},{clzKey:"BREADCRUMB",clzPath:"ecui.ui.Breadcrumb",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},caption:"é¢åå±"},{clzKey:"BUTTON",clzPath:"ecui.ui.Button",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},caption:"ç®åæé®"},{clzKey:"H_BUTTON",clzPath:"ecui.ui.HButton",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},caption:"å¸¦å¾æ æé®"},{clzKey:"OFFLINE_DOWNLOAD",clzPath:"di.shared.vui.OfflineDownload",clzType:"VUI",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},dataOpt:{headText:"è¯·è¾å¥é®ç®±ï¼å¤ä¸ªé®ç®±ä½¿ç¨éå·åéï¼ï¼",confirmText:"ç¡®å®",cancelText:"åæ¶",text:"ç¦»çº¿ä¸è½½1"},caption:"ç¦»çº¿ä¸è½½æé®"},{clzKey:"SWITCH_BUTTON",clzPath:"ecui.ui.SwitchButton",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},caption:"å¼å³æé®"},{clzKey:"ECUI_SELECT",clzPath:"ecui.ui.Select",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiSelectVUIAdapter",dataOpt:{optionSize:15},rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4ComboBoxImpl",caption:"åéä¸ææ¡"},{clzKey:"ECUI_MULTI_SELECT",clzPath:"ecui.ui.MultiSelect",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiSelectVUIAdapter",dataOpt:{optionSize:15},rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4ComboBoxImpl",caption:"å¤éä¸ææ¡"},{clzKey:"ECUI_INPUT_TREE",clzPath:"ecui.ui.InputTree",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiInputTreeVUIAdapter",rtplParamHandler:["com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4TreeImpl","com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4HttpTreeImpl"],caption:"æ ç»æéæ©ä¸ææ¡"},{clzKey:"ECUI_SUGGEST",clzPath:"ecui.ui.Suggest",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiSuggestVUIAdapter",rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4SuggestTextImpl",caption:"å¸¦æç¤ºçè¾å¥æ¡"},{clzKey:"ECUI_INPUT",clzPath:"ecui.ui.Input",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},rtplParamHandler:"com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4SimpleTextImpl",caption:"ç®åè¾å¥æ¡"},{clzKey:"MULTI_CHECKBOX",clzPath:"di.shared.vui.MultiCheckbox",adapterMethod:{create:"xuiCreate",dispose:"xuiDispose"},clzType:"VUI",rtplParamHandler:["com.baidu.rigel.datainsight.engine.service.impl.DIParamHandler4ComboBoxImpl"],caption:"å¤éæ¡ï¼å¹³éºï¼"},{clzKey:"ECUI_SLOW_PLANE_TABLE",clzPath:"ecui.ui.CustomTable",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiCustomTableVUIAdapter",caption:"å¹³é¢è¡¨"},{clzKey:"ECUI_PAGER",clzPath:"ecui.ui.ExtPager",clzType:"VUI",adapterMethod:{create:"ecuiCreate",dispose:"ecuiDispose"},adapterPath:"di.shared.adapter.EcuiPagerVUIAdapter",caption:"åé¡µæ§ä»¶"}]};
b(a,d),a.CLZ={};for(var e,f=0;e=a.CLZ_DEFS[f];f++){if(e.clzKey in a.CLZ)throw new Error("dupicate clzKey: "+e.clzKey);a.CLZ[e.clzKey]=e;var g=e.rtplParamHandler=e.rtplParamHandler||[];c(g)||(e.rtplParamHandler=[g])}a.findClzDef=function(b,c){for(var d,e=0;d=a.CLZ_DEFS[e];e++)if(d.clzKey==b&&d.clzType==c)return d},a.hasReportTemplateType=function(b,c){var d=a.findClzDef(b,"COMPONENT");if(!d)return!1;if(!d.reportTemplateTypeCandidate)return!0;for(var e,f=0;e=d.reportTemplateTypeCandidate[f];f++)if(c==e)return!0;return!1}}(),$namespace("di.config"),function(){xui.XDatasource.extend;var a=$namespace().URL=function(b){var d=c[b];if(!d)throw new Error("empty url!");return a.getWebRoot()+d};a.fn=function(b){return xutil.fn.bind(a,null,b)};var b,c={};a.getWebRoot=function(){return b||$getNamespaceBase().WEB_ROOT||""},a.setWebRoot=function(a){b=a},a.addURL=function(a,b){if(c[a])throw new Error("Duplicate URL! name="+a+" url="+b);c[a]=b},a.changeURL=function(a,b){c[a]=b},c.OLAP_REPORT_INIT="/reportTemplate/initReportTemplate.action",c.CONSOLE_SAVE_TPL="/manage/virtualTemplate/saveVirtualTemplate.action",c.CONSOLE_GET_COND="/manage/virtualTemplate/getSelectableConditions.action",c.CONSOLE_EXIST_COND="/manage/virtualTemplate/getSelectedConditions.action",c.CONSOLE_VTPL_LIST="/manage/virtualTemplate/getVirtualTemplateInfo.action",c.CONSOLE_DS_LIST="/manage/virtualTemplate/getReportTemplates.action",c.CONSOLE_TO_PRE="/manage/publish/publishToPre.action",c.CONSOLE_TO_RELEASE="/manage/publish/publishToRelease.action",c.OLAP_SAVE="/reportTemplate/save.action",c.PLANE_TABLE_INIT="/reportTemplate/planeTable/init.action",c.PLANE_TABLE_SQL_SAVE="/reportTemplate/planeTable/create.action",c.PLANE_TABLE_COL_DATA="/reportTemplate/planeTable/doMapColumns.action",c.PLANE_TABLE_COL_SAVE="/reportTemplate/planeTable/saveColumns.action",c.PLANE_TABLE_COND_DATA="/reportTemplate/planeTable/doMapConds.action",c.PLANE_TABLE_COND_SAVE="/reportTemplate/planeTable/saveConds.action",c.PLANE_TABLE_PREVIEW_DATA="/reportTemplate/planeTable/doMapPreview.action",c.CUBE_META="/meta/getCubeTree.action",c.DATASOURCE_META="/reportTemplate/planeTable/getDs.action",c.DIM_TREE_TABLE="/reportTemplate/table/getDimTree.action",c.DIM_TREE_CHART="/reportTemplate/chart/getDimTree.action",c.DIM_MULTISELECT_TABLE="/reportTemplate/table/getDimMultiSelect.action",c.DIM_MULTISELECT_CHART="/reportTemplate/chart/getDimMultiSelect.action",c.DIM_SELECT_SAVE_TABLE="/reportTemplate/table/updateDimNodes.action",c.DIM_SELECT_SAVE_CHART="/reportTemplate/chart/updateDimNodes.action",c.MEASURE_DES="/reportTemplate/table/getMeasureDescription.action",c.META_CONDITION_IND_DIM_TABLE="/reportTemplate/table/getMetaData.action",c.LITEOLAP_INDS_META_DATA="/reportTemplate/liteolap/getCurrentAnalysisInds.action",c.META_CONDITION_IND_DIM_CHART="/reportTemplate/chart/getMetaData.action",c.META_CONDITION_SELECT_TABLE="/reportTemplate/table/dragAndDrop.action",c.META_CONDITION_SELECT_CHART="/reportTemplate/chart/dragAndDrop.action",c.META_CONDITION_LIST_SELECT_CHART="/reportTemplate/chart/selectInd.action",c.META_CONDITION_LIST_SELECT_TABLE="/reportTemplate/table/selectInd.action",c.META_CONDITION_COL_CONFIG_GET="/reportTemplate/table/COLCONFIGGET.action",c.META_CONDITION_COL_CONFIG_SUBMIT="/reportTemplate/table/COLCONFIGGET.action",c.META_CONDITION_CANDIDATE_INIT="/reportTemplate/configure/getTemplateMeta.action ",c.META_CONDITION_CANDIDATE_SUBMIT="/reportTemplate/configure/setTemplateMeta.action ",c.META_CONDITION_ADD_SERIES_GROUP="/reportTemplate/chart/addSeriesUnit.action",c.META_CONDITION_REMOVE_SERIES_GROUP="/reportTemplate/chart/removeSeriesUnit.action",c.CONSOLE_CHART_CONFIG_INIT="/reportTemplate/chart/getChartSettings.action",c.CONSOLE_CHART_CONFIG_SUBMIT="/reportTemplate/chart/updateChartSettings.action",c.FORM_DATA="/reportTemplate/initParams.action",c.FORM_ASYNC_DATA="/reportTemplate/interactParam.action",c.OLAP_TABLE_DATA="/reportTemplate/table/transform.action",c.OLAP_TABLE_DRILL="/reportTemplate/table/drill.action",c.OLAP_TABLE_LINK_DRILL="/reportTemplate/table/drillByLink.action",c.OLAP_TABLE_SORT="/reportTemplate/table/sort.action",c.OLAP_TABLE_CHECK="/reportTemplate/table/checkRow.action",c.OLAP_TABLE_SELECT="/reportTemplate/table/selectRow.action",c.OLAP_TABLE_DOWNLOAD="/reportTemplate/table/download.action",c.OLAP_TABLE_OFFLINE_DOWNLOAD="/reportTemplate/table/downloadOffLine.action",c.OLAP_TABLE_LINK_BRIDGE="/reportTemplate/table/linkBridge.action",c.PLANE_TABLE_DATA="/reportTemplate/planeTable/transform.action",c.PLANE_TABLE_CHECK="/reportTemplate/planeTable/checkRow.action",c.PLANE_TABLE_SELECT="/reportTemplate/planeTable/selectRow.action",c.PLANE_TABLE_DOWNLOAD="/reportTemplate/planeTable/download.action",c.PLANE_TABLE_DOWNLOADEXCEL="/reportTemplate/planeTable/downloadExcel.action",c.PLANE_TABLE_OFFLINE_DOWNLOAD="/reportTemplate/planeTable/downloadOffLine.action",c.PLANE_TABLE_LINK_BRIDGE="/reportTemplate/planeTable/linkBridge.action",c.OLAP_CHART_DATA="/reportTemplate/chart/transform.action",c.LITEOLAP_CHART_DATA="/reportTemplate/liteolap/generateAnalysisChart.action",c.OLAP_CHART_X_DATA="/reportTemplate/chart/reDraw.action",c.OLAP_CHART_S_DATA="/reportTemplate/chart/reDrawSeries.action",c.OLAP_CHART_S_ADD_DATA="/reportTemplate/chart/addChartSeries.action",c.OLAP_CHART_S_REMOVE_DATA="/reportTemplate/chart/removeChartSeries.action",c.OLAP_CHART_BASE_CONFIG_INIT="/reportTemplate/chart/config.action",c.OLAP_CHART_BASE_CONFIG_SUBMIT="/reportTemplate/chart/config.action",c.OLAP_CHART_DOWNLOAD="/reportTemplate/chart/download.action",c.OLAP_CHART_OFFLINE_DOWNLOAD="/reportTemplate/chart/downloadOffLine.action",c.REPORT_PREVIEW="/reportTemplate/complex/generateReport.action",c.ROWHEAD_CONFIG_INIT="/reportTemplate/table/rowHeadConfig/getDrillTypeConfig.action",c.ROWHEAD_CONFIG_SUBMIT="/reportTemplate/table/rowHeadConfig/setRowHeadDrillTypes.action",c.DIMSHOW_CONFIG_INIT="/reportTemplate/table/rowHeadConfig/getDimShowConfig.action",c.DIMSHOW_CONFIG_SUBMIT="/reportTemplate/table/rowHeadConfig/setDimShowConfig.action",c.GET_TEMPLATE_INFO="/reportTemplate/configure/getTemplateInfo.action",c.DATA_FORMAT_SET="/reportTemplate/data/setDataFormat.action",c.REPORT_ROWMERGE_KEY_SUBMIT="/reportTemplate/updateProperties.action",c.REPORT_QUERY="/myview/queryReportList.action",c.MOLD_QUERY="/manage/moldTemplate/getMoldTemplates.action",c.PAHNTOMJS_INFO="/myview/getPhantomJsInfo.action",c.RTPL_CLONE_SAVE="/image/delAndAddImage.action",c.RTPL_CLONE_GETDEFAULTIMAGENAME="/image/getDefaultImageName.action",c.RTPL_CLONE_CLEAR="/image/deleteImage.action"}(),$namespace("di.helper"),function(){function a(a){return function(){var b=i().getEventChannel();b&&b.triggerEvent(a,arguments)}}function b(a,b,c){var d;try{d=window}catch(f){}var h=g.getScrollLeft(d)+g.getViewWidth(d)/2,i=5;return m||(m=document.createElement("div"),m.style.cssText="display:none;position:fixed;*position:absolute",m.className="global-prompt",document.body.appendChild(m)),e(),""==m.style.display?!1:(m.innerHTML=a,m.style.display="",m.style.left=h-m.offsetWidth/2+"px",m.style.top=i+"px",b&&(j.mask(0),n=!0),c&&(o=setTimeout(function(){l.hidePrompt()},c)),!0)}function c(a){null==a&&(a=f.AJAX_WAITING),a=['<div class="global-prompt-waiting"></div>','<div class="global-prompt-waiting-text">',a,"</div>"].join(""),l.prompt(a)}function d(){e(),m.style.display="none",n&&(n=!1,j.mask())}function e(){o&&(clearTimeout(o),o=null)}var f,g,h,i,j=ecui,k=xutil.string.encodeHTML;$link(function(){f=di.config.Lang,h=di.config.Dict,g=di.helper.Util,i=di.shared.model.DIFactory});var l=$namespace().Dialog={},m=null,n=!1,o=null,p=!1;p=!0,l.prompt=function(){b.apply(this,arguments)},l.waitingPrompt=function(){c.apply(this,arguments)},l.hidePrompt=function(){d.apply(this,arguments)},l.setPromptDef=function(e,f){"STUB"==f&&e&&"E"==e.anchor&&(b=a("prompt"),d=a("hideprompt"),c=a("waitingprompt"))},l.setAdjustDialogPosition=function(a,b){"STUB"==b&&(a&&"E"==a.anchor?p=!0:a&&"I"==a.anchor&&(p=!1))},l.showDialog=function(a,b,c,d){if(j.$messagebox(a,b,c,d),p){var e=xutil.dom.q("ui-messagebox")[0];e&&l.adjustDialogPosition(e)}},l.adjustDialogPosition=function(a){try{window.frameElement.getBoundingClientRect()}catch(b){return}var c=window,d=-c.frameElement.getBoundingClientRect().top,e=g.getViewHeight(c.parent),f=a.offsetHeight,h=(e-f)/2,i=d+Math.max(h,0);a.style.top=Math.max(i,0)+"px"},l.alert=function(a,b,c){l.showDialog(a,"æç¤º",c?[]:[{text:"ç¡®å®",className:"ui-button-g",action:b}],h.DEFAULT_MASK_OPACITY)},l.confirm=function(a,b,c){l.showDialog(a,"ç¡®è®¤",[{text:"ç¡®å®",className:"ui-button-g",action:b},{text:"åæ¶",action:c}],h.DEFAULT_MASK_OPACITY)},l.dialog=function(a,b,c){var d;c=c||[],d.push('<div class="ui-messagebox-icon"></div>','<div class="ui-messagebox-content">','<div class="ui-messagebox-text">',k(b),"</div>","</div>"),l.showDialog(d.join(""),a,c,h.DEFAULT_MASK_OPACITY)},l.errorAlert=function(){l.alert(f.ERROR)}}(),$namespace("di.helper"),function(){function a(a,b,c,d){var e;if(f(c)&&(e=a[c]),!f(e)||!f(b))return b;var g=d?"":' target="_blank" ';return"<a "+g+' href="'+e+'">'+b+"</a>"}var b=xutil.lang;b.isFunction,b.isArray;var c,d=b.isString,e=b.hasValue,f=b.hasValueNotBlank,g=xutil.string.encodeHTML,h=xutil.string.textLength,i=xutil.string.textSubstr,j=xutil.number.formatNumber,k=Array.prototype.slice;$link(function(){c=di.config.Dict});var l=$namespace().Formatter=function(a){var b=k.call(arguments,1);return function(c){var d=k.call(arguments,1);return l[a].apply(this,[c].concat(b,d))}};l.DEFAULT_RATE_FORMAT="I,III.DD%",l.tableFormatter=function(b,c){var e,f,g=k.call(arguments,2);return d(b)?e=b:(e=b.data,f=b.link),function(b){var d=l[c].apply(b,[b[e]].concat(g));return a(b,d,f)}},l.SIMPLE_TEXT=function(a,b){return b=e(b)?b:!0,a=f(a)?a:"-",a=b?g(a):a},l.CUT_TEXT=function(a,b,c,d,j){var k,l="",m="",c=e(c)?c:!0;return a=f(a)?a:"-",h(a)>b?(l=i(a,0,b-2)+"..",k=!0):(l=a,k=!1),l=c?g(l):l,k&&e(d)&&(m="color:"+d),a=c?g(a):a,'<span class="'+j+'" style="'+m+'" title="'+a+'" >'+l+"&nbsp;</span>"},l.SIMPLE_RATE=function(a,b){var c;return f(a)?(b=b||l.DEFAULT_RATE_FORMAT,c=j(a,b)):"-"},l.SIMPLE_NUMBER=function(a,b){return a=f(a)?b?j(a,b):a:"-"},l.COLORED_NUMBER=function(a,b,c,d){var e,g="-";return c=c||"red",d=d||"green",f(a)&&(e='style="color:'+(0>a?d:c)+'" ',g="<span "+e+">"+(b?j(a,b):a)+"</span>"),g}}(),$namespace("di.helper"),function(){function a(a,b,d){for(var f,g,h=e(a),i=b.domAttrName||l,j=0;f=h[j];j++)if(g=f.getAttribute(i),g==m)return c(f,d)}function b(a,b,c,i){c=c||{};var j,k,n,o,q=c.domAttrName||l,r=e(a),s=b.entityDefs||[],t={};for(n=0;n<s.length;n++)j=s[n],t[j.id]=j;for(n=0;o=r[n];n++)k=o.getAttribute(q),k!=m&&k&&(j=t[k],d(j.id),j.el=o,i.addEntity(j,"DEF"));i.forEachEntity(["COMPONENT"],function(a){var b=a.id.split(p),c=i.getEntity(b[0],"DEF");if(!c)throw new Error(a.id+" æªå®ä¹é¶å±çsnippet");f("belong.snippet",c.id,a);var d,e=a.el,j=g("layout.parentSnippet",a);for(j||f("layout.parentSnippet",j=[],a);(e=h(e))&&e!=document;)d=i.getEntity(e.getAttribute(q),"DEF"),d&&"SNIPPET"==d.clzType&&j.push(d.id)}),i.forEachEntity(["VPART"],function(a){for(var b,c,d,g=e(a.el),h={COMPONENT:0,VUI:0},j={COMPONENT:"componentRef",VUI:"vuiRef"},k=0;b=g[k];k++)c=i.getEntity(b.getAttribute(q),"DEF"),c&&j[d=c.clzType]&&f(j[d]+".inner["+h[d]++ +"]",c.id,a)}),i.rootSnippet(b.rootSnippet)}function c(a,b){var c=function(b,c){var d=a[n];if(d)try{d(b,c)}catch(e){}};a[o]=function(a,b){var c=e[a];if(c)for(var d=0;d<c.length;d++)try{c[d]&&c[d].apply(null,b||[])}catch(f){}};var d,e={},f=function(a,b){var c=e[a];c||(c=e[a]=[]),c.push(b)};return b.setEventChannel(d={anchorEl:a,triggerEvent:c,addEventListener:f}),d}function d(a){if(!/[1-9a-zA-Z\-_\.]/.test(a))throw new Error("id is illegal: "+a)}function e(a){return a.all||a.getElementsByTagName("*")}var f=xutil.object.setByPath,g=xutil.object.getByPath,h=xutil.dom.getParent;xutil.object.merge;var i,j;$link(function(){i=di.config.Dict,j=di.helper.Dialog}),$namespace().SnippetParser=function(){return k=k||{parseProdSnippet:b,setupEventChannel:a}};var k,l="data-o_o-di",m="BODY",n="data-d-outward-d-atad",o="data-d-inward-d-atad",p="."}(),$namespace("di.helper"),function(){function a(a,b,c,d){for(var e,f=0;f<b.length;f++)(e=b[f])&&(i(c)?c(e):!a&&e.$di?e.$di(c,"apply",e,d):e[c].apply(e,d))}function b(a,b){return b+a.charAt(0).toUpperCase()+a.slice(1)}function c(a,c){var d="";return d=E.isEcuiControl(c)?"_u":j(c)?"_a":i(c)?"_f":"_m",b(a,d)}function d(a,b){throw new Error("Illegle json logic express, "+(b||"")+". "+A(a))}var e,f,g,h=xutil.lang,i=h.isFunction,j=h.isArray,k=h.isString,l=xutil.date.stringToDate,m=h.hasValue,n=h.hasValueNotBlank,p=xutil.string.decodePercent,q=xutil.collection.sortList,r=xutil.date.dateToString,s=xutil.date.getWorkday,t=xutil.date.getWeekend,u=xutil.date.getQuarter,v=xutil.date.getQuarterBegin,w=xutil.dom.g,x=xutil.lang.isDate,y=[].slice,z=ecui.$fastCreate,A=baidu.json.stringify,B=xutil.object.getByPath,C=document,D=RegExp;$link(function(){e=B("ecui.ui.Control"),f=di.helper.Dialog,g=di.config.Lang});var E=$namespace().Util={},F=864e5;E.assert=function(a,b){if(!a)throw new Error(b||"Assert fail!")},E.preInit=function(a,b,c){c.primary=a.getType(),b.className=a.getTypes().join(" ")+b.className},E.ecuiCreate=function(a,b,c,d){var e=a.types[0];return d=d||{},!d.primary&&(d.primary=e),b.className=[a.TYPES,d.primary,b.className].join(" "),z(a,b,c,d)},E.disposeInnerControl=function(a){for(var b in a)/_u\w+/.test(b)&&a[b]&&E.ecuiDispose(a[b])},E.validDimSel=function(a){var b,c,d,e;if(!n(a))return!1;for(e=a.split("|"),b=0;b<e.length;b++){if(!n(c=e[b]))return!1;if(d=c.split(":"),!n(d[0])||!n(d[1]))return!1}return!0},E.completeDimSel=function(a,b){if(!n(a))return!1;var c,d=E.parseDimSel(a);for(var e in d)c=b[e].datasource.rootNode,!c||d[e]&&0!=d[e].length||(d[e]=[c.dimNodeId]);return E.stringifyDimSel(d)},E.parseDimSel=function(a){var b,c,d,e,f={};if(!n(a))return null;for(e=a.split("|"),b=0;b<e.length;b++)n(c=e[b])&&(d=c.split(":"),n(d[0])&&(f[d[0]]=n(d[1])?d[1].split(","):[]));return f},E.stringifyDimSel=function(a){var b,c=[];if(!a)return"";for(b in a)c.push(b+":"+(a[b]||[]).join(","));return c.join("|")},E.getDomAttrJSON=function(a,b){var c=a.getAttribute(b);return c?new Function("return ("+c+");")():void 0},E.sameDimSel=function(a,b,c){var d,e,f,g=E.parseDimSel(a),h=E.parseDimSel(b);for(d in c)if(q(e=g[d],null,"<",!1),q(f=h[d],null,"<",!1),e.join(",")!==f.join(","))return!1;return!0},E.sameDimNodeIdArr=function(a,b){if(a=a||[],b=b||[],a.length!=b.length)return!1;q(a,null,"<",!1),q(b,null,"<",!1);for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},E.emptyTable=function(a,b){var c;m(b)&&(c=a.getEmptyText(),a.setEmptyText(b)),a.setData([]),m(c)&&a.setEmptyText(c)},E.waitingTable=function(a){E.emptyTable(a,g.WAITING_HTML)},E.getWrapSelected=function(a){for(var b=0;o=a.list[b];b++)if(o.value==a.selected)return o},E.logError=function(a){try{console&&console.log&&(console.log(a),null!=a.message&&console.log(a.message),null!=a.stack&&console.log(a.stack))}catch(a){}},E.formatTime=function(a,b,c){if(a)switch(x(a)||(a=new Date(a)),c=c||{},b){case"D":return r(a,"yyyy-MM-dd");case"W":return c.firstWeekDay?r(s(a),"yyyy-MM-dd"):r(a,"yyyy-MM-dd");case"M":return r(a,"yyyy-MM");case"Q":return a.getFullYear()+"-Q"+u(a);case"Y":return String(a.getFullYear());default:return""}},E.parseTime=function(a){if(!a)return null;if(x(a))return a;if(a.indexOf("-Q")>=0){var b=[0,0,3,6,9];return a=a.split("-Q"),new Date(parseInt(a[0],10),b[parseInt(a[1],10)],1)}return l(a)},E.parseTimeDef=function(a,b){var c=[],d=[];if(j(a)&&a.length){var e=a[0];c=j(e)?a:[a];for(var f,g=0;g<c.length;g++)j(f=c[g])?d.push(E.parseTimeUnitDef(f,b)):E.assert("TimeDef illegal: "+a)}return d},E.parseTimeUnitDef=function(a,b){if(!a||!a.length)return null;var c={},d=a[0],e=a[1],f=a[2];if(c.start=E.parseTimeOffset(b[0],d),c.end=E.parseTimeOffset(b[1],e),d&&e||!f)e||f||(c.end=c.start);else{var g,h;d?(g="start",h="end"):(g="end",h="start"),c[h]=E.parseTimeOffset(c[g],f)}return c},E.parseTimeOffset=function(a,b){if(null==b)return null;if(!a)return a;k(a)&&(a=E.parseTime(a)),b=b.toUpperCase();var c=[a.getFullYear(),a.getMonth(),a.getDate()],d={Y:0,M:1,D:2};if(/^([-+]?)(\d+)([YMDWQ])([BE]?)$/.test(b)){var e=!D.$1||"+"==D.$1,f=parseInt(D.$2),g=D.$3,h=D.$4;"YMD".indexOf(g)>=0?c[d[g]]+=e?+f:-f:"W"==g?(f=7*f,c[d.D]+=e?+f:-f):"Q"==g&&(f=3*f,c[d.M]+=e?+f:-f);var i=new Date(c[0],c[1],c[2]);return h&&("Y"==g?"B"==h?(i.setMonth(0),i.setDate(1)):(i.setFullYear(i.getFullYear()+1),i.setMonth(0),i.setDate(1),i.setTime(i.getTime()-F)):"M"==g?"B"==h?i.setDate(1):(i.setMonth(i.getMonth()+1),i.setDate(1),i.setTime(i.getTime()-F)):"W"==g?i=("B"==h?s:t)(i):"Q"==g&&("B"==h?i=v(i):(i.setMonth(i.getMonth()+3),i=v(i),i.setTime(i.getTime()-F)))),i}return E.parseTime(b)},E.parseQuarter=function(a){var b=[0,0,3,6,9];return a=a.split("-Q"),new Date(parseInt(a[0],10),b[parseInt(a[1],10)],1)},E.jsonStringify=function(a){return a?A(a):""},E.ecuiTriggerEvent=function(a,b,c,d){return ecui?ecui.triggerEvent(a,b,c,d):void 0},E.ecuiAddEventListener=function(a,b,c,d){if(ecui){var e=d?function(){return ecui.removeEventListener(a,b,arguments.callee),c.apply(this,arguments)}:c;return ecui.addEventListener(a,b,e)}},E.ecuiDispose=function(a){ecui&&ecui.dispose(a)},E.isEcuiControl=function(a){return!!(e&&a instanceof e)},E.downloadByGet=function(a,b,c){b=b||new Function;var d=c?function(){f.alert(g.SAD_FACE+g.DOWNLOAD_FAIL,b)}:b,e=w(G);e||(e=C.createElement("iframe"),e.id=G,e.style.display="none",C.body.appendChild(e)),e.onload=function(){var a=e.contentWindow.document;("complete"==a.readyState||"loaded"==a.readyState)&&d(),e.onload=null},e.src=a},E.downloadByPost=function(a,b,c){b=b||new Function;var d=w(G);d||(d=C.createElement("iframe"),d.id=G,d.style.display="none",C.body.appendChild(d),d.contentWindow.name=H);var e=w(I);e?e.innerHTML="":(e=C.createElement("form"),e.id=I,e.method="POST",e.target=H,e.style.display="none",C.body.appendChild(e));var f=a.split("?"),g=f[1],h="?_rbk=";if(g){g=g.split("&");for(var i,j,k=0;k<g.length;k++)g[k]&&(i=g[k].split("="),i[0]&&(j=document.createElement("INPUT"),j.type="hidden",j.value=p(i[1]),j.name=p(i[0]),e.appendChild(j),"_rbk"===i[0]&&(h+=i[1])))}e.action=f[0]+h,e.submit()},E.download=E.downloadByPost,E.targetBlank=function(a){var b=document,c=b.body,d=b.createElement("a");d.style.display="none",d.href=a||"#",d.target="_blank",c.appendChild(d),d.click(),c.removeChild(d)},E.foreachDo=function(b,c){a.call(this,!1,b,c,y.call(arguments,2))},E.foreachDoOri=function(b,c){a.call(this,!0,b,c,y.call(arguments,2))};var G=String("download-iframe-"+Math.round(1e7*Math.random())),H=G+"NAME",I=String("download-form-"+Math.round(1e7*Math.random()));E.evalJsonLogic=function(a,b){a&&b||d(a);var c,e,f;if(!j(a))return b(a);if(a.length<2&&d(a),c=a[0],"and"==c){for(f=!0,e=1;e<a.length;e++)f=f&&E.evalJsonLogic(a[e],b);return f}if("or"==c){for(f=!1,e=1;e<a.length;e++)f=f||E.evalJsonLogic(a[e],b);return f}return"not"==c?!E.evalJsonLogic(a[e],b):(d(a),void 0)},E.getScrollLeft=function(a){a=a||window;var b=a.document;return a.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft},E.getScrollTop=function(a){a=a||window;var b=a.document;return a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop},E.getViewWidth=function(a){a=a||window;var b=a.document,c="BackCompat"==b.compatMode?b.body:b.documentElement;return c.clientWidth},E.getViewHeight=function(a){a=a||window;var b=a.document,c="BackCompat"==b.compatMode?b.body:b.documentElement;return c.clientHeight},E.getWidth=function(a){a=a||window;var b=a.document,c=b.body,d=b.documentElement,e="BackCompat"==b.compatMode?c:b.documentElement;return Math.max(d.scrollWidth,c.scrollWidth,e.clientWidth)},E.getHeight=function(a){a=a||window;var b=a.document,c=b.body,d=b.documentElement,e="BackCompat"==b.compatMode?c:b.documentElement;return Math.max(d.scrollHeight,c.scrollHeight,e.clientHeight)},E.parseFileName=function(a){if(!a)return{};var b,c,d=a.lastIndexOf(".");return d>=0?(b=a.slice(0,d),c=a.slice(d+1)):b=a,{fileName:b,extName:c,fullName:a}},E.ref=function(a,d,e){var f;return i(f=a[b(d,"set")])?f.call(a,e):m(f=c(d,e))&&(a[f]=e),e},E.getModel=function(a,c){var d;return i(d=a[b(c,"get")])?d.call(a):a[b(c,"_m")]},E.strToBoolean=function(a){return"true"==a}}(),function(){xutil.ajax,xutil.lang.isFunction,di.config.AJAX,di.config.Lang,di.helper.Dialog.alert,di.helper.Dialog.confirm,di.helper.Dialog.waitingPrompt,di.helper.Dialog.hidePrompt}(),function(){di.config.Dict}(),function(){di.config.Lang}(),function(){var a=di.config.URL;a.addURL("CONSOLE_FRAME_INIT","/xxx/xxxxxxxxx1.action")}(),function(){di.helper.Dialog}(),function(){di.helper.Formatter}(),function(){function a(a,c){for(var d,e,f=i(c.selected)?c.selected:function(a){return a[c.valueAttr]==c.selected},g=c.filter?c.filter:function(){return!0},h=c.first,j=(h?[h]:[]).concat(c.datasource),l=0;l<j.length;l++)(d=j[l])&&(e=f(d)?' selected="selected" ':"",(d===h||g(d))&&a.push("<option ",e,' data-simple-select="',k(b(d,c.valueAttr)),'" ',' data-simple-select-extra="',k(b(d,c.extraAttr)),'" ',">",k(b(d,c.textAttr)),"</option>"));return a}function b(a,b){var c=i(b)?b(a):a[b];return null==c?null:c}var c,d=di.helper.Util,e=xutil.dom.q,f=xutil.dom.addClass,g=xutil.dom.removeClass,h=xutil.lang.isArray,i=xutil.lang.isFunction,j=xutil.lang.isString,k=xutil.string.encodeHTML;$link(function(){c=di.config.Dict}),d.cmptCreate4Console=function(a,b,c){var d,e,f;for(e=0;f=b[e];e++)a.addEntity(f,"DEF"),f=a.getEntity(f.id,"DEF"),"COMPONENT"===f.clzType&&(d=f);return d=a.createIns(d,{tplMode:"SELF",commonParamGetter:c})},d.cmptSync4Console=function(a,b,c){var d=a.createDIEvent("editorfakeevent-query");a.setInteractMemo(b,"diEvent",d),b.sync(c),a.setInteractMemo(a,"diEvent",void 0)},d.forEachCSSFlag=function(a,b,d,f){b=b||c.FLAG_CSS,!h(b)&&(b=[b]),f=f||"";for(var g,i=0;g=b[i];i++)for(var j,k=e(f+g,a),l=0;j=k[l];l++)d(j,g)},d.forEachDom=function(a,b){for(var a,c=a.getElementsByTagName("*"),d=0;a=c[d];d++)b(a)},d.addConsoleCSS=function(a){d.forEachCSSFlag(a,null,function(a,b){if(f(a,"c-"+b),"di-o_o-item"==b){var d=a.getAttribute(c.DI_ATTR);d?f(a,"c-di-o_o-cond-vui"):a.setAttribute("contentEditable",!0)}})},d.domData=function(a,b,c){if(null==c){if(!a._data)return;return a._data[b]}var d=a._data||(a._data={});d[b]=c},d.clearConsoleCSS=function(a){j(a)&&(l.innerHTML=a,a=l);for(var b,c=a.getElementsByTagName("*"),d=0;b=c[d];d++){for(var e,f=b.className.split(/\s+/).sort(),h=[],i=0;i<f.length;i++)(e=f[i])&&e.indexOf("c-di-o_o-")>=0&&h.push(e);g(b,h.join(" ")),b.removeAttribute("contentEditable"),delete b._data}return a.innerHTML};var l=document.createElement("div");d.indexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1};var m=d.select={};m.create=function(b,c){var d=c.textAttr||"text",e=c.valueAttr||"value",f=c.extraAttr||"extra";b.push('<select class="',c.css||"",'" ');for(var g in c.attr)b.push(" ",g,'="',k(c.attr[g]),'" ');return b.push(' data-text-attr="',k(d),'" '),b.push(' data-value-attr="',k(e),'" '),b.push(' data-extra-attr="',k(f),'" '),b.push(">"),a(b,c),b.push("</select>"),b},m.createOptions=function(b,c){var d=[];a(d,c),b.innerHTML=d.join("")},m.getSelected=function(a,b){var c,d=a.options[a.selectedIndex],e=a.getAttribute("data-text-attr"),f=a.getAttribute("data-value-attr"),g=a.getAttribute("data-extra-attr");if(d){c={index:a.selectedIndex},c[e]=d.innerHTML,c[g]=d.getAttribute("data-simple-select-extra");var h=c[f]=d.getAttribute("data-simple-select");if(b)for(var i,j=0;j<b.length;j++)if((i=b[j])&&i[f]==h)return i}return c}}(),$namespace("di.shared.arg"),function(){var a=xutil.lang.isObject,b=xutil.object.extend,c=xutil.object.getByPath,d=xutil.object.setByPath,e=xutil.lang.isArray,f=di.helper.Util.formatTime,g=di.helper.Util.parseTimeUnitDef;xutil.object.assign;var h,i=xutil.object.merge;$link(function(){h=di.shared.model.DIFactory}),$namespace().ArgHandlerFactory=function(){if(arguments.length<1)return null;for(var a,b=[],c=0;c<arguments.length;c++)if(a=arguments[c],b.push([a[0],j[a[1]],a.slice(2)]),!b[b.length-1][1])return null;return function(a){for(var c,d=0;c=b[d];d++)c[1].apply(c[0],[a].concat(c[2]));return a}};var j={};j.clear=function(a,b){if(null!=b)a[b]=void 0;else for(var c=0;c<a.length;c++)a[c]=void 0},j.attr=function(b,e,f,g,h){g=String(g||0);var i=b[g];d(f?g+"."+f:g,a(i)?c(e,i,h):i,b,h)},j.attrArr=function(b,d,f,g,h){var i=b[0],k=a(i)?d?c(d,i,h):i:null;if(e(k))for(var l=0;l<k.length;l++)j.attr(k,f,g,l,h)},j.setData=function(a,b,c){a[c||0]=b},j.mergeData=function(a,b,c){i(a[c||0],b)},j.getValue=function(e,f,g,i,j){var k=h().getEntity(f,"INS"),l=[];if(k&&k.$di){var m=k.$di("getValue");d(i?"0."+i:"0",a(m)?c(g,m,j):m,l,j),a(l[0])?b(e[0]||(e[0]={}),l[0]):e[0]=l[0]}},j.sourceTemplateId=function(b,c){var d=h().getEntity(c,"INS");d&&d.$di&&(a(b[0])||(b[0]={}),b[0].sourceTemplateId=d.$di("getReportTemplateId"))},j.dimTagsList=function(b,c){var d=h().getEntity(c,"INS");d&&d.$di&&(a(b[0])||(b[0]={}),b[0].dimTagsList=d.$di("getDimTagsList"))},j.patchTime=function(c,d,e){var h=c[0];if(a(h)&&a(h=h[d])){var i=h.granularity||"D";h=g(e[i],[h.start,h.end,h.range]),h.start=f(h.start,i),h.end=f(h.end,i),b(c[0][d],h)}}}(),$namespace("di.shared.vui"),function(){function a(a){(this._eMain=a.el).style.display="none"}var b=xutil.object.inheritsObject;xutil.object.extend,xutil.string.encodeHTML;var c=xui.XObject,d=$namespace().HiddenInput=b(c,a),e=d.prototype;e.setData=function(a){this._oData=a},e.getValue=function(){return(this._oData||{}).value}}(),$namespace("di.shared.vui"),function(){function a(a){this._eMain=a.el,this._eMain.innerHTML=""}function b(a){a=a||[];for(var b=this._eMain,c=[],d=0,e=a.length;e>d;d++)c.push('<label class="">','<input type="checkbox" value="',a[d].value,'" />','<span class="">',a[d].text,"</span>","</label>");b.innerHTML=c.join("")}var c=xutil.object.inheritsObject,d=xui.XObject,e=$namespace().MultiCheckbox=c(d,a),f=e.prototype;f.setData=function(a){b.call(this,a.datasource||[])},f.getValue=function(){for(var a,b=this._eMain,c=b.getElementsByTagName("input"),d=[],e=0;a=c[e];e++)a.checked&&d.push(a.value);return d},f.setValue=function(a){a=a||[];for(var b,c=this._eMain,d=c.getElementsByTagName("input"),e=0;b=d[e];e++){b.checked=!1;for(var f=0,g=a.length;g>f;f++)if(b.value==String(a[f])){b.checked=!0;break}}}}(),$namespace("di.shared.vui"),function(){function a(a){var b=this._eMain=a.el;c(b,"offline-download");var h,i;h=document.createElement("div"),b.appendChild(h),this._uBtn=d(e,h,null,{text:a.text||"ç¦»çº¿ä¸è½½",skin:a.skin}),this._uDialog||(h=document.createElement("div"),i=["<label>ç¦»çº¿ä¸è½½</label>",'<span class="offline-download-head">'+(a.headText||"è¯·è¾å¥é®ç®±")+"</span>",'<input type="input" class="offline-download-input"/>',"<div></div>","<div></div>"],h.innerHTML=i.join(""),i=g(h),this._eInput=i[2],this._uDialog=d(f,h,null,{hide:!0}),this._uConfirmBtn=d(e,i[3],null,{text:a.confirmText||"ç¡®å®",skin:a.skin}),this._uCancelBtn=d(e,i[4],null,{text:a.cancelText||"åæ¶",skin:a.skin}),document.body.appendChild(h))}var b=xutil.object.inheritsObject,c=xutil.dom.addClass;xutil.object.extend,xutil.string.encodeHTML;var d=di.helper.Util.ecuiCreate;xutil.lang.isObject,xutil.lang.isArray,xutil.string.template;var e,f,g=xutil.dom.children,h=xutil.dom.remove,i=xutil.object.getByPath,j=di.config.Dict,k=xui.XObject;$link(function(){e=i("ecui.ui.HButton"),f=i("ecui.ui.Form")});var l=$namespace().OfflineDownload=b(k,a),m=l.prototype;m.init=function(){var a=this;this._uBtn.onclick=function(){a.$clear(),a._uDialog.center(),a._uDialog.showModal(j.DEFAULT_MASK_OPACITY)},this._uConfirmBtn.onclick=function(){a.notify("confirm",[a._eInput.value]),a._uDialog.hide()},this._uCancelBtn.onclick=function(){a._uDialog.hide()},this._uDialog.init(),this._uBtn.init(),this._uConfirmBtn.init(),this._uCancelBtn.init()},m.$clear=function(){this._eInput.value=""},m.getValue=function(){return{email:this._eInput.value}},m.dispose=function(){if(this._uDialog){var a=this._uDialog.getOuter();this._uDialog.dispose(),this._uBtn.dispose(),this._uConfirmBtn.dispose(),this._uCancelBtn.dispose(),h(a)}}}(),$namespace("di.shared.model"),function(){function a(){this._multiSelectData}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL,c=di.helper.Util;xutil.object.extend,xutil.object.getByPath;var d=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.assign,xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString;var e=xutil.url.textParam;xutil.url.wrapArrayParam,Array.prototype.push,c.download,c.logError;var f=xui.XDatasource,g=$namespace().MultiDimSelectModel=d(f,a),h=g.prototype,i={MULTISELECT:{RTPL_OLAP_TABLE:b.fn("DIM_MULTISELECT_TABLE"),RTPL_OLAP_CHART:b.fn("DIM_MULTISELECT_CHART")},SAVE:{RTPL_OLAP_TABLE:b.fn("DIM_SELECT_SAVE_TABLE"),RTPL_OLAP_CHART:b.fn("DIM_SELECT_SAVE_CHART")}};h.url=function(a){return i[a.datasourceId][a.args.reportType]()},h.param=new f.Set({TREE:function(a){var b=this.$createBaseParam(a);return"TIME"==a.args.dimMode&&b.push("isTimeDim=true"),b.join("&")},MULTISELECT:function(a){var b=this.$createBaseParam(a);return"TIME"==a.args.dimMode&&b.push("isTimeDim=true"),b.join("&")},SAVE:function(a){var b=a.args,c=this.$createBaseParam(a);if(c.push("selectedLevel="+e(b.selectedLevel)),b.selectedDims)for(var d=0;d<b.selectedDims.length;d++)c.push("selectedNodes="+e(b.selectedDims[d]));return c.join("&")}}),h.parse=new f.Set({MULTISELECT:function(a){this._multiSelectData=a.dimValue}}),h.getMultiSelectData=function(){return this._multiSelectData},h.$createBaseParam=function(a){var b=a.args,c=[];return b.commonParamGetter&&c.push(b.commonParamGetter()),c.push("dimSelectName="+e(b.uniqName)),c.push("from="+e(b.selLineName)),c}}(),$namespace("di.shared.ui"),function(){function a(a){b.call(this,a),c.call(this,a),this.init()}function b(){this._mDimSelectModel=new MULTIDIM_SELECT_MODEL}function c(){var a=this._eMain=document.createElement("div");m(a,"di-dim-mutliselect-panel"),document.body.appendChild(a),a.innerHTML=z,this._uForm=k(r,l("q-di-form",a)[0],null,{hide:!0}),this._uSubmitBtn=k(s,l("q-di-submit",a)[0]),this._uCancelBtn=k(s,l("q-di-cancel",a)[0])}function d(a,b){var c=l("q-di-mutlidim",b)[0];c.innerHTML="";for(var d=0;d<a.children.length;d++){var g=a.children[d],h=document.createElement("INPUT");h.type="checkbox",h.name="selectedDims",h.value=g.name,m(h,"di-mutlidim-checkbox"),h.onclick=p(function(a){f(a,b)},this,h),1==g.selected&&(h.checked="checked");var i=document.createElement("span");i.innerHTML=" "+g.caption;var j=document.createElement("div");j.appendChild(h),j.appendChild(i),c.appendChild(j)}e(b)}function e(a){var b=l("di-mutlidim-checkbox",a)[0],c=l("di-mutlidim-checkbox",a);if(1==b.checked)for(var d=0;d<c.length;d++)c[d].checked=!0;else{for(var e=!0,d=1;d<c.length;d++)0==c[d].checked&&(e=!1);1==e&&(b.checked=!0)}}function f(a,b){var c=l("di-mutlidim-checkbox",b)[0],d=l("di-mutlidim-checkbox",b),e=a.checked;if(a.value==c.value)for(var f=0;f<d.length;f++)d[f].checked=e;else if(0==e)c.checked=!1;else{for(var g=!0,f=1;f<d.length;f++)0==d[f].checked&&(g=!1);1==g&&(c.checked=!0)}}di.config.URL;var g=di.helper.Dialog,h=di.helper.Util,i=di.config.Dict,j=di.config.Lang,k=h.ecuiCreate;xutil.string.template;var l=xutil.dom.q,m=xutil.dom.addClass,n=xutil.object.createSingleton;xutil.lang.hasValueNotBlank;var o=xutil.object.extend;xutil.object.assign,xutil.string.textLength,xutil.string.textSubstr,xutil.date.stringToDate,xutil.string.trim;var p=xutil.fn.bind,q=xui.XView,r=ecui.ui.Form,s=ecui.ui.Button;ecui.ui.IndTree;var t=di.helper.Dialog.alert;$link(function(){MULTIDIM_SELECT_MODEL=di.shared.model.MultiDimSelectModel});var u=$namespace().MultiDimSelectPanel=n(q,a),v=u.prototype,w=!1,x=30,y=300,z=['<div class="q-di-form">',"<label>ç»´åº¦éæ©</label>",'<div class="q-di-dimlimited"></div>','<div class="q-di-level"></div>','<div class="di-dim-mutliselect-tree">','<div class="q-di-mutlidim"></div>',"</div>","<div>",'<div class="di-dim-select-btn">','<div class="ui-button-g ui-button q-di-submit">ç¡®å®</div>','<div class="ui-button q-di-cancel">åæ¶</div>',"</div>","<div>","</div>"].join("");
v.init=function(){this._mDimSelectModel.attach(["sync.preprocess.MULTISELECT",this.disable,this],["sync.result.MULTISELECT",this.$handleTreeSuccess,this],["sync.error.MULTISELECT",this.$handleTreeError,this],["sync.complete.MULTISELECT",this.enable,this]),this._mDimSelectModel.attach(["sync.preprocess.SAVE",this.disable,this],["sync.result.SAVE",this.$handleSubmitSuccess,this],["sync.error.SAVE",this.$handleSubmitError,this],["sync.complete.SAVE",this.enable,this]),this._uSubmitBtn.onclick=p(this.$submitHandler,this),this._uCancelBtn.onclick=p(this.$cancelHandler,this),this._uForm.init(),this._uSubmitBtn.init(),this._uCancelBtn.init(),this.$resetInput()},v.dispose=function(){u.superClass.dispose.call(this)},v.open=function(a,b){this._sMode=a,this._oOptions=b,this.$resetInput();var c=l("q-di-level",this._eMain)[0];c.innerHTML="";var d=l("q-di-mutlidim",this._eMain)[0];d.innerHTML="",this._mDimSelectModel.sync({datasourceId:"MULTISELECT",args:this._oOptions})},v.$resetInput=function(){this.$clearPrompt()},v.$clearPrompt=function(){},v.enable=function(){this._bDisabled&&"EDIT"==this._sMode&&(this._uSubmitBtn.enable(),this._uCancelBtn.enable()),u.superClass.enable.call(this)},v.disable=function(){this._bDisabled||(this._uSubmitBtn.disable(),this._uCancelBtn.disable()),u.superClass.disable.call(this)},v.$submitHandler=function(){for(var a,b=l("di-level-radio",this._eMain),c=l("di-mutlidim-checkbox",this._eMain),d=[],e=0;e<b.length;e++)1==b[e].checked&&(a=b[e].value);for(var f=0;f<c.length;f++)1==c[f].checked&&d.push(c[f].value);if(0==d.length)return t("è¯·è³å°éä¸­ä¸é¡¹ç»´åº¦å¼"),void 0;var g=!1;w&&0==d[0].indexOf("all$")&&d.length>x+1?g=!0:w&&d[0].indexOf("all$")<0&&d.length>x&&(g=!0);var h=!1;return 0==d[0].indexOf("all$")&&d.length>y+1?h=!0:d[0].indexOf("all$")<0&&d.length>y&&(h=!0),g?(t("è¯¥éå¶ç»´åº¦ä¸è½éä¸­å¤äº"+x+"é¡¹ï¼"),void 0):h?(t("è¯¥ç»´åº¦ä¸è½éä¸­å¤äº"+y+"é¡¹ï¼"),void 0):(this._mDimSelectModel.sync({datasourceId:"SAVE",args:o({selectedLevel:a,selectedDims:d},this._oOptions)}),void 0)},v.$cancelHandler=function(){this._uForm.hide()},v.$handleTreeSuccess=function(){try{var a=this._mDimSelectModel,b=l("q-di-dimlimited",this._eMain)[0];b.innerHTML="",this._uForm.showModal(i.DEFAULT_MASK_OPACITY);for(var c,e=l("q-di-level",this._eMain)[0],f=a.getMultiSelectData(),h=0;h<f.length;h++){f[h].needLimit&&0==h?(b.innerHTML="ç»´å¼ä¸è¦éä¸­å¤äº"+x+"é¡¹",w=!0):f[h].needLimit||0!=h||(w=!1);var j=document.createElement("INPUT");j.type="radio",j.name="level",j.value=f[h].name,m(j,"di-level-radio");var k=document.createElement("span");k.innerHTML=" "+f[h].caption+" ",e.appendChild(j),e.appendChild(k),1==f[h].selected&&(c=f[h],j.checked="checked"),j.onclick=p(function(a){l("q-di-mutlidim",this._eMain)[0],d(a,this._eMain)},this,f[h])}d(c,this._eMain),this._uForm.center(),g.adjustDialogPosition(this._uForm.getMain())}catch(n){this.$handleTreeError()}},v.$handleTreeError=function(){var a=this;g.alert(j.GET_DIM_TREE_ERROR,function(){a._uForm.hide()})},v.$handleSubmitSuccess=function(){this._uForm.hide(),this.notify("submit.close"),this._oOptions.onconfirm()},v.$handleSubmitError=function(){g.alert(j.SAVE_FAILURE)}}(),$namespace("di.shared.model"),function(){function a(){this._oHierarchyRoot,this._oCurrDimTree,this._sDimName,this._sSchemaName,this._sDimType,this._oLevelMap}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL,c=di.helper.Util;xutil.object.extend,xutil.object.getByPath;var d=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.assign,xutil.lang.hasValue,xutil.date.stringToDate;var e=xutil.date.dateToString,f=xutil.url.textParam,g=xutil.url.wrapArrayParam,h=Array.prototype.push;c.download;var i=c.logError,j=xui.XDatasource,k=$namespace().DimSelectModel=d(j,a),l=k.prototype,m={TREE:{RTPL_OLAP_TABLE:b.fn("DIM_TREE_TABLE"),RTPL_OLAP_CHART:b.fn("DIM_TREE_CHART")},SAVE:{RTPL_OLAP_TABLE:b.fn("DIM_SELECT_SAVE_TABLE"),RTPL_OLAP_CHART:b.fn("DIM_SELECT_SAVE_CHART")}};l.url=function(a){return m[a.datasourceId][a.args.reportType]()},l.param=new j.Set({TREE:function(a){var b=this.$createBaseParam(a);return"TIME"==a.args.dimMode&&b.push("isTimeDim=true"),b.join("&")},SAVE:function(a){var b=a.args,c=this.$createBaseParam(a);if(c.push("hierarchyName="+f(this._oCurrDimTree.name)),h.apply(c,g(b.treeSelected,"selectedNodes")),h.apply(c,g(b.levelSelected,"levelUniqueNames")),"TIME"==b.dimMode){var d=b.timeSelect.start?e(b.timeSelect.start):"",i=b.timeSelect.end?e(b.timeSelect.end):d;c.push("startDay="+d),c.push("endDay="+i)}return c.join("&")}}),l.parse=new j.Set({TREE:function(a){try{a.timeType,this._oTimeSelect=a.timeSelects||{};var b=a.dimTree,c=this._oHierarchyRoot=b.dimTree;this._oCurrDimTree=c.children[0],this._oLevelMap=b.hierarchyLevelUniqueNames,this._sDimName=b.dimName,this._sSchemaName=b.schemaName,this._sDimType=b.isTimeDim?"TIME":"NORMAL"}catch(d){i(d),this.$goError()}}}),l.getCurrDimTree=function(){return this._oCurrDimTree},l.getTimeSelect=function(){return this._oTimeSelect},l.getCurrLevelList=function(){return this._oLevelMap&&this._oCurrDimTree?this._oLevelMap[this._oCurrDimTree.name]:null},l.$createBaseParam=function(a){var b=a.args,c=[];return b.commonParamGetter&&c.push(b.commonParamGetter()),c.push("dimSelectName="+f(b.uniqName)),c.push("from="+f(b.selLineName)),c}}(),$namespace("di.shared.ui"),function(){function a(a){b.call(this,a),c.call(this,a),this.init()}function b(){this._mDimSelectModel=new n}function c(){var a=this._eMain=document.createElement("div");j(a,"di-dim-select-panel"),document.body.appendChild(a),a.innerHTML=w,this._uForm=h(q,i("q-di-form",a)[0],null,{hide:!0}),this._uDimTree=h(s,i("q-di-tree",a)[0]),this._uCalendar=h(t,i("q-calendar",a)[0],null,{mode:"RANGE",viewMode:"FIX",shiftBtnDisabled:!0}),this._uSubmitBtn=h(r,i("q-di-submit",a)[0]),this._uCancelBtn=h(r,i("q-di-cancel",a)[0])}di.config.URL;var d=di.helper.Dialog,e=di.helper.Util,f=di.config.Dict,g=di.config.Lang,h=e.ecuiCreate;xutil.string.template;var i=xutil.dom.q,j=xutil.dom.addClass,k=xutil.object.createSingleton;xutil.lang.hasValueNotBlank;var l=xutil.object.extend;xutil.object.assign,xutil.string.textLength,xutil.string.textSubstr;var m=xutil.date.stringToDate;xutil.string.trim;var n,o=xutil.fn.bind,p=xui.XView,q=ecui.ui.Form,r=ecui.ui.Button,s=ecui.ui.IndTree,t=ecui.ui.IstCalendar;$link(function(){n=di.shared.model.DimSelectModel});var u=$namespace().DimSelectPanel=k(p,a),v=u.prototype,w=['<div class="q-di-form">',"<label>ç»´åº¦éæ©</label>",'<div class="di-dim-select-tree">','<div class="q-di-tree"></div>',"</div>",'<div class="di-dim-select-cal">','<div class="q-calendar"></div>',"</div>","<div>",'<div class="di-dim-select-btn">','<div class="ui-button-g ui-button q-di-submit">ç¡®å®</div>','<div class="ui-button q-di-cancel">åæ¶</div>',"</div>","<div>","</div>"].join("");v.init=function(){this._mDimSelectModel.attach(["sync.preprocess.TREE",this.disable,this],["sync.result.TREE",this.$handleTreeSuccess,this],["sync.error.TREE",this.$handleTreeError,this],["sync.complete.TREE",this.enable,this]),this._mDimSelectModel.attach(["sync.preprocess.SAVE",this.disable,this],["sync.result.SAVE",this.$handleSubmitSuccess,this],["sync.error.SAVE",this.$handleSubmitError,this],["sync.complete.SAVE",this.enable,this]),this._uSubmitBtn.onclick=o(this.$submitHandler,this),this._uCancelBtn.onclick=o(this.$cancelHandler,this),this._uForm.init(),this._uDimTree.init(),this._uSubmitBtn.init(),this._uCancelBtn.init(),this._uCalendar.init(),this._uCalendar.hide(),this.$resetInput()},v.dispose=function(){u.superClass.dispose.call(this)},v.open=function(a,b){this._sMode=a,this._oOptions=b,this.$resetInput(),this._mDimSelectModel.sync({datasourceId:"TREE",args:this._oOptions})},v.$resetInput=function(){this.$clearPrompt()},v.$clearPrompt=function(){},v.enable=function(){this._bDisabled&&"EDIT"==this._sMode&&(this._uSubmitBtn.enable(),this._uCancelBtn.enable(),this._uDimTree.enable()),u.superClass.enable.call(this)},v.disable=function(){this._bDisabled||(this._uSubmitBtn.disable(),this._uCancelBtn.disable(),this._uDimTree.disable()),u.superClass.disable.call(this)},v.$submitHandler=function(){this._mDimSelectModel.sync({datasourceId:"SAVE",args:l({treeSelected:this._uDimTree.getSelected(),levelSelected:this._uDimTree.getLevelSelected(),timeSelect:{start:this._uCalendar.getDate(),end:this._uCalendar.getDateEnd()}},this._oOptions)})},v.$cancelHandler=function(){this._uForm.hide()},v.$handleTreeSuccess=function(){try{var a=this._mDimSelectModel;if(this._uForm.showModal(f.DEFAULT_MASK_OPACITY),this._uDimTree.render({tree:a.getCurrDimTree(),level:a.getCurrLevelList()}),"TIME"==this._oOptions.dimMode){this._uCalendar.show();var b=a.getTimeSelect();this._uCalendar.setDate(m(b.start),m(b.end))}else this._uCalendar.hide();this._uForm.center()}catch(c){this.$handleTreeError()}},v.$handleTreeError=function(){var a=this;d.alert(g.GET_DIM_TREE_ERROR,function(){a._uForm.hide()})},v.$handleSubmitSuccess=function(){this._uForm.hide(),this.notify("submit.close")},v.$handleSubmitError=function(){d.alert(g.SAVE_FAILURE)}}(),$namespace("di.shared.vui"),function(){function a(a){var b=this._eMain=a.el;d(b,"meta-condition"),b.innerHTML=t,this._sReportType=a.reportType||"RTPL_OLAP_TABLE",this._eSelLineArea=h("q-di-meta-tar",b)[0],this._oSelLineWrap=new l,this._oSelLineIdWrap={}}var b=di.helper.Util,c=xutil.object.inheritsObject,d=xutil.dom.addClass;xutil.object.extend;var e,f,g,h=xutil.dom.q,i=xutil.fn.bind,j=xutil.object.objKey,k=xutil.string.template,l=xutil.LinkedHashMap,m=xutil.object.getByPath,n=xutil.uid.getIncreasedUID,o=xui.XObject,p=b.ecuiCreate,q=b.ecuiDispose;$link(function(){e=m("ecui.ui.DroppableList"),f=m("ecui.ui.DraggableList"),g=di.shared.ui.MultiDimSelectPanel});var r=$namespace().OlapMetaDragger=c(o,a),s=r.prototype,t=['<div class="meta-condition-src">','<div class="meta-condition-ind">','<div class="meta-condition-head-text">éæ©ææ ï¼</div>','<div class="meta-condition-ind-line q-di-meta-ind"></div>',"</div>",'<div class="meta-condition-dim">','<div class="meta-condition-head-text">éæ©ç»´åº¦ï¼</div>','<div class="meta-condition-dim-line q-di-meta-dim"></div>',"</div>","</div>",'<div class="meta-condition-tar q-di-meta-tar">',"</div>"].join(""),u=['<div class="meta-condition-sel">','<div class="meta-condition-head-text">#{0}</div>','<div class="meta-condition-sel-line q-di-meta-sel-line"></div>',"</div>"].join(""),v={ROW:"ç»´åº¦ï¼",FILTER:"æ¡ä»¶ï¼",COLUMN:"ææ ï¼"};s.init=function(){},s.setData=function(a,b){this._oData=a||{},this._mModel=a.model,this._oRule=a.rule||{},!b&&this.render()},s.render=function(){var a=this,b=this._eMain,c=this._oData;this.$disposeInner();var d=["_DI_META_COND_IND"+n("DI_META_COND"),"_DI_META_COND_DIM"+n("DI_META_COND")],e=c.inddim;this._uIndSrc=p(f,h("q-di-meta-ind",b)[0],null,{id:d[0],disableSelected:!0,clazz:"IND"}),e.indList.foreach(function(b,c){a._uIndSrc.addItem({value:c.uniqName,text:c.caption,clazz:c.clazz,fixed:c.fixed,align:c.align})}),this._uDimSrc=p(f,h("q-di-meta-dim",b)[0],null,{id:d[1],disableSelected:!0,clazz:"DIM"}),e.dimList.foreach(function(b,c){a._uDimSrc.addItem({value:c.uniqName,text:c.caption,clazz:c.clazz,fixed:c.fixed,align:c.align,configBtn:c.isConfig})}),c.selLineDataWrap.foreach(function(b,e){a.$addSelLine(b,(c.selLineTitleDef||v)[b.split("_")[0]],d.join(","),e)}),this._uIndSrc.onchange=i(this.$handleSelLineChange,this),this._uDimSrc.onchange=i(this.$handleSelLineChange,this),this._oSelLineWrap.foreach(function(b,c){c.onitemclick=i(a.$handleItemClick,a,b),c.oncheckdroppable=i(a.$checkSelLineDroppable,a),c.oncheckdraggable=i(a.$checkSelLineDraggable,a)})},s.dispose=function(){this.$disposeInner(),this._eSelLineArea=null,r.superClass.dispose.call(this)},s.$disposeInner=function(){this._uIndSrc&&(q(this._uIndSrc),this._uIndSrc=null),this._uDimSrc&&(q(this._uDimSrc),this._uDimSrc=null),this._oSelLineWrap.foreach(function(a,b){q(b)}),this._eSelLineArea.innerHTML="",this._oSelLineWrap.cleanWithoutDefaultAttr(),this._oSelLineIdWrap={}},s.$addSelLine=function(a,b,c,d){if(null!=a){var f=this._oSelLineWrap,g=this._oSelLineIdWrap,i=document.createElement("div");i.innerHTML=k(u,b),this._eSelLineArea.appendChild(i=i.firstChild),f.addLast(p(e,h("q-di-meta-sel-line",i)[0],null,{id:g[a]="_DI_META_COND_SEL"+n("DI_META_COND"),source:c,name:a,configBtn:!1}),a);for(var j in g)j!=a&&f.get(j).addTarget(g[a]),f.get(a).addTarget(g[j]);this._uIndSrc.addTarget(g[a]),this._uDimSrc.addTarget(g[a]),d&&d.foreach(function(b,c){f.get(a).addItem({value:c.uniqName,text:c.caption,clazz:c.clazz,fixed:c.fixed,align:c.align,configBtn:c.isConfig})})}},s.refreshStatus=function(a){a&&(this._uIndSrc.setState({disable:a.indMetas.disabledMetaNames,selected:a.indMetas.selectedMetaNames}),this._uDimSrc.setState({disable:a.dimMetas.disabledMetaNames,selected:a.dimMetas.selectedMetaNames}))},s.enable=function(a){j.remove(this,a),0==j.size(this)&&this._bDisabled&&(this._uIndSrc&&this._uIndSrc.enable(),this._uDimSrc&&this._uDimSrc.enable(),this._oSelLineWrap.foreach(function(a,b){b.enable()}),r.superClass.enable.call(this))},s.disable=function(a){j.add(this,a),this._bDisabled||(this._uIndSrc&&this._uIndSrc.disable(),this._uDimSrc&&this._uDimSrc.disable(),this._oSelLineWrap.foreach(function(a,b){b.disable()})),r.superClass.disable.call(this)},s.$handleSelLineChange=function(a,b,c,d,e){var f={};this._oSelLineWrap.foreach(function(a,b){f[a]=b.getValue()});var g={from:e,to:c,toPosition:b,uniqNameList:[a.value]};this.notify("sellinechange",[f,g])},s.$handleItemClick=function(a,b,c){var d=this._mModel.getMetaItem(c.value);if(d&&"DIM"==d.clazz){var e=this,f={};this._oSelLineWrap.foreach(function(a,b){f[a]=b.getValue()}),g().open("EDIT",{uniqName:c.value,reportType:this._sReportType,selLineName:a,dimMode:d.isTimeDim?"TIME":"NORMAL",onconfirm:function(){e.notify("selitemchange",[f])},commonParamGetter:this._mModel._fCommonParamGetter})}},s.$findItemFromSelLine=function(a,b,c){function d(b,d){for(var f,g=d.getItems(),h=0;f=g[h];h++)f!=c&&f.getClazz()==a&&e.push({item:f,selLineName:b,index:h})}var e=[];return b?d(b,this._oSelLineWrap.get(b)):this._oSelLineWrap.foreach(d),e},s.$checkSelLineDroppable=function(a,b,c){if(this._oRule,"IND"==a.clazz&&c.indexOf("COL")<0)return!1;var d,e=this._oSelLineWrap.get(c),f=e.getItems();return(d=f[b])&&"LEFT"==d.getWrap().align||(d=f[b-1])&&"RIGHT"==d.getWrap().align?!1:!0},s.$checkSelLineDraggable=function(a,b,c){var d=this._oRule,e=this._oSelLineWrap.get(c);if(e.count()<=1){if(d.forbidColEmpty&&c.indexOf("COL")>=0)return!1;if(d.forbidRowEmpty&&c.indexOf("ROW")>=0)return!1}return a.fixed?!1:!0},s.$fixSelLineChange=function(a,b,c){if(null!=b){(a.calcColumnRefInd||[]).length>0;var d,e,f,g,h,i=this._oSelLineWrap.get(c),j=i.getItems()||[],k=j[b],l=j[b-1],m=j[b+1],n=l&&l.getWrap(),o=m&&m.getWrap(),p={IND:[],DIM:[],WALL:[]};if(n?p[n.clazz][0]=1:p.WALL[0]=1,o?p[o.clazz][1]=1:p.WALL[1]=1,"DIM"==a.clazz){if(p.IND.length>0&&p.WALL.length>0){for(d=this.$findItemFromSelLine("DIM",c,k),h=0;e=d[h];h++)this._oSelLineWrap.get(e.selLineName).remove(e.item);for(h=0;e=d[h];h++)i.add(e.item,p.IND[0]?i.count()-1:1)}else if(p.IND[0]&&p.IND[1]){for(f="DIM"==j[0].getClazz(),h=f?0:j.length-1;e=j[h];h+=f?1:-1)if("IND"==e.getClazz()){g=f?h:h+1;break}i.remove(k),i.add(k,b>=g?g:g-1)}}else if("IND"==a.clazz)if(p.DIM.length>0&&p.WALL.length>0){for(d=this.$findItemFromSelLine("IND",null,k),h=0;e=d[h];h++)this._oSelLineWrap.get(e.selLineName).remove(e.item);for(h=0;e=d[h];h++)i.add(e.item,p.DIM[0]?i.count()-1:1)}else if(p.DIM[0]&&p.DIM[1]){for(f=b>(j.length-1)/2,i.remove(k),i.add(k,f?i.count():0),d=this.$findItemFromSelLine("IND",null,k),h=0;e=d[h];h++)this._oSelLineWrap.get(e.selLineName).remove(e.item);for(h=0;e=d[h];h++)i.add(e.item,f?i.count()-1:1)}for(j=i.getItems()||[],h=0;e=j[h];h++)"IND"==e.getClazz}}}(),$namespace("di.shared.vui"),function(){function a(a){this._sels={},this._el=a.el}function b(a){var b=a.getValue();a.notify("change",[b])}function c(a,b,c,d,e){var f=document.createElement("DIV");f.innerHTML=o(t,{colName:e});var g=i(b,j("olap-meta-select-sel",f)[0],null,{primary:"ecui.ui.MultiSelect"==c?"ui-multi-select":"ui-select",optionSize:d.optionSize});return a.appendChild(f.firstChild),g.$mousewheel=new Function,g.$__ctrlClzPath=n(c),g.init(),g}function d(a){l(a)}function e(a,b,c){for(var d,e=0;d=b[e];e++){var f=String(null!=d.text?d.text:"");a.add(f,null,{value:d.value,prompt:f})}c.length&&a.setValue("ecui.ui.MultiSelect"==a.$__ctrlClzPath?c:c[0].value)}var f=di.helper.Util,g=di.config.Dict,h=xutil.object.inheritsObject;xutil.object.extend,xutil.string.encodeHTML;var i=f.ecuiCreate,j=xutil.dom.q,k=xutil.lang.isArray,l=f.ecuiDispose,m=xutil.fn.bind,n=xutil.string.trim,o=xutil.string.template,p=xutil.object.getByPath;ecui.ui.Select;var q=xui.XObject,r=$namespace().OlapMetaSelect=h(q,a),s=r.prototype,t=["<span>",'<span class="olap-meta-select-txt">#{colName}</span>','<span class="olap-meta-select-sel"></span>',"</span>"].join("");s.setData=function(a){if(a.renderType&&"liteOlap"==a.renderType)this.setLiteOlapData(a);else{var d=this,f=this._el,h=a.inddim.indList,i=[];h&&h.foreach(function(a,b){b.status!=g.META_STATUS.DISABLED&&i.push({text:b.caption,value:b.uniqName})}),this.$disposeInner();var j=p(a.ctrlClz),k=0;a.selLineDataWrap.foreach(function(a){0==a.indexOf("COLUMN")&&k++});var l=a.seriesCfg;a.selLineDataWrap.foreach(function(h,n){if(!(h.indexOf("COLUMN")<0)){var o=(l[h]||{}).type,p=1>=k?"":"ç³»åç»"+h.split("_")[1]+(o?"ï¼"+g.getGraphByType(o).text+"ï¼":""),q=c(f,j,a.ctrlClz,a,p);d._sels[h]=q,q.onchange=m(b,null,d,h);var r=[];n.foreach(function(a){r.push(a)}),e(q,i,r)}})}},s.setLiteOlapData=function(a){for(var d=this,f=this._el,g=a.indList,h=[],i=[],j=0;j<g.length;j++)if(h.push({text:g[j].caption,value:g[j].custIndName}),a.selectedInds.length>0)for(var k=0;k<a.selectedInds.length;k++)a.selectedInds[k]==g[j].custIndName&&i.push({text:g[j].caption,value:g[j].custIndName});else i.push({text:g[0].caption,value:g[0].custIndName});this.$disposeInner();var l=p(a.ctrlClz),n=c(f,l,a.ctrlClz,a,"");d._sels[a.selLineName]=n,n.onchange=m(b,null,d,name),e(n,h,i)},s.$disposeInner=function(){for(var a in this._sels)d(this._sels[a]);this._sels={},this._el.innerHTML=""},s.getValue=function(){var a={};for(var b in this._sels){var c,d=this._sels[b];if("ecui.ui.Select"==d.$__ctrlClzPath){var e=d.getSelected();c=e?e.getValue():null}else c=d.getValue();a[b]=k(c)?c:null==c?[]:[c]}return a}}(),$namespace("di.shared.vui"),function(){function a(a){var b=this._eMain=a.el;d(b,"vui-text-area"),this._sInitTpl=b.innerHTML,b.innerHTML="",this.setData(a)}function b(a,b){var c=this._eMain;c.innerHTML=f(b)?h(a,b):g(b)?h.apply(null,a,b):h.tpl||""}var c=xutil.object.inheritsObject,d=xutil.dom.addClass;xutil.object.extend;var e=xutil.string.encodeHTML,f=xutil.lang.isObject,g=xutil.lang.isArray,h=xutil.string.template,i=xui.XObject,j=$namespace().TextLabel=c(i,a),k=j.prototype;k.setData=function(a){var c=this._eMain;a=a||{},null!=a.html?c.innerHTML=a.html:null!=a.text?c.innerHTML=e(a.text):null!=a.tpl?b.call(this,a.tpl,a.args):null!=this._sInitTpl&&b.call(this,this._sInitTpl,a.args)}}(),$namespace("di.shared.adapter"),function(){function a(a,b){return e.ecuiCreate(a.clz,a.el,null,b)}function b(){e.ecuiDispose(this)}function c(a,b){return new a.clz(b)}function d(){this.dispose&&this.dispose()}var e=di.helper.Util;xutil.object.extend,$namespace().GeneralAdapterMethod={ecuiCreate:a,ecuiDispose:b,xuiCreate:c,xuiDispose:d}}(),$namespace("di.shared.model"),function(){var a=xutil.object.inheritsObject,b=xui.XDatasource,c=$namespace().AuthModel=a(b),d=c.prototype;d.getUserId=function(){}}(),$namespace("di.shared.model"),function(){var a=xutil.object.inheritsObject,b=xui.XDatasource,c=$namespace().DateModel=a(b),d=c.prototype;d.setData=function(a){this.businessData=!0,this._nInitServerTime=parseInt(a.serverTime)||(new Date).getTime(),this._nServerTimeOffset=this._nInitServerTime-(new Date).getTime()},d.now=function(){var a=new Date;return a.setTime(a.getTime()+this._nServerTimeOffset),a}}(),$namespace("di.shared.model"),function(){var a=xutil.object.inheritsObject,b=xui.XDatasource,c=$namespace().UserModel=a(b),d=c.prototype;d.getUserId=function(){}}(),$namespace("di.shared.model"),function(){function a(a){g.client.call(this),this._sBizKey=a.bizKey,this._mUserModel=new b,this._mAuthModel=new c,this._mDateModel=new d,this._mDateModel.setData(a),this._sGlobalType=a.globalType,"CONSOLE"==this._sGlobalType&&(this._mGlobalMenuManager=new e(a))}var b,c,d,e,f=xutil.object.inherits,g=xui.XDatasource;$link(function(){var a=di.shared;b=a.model.UserModel,c=a.model.AuthModel,d=a.model.DateModel,e=a.model.GlobalMenuManager});var h,i=$namespace().GlobalModel=function(b){if(h&&b)throw new Error("global model has been created");if(!h&&!b)throw new Error("global model creation needs options");return h||(h=new a(b)),h},j=f(i,g);j.getDateModel=function(){return this._mDateModel},j.getUserModel=function(){return this._mUserModel},j.getAuthModel=function(){return this._mAuthModel},j.getGlobalMenuManager=function(){return this._mGlobalMenuManager},j.getBizKey=function(){return this._sBizKey},f(a,i)}(),$namespace("di.shared.model"),function(){function a(a,b){function c(a,b){h.push(d(a)+"="+d(b))}var h=[];b=b||{};var i,k,l;for(i in a)if(k=a[i],!g(k)||"JSON"!=b.paramMode&&"JSON"!=k[j])if(f(k))for(l=0;l<k.length;l++)c(i,k[l]);else c(i,k);else delete k[j],c(i,e(k)),k[j]=1;return h.join("&")}var b=xutil.object.clone,c=xutil.object.extend,d=xutil.url.textParam,e=di.helper.Util.jsonStringify,f=xutil.lang.isArray,g=xutil.lang.isObject,h=$namespace().CommonParamFactory=function(a){this.externalParam=a&&b(a.externalParam)||{}},i=h.prototype,j="diF^_^jsonnosj^_^";h.markParamMode=function(a,b){return g(a)&&(b&&"NORMAL"!=b?a[j]=b:delete a[j]),a},i.getGetter=function(b){function d(b,d){if(d=d||{},"INIT"==g)g="FORBIDDEN";else if("FORBIDDEN"==g)throw new Error("ä¸ä¸ªsnippetä¸­çç¬¬ä¸ä¸ªè¯·æ±ä¸è½å¹¶åï¼è¯·è°æ´æ¥è¡¨è®¾è®¡ãå¨ç¬¬ä¸è¯·æ±è¿åååååºå¶ä»è¯·æ±ãå¯è½å¼èµ·è¿ä¸ªéè¯¯çæåµæ¯å¦æï¼å¤ä¸ªç»ä»¶ç¨åä¸ä¸ªreportTempalteIdï¼ä½å¹¶åå¾åè¯·æ±ãï¼æ³¨ï¼å¤ä¸ªç»ä»¶ç¨åä¸ä¸ªreportTempalteIdï¼è¿æ¬èº«æ¯åè®¸çï¼æ¯å¦metaï¼configåtableå±ç¨ï¼ä½æ¯ï¼ä»ä»¬æ¯ä½ä¸ºä¸ä¸ªå®ä¾ä½¿ç¨ï¼ç®åæªæ¯æå»ºç«å¤ä¸ªå®ä¾ãï¼");var h={};c(h,e,b),h.reportTemplateId=f;for(var i=d.excludes||[],j=0;j<i.length;j++)delete h[i[j]];return a(h,{paramMode:d.paramMode})}b=b||{};var e=this.externalParam,f=b.reportTemplateId,g="INIT";return d.update=function(a){var b=a&&a.reportTemplateId||null;b?(g="OPEN",f=b):"OPEN"!=g&&(g="INIT")},d.getReportTemplateId=function(){return f},d.markParamMode=h.markParamMode,d}}(),$namespace("di.shared.model"),function(){function a(a,d){var e={includes:b,excludes:b,equals:c};return mb(d.operator in e,"Illegal rule: "+d.operator),e[d.operator](a,d)}function b(a,b){if(!a)return!1;for(var c={includes:{},excludes:{}},d=0;d<(b.interactionIds||[]).length;d++)c[b.operator][b.interactionIds[d]]=1;for(var e,g,h=f(a,"interactPath"),i=0;e=h[h.length-i-1];i++){if(g=f(e,"interactionId"),g in c.excludes)return!1;c.includes[g]&&delete c.includes[g]}return db(c.includes)?!0:!1}function c(a,b){var c=m(b).call(null,[])[0];return c==b.value}function d(a,b){b=b||{};var c=function(a){return d(a,{interactPath:c[Fb].interactPath})},e=c[Fb]={eventName:a,dispatcherId:b.dispatcherId,interactionId:b.interactionId,interactPath:(b.interactPath||[]).slice()},f=e.interactPath;return b.isClone?f.splice(f.length-1,1,c):f.push(c),hb(c,Zb),c}function e(a){var b=a[Fb];return d(b.eventName,{dispatcherId:b.dispatcherId,interactionId:b.interactionId,interactPath:b.interactPath,isClone:!0})}function f(a,b){return a[Fb][b]}function g(a,b,c,d){if(d&&a[Fb][b]!==Y)throw new Error('è¯·ä½¿ç¨diEvent("newEventName")åå»ºæ°çdiEventå®ä¾');a[Fb][b]=c}function h(a){return bb(a)&&a[Fb]}function i(a,b){var c=a[Ib];c||(c=a[Ib]={}),c[b]={};var d=a[Hb];d||(d=a[Hb]={});var e=d[b]=a[b]||{},f=d[b+"s"]=a[b+"s"]||[];a[b]=null,a[b+"s"]=null,e[Jb]="DI_OPT_"+kb("DI_OPT");for(var g=0;g<f.length;g++)f[g][b][Jb]="DI_OPT_"+kb("DI_OPT")}function j(b,c,d,e){e=e||{};var f,g,h,i=b[Hb],j=b[Ib][c],k=i[c],l=i[c+"s"],m=e.diEvent,n=[],o=[],p=lb(a,null,m);for(n.push(k),o.push(k[Jb]),f=0;f<l.length;f++)(g=l[f])&&g.rule&&g[c]&&vb(g.rule,p)&&(n.push(g[c]),o.push(g[c][Jb]));var q=o.join(Kb);if(!(h=j[q]))for(h=j[q]={},f=0;f<n.length;f++)ib(h,n[f],{overwrite:!0,clone:"WITHOUT_ARRAY"});return null!=d&&(h=h[d]),e.clone?jb(h,{exclusion:[Ib]}):h}function k(a,b,c,d){a[Hb][b][c]=d,a[Ib][b]={}}function l(a,b,c,d){a=a||{},d=d||{};var e={},f={overwrite:!0,clone:"WITHOUT_ARRAY"},g=hb({},f,{exclusion:[Jb]}),h={diEvent:d.diEvent},i=x(a.clzKey)||{},k=j(i,"dataOpt",null,h),l=j(a,"dataOpt",null,h);if(ib(e,k,g),ib(e,b,f),ib(e,l,g),"DATA_SET"==c)ib(e,j(a,"dataSetOpt",null,h),g);else{if("DATA_INIT"!=c)throw new Error("error optType:"+c);ib(e,j(a,"dataInitOpt",null,h),g)}return d.forceData&&ib(e,d.forceData,f),e}function m(a,b){var c,d=[];(c=a.argHandler)&&d.push(c),(c=a.argHandlers)&&d.push.apply(d,c);for(var e=0;e<d.length;e++)d[e]=[b].concat(d[e]);return $.apply(null,d)}function n(){var a,b,c;xb=eb(Ob,$getNamespaceBase());for(a in V.CLZ)Pb.CLZ[a]=b=jb(V.CLZ[a]),b.clzPath&&(b.clz=eb(b.clzPath,$getNamespaceBase()))&&(c=b.clz.prototype,E(c,"protoInstalled",!0)||(D(c,"protoInstalled",1),c.$di=Sb.INS,o(c,["start","getDIFactory","setId","getId","getDef","isDeaf","setDeaf","setEl","getEl","disable","enable","diShow","diHide","setValueDisabled","isValueDisabled","addEventListener","dispatchEvent","registerEventAgent","getOpt","setOpt","getRef"],Tb),"COMPONENT"==b.clzType&&o(c,["setTplMode","getTplMode","vuiCreate","vuiGet","getValue","getEvent","getEventChannel","getCommonParamGetter","setCommonParamGetter","getReportTemplateId","linkBridge","syncViewDisable","funcAuthVerify"],Vb),"VCONTAINER"==b.clzType&&o(c,["vpartCreate","vpartGet"],Wb),"VUI"==b.clzType&&o(c,["setData","getValue","init","dispose"],Xb),"VPART"==b.clzType&&o(c,["dispose"],Yb),t(c,"getClzType",function(a){return function(){return a}}(b.clzType)))),b.adapterPath&&(b.adapter=eb(b.adapterPath,$getNamespaceBase())),i(b,"dataOpt"),i(b,"dataInitOpt"),i(b,"dataSetOpt"),i(b,"valueGetOpt"),i(b,"cfgOpt")}function o(a,b,c){for(var d,e=0;d=b[e];e++)t(a,d,c[d])}function p(a,b){b=b||{};var c={id:a.id,el:a.el,tplMode:b.tplMode||"FROM_SNIPPET",commonParamGetter:b.commonParamGetter};c[Gb]=hb({},c);var d=new a.clz(l(a,hb(b,c),"DATA_INIT"));return y(d),d}function q(a){var b=a.$di("getDef");if(b.interactions)for(var c,d=0;c=b.interactions[d];d++)r(a,c)}function r(a,b){a.$di("getDef");var c=[];b.event&&c.push(b.event),b.events&&tb.apply(c,b.events);for(var d,e,f=0;f<c.length;f++){if(d=c[f],e=d.triggerIns||A(d.rid,"INS"),mb("VUI"!=e.$di("getDef").clzType,"ä¸åè®¸çå¬vuiäºä»¶"),!e)return;e.$di("addEventListener",d.name,u(a,b.action.name),a,{interactionId:b.id,dispatcherId:d.rid,argHandler:m(b,a),once:b.once,viewDisableDef:b.viewDisable,rule:d.rule?["and",b.rule,d.rule]:b.rule})}}function s(a,b,c,d,e){e=e||{};var f=(A(a.$di("getId"),"DEF")||{})[b];return f?B(eb(c,f),d,{isClone:!0,flatReturn:e.flatReturn}):null}function t(a,b,c){var d=Bb+b;mb(!a.hasOwnProperty(d),"diMethod exists! "+b),a[d]=c}function u(a,b){return a[Bb+b]||a[b]}function v(a,b,c){var d=Cb+b;mb(!a.hasOwnProperty(d),"diAdapterMethod exists! "+b),a[d]=c}function w(a,b){return a[Cb+b]}function x(a){return Pb.CLZ[a]}function y(a,b){if("DEF"==b){if(a.clzType&&a.id){var c=x(a.clzKey||V.DEFAULT_CLZ_KEY[a.clzType]);a=ib(jb(c),a),a[Db]=!0,a.$di=Sb.DEF,i(a,"dataOpt"),i(a,"dataInitOpt"),i(a,"dataSetOpt"),i(a,"valueGetOpt"),i(a,"cfgOpt"),Pb[a.clzType+"_DEF"][a.id]=gb({},a)}}else Pb[a.$di("getClzType")][a.$di("getId")]=a;return yb}function z(a){a[Db]?delete Pb[a.clzType+"_DEF"][a.id]:delete Pb[a.$di("getClzType")][a.$di("getId")]}function A(a,b){for(var c,d,e,f="INS"==b?"":"_DEF",g=0;e=Nb[g];g++)if("CLZ"!=e&&(c=Pb[e+f][a]))return"INS"==b||"RAW"==b?c:(d=jb(c,{exclusion:[Ib]}),d[Ib]=c[Ib],d);return null}function B(a,b,c){c=c||{};var d,e,f=c.flatReturn?[]:null;if(ab(a))for(d=c.isClone?[]:a,e=0;e<a.length;e++)a.hasOwnProperty(e)&&(d[e]=B(a[e],b));else if(bb(a)){d=c.isClone?{}:a;for(e in a)a.hasOwnProperty(e)&&(d[e]=B(a[e],b))}else d=A(a,b),f&&f.push(d);return f?f:d}function C(a,b){a=_(a)?[a]:a||[];for(var c,d,e,f=0;c=a[f];f++){var e=Pb[c+"_DEF"],d=Pb[c];for(var g in e)e[g]&&b(e[g],d[g],g)}}function D(a,b,c){a&&null!=b&&(a[Ab+b]=c)}function E(a,b,c){if(a&&null!=b){var d=Ab+b;return!c||a.hasOwnProperty(d)?a[d]:null}return null}function F(a,b,c){c===Y&&(c={});var d=E(a,b);return d===Y&&D(a,b,d=c),d}function G(a){zb=a}function H(){return zb}function I(a,b){Qb[a]=b}function J(a){return Qb[a]}function K(a){return a.replace(/[\]\s]/g,"").replace(/\[/g,".")}function L(a,b){var c=a[Eb];c||(c=a[Eb]=new wb,c.eventNameMap={}),null!=b?c.eventNameMap[b]=1:c.eventNameAll=1}function M(a,b){var c=a[Eb];return c&&(c.eventNameAll||c.eventNameMap[b])?c:void 0}function N(a){if(!a&&!N)return null;a&&(N=a)||(a=N);var b=A(a,"DEF");return b}function O(a){if(a){Rb={};for(var b=0;b<(a||[]).length;b++)Rb[a[b]]=1}}function P(a,b,c){if(!a)return null;var d=Pb.COMPONENT,e=Pb.VCONTAINER;if("ALL"==a){a=[];for(g in d)a.push(g);for(g in e)a.push(g)}for(var f,g,h=0;h<a.length;h++)g=a[h],f=d[g]||e[g],f&&f.$di(b,c)}function Q(a,b,c){var d=E(a,"interactMemo");d||D(a,"interactMemo",d={}),c!==Y?d[b]=c:delete d[b]}function R(a,b){var c=E(a,"interactMemo");return c?c[b]:Y}function S(a){var b,c,d,e=rb.call(a);if("[object Date]"==e)b=new Date(a.getTime());else if("[object Function]"==e||"[object RegExp]"==e)b=a;else if((d="[object Array]"==e)||a===Object(a)){b=d?[]:{},!d&&T(a);for(c in a)a.hasOwnProperty(c)&&(b[c]=S(a[c]))}else b=a;return b}function T(a){var b=!0;if("[object Object]"==Object.prototype.toString.call(a)&&"isPrototypeOf"in a||(b=!1),!a.constructor||sb.call(a,"constructor")||sb.call(a.constructor.prototype,"isPrototypeOf")||(b=!1),!b)throw new Error("Object can not be clone: "+a)}var U=di.helper.Util,V=di.config.Dict;di.helper.Dialog;var W=xutil.lang,X=xutil.object;xutil.url;var Y,Z,$,_=W.isString,ab=W.isArray,bb=W.isObject,cb=W.isFunction,db=X.isEmptyObj,eb=X.getByPath,fb=X.objKey,gb=X.assign,hb=X.extend,ib=X.merge,jb=X.clone,kb=xutil.uid.getUID,lb=xutil.fn.bind,mb=U.assert,nb=[].slice,ob=U.ecuiAddEventListener,pb=U.ecuiTriggerEvent,qb=U.targetBlank,rb=Object.prototype.toString,sb=Object.prototype.hasOwnProperty,tb=Array.prototype.push,ub=U.isEcuiControl,vb=U.evalJsonLogic,wb=xui.XObject;$link(function(){$=di.shared.arg.ArgHandlerFactory,Z=di.shared.model.CommonParamFactory}),$namespace().DIFactory=function(){return yb||(yb={installClz:n,getClz:x,addEntity:y,removeEntity:z,createIns:p,mountInteractions:q,mountInteraction:r,getDIMethod:u,getEntity:function(a,b){return A(a,"RAW"==b?"DEF":b)},findEntity:B,forEachEntity:C,createDIEvent:d,getRef:s,mergeOpt:l,setGlobalTemp:I,getGlobalTemp:J,setEventChannel:G,getEventChannel:H,setInteractMemo:Q,getInteractMemo:R,rootSnippet:N,isDIEvent:h,setFuncAuth:O,INIT_EVENT_NAME:Lb,INIT_EVENT_AGENT_ID:Mb}),yb};var xb,yb,zb,Ab="diA^_^",Bb="diM^_^",Cb="diMAdpt^_^",Db="diDef^_^",Eb="diEAgt^_^",Fb="diEvt^_^",Gb="diTmp^_^",Hb="diOpt^_^",Ib="diOpt_cache^_^",Jb="diOpt_id^_^",Kb="_",Lb="diEvt_init^_^",Mb="diEvtAgtId_init^_^",Nb=["SNIPPET","COMPONENT","VUI","VCONTAINER","VPART"],Ob="di.shared.adapter.GeneralAdapterMethod",Pb={CLZ:{},SNIPPET:{},SNIPPET_DEF:{},COMPONENT:{},COMPONENT_DEF:{},VUI:{},VUI_DEF:{},VCONTAINER:{},VCONTAINER_DEF:{},VPART:{},VPART_DEF:{}},Qb={},Rb={},Sb={INS:function(a){var b,c,d=arguments[1];return"call"==d?(b=arguments[2],c=nb.call(arguments,3)):"apply"==d?(b=arguments[2],c=arguments[3]):(b=this,c=nb.call(arguments,1)),(this[Bb+a]||this[Cb+a]||this[a]).apply(b,c)},DEF:function(a){var b,c,d=arguments[1];return"call"==d?(b=arguments[2],c=nb.call(arguments,3)):"apply"==d?(b=arguments[2],c=arguments[3]):(b=this,c=nb.call(arguments,1)),Ub[a].apply(b,c)}},Tb={start:function(a){var b=a[Gb];this.$di("setId",b.id),this.$di("setEl",b.el);var c=A(b.id,"DEF");b.el&&"none"==b.el.style.display&&D(this,"styleDisplay",c.styleDisplay);var d;(d=u(this,"setTplMode"))&&d.call(this,b.tplMode),(d=u(this,"setCommonParamGetter"))&&d.call(this,b.commonParamGetter)},getDIFactory:function(){return yb},getMethod:function(a){return u(this,a)},getDef:function(){return A(Tb.getId.call(this),"DEF")
},setId:function(a){D(this,"id",a)},getId:function(){return E(this,"id")},setEl:function(a){D(this,"el",a)},getEl:function(){return E(this,"el")},diShow:function(){this.$di("getDef");var a=this.$di("getEl"),b=E(this,"styleDisplay"),c=E(this,"hideByAuth");null==b||c||(D(this,"styleDisplay",null),a.style.display=b)},diHide:function(){var a=this.$di("getEl");a&&null==E(this,"styleDisplay")&&(D(this,"styleDisplay",a.style.display),a.style.display="none")},setDeaf:function(a,b){var c="deaf";a?(fb.add(this,b,c),D(this,c,!0)):(fb.remove(this,b,c),(null==b||0==fb.size(this,c))&&D(this,c,!1))},isDeaf:function(){return E(this,"deaf")},setValueDisabled:function(a,b){var c="valueDisabled";a?(fb.add(this,b,c),D(this,c,!0)):(fb.remove(this,b,c),(null==b||0==fb.size(this,c))&&D(this,c,!1))},isValueDisabled:function(){return E(this,"valueDisabled")},getClzType:"placeholder",disable:function(a){fb.add(this,a),E(this,"disabled")||(D(this,"disabled",!0),this.disable&&this.disable())},enable:function(a){fb.remove(this,a),0==fb.size(this)&&E(this,"disabled")&&(D(this,"disabled",!1),this.enable&&this.enable())},getOpt:function(a,b){var c=A(this.$di("getId"),"RAW");return j(c,a,b,{clone:!0})},setOpt:function(a,b,c){var d=A(this.$di("getId"),"RAW");k(d,a,b,c)},getRef:function(a,b,c){return s(this,a,b,c)},registerEventAgent:function(a){L(this,a)},addEventListener:function(b,c,f,i){mb(b&&c&&f,"Event listener can not be empty."),i=i||{};var j=i.argHandler,k=i.dontClone,l=i.once,m=i.checkDeaf,n=i.bindArgs||[];i.id;var o=i.dispatcherId,p=i.interactionId,q=i.viewDisableDef,r=i.rule;i.eventMatchMode;var s=M(this,b)||this,t=function(){if(m===!1||!(cb(m)?m(f):f&&f.$di&&f.$di("isDeaf"))){var i=arguments[0],l=Array.prototype.slice.call(arguments,h(i)?(i=e(i),1):(i=d(b),0));if(g(i,"dispatcherId",o,!0),g(i,"interactionId",p,!0),i.viewDisableDef=q,!r||vb(r,lb(a,null,i))){!k&&(l=S(l)),l=j?j.call(f,l):l,f.$di&&Q(f,"diEvent",i);var s=c.apply(f,n.concat(l));return f.$di&&Q(f,"diEvent",Y),s}}};s instanceof wb?s[l?"attachOnce":"attach"](b,t):ub(s)&&ob(s,b,t,l),i=null},dispatchEvent:function(a,b,c){c=c||{};var d=M(this,a)||this;h(a)&&(mb(d!=this,"å¦æä½¿ç¨diEventï¼å¿é¡»åregisterEventAgentã"),(b=b||[]).splice(0,0,a),a=a.getEventName()),d instanceof wb?d.notify(a,b):ub(d)&&pb(d,a,null,b)}},Ub={getDIFactory:Tb.getDIFactory,getMethod:function(a){return Ub[a]},setId:function(a){this.id=a},getId:function(){return this.id},getOpt:Tb.getOpt,setOpt:Tb.setOpt,getRef:Tb.getRef},Vb={setTplMode:function(a){D(this,"tplMode",a)},getTplMode:function(){return E(this,"tplMode")},vuiCreate:function(a,b){var c=this.$di("getRef","vuiRef",a,"DEF");if(!c)return null;b=l(c,hb({},b,{id:c.id,el:c.el}),"DATA_INIT");var d=F(this,"vuiSet"),e=K(a);mb(!d[e],"vuiå·²ç»å­å¨: refPath="+a+" vuiSetKey="+e),null==j(c,"cfgOpt","paramMode")&&k(c,"cfgOpt","paramMode","NORMAL");var f,g=c.adapterMethod||{},h=c.adapter&&c.adapter(c,b)||{};if(h.create?f=h.create(c,b):g.create&&(f=xb[g.create](c,b)),!f)return null;f.$di=Sb.INS,D(f,"parent",this),D(f,"id",c.id),D(f,"el",c.el),c.el&&"none"==c.el.style.display&&D(f,"styleDisplay",c.styleDisplay),d[e]=f,D(f,"parentVUISetKey",e),y(f,"INS");var i;for(i in g)mb(!Tb[i],"common contract method can not be overwrite!"+i),"create"!=i&&v(f,i,xb[i]);for(i in h)mb(!Tb[i],"common contract method can not be overwrite!"+i),"create"!=i&&v(f,i,h[i]);return f},vuiGet:function(a){return F(this,"vuiSet")[K(a)]},getValue:function(){var a=this.$di("getDef"),b=a.valueDisabledMode,c=this.$di("isValueDisabled");if(c&&"NORMAL"==b)return null;var d,e,f,g={},h=F(this,"vuiSet");this.getValue&&(g=this.getValue()||{});var i;for(var k in h)d=h[k],e=d.$di("getDef"),i=c||d.$di("isValueDisabled"),null==e.name||i&&"NORMAL"==b||(g[e.name]=i&&"DI"==b?null:bb(f=d.$di("getValue"))?Z.markParamMode(f,j(e,"cfgOpt","paramMode")):f);return g},getEvent:function(){var a=R(this,"diEvent");return a},getEventChannel:H,setCommonParamGetter:function(a){D(this,"commonParamGetter",a)},getCommonParamGetter:function(){return E(this,"commonParamGetter")},getReportTemplateId:function(){var a=E(this,"commonParamGetter");return a?a.getReportTemplateId():void 0},linkBridge:function(a,b,c){"I"==a?qb(b+"?"+c):"E"==a&&zb&&zb.triggerEvent("linkbridge",[b,c])},syncViewDisable:function(a,b){mb("enable"==a||"disable"==a,"Wrong actName: "+a);var c=this.$di("getDef"),d="ASYNC_VIEW_DISABLE_"+this.$di("getId"),e=(c.sync||{}).viewDisable;P("ALL"==e?e:bb(e)&&e[b],a,d)},funcAuthVerify:function(){var a,b,c=F(this,"vuiSet");for(var d in c)a=c[d],b=a.$di("getDef"),!b.funcAuth||b.funcAuth in Rb||(a.$di("getEl").style.display="none",D(a,"hideByAuth",!0))}},Wb={vpartCreate:function(a,b){var c=this.$di("getRef","vpartRef",a,"DEF");if(!c)return null;b=l(c,hb({},b,{id:c.id,el:c.el}),"DATA_INIT");var d=F(this,"vpartSet"),e=K(a);mb(!d[e],"vpartå·²ç»å­å¨: refPath="+a+" vpartSetKey="+e);var f=new c.clz(b);return f?(f.$di=Sb.INS,D(f,"parent",this),D(f,"id",c.id),D(f,"el",c.el),c.el&&"none"==c.el.style.display&&D(f,"styleDisplay",c.styleDisplay),d[e]=f,D(f,"parentVPartSetKey",e),y(f,"INS"),f):null},vpartGet:function(a){return F(this,"vpartSet")[K(a)]}},Xb={setData:function(a,b){if(!this.$di)return this.setData.apply(this,arguments);var c=w(this,"setData")||this.setData;return c?(b=b||{},a=l(this.$di("getDef"),a,"DATA_SET",b),c.call(this,a)):void 0},getValue:function(){if(!this.$di)return this.setData.apply(this,arguments);var a=w(this,"getValue")||this.getValue;return a?this.$di("isValueDisabled")?null:a.call(this):void 0},init:function(){if(!this.$di)return this.init.apply(this,arguments);var a=w(this,"init")||this.init;q(this),a&&a.call(this)},dispose:function(){if(!this.$di)return this.dispose.apply(this,arguments);var a=w(this,"dispose")||this.dispose,b=E(E(this,"parent"),"vuiSet");b&&delete b[E(this,"parentVUISetKey")],z(this),a&&a.call(this),this.$di("setEl",null)}},Yb={dispose:function(){var a=E(E(this,"parent"),"vpartSet");a&&delete a[E(this,"parentVPartSetKey")],z(this),this.dispose&&this.dispose.call(this),this.$di("setEl",null)}},Zb={getEventName:function(){return this[Fb].eventName},getInteractionId:function(){return this[Fb].interactionId}}}(),$namespace("di.shared.ui"),function(){di.helper.Util,di.config.URL;var a=xutil.object.inheritsObject,b=xutil.object.assign,c=xutil.dom.addClass,d=xutil.lang.isObject;xutil.dom.q;var e=xutil.fn.bind;xutil.object.objKey;var f,g=xutil.object.getByPath,h=xui.XObject,i=di.config.Lang,j=di.config.Ajax;$link(function(){f=di.helper.Dialog.alert});var k=$namespace().InteractEntity=a(h,function(a){this.$di("start",a),this.$di("registerEventAgent"),this.notify=this.attach=this.attachOnce=function(){throw new Error("Forbiden function")};var b=this.$di("getEl"),d=this.DEF.className;b&&d&&c(b,d),this.$createModelByDef(a),this.$createView&&this.$createView(a)}),l=k.prototype;l.DEF={},l.$createModelByDef=function(a){var c=this.DEF.model;if(c){var d=c.clz||c.clzPath&&g(c.clzPath);d&&(this._mModel=new d(b({commonParamGetter:this.$di("getCommonParamGetter"),diFactory:this.$di("getDIFactory")},this.$createModelInitOpt(a))),this._mModel.ajaxOptions={defaultFailureHandler:e(this.$defaultFailureHandler,this)})}},l.$createModelInitOpt=function(){return{}},l.getModel=function(){return this._mModel},l.$sync=function(a,c,d,e,f,g){var h={datasourceId:c,args:{param:d,diEvent:e}};return b(h.args,f),b(h,g),a.sync(h)},l.$diEvent=function(a,b){1==arguments.length&&d(a)&&(b=a,a=null);var c=b.args.diEvent;return a?c?c(a):a:c},l.$syncEnable=function(a){this.$di("syncViewDisable","enable",a),this.$di("enable","DI_SELF_"+a)},l.$syncDisable=function(a){this.$di("syncViewDisable","disable",a),this.$di("disable","DI_SELF_"+a)},l.$defaultFailureHandler=function(a){var b=this.$di("getEventChannel");switch(a){case j.ERROR_SESSION_TIMEOUT:b.triggerEvent("sessiontimeout"),f(i.SAD_FACE+i.RE_LOGIN,null,!0);break;case j.ERROR_PARAM:break;default:f(i.SAD_FACE+i.ERROR)}}}(),$namespace("di.shared.ui"),function(){var a=xutil.object.inheritsObject,b=Array.prototype.slice,c=xutil.dom.addClass,d=ecui.ui.Control;d.prototype;var e=xui.XView,f=$namespace().PanelPage=a(e,function(a){c(a.el,"panel-page"),this._bVisible=!0,this._aPendingUpdater=[],this._sPageId=a.pageId,this._sFromPageId=a.fromPageId,this._sPageTitle=a.pageTitle}),g=f.prototype;g.dispose=function(){this._aPendingUpdater=[],f.superClass.dispose.call(this)},g.updateView=function(a,c){this._bVisible?a.apply(c,b.call(arguments,2)):this._aPendingUpdater.push({updater:a,scope:c,args:b.call(arguments,2)})},g.getPageId=function(){return this._sPageId},g.getPageTitle=function(){return this._sPageTitle},g.getFromPageId=function(){return this._sFromPageId},g.setFromPageId=function(a){this._sFromPageId=a},g.active=function(a){this._bVisible=!0;for(var b;b=this._aPendingUpdater.shift();)b.updater.apply(b.scope,b.args);this.$active(a||{})},g.inactive=function(a){this._bVisible=!1,this.$inactive(a)},g.isActive=function(){return this._bVisible},g.$active=function(){},g.$inactive=function(){}}(),$namespace("di.shared.adapter"),function(){function a(a,b){return e(c,a.el,null,b)}function b(a){for(var b,c=a.series||[],e={},g=e.beakerA={water:[]},h=e.beakerB={water:[]},i=3;b=c[i];i++)g.water.push({text:b.name,value:b.data[0]});(b=c[2])&&(g.mark={text:b.name,value:b.data[0]}),(b=c[1])&&h.water.push({text:b.name,value:b.data[0]}),(b=c[0])&&(e.theRate={text:b.name,value:null!=b.data[0]?f(b.data[0],"I,III.DD%",void 0,void 0,!0):"-"}),e.title=a.xAxis[0].data[0];var b={width:a.width,heigth:a.height,datasource:e};return d.setData.call(this,b)}xutil.object.extend;var c,d,e=di.helper.Util.ecuiCreate,f=xutil.number.formatNumber;$link(function(){c=ecui.ui.BeakerChart,d=c.prototype}),$namespace().BeakerChartVUIAdapter=function(){return{create:a,setData:b}}}(),$namespace("di.shared.adapter"),function(){function a(a,b){return g(h,a.el,null,c(b))}function b(a){this.setData(c(a))}function c(a){var b,c=i().getDateModel().now(),e={defaultTime:["0d"],range:["-1Y","0d"]},f=a.granularities||{D:e,W:e,M:e,Q:e},g={types:[],range:{},defaults:{}},h={D:"day",W:"week",M:"month",Q:"quarter",Y:"year"};for(var k in f)g.types.push(k),b=f[k],g.defaults[h[k]]=d(j(b.defaultTime,[c,c]),k).start,g.range[h[k]]=d(j(b.range,[c,c])||{},k);return g}function d(a,b){for(var c in a)a[c]=k(a[c],b);return a}function e(){var a=this.getDate();return{start:a.date,end:a.date,granularity:a.type}}var f=di.helper.Util,g=f.ecuiCreate;f.ecuiDispose,ecui.util.detachEvent,ecui.util.attachEvent,ecui.dispose,ecui.repaint;var h,i,j=f.parseTimeUnitDef,k=f.formatTime;$link(function(){h=ecui.ui.CalendarPlus,i=di.shared.model.GlobalModel}),$namespace().CalendarPlusVUIAdapter=function(){return{create:a,setData:b,getValue:e}}}(),$namespace("di.shared.adapter"),function(){function a(a){var d,e,f=a.tableData.head||[],g=a.tableData.data||[],h={};for(d=0;e=f[d];d++)e.orderby&&(e.sortable=!0,("ASC"==e.orderby||"DESC"==e.orderby)&&(h.sortby=e.field,h.orderby=e.orderby.toLowerCase()));var i=c({},a,["leftLock","rightLock","errorMsg"]),j=b.EMPTY_TEXT;a.exception&&""!=a.exception&&(j=b.QUERY_ERROR_TEXT),this.render(f,g,h,i,j)}var b=di.config.Lang,c=xutil.object.assign;$namespace().EcuiCustomTableVUIAdapter=function(){return{setData:a}}}(),$namespace("di.shared.adapter"),function(){function a(a,b){b.hideCancel=!0,b.asyn=!0;var c=d(a.clz,a.el,null,b);return c.$di("registerEventAgent","async"),c.onloadtree=function(a,b){c.$di("dispatchEvent","async",[a,function(a){b((a.datasource||{}).children||[])}])},c._uLayer.getOuter().setAttribute(f.TEST_ATTR,a.id),c}function b(a){a&&this.setData({root:a.datasource,selected:e(a.value)?a.value[0]:a.value||(a.datasource||{}).value},{hideCancel:null==a.hideCancel?!0:a.hideCancel,asyn:null==a.asyn?!0:a.asyn})}function c(){var a=this.getValue();return a?[a.value]:[]}var d=di.helper.Util.ecuiCreate;xutil.date.dateToString;var e=xutil.lang.isArray,f=di.config.Dict;$namespace().EcuiInputTreeVUIAdapter=function(){return{create:a,setData:b,getValue:c}}}(),$namespace("di.shared.adapter"),function(){var a=di.helper.Util;a.ecuiCreate,$namespace().EcuiInputVUIAdapter=function(){return{}}}(),$namespace("di.shared.adapter"),function(){function a(a){this.render(a.currentPage,a.totalRecordCount,String(a.pageSize))}function b(){}$namespace().EcuiPagerVUIAdapter=function(){return{setData:a,getValue:b}}}(),$namespace("di.shared.adapter"),function(){function a(a){a=a||{};var b=a.datasource||[];for(this.setValue("ui-multi-select"==c.call(this)?[]:null);this.remove(0););for(var d,e=0;d=b[e];e++){var f=String(null!=d.text?d.text:"");this.add(f,null,{value:d.value,prompt:f})}var g=a.value;g=("ui-multi-select"==c.call(this)?g:g&&g[0])||b[0]&&b[0].value,null!=g&&this.setValue(g)}function b(){var a,b=c.call(this);if("ui-select"==b){var e=this.getSelected();a=e?e.getValue():null}else a=this.getValue();return null==a?[]:d(a)?a:[a]}function c(){return this.getTypes().join(" ").indexOf("ui-multi-select")>=0?"ui-multi-select":"ui-select"}di.config.Dict;var d=xutil.lang.isArray;$namespace().EcuiSelectVUIAdapter=function(){return{setData:a,getValue:b}}}(),$namespace("di.shared.adapter"),function(){function a(a,c){var d=b(a.clz,a.el,null,c);return d.$di("registerEventAgent","async"),d.onquery=function(a){d.$di("dispatchEvent","async",[(a||{}).text,function(a){d.update(a.datasource||[])}])},d}xutil.object.extend;var b=di.helper.Util.ecuiCreate;$namespace().EcuiSuggestVUIAdapter=function(b,d){return{create:a,getValue:c[d.valueType||"TEXT"]}};var c={TEXT:function(){return(this.getValue()||{}).text||""},VALUE:function(){return(this.getValue()||{}).value||""}}}(),$namespace("di.shared.adapter"),function(){function a(a){var b=d().getDateModel().now();if(a.weekViewRange){var f=c(a.weekViewRange,[b,b]);if(f){var g="yyyy-MM-dd";f[0]=f.start?e(f.start,g):null,f[1]=f.end?e(f.end,g):null;for(var h,i=0;h=(a.xAxis||[])[i];i++)h.range=f}}this.setData(a)}var b=di.helper.Util,c=b.parseTimeUnitDef;b.formatTime;var d,e=xutil.date.dateToString;$link(function(){d=di.shared.model.GlobalModel}),$namespace().HChartVUIAdapter=function(){return{setData:a}}}(),$namespace("di.shared.adapter"),function(){function a(a,b){var d=c().getDateModel().now(),f={};f.now=d.getTime();var i=g(b.defaultTime,[d,d])||{};f.date=i.start||new Date,f.dateEnd=i.end;var j=g(b.range,[d,d]);return j&&(f.start=j.start,f.end=j.end),h(f,b,["mode","viewMode","shiftBtnDisabled"]),e(a.clz,a.el,null,f)}function b(){var a=f(this.getDate());return"RANGE"==this.getMode()?{start:a,end:f(this.getDateEnd())}:{start:a,end:a}}var c,d=di.helper.Util,e=d.ecuiCreate,f=xutil.date.dateToString,g=d.parseTimeUnitDef,h=xutil.object.assign;$link(function(){c=di.shared.model.GlobalModel}),$namespace().IstCalendarVUIAdapter=function(){return{create:a,getValue:b}}}(),$namespace("di.shared.adapter"),function(){function a(a,b){var c=new a.clz(b);return c.$di("registerEventAgent","change"),c.attach("sellinechange",function(a){c.$di("dispatchEvent","change",[a])}),c.attach("selitemchange",function(a){c.$di("dispatchEvent","change",[a])}),c}function b(a,b){var c=new a.clz(b);return c.$di("registerEventAgent","change"),c.attach("change",function(a){d(a,"JSON"),c.$di("dispatchEvent","change",[a])}),c}function c(a){this.setData(a)}xutil.date.dateToString,xutil.lang.isArray,di.config.Dict;var d;$link(function(){d=di.shared.model.CommonParamFactory.markParamMode}),$namespace().MetaConfigVUIAdapter=function(a){var b=a.clzKey;return{create:e[b],setData:f[b],updateData:g[b],getValue:h[b]}};var e={OLAP_META_DRAGGER:a,OLAP_META_IND_SELECT:b,OLAP_META_IND_MULTI_SELECT:b},f={OLAP_META_DRAGGER:c,OLAP_META_IND_SELECT:c,OLAP_META_IND_MULTI_SELECT:c},g={OLAP_META_DRAGGER:function(a){this.refreshStatus(a)},OLAP_META_IND_SELECT:function(){},OLAP_META_IND_MULTI_SELECT:function(){}},h={OLAP_META_DRAGGER:function(){return this.getValue()},OLAP_META_IND_SELECT:function(){var a=this.getValue();return d(a,"JSON"),a},OLAP_META_IND_MULTI_SELECT:function(){var a=this.getValue();return d(a,"JSON"),a}}}(),$namespace("di.shared.adapter"),function(){function a(a,b){return h(i,a.el,null,c(b))}function b(a){this.setDatasource(d(a))}function c(a){var b=n({},a,["viewMode","headText","rangeLinkStr","weekLinkStr","blankText","forbidEmpty"]);return b.timeTypeList=[],b}function d(a){var b,c,d,f,g,h=j().getDateModel().now(),i=o(a),m=a.timeTypeOpt;i.timeTypeOpt=i.timeTypeOpt||{};for(b in m){if(c=i.timeTypeOpt[b]=m[b],f=k(c.date,[h,h]),f.length>1)for(c.date=[],d=0;g=f[d];d++)c.date.push(e(g,b).start);else g=e(f[0],b),c.date=g.end?[g.start,g.end]:[g.start];c.range=e(l(c.range,[h,h])||{},b),c.range.offsetBase=h}return i}function e(a,b){for(var c in a)a[c]=m(a[c],b);return a}function f(){var a=this.getValue(),b=this.getTimeType();return{start:m(a[0],b),end:m(a[1]||a[0],b),granularity:b}}var g=di.helper.Util,h=g.ecuiCreate;g.ecuiDispose,ecui.util.detachEvent,ecui.util.attachEvent,ecui.dispose,ecui.repaint;var i,j,k=g.parseTimeDef,l=g.parseTimeUnitDef,m=g.formatTime,n=xutil.object.assign,o=xutil.object.clone;$link(function(){i=ecui.ui.XCalendar,j=di.shared.model.GlobalModel}),$namespace().XCalendarVUIAdapter=function(){return{create:a,setData:b,getValue:f}}}(),$namespace("di.shared.model"),function(){function a(a){this._sReportType=a.reportType}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL;di.helper.Util;var c=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.extend,xutil.object.assign;var d=xutil.uid.getUID;baidu.json.parse,baidu.json.stringify,xutil.lang.hasValue;var e=xutil.object.clone;xutil.date.stringToDate,xutil.date.dateToString;var f=xutil.url.textParam;xutil.url.wrapArrayParam,xutil.LinkedHashMap;var g,h=xutil.collection.travelTree,i=xui.XDatasource;$link(function(){g=di.shared.model.GlobalModel});var j=$namespace().CubeMetaModel=c(i,a),k=j.prototype;k.init=function(){},k.url=new i.Set({CUBE_INIT:b.fn("CUBE_META"),DATASOURCE_INIT:b.fn("DATASOURCE_META")}),k.param=new i.Set({DATASOURCE_INIT:function(){return"bizKey="+f(g().getBizKey())}}),k.result=new i.Set({CUBE_INIT:function(a){this._aCubeForest=a.cubeTree},DATASOURCE_INIT:function(a){this._aDatasourceList=a.datasourceList}}),k.setReportType=function(a){this._sReportType=a},k.getMenuData=function(){function a(){c.menuList.push({text:"éæ©CUBE",value:1});for(var a,b=0;a=this._aCubeForest[b];b++){var g=a.schemaName;h(a=e(a.root),function(a){a.value=a.nodeName,a.text=a.caption||" - ",a.children||("RTPL_OLAP_TABLE"==f?a.url="di.console.editor.ui.OLAPEditor?"+["editorType="+f,"reportType="+f,"pageId="+f+"_"+a.value+d(),"pageTitle=[éè§è¡¨] "+a.text,"schemaName="+g,"cubeTreeNodeName="+a.nodeName].join("&"):"RTPL_OLAP_CHART"==f&&(a.url="di.console.editor.ui.OLAPEditor?"+["editorType="+f,"reportType="+f,"pageId="+f+"_"+a.value+d(),"pageTitle=[å¾] "+f+"_"+a.text,"schemaName="+g,"cubeTreeNodeName="+a.nodeName].join("&")))},"children"),c.menuList.push(a)}c.selMenuId=1}function b(){var a=[];c.menuList.push({text:"éæ©æ°æ®æº",value:1,children:a});for(var b,e=0;b=this._aDatasourceList[e];e++)a.push({text:b.text,value:b.value,url:"di.console.editor.ui.PlaneEditor?"+["editorType="+f,"reportType="+f,"pageId="+f+"_"+b.value+d(),"pageTitle=[å¹³é¢è¡¨] "+f+"_"+b.text,"datasourceName="+b.value].join("&")})}var c={menuList:[]},f=this._sReportType;return{RTPL_OLAP_TABLE:a,RTPL_OLAP_CHART:a,RTPL_PLANE_TABLE:b}[f].call(this),{menuTree:c}}}(),$namespace("di.shared.model"),function(){function a(a){this._fCommonParamGetter=a.commonParamGetter,this._oRawChartData={},this._oChartData={}}function b(a){var b=a.args.param;return b.uniqueName&&(b.dimTags=b.uniqueName,delete b.uniqueName),b.uniqueNames&&(b.dimTagsList=b.uniqueNames,delete b.uniqueNames),this._fCommonParamGetter(b)}function c(a){this._fCommonParamGetter.update(a.data)}function d(a){try{var b=this._oRawChartData=a.reportChart,c={};"datetime"==b.xAxisType&&(b.xAxisType="date"),c.chartType="line",c.series=b.seriesData,c.xAxis=[{type:b.xAxisType,data:b.xAxisCategories}];var d,e,f={};for(d=0;e=c.series[d];d++)f[e.yAxisName]=1;if(d=0,c.yAxis=[],b.yAxises)for(var g,h=0;g=b.yAxises[h];h++)f[g.name]&&(c.yAxis.push({format:g.format,title:g.unitName?{text:g.unitName}:null}),f[g.name]=h);var i=0;for(d in f)i++;if(i>1)for(d=0;e=c.series[d];d++)e.yAxisIndex=f[e.yAxisName];this._oChartData=c}catch(k){j(k),this.$goError()}}function e(){this._oRawChartData={},this._oChartData={}}var f=di.config.URL,g=di.helper.Util,h=xutil.object.inheritsObject;xutil.url.wrapArrayParam;var i=xutil.url.textParam,j=g.logError,k=xutil.uid.getUID,l=xui.XDatasource,m=$namespace().DIChartModel=h(l,a),n=m.prototype;n.init=function(){},n.url=new l.Set({DATA:f.fn("OLAP_CHART_DATA"),X_DATA:f.fn("OLAP_CHART_X_DATA"),LITEOLAPCHART_DATA:f.fn("LITEOLAP_CHART_DATA"),S_DATA:f.fn("OLAP_CHART_S_DATA"),S_ADD_DATA:f.fn("OLAP_CHART_S_ADD_DATA"),S_REMOVE_DATA:f.fn("OLAP_CHART_S_REMOVE_DATA"),OFFLINE_DOWNLOAD:f.fn("OLAP_CHART_OFFLINE_DOWNLOAD")}),n.businessKey=new l.Set({DATA:"DI_CHART_MODEL_DATA_"+k(),X_DATA:"DI_CHART_MODEL_X_DATA_"+k(),LITEOLAPCHART_DATA:"DI_LITEOLAP_CHART_DATA_"+k(),S_DATA:"DI_CHART_MODEL_S_DATA_"+k(),S_ADD_DATA:"DI_CHART_MODEL_S_ADD_DATA_"+k(),S_REMOVE_DATA:"DI_CHART_MODEL_S_REMOVE_DATA_"+k(),OFFLINE_DOWNLOAD:"DI_CHART_OFFLINE_DOWNLOAD_"+k()}),n.param=new l.Set({DATA:b,X_DATA:b,S_DATA:b,S_ADD_DATA:b,S_REMOVE_DATA:b,LITEOLAPCHART_DATA:function(a){var b=this._fCommonParamGetter.getReportTemplateId(),c=[];if(c.push(this._fCommonParamGetter()),c.push("analysisType=timetrend"),c.push("sourceTemplateId="+b),a.args.param.COLUMN&&a.args.param.COLUMN.length>0)for(var d=a.args.param.COLUMN,e=0;e<d.length;e++)c.push("indNames="+i(d[e]));return c.join("&")},OFFLINE_DOWNLOAD:function(a){return this._fCommonParamGetter({mainTo:a.args.param.email})}}),n.complete=new l.Set({DATA:c,X_DATA:c,LITEOLAPCHART_DATA:c,S_DATA:c,S_ADD_DATA:c,S_REMOVE_DATA:c,OFFLINE_DOWNLOAD:c}),n.parse=new l.Set({DATA:d,X_DATA:d,LITEOLAPCHART_DATA:d,S_DATA:d,S_ADD_DATA:d,S_REMOVE_DATA:d}),n.error=new l.Set({DATA:e,X_DATA:e,LITEOLAPCHART_DATA:e,S_DATA:e,S_ADD_DATA:e,S_REMOVE_DATA:e}),n.getChartData=function(){return this._oChartData}}(),$namespace("di.shared.model"),function(){function a(a){this._fCommonParamGetter=a.commonParamGetter}function b(a){this._fCommonParamGetter.update(a.data)}var c=di.config.URL,d=di.helper.Util,e=xutil.object.inheritsObject;xutil.url.wrapArrayParam,xutil.object.extend,d.logError;var f=xutil.uid.getUID,g=xui.XDatasource,h=$namespace().DIFormModel=e(g,a),i=h.prototype;i.init=function(){},i.url=new g.Set({DATA:c.fn("FORM_DATA"),ASYNC_DATA:c.fn("FORM_ASYNC_DATA")}),i.businessKey=new g.Set({DATA:"DI_FORM_MODEL_DATA_"+f(),ASYNC_DATA:"DI_FORM_MODEL_ASYNC_DATA_"+f()}),i.complete=new g.Set({DATA:b,ASYNC_DATA:b}),i.param=new g.Set({DATA:function(a){return this._fCommonParamGetter(a.args.param)},ASYNC_DATA:function(a){return this._fCommonParamGetter(a.args.param)}}),i.parse=new g.Set({DATA:function(a){return this._oInitData=(a||{}).params||{},a},ASYNC_DATA:function(a){return(a||{}).params||{}}}),i.error=new g.Set({DATA:function(){},ASYNC_DATA:function(){}}),i.getInitData=function(){return this._oInitData}}(),$namespace("di.shared.model"),function(){function a(a){this._fCommonParamGetter=a.commonParamGetter}function b(a){this._fCommonParamGetter.update(a.data)}function c(a){try{var b={tableData:{head:a.head,data:a.data},pageInfo:a.pageInfo,exception:a.exception,actualSql:a.actualSql};return b}catch(c){g(c),this.$goError()}}var d=di.config.URL,e=di.helper.Util,f=xutil.object.inheritsObject;xutil.url.wrapArrayParam,xutil.object.extend,xutil.object.assign;var g=e.logError,h=xutil.uid.getUID,i=xui.XDatasource,j=$namespace().DIPlaneTableModel=f(i,a),k=j.prototype;k.init=function(){},k.url=new i.Set({DATA:d.fn("PLANE_TABLE_DATA"),CHECK:d.fn("PLANE_TABLE_CHECK"),SELECT:d.fn("PLANE_TABLE_SELECT"),OFFLINE_DOWNLOAD:d.fn("PLANE_TABLE_OFFLINE_DOWNLOAD")}),k.businessKey=new i.Set({DATA:"DI_PLANE_TABLE_MODEL_DATA_"+h(),CHECK:"DI_PLANE_TABLE_MODEL_CHECK_"+h(),SELECT:"DI_PLANE_TABLE_MODEL_SELECT_"+h(),OFFLINE_DOWNLOAD:"DI_TABLE_OFFLINE_DOWNLOAD_"+h()}),k.param=new i.Set({DATA:function(a){return this._fCommonParamGetter(a.args.param)},CHECK:function(a){return this._fCommonParamGetter({uniqueName:a.args.param.uniqueName})},SELECT:function(a){return this._fCommonParamGetter({uniqueName:a.args.param.uniqueName})},OFFLINE_DOWNLOAD:function(a){return this._fCommonParamGetter({mailTo:a.args.param.email})}}),k.complete=new i.Set({DATA:b,DRILL:b,LINK_DRILL:b,SELECT:b,CHECK:b,OFFLINE_DOWNLOAD:b}),k.parse=new i.Set({DATA:c,CHECK:function(a){return a},SELECT:function(a){return a}}),k.error=new i.Set({DATA:function(){this._oTableData={},this._oBreadcrumbData={}}})}(),$namespace("di.shared.model"),function(){function a(a){this._fCommonParamGetter=a.commonParamGetter}function b(a){this._fCommonParamGetter.update(a.data)}var c=di.config.URL,d=di.helper.Util,e=xutil.object.inheritsObject;xutil.url.wrapArrayParam,xutil.object.extend,d.logError;var f=xutil.uid.getUID,g=xui.XDatasource,h=$namespace().DIRtplCloneModel=e(g,a),i=h.prototype;i.init=function(){},i.url=new g.Set({GET_DEFAUL_IMAGENAME:c.fn("RTPL_CLONE_GETDEFAULTIMAGENAME"),SAVE:c.fn("RTPL_CLONE_SAVE"),CLEAR:c.fn("RTPL_CLONE_CLEAR")}),i.businessKey=new g.Set({GET_DEFAUL_IMAGENAME:"RTPL_CLONE_GETDEFAULTIMAGENAME"+f(),SAVE:"RTPL_CLONE_SAVE"+f(),CLEAR:"RTPL_CLONE_CLEAR"+f()}),i.param=new g.Set({GET_DEFAUL_IMAGENAME:function(a){return this._fCommonParamGetter(a.args)},SAVE:function(a){return this._fCommonParamGetter(a.args)},CLEAR:function(a){return this._fCommonParamGetter(a.args)}}),i.complete=new g.Set({GET_DEFAUL_IMAGENAME:b,SAVE:b,CLEAR:b}),i.parse=new g.Set({GET_DEFAUL_IMAGENAME:function(a){return a},SAVE:function(a){return a},CLEAR:function(a){return a}}),i.error=new g.Set({DATA:function(){this._oTableData={},this._oBreadcrumbData={}}})}(),$namespace("di.shared.model"),function(){function a(a){this._fCommonParamGetter=a.commonParamGetter}function b(a){var b=a.args.param,c={};return c.uniqueName=b.uniqueName,c.lineUniqueName=b.lineUniqueName,c.action=b.action,c.drillAxisName="ROW",this._fCommonParamGetter(c)}function c(a){this._fCommonParamGetter.update(a.data)}function d(a){try{var b={},c=b.tableData=a.pivottable;c.datasource=c.dataSourceRowBased;var d,g,h,i,l,m=c.colFields[0],n=c.colDefine,o=[];for(d=0;d<m.length;d++)if(h=m[d])for(i=h.colspan||1,g=0;i>g;g++)o.push({width:1});for(l=o.length-n.length,d=0;d<n.length;d++)j(o[d+l],n[d]);c.colDefine=o,e(c,l),f(c,l);var p,q={ASC:"asc",DESC:"desc",NONE:"none"};for(d=0;d<o.length;d++)(p=o[d].currentSort)&&(o[d].orderby=q[p]);b.tableData.reportTemplateId=a.reportTemplateId,b.tableData.rowCheckMax=a.rowCheckMax,b.tableData.rowCheckMin=a.rowCheckMin;var r=a.mainDimNodes||[];if(r)for(d=0;h=r[d];d++)h.text=h.showName,h.value=d,h.url=null,d==r.length-1&&(h.disabled=!0),0==d&&(h.isFirst=!0);return b.breadcrumbData={datasource:r,maxShow:5,hidePosPercent:.5},b.pageInfo={totalRecordCount:a.totalSize,currRecordCount:a.currentSize},this._oData=b,b}catch(s){k(s),this.$goError()}}function e(a,b){var c,d,e,f,g,h,i,j=[];for(c=0;h=a.colFields[c];c++){if(j.push(g=[]),c>0)for(e=0;b>e;e++)g.push({});for(d=0;d<h.length;d++)for(g.push(f=h[d]),i=(f||{}).colspan||1,e=1;i>e;e++)g.push({})}a.colFields=j}function f(a,b){var c,d,e,f,g=[];for(c=0;f=a.rowHeadFields[c];c++){for(g.push(e=[]),d=0;d<b-f.length;d++)e.push({});for(d=0;d<f.length;d++)e.push(f[d])}a.rowHeadFields=g}var g=di.config.URL,h=di.helper.Util,i=xutil.object.inheritsObject;xutil.url.wrapArrayParam;var j=xutil.object.extend,k=h.logError,l=xutil.uid.getUID,m=xui.XDatasource,n=$namespace().DITableModel=i(m,a),o=n.prototype;o.init=function(){},o.url=new m.Set({DATA:g.fn("OLAP_TABLE_DATA"),DRILL:g.fn("OLAP_TABLE_DRILL"),LINK_DRILL:g.fn("OLAP_TABLE_LINK_DRILL"),SORT:g.fn("OLAP_TABLE_SORT"),CHECK:g.fn("OLAP_TABLE_CHECK"),SELECT:g.fn("OLAP_TABLE_SELECT"),MEASURE_DES:g.fn("MEASURE_DES"),OFFLINE_DOWNLOAD:g.fn("OLAP_TABLE_OFFLINE_DOWNLOAD")}),o.businessKey=new m.Set({DATA:"DI_TABLE_MODEL_DATA_"+l(),DRILL:"DI_TABLE_MODEL_DRILL_"+l(),LINK_DRILL:"DI_TABLE_MODEL_LINK_DRILL_"+l(),SORT:"DI_TABLE_MODEL_SORT_"+l(),CHECK:"DI_TABLE_MODEL_CHECK_"+l(),SELECT:"DI_TABLE_MODEL_SELECT_"+l(),MEASURE_DES:"MEASURE_DES_"+l(),OFFLINE_DOWNLOAD:"DI_TABLE_OFFLINE_DOWNLOAD_"+l()}),o.param=new m.Set({DATA:function(a){return this._fCommonParamGetter(a.args.param)},DRILL:function(a){return b.call(this,a)},LINK_DRILL:function(a){return b.call(this,a)},SORT:function(a){var b=a.args.param;return this._fCommonParamGetter({uniqueName:b.uniqueName,sortType:b.currentSort})},CHECK:function(a){return this._fCommonParamGetter({uniqueName:a.args.param.uniqueName})},MEASURE_DES:function(a){var b=this._fCommonParamGetter(),c=b+"&"+a.args.param.colUniqueNamesArr.join("&");return c},SELECT:function(a){return this._fCommonParamGetter({uniqueName:a.args.param.uniqueName})},OFFLINE_DOWNLOAD:function(a){return this._fCommonParamGetter({mailTo:a.args.param.email})}}),o.complete=new m.Set({DATA:c,DRILL:c,LINK_DRILL:c,SORT:c,SELECT:c,CHECK:c,MEASURE_DES:c,OFFLINE_DOWNLOAD:c}),o.parse=new m.Set({DATA:d,DRILL:d,LINK_DRILL:d,SORT:d,MEASURE_DES:function(a){return a},CHECK:function(a){return a},SELECT:function(a){return a}}),o.getData=function(){return this._oData},o.error=new m.Set({DATA:function(){this._oTableData={},this._oBreadcrumbData={}}})}(),$namespace("di.shared.model"),function(){var a=xutil.object.inheritsObject;xutil.fn.bind;var b=xutil.object.getByPath,c=xui.XDatasource,d=$namespace().GlobalMenuManager=a(c,function(a){this.businessData=a.globalMenu}),e=d.prototype;e.$dispose=function(){d.superClass.$dispose.call(this)},e.getSelected=function(){return this.businessData&&this.businessData.selMenu},e.getMenuData=function(){return this.businessData&&this.businessData.menuList},e.getControlClass=function(){var a=(this.getSelected()||{}).menuPage;return a?b(a):null},e.parse=function(a){var b=a&&a.globalMenu||{};return this.businessData={menuList:b.menuList,selMenu:b.selMenu},this.businessData},e.changeMenu=function(){},e.setGlobalMenu=function(a){this._uGlobalMenu=a}}(),$namespace("di.shared.model"),function(){function a(a){this._sReportType=a.reportType||"RTPL_OLAP_TABLE",this._fCommonParamGetter=a.commonParamGetter||function(){return""},this._oIndList=new u(null,"uniqName"),this._oDimList=new u(null,"uniqName"),this._oSelLineWrap=new u(null,"k","l"),this._oStatusWrap={},this._oSeriesCfg={}}function b(a){a.type||"SIMPLE";var b={};for(var c in a)b[c]=a[c];return b.dimList=this._oDimList,b}function c(a){try{this.$clean();var b=a.metaData;this._oIndList.appendAll(b.inds),this._oDimList.appendAll(b.dims),h.call(this,this._oIndList,"IND"),h.call(this,this._oDimList,"DIM"),this._oSeriesCfg={};var c=a.seriesTypes||{};for(var d in c)this._oSeriesCfg[d]={type:c[d]};for(var e,g,i=0;e=a.index4Selected[i];i++)this._oSelLineWrap.addLast({k:e,l:g=new u(a.selected[e],"uniqName")}),h.call(this,g);f.call(this,a)}catch(j){t(j),this.$goError()}}function d(a,b,c){try{f.call(this,a),this.$updateSelected(c.args.changeWrap)}catch(d){t(d),this.$goError()}}function e(a){return a}function f(a){(this._oStatusWrap=a.metaStatusData)&&(g.call(this,this._oStatusWrap.indMetas,this._oIndList),g.call(this,this._oStatusWrap.dimMetas,this._oDimList));var b=this._oIndList,c=this._oDimList;this._oSelLineWrap.foreach(function(a,d){d.foreach(function(a,d){var e;((e=b.get(a))||(e=c.get(a)))&&n(d,e)})})}function g(a,b){if(b.foreach(function(a,b){b.status=j.META_STATUS.DISABLED}),a){var c=a.validMetaNames;!c&&(c=a.validMetaNames=[]);var d=a.selectedMetaNames;!d&&(d=a.selectedMetaNames=[]);var e,f;for(e=0;e<c.length;)(f=b.get(c[e]))?(f.status=j.META_STATUS.NORMAL,e++):c.splice(e,1);for(e=0;e<d.length;)(f=b.get(d[e]))?(f.status=j.META_STATUS.SELECTED,e++):d.splice(e,1);var g=a.disabledMetaNames=[];b.foreach(function(a,b){b.status==j.META_STATUS.DISABLED&&g.push(a)})}}function h(a,b){var c=this;a.foreach(function(a,d){b?d.clazz=b:c._oIndList.containsKey(d.uniqName)?d.clazz="IND":c._oDimList.containsKey(d.uniqName)&&(d.clazz="DIM")})}function i(a,b,c,d){if(b.length==c.size()){var e,f,g,h,i;c.foreach(function(a,c,d){null==f?a!=b[d]&&(e=a,f=d):(e==b[d]&&(g=d),b[f]==a&&(h=d,i=a))
}),null!=f&&(d.from=a,d.to=a,d.fromLineData=b,d.toLineData=b,h>g?(d.uniqName=i,d.toPosition=f):(d.uniqName=e,d.toPosition=g),d.uniqNameList.push(d.uniqName))}else if(b.length>c.size())for(var j,k=0;k<b.length;k++)j=b[k],c.containsKey(j)||(d.uniqName=j,d.uniqNameList.splice(0,1,j),d.to=a,d.toLineData=b,null==d.toPosition&&(d.toPosition=k));else b.length<c.size()&&c.foreach(function(c,e,f){return b[f]!=c?(d.uniqName=c,d.uniqNameList.push(c),d.from=a,d.fromLineData=b,!1):void 0});d.uniqNameList.splice(1,d.uniqNameList.length-1)}di.helper.Formatter;var j=di.config.Dict;di.config.Lang;var k=di.config.URL,l=di.helper.Util,m=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind;var n=xutil.object.extend;xutil.object.assign,baidu.json.parse;var o=baidu.json.stringify;xutil.url.stringifyParam,xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString;var p=xutil.url.textParam,q=xutil.url.numberParam,r=Array.prototype.push,s=xutil.url.wrapArrayParam,t=l.logError,u=xutil.LinkedHashMap,v=xui.XDatasource,w=$namespace().MetaConditionModel=m(v,a),x=w.prototype;x.init=function(){};var y={META_DATA:{RTPL_OLAP_TABLE:k.fn("META_CONDITION_IND_DIM_TABLE"),RTPL_OLAP_CHART:k.fn("META_CONDITION_IND_DIM_CHART")},SELECT:{RTPL_OLAP_TABLE:k.fn("META_CONDITION_SELECT_TABLE"),RTPL_OLAP_CHART:k.fn("META_CONDITION_SELECT_CHART")},CANDIDATE_INIT:{RTPL_OLAP_TABLE:k.fn("META_CONDITION_CANDIDATE_INIT"),RTPL_OLAP_CHART:k.fn("META_CONDITION_CANDIDATE_INIT")},CANDIDATE_SUBMIT:{RTPL_OLAP_TABLE:k.fn("META_CONDITION_CANDIDATE_SUBMIT"),RTPL_OLAP_CHART:k.fn("META_CONDITION_CANDIDATE_SUBMIT")},ADD_SERIES_GROUP:{RTPL_OLAP_CHART:k.fn("META_CONDITION_ADD_SERIES_GROUP")},REMOVE_SERIES_GROUP:{RTPL_OLAP_CHART:k.fn("META_CONDITION_REMOVE_SERIES_GROUP")},CHART_CONFIG_INIT:{RTPL_OLAP_CHART:k.fn("CONSOLE_CHART_CONFIG_INIT")},CHART_CONFIG_SUBMIT:{RTPL_OLAP_CHART:k.fn("CONSOLE_CHART_CONFIG_SUBMIT")},ROWHEAD_CONFIG_INIT:{RTPL_OLAP_TABLE:k.fn("ROWHEAD_CONFIG_INIT")},ROWHEAD_CONFIG_SUBMIT:{RTPL_OLAP_TABLE:k.fn("ROWHEAD_CONFIG_SUBMIT")},DIMSHOW_CONFIG_INIT:{RTPL_OLAP_TABLE:k.fn("DIMSHOW_CONFIG_INIT"),RTPL_OLAP_CHART:k.fn("DIMSHOW_CONFIG_INIT")},DIMSHOW_CONFIG_SUBMIT:{RTPL_OLAP_TABLE:k.fn("DIMSHOW_CONFIG_SUBMIT"),RTPL_OLAP_CHART:k.fn("DIMSHOW_CONFIG_SUBMIT")},GET_TEMPLATE_INFO:{RTPL_OLAP_TABLE:k.fn("GET_TEMPLATE_INFO"),RTPL_OLAP_CHART:k.fn("GET_TEMPLATE_INFO")},REPORT_ROWMERGE_KEY_SUBMIT:{RTPL_OLAP_TABLE:k.fn("REPORT_ROWMERGE_KEY_SUBMIT"),RTPL_OLAP_CHART:k.fn("REPORT_ROWMERGE_KEY_SUBMIT")},DATA_FORMAT_SET:{RTPL_OLAP_TABLE:k.fn("DATA_FORMAT_SET"),RTPL_OLAP_CHART:k.fn("DATA_FORMAT_SET")}};x.url=function(a){return y[a.datasourceId][this._sReportType]()},x.param=new v.Set({META_DATA:function(){return this._fCommonParamGetter()},SELECT:function(a){var b=a.args,c=b.changeWrap,d=[];return d.push(this._fCommonParamGetter()),r.apply(d,s(c.uniqNameList,"uniqNameList")),d.push("from="+p(c.from)),d.push("to="+p(c.to)),d.push("toPosition="+q(c.toPosition,-1)),d.join("&")},CANDIDATE_INIT:function(){return this._fCommonParamGetter()},CANDIDATE_SUBMIT:function(a){return this._fCommonParamGetter(a.args)},ADD_SERIES_GROUP:function(){return this._fCommonParamGetter()},REMOVE_SERIES_GROUP:function(a){return this._fCommonParamGetter({from:a.args.selLineName})},CHART_CONFIG_INIT:function(){return this._fCommonParamGetter()},CHART_CONFIG_SUBMIT:function(a){var b=a.args,c=this._fCommonParamGetter;return c.markParamMode(b.series,"JSON"),c.markParamMode(b.yAxises,"JSON"),c(b)},ROWHEAD_CONFIG_INIT:function(){return this._fCommonParamGetter()},ROWHEAD_CONFIG_SUBMIT:function(a){return this._fCommonParamGetter(a.args)},DIMSHOW_CONFIG_INIT:function(){return this._fCommonParamGetter()},DIMSHOW_CONFIG_SUBMIT:function(a){return this._fCommonParamGetter(a.args)},GET_TEMPLATE_INFO:function(a){var b=[];return b.push("reportTemplateId="+p(this._fCommonParamGetter.getReportTemplateId()),"templateKey="+p(a.args.key)),b.join("&")},DATA_FORMAT_SET:function(a){var b=[];return b.push("reportTemplateId="+p(this._fCommonParamGetter.getReportTemplateId()),"dataFormatDto="+p(o(a.args.formatDto))),b.join("&")},REPORT_ROWMERGE_KEY_SUBMIT:function(a){var b=[];b.push("reportTemplateId="+p(this._fCommonParamGetter.getReportTemplateId()));for(var c in a.args)if("updateTemplateProperty"==c){var d=a.args[c];for(var e in d)b.push(c+"="+d[e])}else b.push(c+"="+p(a.args[c]));return b.join("&")}}),x.parse=new v.Set({META_DATA:c,SELECT:d,CANDIDATE_INIT:e,CANDIDATE_SUBMIT:e,ADD_SERIES_GROUP:c,REMOVE_SERIES_GROUP:c,CHART_CONFIG_INIT:e,CHART_CONFIG_SUBMIT:e,ROWHEAD_CONFIG_INIT:e,ROWHEAD_CONFIG_SUBMIT:e,DIMSHOW_CONFIG_INIT:e,DIMSHOW_CONFIG_SUBMIT:e,GET_TEMPLATE_INFO:b,DATA_FORMAT_SET:e,REPORT_ROWMERGE_KEY_SUBMIT:e}),x.error=new v.Set({META_DATA:function(){this._oIndList.clean(),this._oDimList.clean(),this._oSelLineWrap.clean(),this._oStatusWrap={}},SAVE:function(){}}),x.getSelLineWrap=function(){return this._oSelLineWrap},x.getIndDim=function(){return{indList:this._oIndList,dimList:this._oDimList}},x.getStatusWrap=function(){return this._oStatusWrap},x.getMetaItem=function(a){var b=this._oIndList.get(a);return b||(b=this._oDimList.get(a)),b},x.getSeriesCfg=function(){return this._oSeriesCfg},x.$clean=function(){this._oIndList.cleanWithoutDefaultAttr(),this._oDimList.cleanWithoutDefaultAttr(),this._oSelLineWrap.cleanWithoutDefaultAttr(),this._oStatusWrap={},this._oSeriesCfg={}},x.diffSelected=function(a){var b,c={uniqNameList:[]};for(var d in a)b=this._oSelLineWrap.get(d),i.call(this,d,a[d],b,c);return c},x.$updateSelected=function(a){var b,c=a.from!=a.to?this._oSelLineWrap.get(a.from):null,d=this._oSelLineWrap.get(a.to),e=a.fromLineData,f=a.toLineData,g=0;if(c)for(c.cleanWithoutDefaultAttr(),g=0;g<e.length;g++)b=e[g],c.addLast(this.getMetaItem(b));if(d)for(d.cleanWithoutDefaultAttr(),g=0;g<f.length;g++)b=f[g],d.addLast(this.getMetaItem(b))}}(),$namespace("di.shared.model"),function(){function a(a){this._sReportType=a.reportType||"RTPL_OLAP_TABLE",this._fCommonParamGetter=a.commonParamGetter,this._oIndList=new n(null,"uniqName"),this._liteOlapIndList=new n(null,"uniqName"),this._oDimList=new n(null,"uniqName"),this._oSelLineWrap=new n(null,"k","l"),this._oStatusWrap={},this._oSeriesCfg={}}function b(a){this._fCommonParamGetter.update(a.data)}function c(a){(this._oStatusWrap=a.metaStatusData)&&(e.call(this,this._oStatusWrap.indMetas,this._oIndList),e.call(this,this._oStatusWrap.dimMetas,this._oDimList));var b=this._oIndList,c=this._oDimList;this._oSelLineWrap.foreach(function(a,d){d.foreach(function(a,d){var e;((e=b.get(a))||(e=c.get(a)))&&k(d,e)})})}function d(a,b){var c=this;a.foreach(function(a,d){b?d.clazz=b:c._oIndList.containsKey(d.uniqName)?d.clazz="IND":c._oDimList.containsKey(d.uniqName)&&(d.clazz="DIM")})}function e(a,b){if(b.foreach(function(a,b){b.status=g.META_STATUS.DISABLED}),a){var c=a.validMetaNames;!c&&(c=a.validMetaNames=[]);var d=a.selectedMetaNames;!d&&(d=a.selectedMetaNames=[]);var e,f;for(e=0;e<c.length;)(f=b.get(c[e]))?(f.status=g.META_STATUS.NORMAL,e++):c.splice(e,1);for(e=0;e<d.length;)(f=b.get(d[e]))?(f.status=g.META_STATUS.SELECTED,e++):d.splice(e,1);var h=a.disabledMetaNames=[];b.foreach(function(a,b){b.status==g.META_STATUS.DISABLED&&h.push(a)})}}function f(a,b,c,d){if(b.length==c.size()){var e,f,g,h,i;c.foreach(function(a,c,d){null==f?a!=b[d]&&(e=a,f=d):(e==b[d]&&(g=d),b[f]==a&&(h=d,i=a))}),null!=f&&(d.from=a,d.to=a,d.fromLineData=b,d.toLineData=b,h>g?(d.uniqName=i,d.toPosition=f):(d.uniqName=e,d.toPosition=g),d.uniqNameList.push(d.uniqName))}else if(b.length>c.size())for(var j,k=0;k<b.length;k++)j=b[k],c.containsKey(j)||(d.uniqName=j,d.uniqNameList.splice(0,1,j),d.to=a,d.toLineData=b,null==d.toPosition&&(d.toPosition=k));else b.length<c.size()&&c.foreach(function(c,e,f){return b[f]!=c?(d.uniqName=c,d.uniqNameList.push(c),d.from=a,d.fromLineData=b,!1):void 0});d.uniqNameList.splice(1,d.uniqNameList.length-1)}di.helper.Formatter;var g=di.config.Dict;di.config.Lang;var h=di.config.URL,i=di.helper.Util,j=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.lang.isArray;var k=xutil.object.extend;xutil.object.assign,baidu.json.parse;var l=i.logError,m=xutil.uid.getUID,n=xutil.LinkedHashMap,o=xui.XDatasource,p=$namespace().OlapMetaConfigModel=j(o,a),q=p.prototype;q.init=function(){};var r={RTPL_OLAP_TABLE:{DATA:h.fn("META_CONDITION_IND_DIM_TABLE"),LITEOLAP_INDS_DATA:h.fn("LITEOLAP_INDS_META_DATA"),SELECT:h.fn("META_CONDITION_SELECT_TABLE"),LIST_SELECT:h.fn("META_CONDITION_LIST_SELECT_TABLE")},RTPL_OLAP_CHART:{DATA:h.fn("META_CONDITION_IND_DIM_CHART"),LITEOLAP_INDS_DATA:h.fn("LITEOLAP_INDS_META_DATA"),SELECT:h.fn("META_CONDITION_SELECT_CHART"),LIST_SELECT:h.fn("META_CONDITION_LIST_SELECT_CHART")}};q.url=function(a){return r[this._sReportType][a.datasourceId]()},q.businessKey=new o.Set({DATA:"OLAP_META_CONFIG_MODEL_DATA_"+m(),SELECT:"OLAP_META_CONFIG_MODEL_SELECT_"+m()}),q.complete=new o.Set({DATA:b,LITEOLAP_INDS_DATA:b,SELECT:b}),q.param=new o.Set({DATA:function(a){return this._fCommonParamGetter(a.args.param)},LITEOLAP_INDS_DATA:function(a){return this._fCommonParamGetter(a.args.param)},SELECT:function(a){var b=a.args.changeWrap,c={from:b.from,to:b.to,toPosition:null!=b.toPosition?b.toPosition:-1,needShowCalcInds:a.args.needShowCalcInds,uniqNameList:[]};return c.uniqNameList.push.apply(c.uniqNameList,b.uniqNameList),this._fCommonParamGetter(c)},LIST_SELECT:function(a){return this._fCommonParamGetter(a.args)}}),q.parse=new o.Set({DATA:function(a){try{this.$clean();var b=a.metaData;this._oIndList.appendAll(b.inds),this._oDimList.appendAll(b.dims),d.call(this,this._oIndList,"IND"),d.call(this,this._oDimList,"DIM"),this._oSeriesCfg={};var e=a.seriesTypes||{};for(var f in e)this._oSeriesCfg[f]={type:e[f]};for(var g,h,i=0;g=a.index4Selected[i];i++)this._oSelLineWrap.addLast({k:g,l:h=new n(a.selected[g],"uniqName")}),d.call(this,h);c.call(this,a)}catch(j){l(j),this.$goError()}},LITEOLAP_INDS_DATA:function(){try{this.$clean()}catch(a){l(a),this.$goError()}},SELECT:function(a,b,d){try{c.call(this,a),this.$updateSelected(d.args.changeWrap)}catch(e){l(e),this.$goError()}}}),q.error=new o.Set({DATA:function(){this._oIndList.clean(),this._liteOlapIndList.clean(),this._oDimList.clean(),this._oSelLineWrap.clean(),this._oStatusWrap={}}}),q.$clean=function(){this._oIndList.cleanWithoutDefaultAttr(),this._liteOlapIndList.cleanWithoutDefaultAttr(),this._oDimList.cleanWithoutDefaultAttr(),this._oSelLineWrap.cleanWithoutDefaultAttr(),this._oStatusWrap={},this._oSeriesCfg={}},q.getSelLineWrap=function(){return this._oSelLineWrap},q.getIndDim=function(){return{indList:this._oIndList,dimList:this._oDimList}},q.getLiteOlapIndList=function(){return this._liteOlapIndList},q.getUpdateData=function(){return this._oStatusWrap},q.getSeriesCfg=function(){return this._oSeriesCfg},q.getMetaItem=function(a){var b=this._oIndList.get(a);return b||(b=this._oDimList.get(a)),b},q.diffSelected=function(a){var b,c={uniqNameList:[]};for(var d in a)b=this._oSelLineWrap.get(d),f.call(this,d,a[d],b,c);return c},q.$updateSelected=function(a){var b,c=a.from!=a.to?this._oSelLineWrap.get(a.from):null,d=this._oSelLineWrap.get(a.to),e=a.fromLineData,f=a.toLineData,g=0;if(c)for(c.cleanWithoutDefaultAttr(),g=0;g<e.length;g++)b=e[g],c.addLast(this.getMetaItem(b));if(d)for(d.cleanWithoutDefaultAttr(),g=0;g<f.length;g++)b=f[g],d.addLast(this.getMetaItem(b))}}(),$namespace("di.shared.model"),function(){var a=xutil.url.textParam;xutil.object.clone;var b=$namespace().PageInfo=function(a){this.disable,this.totalRecordCount,this.pageSize,this.setData(a)},c=b.prototype;c.setData=function(a){a&&(null!=a.disabled&&(this.disabled=a.disabled),null!=a.totalRecordCount&&(this.totalRecordCount=a.totalRecordCount),null!=a.pageSize&&(this.pageSize=a.pageSize),null!=a.currentPage&&(this.currentPage=a.currentPage))},c.setServerData=function(a,b){var c;switch(b){case"TCOM":c={},a&&(c.disabled=!1,c.totalRecordCount=parseInt(a.totalRecNum)||0,c.pageSize=parseInt(a.pageSize)||0,c.currentPage=parseInt(a.curPageNum)||0);break;default:c=a}this.setData(c)},c.getServerParam=function(b,c){var d=[];switch(null==b&&(b="page."),c){case"TCOM":d.push(b+"curPageNum="+a(this.currentPage)),d.push(b+"pageSize="+a(this.pageSize));break;default:d.push(b+"currentPage"+a(this.currentPage)),d.push(b+"pageSize"+a(this.pageSize))}return d.join("&")}}(),$namespace("di.shared.model"),function(){var a=xutil.fn.bind,b=$namespace().PanelPageRadioAdapter={};b.$bind=function(){this._uPanelPageContainer.onbeforechange=a(this.$pageBeforeChangeHandler,this),this._uPanelPageContainer.onafterchange=a(this.$pageAfterChangeHandler,this)},b.$addItem=function(a,b){var c=this._uPanelPageContainer,d=c.add({value:b.id,text:b.title},function(){return a({el:null,parent:c,pageId:b.pageId})});return{content:d,item:b.id}},b.$selectItem=function(a){this._uPanelPageContainer.select(a.item)},b.$retrievalPageId=function(){return arguments[0]},b.$setTitle=function(){},b.$$mark=function(){}}(),$namespace("di.shared.model"),function(){var a=xutil.fn.bind,b=xutil.dom.addClass,c=xutil.dom.removeClass,d=$namespace().PanelPageTabAdapter={};d.$bind=function(){this._uPanelPageContainer.onbeforechange=a(this.$pageBeforeChangeHandler,this),this._uPanelPageContainer.onafterchange=a(this.$pageAfterChangeHandler,this),this._uPanelPageContainer.ontabclose=a(this.$pageCloseHandler,this)},d.$addItem=function(a,b){var c=this._uPanelPageContainer.addTab(function(c,d){return a({el:c,parent:d,pageId:b.pageId})},{title:b.title,index:b.index,canClose:b.canClose,memo:b.pageId});return{content:c.tabContent,item:c.tabItem}},d.$selectItem=function(a){this._uPanelPageContainer.selectTab(a.item)},d.$retrievalPageId=function(){var a=arguments[0];return a.getMemo()},d.$setTitle=function(a,b){var c=this._oPanelPageSet.get(a);c&&c.item.setTitle(b)},d.$mark=function(a,d){var e=this._oPanelPageSet.get(a);if(e){var f=e.item;d?b(f.getOuter(),f.getType()+"-mark"):c(f.getOuter(),f.getType()+"-mark")}}}(),$namespace("di.shared.model"),function(){var a=xutil.object.inheritsObject,b=xui.XDatasource;xutil.fn.bind,xutil.lang.isString;var c=xutil.lang.hasValue,d=xutil.object.extend,e=xutil.uid.getUID,f=xutil.object.getByPath,g=xutil.url.parseParam,h=xutil.LinkedHashMap,i=$namespace().PanelPageManager=a(b,function(a){this._oPanelPageSet=new h,this._oCurrPageWrap,this._sCurrPageId,d(this,a.adapter)}),j=i.prototype;j.init=function(){this.$bind()},j.openByURI=function(a,b,c){var h=a.split("?"),i=f(h[0]),j=g(h[1]);b=b||{},d(j,b);var k=j.forceCreate,l=k?"PANEL_PAGE_"+e("PANEL_PAGE"):j.pageId,m=j.pageTitle;j.panelPageManager=this;var n=this.getPage(l);return(!n||k)&&(this.add(function(a){return a.el.appendChild(j.el=document.createElement("div")),n=new i(j)},{pageId:l,title:m,canClose:!0}),n.init(),c&&c(n)),this.select(l,j),n},j.add=function(a,b){var d,e;if(b=b||{},!a)return null;if(!c(e=b.pageId)&&(e=b.pageId=this.$genPageId()),this._oPanelPageSet.containsKey(e))throw new Error("Duplicate panel page ID! id="+e);return d=this.$addItem(a,b),this._oPanelPageSet.addFirst({page:d.content,item:d.item},e),e},j.exists=function(a){return!!this._oPanelPageSet.containsKey(a)},j.select=function(a,b){b=b||{};var c=b.forceActive,d=this._oPanelPageSet.get(a);if(d){var e=d!=this._oCurrPageWrap;if(e){this._oCurrPageWrap&&(this._oCurrPageWrap.page.inactive(),this.notify("page.inactive",[this._sCurrPageId])),this._oCurrPageWrap=d;var f=this._sCurrPageId;this._sCurrPageId=a,this.$selectItem(d),this._oPanelPageSet.remove(a),this._oPanelPageSet.addLast(d,a),this.notify("page.change",[a,f])}(c||e)&&(d.page.active(b),this.notify("page.active",[a]))}},j.goTo=function(a,b){this.select(a,b)},j.size=function(){return this._oPanelPageSet.size()},j.getPage=function(a){return(this._oPanelPageSet.get(a)||{}).page},j.getCurrentPage=function(){return this._oCurrPageWrap?this._oCurrPageWrap.page:null},j.getCurrentPageId=function(){return this._sCurrPageId},j.setTitle=function(a,b){return this.$setTitle(a,b)},j.mark=function(a,b){return this.$mark(a,b)},j.$pageBeforeChangeHandler=function(){this._oCurrPageWrap&&(this._oCurrPageWrap.page.inactive(),this.notify("page.inactive",[this._sCurrPageId]))},j.$pageAfterChangeHandler=function(){var a,b=this.$retrievalPageId.apply(this,arguments),c=this._sCurrPageId;(a=this._oPanelPageSet.get(b))&&(this._oCurrPageWrap=a,this._sCurrPageId=b,this._oPanelPageSet.remove(b),this._oPanelPageSet.addLast(a,b),this.notify("page.change",[b,c]),a.page.active(),this.notify("page.active",[b]))},j.$pageCloseHandler=function(){var a=this.$retrievalPageId.apply(this,arguments);if(this._oPanelPageSet.size()<=1)return!1;var b=this._oPanelPageSet.remove(a);this._oPanelPageSet.foreach(function(c,d){d.page.getFromPageId()==a&&d.page.setFromPageId(b.page.getFromPageId())}),b.page.dispose(),this._oCurrPageWrap&&this._oCurrPageWrap==b&&(this._oCurrPageWrap=null,this._sCurrPageId=null,this.goTo(this._oPanelPageSet.lastKey())),this.notify("page.close",[a])},j.$genPageId=function(){for(var a=1;this._oPanelPageSet.containsKey(a);)a++;return a},j.inject=function(a){this._uPanelPageContainer=a},j.forEachPage=function(a){this._oPanelPageSet.foreach(function(b,c,d){a(b,c.page,d)})}}(),$namespace("di.shared.model"),function(){function a(){this._oDatasource=[],this._oWrap={sortInfo:{},pageInfo:new j,pageData:[]}}var b=xutil.object,c=xutil.lang,d=b.extend,e=b.inheritsObject;xutil.dom.q,xutil.dom.g;var f=xutil.collection.sortList,g=c.hasValue,h=c.isArray,i=xui.XDatasource;di.config.Dict,di.config.URL;var j;$link(function(){j=di.shared.model.PageInfo});var k=$namespace().TableModel=e(i,a),l=k.prototype;l.DEFAULT_PAGE_SIZE=20,l.getData=function(){var a=d({},this._oWrap);return a.sortInfo=this.$getMainSortInfo(a.sortInfo),a},l.$getWrap=function(){return this._oWrap},l.getDatasource=function(){return this._oDatasource||[]},l.prepareArgs=function(a,b){return this._oWrap,this["$"+a](a,b)},l.persistent=function(a,b,c){this._oWrap=d({},b),this._oDatasource=a||this._oDatasource,c?this._oWrap.pageData=a:(this._oWrap.pageInfo.totalRecordCount=this._oDatasource.length,this.$sortTable(a,this._oWrap.sortInfo),this._oWrap.pageData=this.$pagingTable(a,this._oWrap.pageInfo))},l.$CMD_INIT=function(){var a=this._oWrap,b={},c=a.pageInfo.pageSize;return b.sortInfo=this.$initSortInfo(),b.pageInfo=this.$initPageInfo(),c&&(b.pageInfo.pageSize=c),b},l.$CMD_SORT=function(a,b){var c=this._oWrap,d={},e=c.pageInfo.pageSize;return this.$getMainSortInfo(b.sortInfo).sortby!=this.$getMainSortInfo(c.sortInfo).sortby?d.sortInfo=this.$changeSortby(this.$getMainSortInfo(b.sortInfo).sortby):(d.sortInfo=c.sortInfo,this.$getMainSortInfo(d.sortInfo).orderby=this.$changeOrderby(d.sortInfo)),d.pageInfo=c.pageInfo,e&&(d.pageInfo.pageSize=e),d},l.$CMD_CHANGE_PAGE=function(a,b){var c=this._oWrap,d={},e=c.pageInfo.pageSize;return d.sortInfo=c.sortInfo,d.pageInfo=c.pageInfo,d.pageInfo.currentPage=Number(b.pageInfo.currentPage),e&&(d.pageInfo.pageSize=e),d},l.$CMD_CHANGE_PAGE_SIZE=function(a,b){var c=this._oWrap,d={};return c.pageInfo.pageSize,d.sortInfo=this.$initSortInfo(),d.pageInfo=this.$initPageInfo(),d.pageInfo.pageSize=Number(b.pageInfo.pageSize),d},l.$initPageInfo=function(){return new j({disabled:!1,currentPage:1,pageSize:this.DEFAULT_PAGE_SIZE})},l.$initSortInfo=function(){return{sortby:null,orderby:null,dataField:null}},l.$changeSortby=function(a){return{sortby:a,orderby:null,dataField:a}},l.$changeOrderby=function(a){var b=h(a)?a[0]:a;return"asc"==b.orderby?"desc":"asc"},l.$sortTable=function(a,b){if(a&&b)for(var c,d,e=h(b)?b:[b],i=e.length-1;c=e[i];i--)g(c.dataField)&&c.orderby&&(d="asc"==c.orderby?"<":">",f(a,c.dataField,d,!1))},l.$pagingTable=function(a,b){var c,d,e=[];b.disabled?(c=0,d=a.length):(c=(b.currentPage-1)*b.pageSize,d=b.pageSize);for(var f,g=0;d>g&&(f=a[c+g]);g++)e.push(f);return e},l.$getMainSortInfo=function(a){return h(a)?a[0]:a}}(),$namespace("di.shared.ui"),function(){function a(a){this._mModel=a.model,this._uParent=a.parent,this.$doCreateModel(a),this._bOpened=!1;var b=this._el=a.el||document.createElement("div");h(b,a.cssName||"di-config-panel"),document.body.appendChild(b),b.innerHTML=i(v,j(a.panelTitle||this.PANEL_TITLE,"",!0),this.$doGetContentTPL(a)),this._uForm=g(r,k("q-di-form",b)[0],null,{hide:!0}),this._uSubmitBtn=g(s,k("q-di-submit",b)[0],null,{primary:"ui-button-g"}),this._uCancelBtn=g(s,k("q-di-cancel",b)[0],null,{primary:"ui-button"}),this._eContent=k("q-di-form-content",b)[0],this.$doCreateView(a)}function b(a){return function(){return this._bOpened?a.apply(this,arguments):void 0}}di.config.URL;var c=di.helper.Dialog,d=di.helper.Util,e=di.config.Dict,f=di.config.Lang,g=d.ecuiCreate,h=xutil.dom.addClass;d.disposeInnerControl;var i=xutil.string.template,j=xutil.string.toShowText,k=xutil.dom.q,l=xutil.object.inheritsObject;xutil.lang.hasValueNotBlank,xutil.object.extend,xutil.object.assign;var m=di.helper.Dialog.alert,n=xutil.lang.isString;xutil.string.textLength,xutil.string.textSubstr,xutil.date.stringToDate;var o=xutil.dom.remove;xutil.string.trim;var p=xutil.fn.bind,q=xui.XView,r=ecui.ui.Form,s=ecui.ui.Button;$link(function(){});var t=$namespace().BaseConfigPanel=l(q,a),u=t.prototype,v=['<div class="q-di-form">',"<label>#{0}</label>",'<div class="q-di-form-content">#{1}</div>',"<div>",'<div class="di-dim-select-btn">','<div class="q-di-submit">ç¡®å®</div>','<div class="q-di-cancel">åæ¶</div>',"</div>","<div>","</div>"].join("");u.$doCreateView=function(){},u.$doCreateModel=function(){},u.$doGetModel=function(){return this._mModel},u.$doInit=function(){},u.$doGetContentTPL=function(){return""},u.$doResetInput=function(){},u.$doRender=function(){},u.$doOpen=function(){},u.$doOpenSync=function(){var a=this.$getDS().INIT;a?this.$doGetModel().sync({datasourceId:a,args:this.$doGetInitArgs()}):this.$handleInitSuccess({})},u.$doSubmit=function(){var a=this.$doGetSubmitArgs();if(n(a))return m(a),void 0;var b=this.$getDS().SUBMIT,c={datasourceId:b,args:a};b?this.$doGetModel().sync(c):this.$handleSubmitSuccess(null,null,c)},u.$doCancel=function(){this.close()},u.$doSubmitSuccess=function(){},u.$doEnable=function(){},u.$doDisable=function(){},u.$doGetInitArgs=function(){return{}},u.$doGetSubmitArgs=function(){return{}},u.$doDispose=function(){},u.init=function(){var a=this;this.$doGetModel(),this._uSubmitBtn.onclick=p(this.$doSubmit,this),this._uCancelBtn.onclick=p(this.$doCancel,this),this._uForm.onhide=function(){a._bOpened=!1},this._uForm.init(),this._uSubmitBtn.init(),this._uCancelBtn.init(),this.$doInit(),this.$doResetInput()},u.dispose=function(){this.$doDispose(),this._uForm&&this._uForm.dispose(),this._uSubmitBtn&&this._uSubmitBtn.dispose(),this._uCancelBtn&&this._uCancelBtn.dispose(),this._eContent=null,o(this._el),this._el=null,t.superClass.dispose.call(this)},u.getEl=function(){return this._el},u.getContentEl=function(){return this._eContent},u.open=function(a,c){this._sMode=a,this._bOpened=!0;var d=this._mModel;(ds=this.$getDS().INIT)&&d.attachOnce(["sync.preprocess."+ds,b(this.disable),this],["sync.result."+ds,b(this.$handleInitSuccess),this],["sync.error."+ds,b(this.$handleInitError),this],["sync.complete."+ds,b(this.enable),this]),(ds=this.$getDS().SUBMIT)&&d.attachOnce(["sync.preprocess."+ds,b(this.disable),this],["sync.result."+ds,b(this.$handleSubmitSuccess),this],["sync.error."+ds,b(this.$handleSubmitError),this],["sync.complete."+ds,b(this.enable),this]),this.$doOpen(a,c),this.$doResetInput(),this.$doOpenSync()},u.close=function(){this._uForm.hide()},u.enable=function(){this._bDisabled&&(this._uSubmitBtn.enable(),this._uCancelBtn.enable(),this.$doEnable()),t.superClass.enable.call(this)},u.disable=function(){this._bDisabled||(this._uSubmitBtn.disable(),this._uCancelBtn.disable(),this.$doDisable()),t.superClass.disable.call(this)},u.$handleInitSuccess=function(a){try{this._uForm.showModal(e.DEFAULT_MASK_OPACITY),this.$doRender(this.getContentEl(),a),this._uForm.resize(),this._uForm.center()}catch(b){}},u.$handleInitError=function(){var a=this;c.alert(f.GET_DIM_TREE_ERROR,function(){a.close()})},u.$handleSubmitSuccess=function(a,b,c){this.$doSubmitSuccess(this.getContentEl(),a,b,c),this.close(),this.notify("submit.close",[a,b,c])},u.$handleSubmitError=function(){c.alert(f.SAVE_FAILURE)},u.$getDS=function(){return this.DATASOURCE_ID_MAPPING||{}},u.center=function(){this._uForm.center()}}(),$namespace("di.shared.ui"),function(){var a=di.helper.Util,b=di.config.URL,c=xutil.object.inheritsObject;xutil.dom.q;var d=xutil.fn.bind,e=a.download,f=a.foreachDo,g=di.helper.Dialog,h=di.config.Lang,i=di.shared.ui.InteractEntity,j=$namespace().DIChart=c(i),k=j.prototype;k.EXPORT_HANDLER={sync:{datasourceId:"DATA"},syncX:{datasourceId:"X_DATA"},syncLiteOlapChart:{datasourceId:"LITEOLAPCHART_DATA"},syncS:{datasourceId:"S_DATA"},syncSAdd:{datasourceId:"S_ADD_DATA"},syncSRemove:{datasourceId:"S_REMOVE_DATA"},clear:{}},k.DEF={exportHandler:{sync:{datasourceId:"DATA"},syncX:{datasourceId:"X_DATA"},syncLiteOlapChart:{datasourceId:"LITEOLAPCHART_DATA"},syncS:{datasourceId:"S_DATA"},syncSAdd:{datasourceId:"S_ADD_DATA"},syncSRemove:{datasourceId:"S_REMOVE_DATA"},clear:{}},className:"di-chart",model:{clzPath:"di.shared.model.DIChartModel"}},k.$createView=function(){this.$di("getEl"),this._uChart=this.$di("vuiCreate","mainChart"),this._uDownloadBtn=this.$di("vuiCreate","download"),this._uOfflineDownloadBtn=this.$di("vuiCreate","offlineDownload")},k.init=function(){var a,b=this.DEF.exportHandler;for(a in b){var c=b[a].datasourceId;this.getModel().attach(["sync.preprocess."+c,this.$syncDisable,this,c],["sync.result."+c,this.$renderMain,this],["sync.result."+c,this.$handleDataLoaded,this],["sync.error."+c,this.$handleDataError,this],["sync.complete."+c,this.$syncEnable,this,c])}a="OFFLINE_DOWNLOAD",this.getModel().attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.error."+a,this.$handleOfflineDownloadError,this],["sync.complete."+a,this.$syncEnable,this,a]),this._uDownloadBtn&&(this._uDownloadBtn.onclick=d(this.$handleDownload,this)),this._uOfflineDownloadBtn&&this._uOfflineDownloadBtn.attach("confirm",this.$handleOfflineDownload,this),f([this.getModel(),this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"init")},k.dispose=function(){this._uChart&&this._uChart.$di("dispose"),j.superClass.dispose.call(this)},function(){function a(a){return function(b){this.$sync(this.getModel(),a,b||{},this.$di("getEvent"))}}var b=k.DEF.exportHandler;for(var c in b)k[c]=a(b[c].datasourceId)}(),k.clear=function(){this._uChart&&this._uChart.$di("setData")},k.$renderMain=function(a,b,c){this._uChart.$di("setData",this.getModel().getChartData(),{diEvent:this.$diEvent(c)}),this.$di("dispatchEvent",this.$diEvent("rendered",c))},k.resize=function(){},k.enable=function(){f([this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"enable"),j.superClass.enable.call(this)},k.disable=function(){f([this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"disable"),j.superClass.disable.call(this)},k.$handleDownload=function(){var a=this.$di("getCommonParamGetter"),c=b("OLAP_CHART_DOWNLOAD")+"?"+a();e(c,null,!0),a.update()},k.$handleOfflineDownload=function(){var a=this._uOfflineDownloadBtn.getValue()||{};this.$sync(this.getModel(),"OFFLINE_DOWNLOAD",{email:a.email})},k.$handleDataLoaded=function(a,b,c){this.$di("dispatchEvent",this.$diEvent("dataloaded."+c.datasourceId,c)),this.$di("dispatchEvent",this.$diEvent("dataloaded",c))},k.$handleDataError=function(a,b,c){this.clear(),this.$di("dispatchEvent",this.$diEvent("rendered",c)),this.$di("dispatchEvent",this.$diEvent("dataerror",c))},k.$handleOfflineDownloadError=function(){g.alert(h.SAD_FACE+h.OFFLINE_DOWNLOAD_FAIL)}}(),$namespace("di.shared.ui"),function(){di.helper.Util;var a=xutil.object.inheritsObject;xutil.dom.q,xutil.fn.bind,xutil.object.objKey,xutil.lang.isObject;var b=di.shared.ui.InteractEntity,c=xutil.object.extend,d=$namespace().DIForm=a(b),e=d.prototype;e.DEF={exportHandler:{sync:{datasourceId:"DATA"},clear:{}},className:"di-form",model:{clzPath:"di.shared.model.DIFormModel"}},e.$createView=function(a){this._oOptions=c({},a),a.submitMode=a.submitMode||"IMMEDIATE",this._aInput=[];for(var b,d=0;b=this.$di("vuiCreate","input."+d);d++)this._aInput.push(b),b.$di("setOpt","cfgOpt","paramMode","JSON");this._uConfirmBtn=this.$di("vuiCreate","confirm")},e.init=function(){var a,b,c,d,e=this;for(this.getModel().attach(["sync.preprocess.DATA",this.$syncDisable,this,"DATA"],["sync.result.DATA",this.$renderMain,this],["sync.result.DATA",this.$handleDataLoaded,this],["sync.error.DATA",this.$handleDataError,this],["sync.complete.DATA",this.$syncEnable,this,"DATA"],["sync.result.ASYNC_DATA",this.$renderAsync,this],["sync.error.ASYNC_DATA",this.$handleAsyncError,this]),a=0;b=this._aInput[a];a++)c=b.$di("getDef"),d=b.$di("getOpt","cfgOpt"),d.changeSilent||b.$di("addEventListener","change",this.$handleChange,this),d.async&&b.$di("addEventListener","async",this.$handleAsync,this,{bindArgs:[b]});for(this._uConfirmBtn&&(this._uConfirmBtn.onclick=function(){e.$submit()}),a=0;b=this._aInput[a];a++)b.$di("init")},e.dispose=function(){for(var a,b=0;a=this._aInput[b];b++)a.$di("dispose");d.superClass.dispose.call(this)},e.sync=function(){for(var a,b=[],c=0;a=this._aInput[c];c++)b.push(a.$di("getDef").name);this.$sync(this.getModel(),"DATA",{paramList:b},this.$di("getEvent"))},e.clear=function(){},e.$submit=function(){this.$di("dispatchEvent","submit",[this.$di("getValue")])},e.$renderMain=function(a,b,c){for(var d,e={diEvent:this.$diEvent(c)},f=this.getModel().getInitData(),g=0;d=this._aInput[g];g++)d.$di("setData",f[d.$di("getDef").name],e);this.$di("dispatchEvent",this.$diEvent("rendered",c))},e.$renderAsync=function(a,b,c){var d=c.args;d.callback(a[d.input.$di("getDef").name]||{})},e.resize=function(){},e.enable=function(){for(var a,b=0;a=this._aInput[b];b++)a.$di("enable");this._uConfirmBtn&&this._uConfirmBtn.$di("enable"),d.superClass.enable.call(this)},e.disable=function(){for(var a,b=0;a=this._aInput[b];b++)a.$di("disable");this._uConfirmBtn&&this._uConfirmBtn.$di("disable"),d.superClass.disable.call(this)},e.$handleDataLoaded=function(a,b,c){this.$di("dispatchEvent",this.$diEvent("dataloaded",c),[this.$di("getValue")])},e.$handleChange=function(){"IMMEDIATE"==this._oOptions.submitMode&&this.$submit()},e.$handleAsync=function(a,b,c){var d=a.$di("getDef").name;this.$sync(this.getModel(),"ASYNC_DATA",{paramName:d,arg:b},null,{value:b,callback:c,input:a})},e.$handleDataError=function(a,b,c){this.clear(),this.$di("dispatchEvent",this.$diEvent("rendered",c))},e.$handleAsyncError=function(){this.$di("dispatchEvent","rendered")}}(),$namespace("di.shared.ui"),function(){var a=di.helper.Util,b=di.config.URL,c=xutil.object.inheritsObject;xutil.dom.q;var d=xutil.fn.bind,e=a.download,f=a.foreachDo,g=di.helper.Dialog,h=di.config.Lang,i=di.shared.ui.InteractEntity,j=$namespace().DILiteOlapChart=c(i),k=j.prototype;k.EXPORT_HANDLER={sync:{datasourceId:"DATA"},syncX:{datasourceId:"X_DATA"},syncLiteOlapChart:{datasourceId:"LITEOLAPCHART_DATA"},syncS:{datasourceId:"S_DATA"},syncSAdd:{datasourceId:"S_ADD_DATA"},syncSRemove:{datasourceId:"S_REMOVE_DATA"},clear:{}},k.DEF={exportHandler:{sync:{datasourceId:"DATA"},syncX:{datasourceId:"X_DATA"},syncLiteOlapChart:{datasourceId:"LITEOLAPCHART_DATA"},syncS:{datasourceId:"S_DATA"},syncSAdd:{datasourceId:"S_ADD_DATA"},syncSRemove:{datasourceId:"S_REMOVE_DATA"},clear:{}},className:"di-chart",model:{clzPath:"di.shared.model.DIChartModel"}},k.$createView=function(){this.$di("getEl"),this._uChart=this.$di("vuiCreate","mainChart"),this._uDownloadBtn=this.$di("vuiCreate","download"),this._uOfflineDownloadBtn=this.$di("vuiCreate","offlineDownload")},k.init=function(){var a,b=this.DEF.exportHandler;for(a in b){var c=b[a].datasourceId;this.getModel().attach(["sync.preprocess."+c,this.$syncDisable,this,c],["sync.result."+c,this.$renderMain,this],["sync.result."+c,this.$handleDataLoaded,this],["sync.error."+c,this.$handleDataError,this],["sync.complete."+c,this.$syncEnable,this,c])}a="OFFLINE_DOWNLOAD",this.getModel().attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.error."+a,this.$handleOfflineDownloadError,this],["sync.complete."+a,this.$syncEnable,this,a]),this._uDownloadBtn&&(this._uDownloadBtn.onclick=d(this.$handleDownload,this)),this._uOfflineDownloadBtn&&this._uOfflineDownloadBtn.attach("confirm",this.$handleOfflineDownload,this),f([this.getModel(),this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"init")
},k.dispose=function(){this._uChart&&this._uChart.$di("dispose"),j.superClass.dispose.call(this)},function(){function a(a){return function(b){this.$sync(this.getModel(),a,b||{},this.$di("getEvent"))}}var b=k.DEF.exportHandler;for(var c in b)k[c]=a(b[c].datasourceId)}(),k.clear=function(){this._uChart&&this._uChart.$di("setData")},k.$renderMain=function(a,b,c){this._uChart.$di("setData",this.getModel().getChartData(),{diEvent:this.$diEvent(c)}),this.$di("dispatchEvent",this.$diEvent("rendered",c))},k.resize=function(){},k.enable=function(){f([this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"enable"),j.superClass.enable.call(this)},k.disable=function(){f([this._uChart,this._uDownloadBtn,this._uOfflineDownloadBtn],"disable"),j.superClass.disable.call(this)},k.$handleDownload=function(){var a=this.$di("getCommonParamGetter"),c=b("OLAP_CHART_DOWNLOAD")+"?"+a();e(c,null,!0),a.update()},k.$handleOfflineDownload=function(){var a=this._uOfflineDownloadBtn.getValue()||{};this.$sync(this.getModel(),"OFFLINE_DOWNLOAD",{email:a.email})},k.$handleDataLoaded=function(a,b,c){this.$di("dispatchEvent",this.$diEvent("dataloaded."+c.datasourceId,c)),this.$di("dispatchEvent",this.$diEvent("dataloaded",c))},k.$handleDataError=function(a,b,c){this.clear(),this.$di("dispatchEvent",this.$diEvent("rendered",c)),this.$di("dispatchEvent",this.$diEvent("dataerror",c))},k.$handleOfflineDownloadError=function(){g.alert(h.SAD_FACE+h.OFFLINE_DOWNLOAD_FAIL)}}(),$namespace("di.shared.ui"),function(){var a=di.helper.Util,b=di.config.URL,c=xutil.object.inheritsObject;xutil.dom.addClass;var d=xutil.object.assign;xutil.dom.q;var e=xutil.fn.bind;xutil.object.objKey,xutil.object.getByPath;var f,g=a.download,h=a.foreachDo,i=baidu.json.stringify,j=di.helper.Dialog,k=di.config.Lang,l=di.shared.ui.InteractEntity;$link(function(){f=di.shared.arg.ArgHandlerFactory});var m=$namespace().DIPlaneTable=c(l),n=m.prototype;n.DEF={exportHandler:{sync:{datasourceId:"DATA"},clear:{}},className:"di-plane-table",model:{clzPath:"di.shared.model.DIPlaneTableModel"}},n.$createView=function(){this.$di("getEl"),this._uTable=this.$di("vuiCreate","mainTable"),this._uDownloadBtn=this.$di("vuiCreate","download"),this._uDownloadExcelBtn=this.$di("vuiCreate","downloadExcel"),this._uOfflineDownloadBtn=this.$di("vuiCreate","offlineDownload"),this._uPager=this.$di("vuiCreate","pager")},n.init=function(){var a,b=this.getModel(),c=this._uTable,d=this._uDownloadBtn,f=this._uDownloadExcelBtn,g=this._uOfflineDownloadBtn,i=this._uPager;for(a in{DATA:1,DRILL:1,SORT:1})b.attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.result."+a,this.$renderMain,this],["sync.result."+a,this.$handleDataLoaded,this],["sync.error."+a,this.$handleDataError,this],["sync.complete."+a,this.$syncEnable,this,a]);a="OFFLINE_DOWNLOAD",b.attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.error."+a,this.$handleOfflineDownloadError,this],["sync.complete."+a,this.$syncEnable,this,a]),b.attach(["sync.preprocess.CHECK",this.$syncDisable,this,"CHECK"],["sync.result.CHECK",this.$handleRowAsync,this,!1],["sync.error.CHECK",this.$handleRowAsync,this,!0],["sync.complete.CHECK",this.$syncEnable,this,"CHECK"]),b.attach(["sync.preprocess.SELECT",this.$syncDisable,this,"SELECT"],["sync.result.SELECT",this.$handleRowAsync,this,!1],["sync.error.SELECT",this.$handleRowAsync,this,!0],["sync.complete.SELECT",this.$syncEnable,this,"SELECT"]),b.init(),c.onsort=e(this.$handleSort,this),c.onrowclick=e(this.$handleRowClick,this),c.onrowselect=e(this.$handleRowCheck,this,"rowselect","SELECT"),c.onrowcheck=e(this.$handleRowCheck,this,"rowcheck","CHECK"),c.onrowuncheck=e(this.$handleRowCheck,this,"rowuncheck","CHECK"),c.oncelllinkbridge=e(this.$handleLinkBridge,this),i&&(i.onchange=e(this.$handlePageChange,this),i.onpagesizechange=e(this.$handlePageSizeChange,this)),d&&(d.onclick=e(this.$handleDownload,this)),f&&(f.onclick=e(this.$handleDownloadExcel,this)),g&&g.attach("confirm",this.$handleOfflineDownload,this),h([c,d,g,i],"init"),this.$di("getEl").style.display="none"},n.dispose=function(){h([this._uTable,this._uPager,this._uDownloadBtn,this._uDownloadExcelBtn,this._uOfflineDownloadBtn],"dispose"),m.superClass.dispose.call(this)},n.sync=function(a){a=d({DI_querySessionClear:!0},a),this._uPager&&(a.pageSize=this._uPager.getPageSize()),this.$sync(this.getModel(),"DATA",a,this.$di("getEvent"))},n.clear=function(){h([this._uTable,this._uPager],"setData")},n.$renderMain=function(a,b,c){this.$di("getEl").style.display="",h([this._uTable,this._uPager,this._uDownloadBtn,this._uDownloadExcelBtn,this._uOfflineDownloadBtn],"diShow");var d={diEvent:this.$diEvent(c)};this._uTable.$di("setData",a,d),this._uPager&&(a.pageInfo?(this._uPager.show(),this._uPager.$di("setData",a.pageInfo,d)):this._uPager.hide()),this.$di("dispatchEvent",this.$diEvent("rendered",c))},n.resize=function(){this._uTable&&this._uTable.resize()},n.enable=function(){h([this._uTable,this._uPager,this._uDownloadBtn,this._uDownloadExcelBtn,this._uOfflineDownloadBtn],"enable"),m.superClass.enable.call(this)},n.disable=function(){h([this._uTable,this._uPager,this._uDownloadBtn,this._uDownloadExcelBtn,this._uOfflineDownloadBtn],"disable"),m.superClass.disable.call(this)},n.getDimTagsList=function(){for(var a,b=f([this,"getValue",this.$di("getId"),"table.rowChecked","dimTagsList"],[this,"attrArr","dimTagsList","value"])([{}])[0].dimTagsList,c=0;c<b.length;c++)(a=b[c])&&(b[c]=i(a));return b},n.$handleDownload=function(){var a=this.$di("getCommonParamGetter"),c=b("PLANE_TABLE_DOWNLOAD")+"?"+a();g(c,null,!0),a.update()},n.$handleDownloadExcel=function(){var a=this.$di("getCommonParamGetter"),c=b("PLANE_TABLE_DOWNLOADEXCEL")+"?"+a();g(c,null,!0),a.update()},n.$handleOfflineDownload=function(){var a=this._uOfflineDownloadBtn.getValue()||{};this.$sync(this.getModel(),"OFFLINE_DOWNLOAD",{email:a.email})},n.$handleLinkBridge=function(a,c){this.$di("linkBridge",a.linkBridge,b("PLANE_TABLE_LINK_BRIDGE"),this.$di("getCommonParamGetter")({colUniqName:a.uniqueName,rowUniqName:c.uniqueName,colDefineId:a.colDefineId}))},n.$handleRowClick=function(a){this.$di("dispatchEvent","rowclick",[{uniqueName:a.uniqueName}])},n.$handleRowCheck=function(a,b,c,d){this.$sync(this.getModel(),b,{uniqueName:c.uniqueName},null,{rowData:c,eventName:a,callback:d})},n.$handleSort=function(a){this.$sync(this.getModel(),"DATA",{orderbyParamKey:a})},n.$handleRowAsync=function(a,b,c,e){var f=e.args;f.callback(b.selected),this.$di("dispatchEvent",f.eventName,[d({},f.rowData)])},n.$handlePageChange=function(a){this.$sync(this.getModel(),"DATA",{currentPage:a,pageSize:this._uPager?this._uPager.getPageSize():void 0})},n.$handlePageSizeChange=function(a){this.$sync(this.getModel(),"DATA",{pageSize:a})},n.$handleDataLoaded=function(a,b,c){var e,f=c.datasourceId,g=this.$di("getValue"),h=c.args.param;"DATA"==f?e=[g]:"SORT"==f&&(e=[d({},h,["field","orderby"])]),this.$di("dispatchEvent",this.$diEvent("dataloaded."+f,c),e),f in{DATA:1,SORT:1}&&this.$di("dispatchEvent",this.$diEvent("datachange",c),[g]),this.$di("dispatchEvent",this.$diEvent("dataloaded",c),[g]),this.$di("dispatchEvent",this.$diEvent("outputexecinfo",c),[{data:a}])},n.$handleDataError=function(a,b,c){this.$di("getEl").style.display="",h([this._uTable,this._uPager,this._uDownloadBtn,this._uDownloadExcelBtn,this._uOfflineDownloadBtn],"diShow"),this.clear(),this.$di("dispatchEvent",this.$diEvent("rendered",c)),this.$di("dispatchEvent",this.$diEvent("dataerror",c))},n.$handleOfflineDownloadError=function(){j.alert(k.SAD_FACE+k.OFFLINE_DOWNLOAD_FAIL)}}(),$namespace("di.shared.ui"),function(){var a=di.helper.Util;di.config.URL;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.object.assign,xutil.dom.q;var c=xutil.fn.bind;xutil.object.objKey,xutil.object.getByPath,a.download;var d=a.foreachDo;di.helper.Dialog;var e,f=di.config.Lang,g=di.shared.ui.InteractEntity,h=di.helper.Dialog.alert;$link(function(){e=di.shared.arg.ArgHandlerFactory});var i=$namespace().DIRtplClone=b(g),j=i.prototype;j.DEF={className:"di-rtplclone",model:{clzPath:"di.shared.model.DIRtplCloneModel"}},j.$createView=function(){this.$di("getEl"),this._saveRtplCloneBtn=this.$di("vuiCreate","saveRtplClone"),this._clearRtplCloneBtn=this.$di("vuiCreate","clearRtplClone")},j.init=function(){var a=this.getModel(),b=this._saveRtplCloneBtn,e=this._clearRtplCloneBtn;d([b,e],"init"),a.attach(["sync.preprocess.SAVE",this.disable,this],["sync.result.SAVE",this.$handleSaveSuccess,this],["sync.error.SAVE",this.$handleError,this],["sync.complete.SAVE",this.enable,this]),a.attach(["sync.preprocess.GET_DEFAUL_IMAGENAME",this.disable,this],["sync.result.GET_DEFAUL_IMAGENAME",this.$handleClear,this],["sync.error.GET_DEFAUL_IMAGENAME",this.$handleError,this],["sync.complete.GET_DEFAUL_IMAGENAME",this.enable,this]),a.attach(["sync.preprocess.CLEAR",this.disable,this],["sync.result.CLEAR",this.$handleClearSuccess,this],["sync.error.CLEAR",this.$handleError,this],["sync.complete.CLEAR",this.enable,this]),b&&(b.onclick=c(this.$handleSaveRtplClone,this)),e&&(e.onclick=c(this.$handleClearRtplClone,this))},j.dispose=function(){d([this._saveRtplCloneBtn,this._clearRtplCloneBtn],"dispose"),i.superClass.dispose.call(this)},j.sync=function(){},j.clear=function(){},j.$handleSaveSuccess=function(){h(f.SMILE_FACE+"ä¿å­æå")},j.$handleClearSuccess=function(){h(f.SMILE_FACE+"æ¸é¤æåï¼å°å¨ä¸æ¬¡è¿å¥é¡µé¢æ¶çæ")},j.$handleClear=function(a){var b=a.defaultImageName,c=this.$di("getCommonParamGetter"),d=this.getModel();d.sync({datasourceId:"CLEAR",args:{reportImageName:b}}),c.update()},j.$handleError=function(){},j.resize=function(){},j.enable=function(){d([this._saveRtplCloneBtn,this._clearRtplCloneBtn],"enable"),i.superClass.enable.call(this)},j.disable=function(){d([this._saveRtplCloneBtn,this._clearRtplCloneBtn],"disable"),i.superClass.disable.call(this)},j.$handleSaveRtplClone=function(){var a=this.$di("getCommonParamGetter"),b=this.getModel();b.sync({datasourceId:"SAVE",args:{asDefault:!0}}),a.update()},j.$handleClearRtplClone=function(){var a=this.$di("getCommonParamGetter"),b=this.getModel();b.sync({datasourceId:"GET_DEFAUL_IMAGENAME",args:{asdadasda:"asdadadad"}}),a.update()}}(),$namespace("di.shared.ui"),function(){function a(a){var b=this.$di("getEl"),c=document.createElement("div");b.appendChild(c),this._bAutoDeaf=null==a.autoDeaf?!0:a.autoDeaf,this._bAutoComponentValueDisabled=null==a.autoComponentValueDisabled?!1:a.autoComponentValueDisabled,this._bAutoVUIValueDisabled=null==a.autoVUIValueDisabled?!0:a.autoVUIValueDisabled,this._aTab=[],this._uTab=f(h,c),this._aBodyPart=[];for(var d,g,i=this.$di("getRef","vpartRef","tab"),j=this.$di("getRef","vpartRef","body"),k=0;d=i[k];k++)g=j[k],this._aTab.push(this._uTab.addTab(null,e({tabEl:d.el,contentEl:g.el},d.$di("getOpt","dataOpt"),["title","canClose"]))),this._aBodyPart.push(this.$di("vpartCreate","body."+k))}var b=di.helper.Util,c=xutil.object.inheritsObject,d=b.ecuiDispose;xutil.dom.q;var e=xutil.object.assign;xutil.fn.bind,xutil.object.objKey;var f=b.ecuiCreate,g=di.shared.ui.InteractEntity,h=ecui.ui.TabContainer,i=$namespace().DITab=c(g,a),j=i.prototype;j.DEF={className:"di-tab"},j.init=function(){var a=this;this._uTab.onafterchange=function(b,c){a.$resetDisabled();for(var d,e,f=0;e=a._aBodyPart[f],d=a._aTab[f];f++)d.tabItem==b&&e.$di("dispatchEvent","active"),d.tabItem==c&&e.$di("dispatchEvent","inactive");a.$di("dispatchEvent","rendered"),a.$di("dispatchEvent","change")};var b,c=this.$di("getOpt","dataOpt"),d=c.selected-1;(b=this._aTab[d])&&(this._uTab.selectTab(b.tabItem),a.$di("dispatchEvent","rendered")),this.$resetDisabled(),b&&this._aBodyPart[d].$di("dispatchEvent","active")},j.$resetDisabled=function(){for(var a,b,c,d=this.$di("getId"),e=this.$di("getRef","vpartRef","body","DEF"),f=0;a=this._aTab[f];f++){c=this._uTab.getSelected()!=a.tabItem,b=e[f].$di("getRef","componentRef","inner","INS")||[];for(var g=0;g<b.length;g++)b[g]&&(this._bAutoDeaf&&b[g].$di("setDeaf",c,d),this._bAutoComponentValueDisabled&&b[g].$di("setValueDisabled",c,d));if(this._bAutoVUIValueDisabled){b=e[f].$di("getRef","vuiRef","inner","INS")||[];for(var g=0;g<b.length;g++)b[g]&&b[g].$di("setValueDisabled",c,d)}}},j.dispose=function(){this._uTab&&d(this._uTab),this._aTab=[],i.superClass.dispose.call(this)},j.resize=function(){this._uTab&&this._uTab.resize()},j.enable=function(){this._uTab&&this._uTab.enable(),i.superClass.enable.call(this)},j.disable=function(){this._uTab&&this._uTab.disable(),i.superClass.disable.call(this)}}(),$namespace("di.shared.ui"),function(){var a=di.helper.Util,b=di.config.URL,c=xutil.object.inheritsObject;xutil.dom.addClass;var d=xutil.object.assign;xutil.dom.q;var e=xutil.fn.bind;xutil.object.objKey,xutil.object.getByPath;var f,g=a.download,h=a.foreachDo,i=di.helper.Dialog,j=di.config.Lang,k=di.shared.ui.InteractEntity;$link(function(){f=di.shared.arg.ArgHandlerFactory});var l=$namespace().DITable=c(k),m=l.prototype;m.DEF={exportHandler:{sync:{datasourceId:"DATA"},clear:{}},className:"di-table",model:{clzPath:"di.shared.model.DITableModel"}},m.$createView=function(){this.$di("getEl"),this._needMeasureDes=this.$di("getDef").needMeasureDes,this._uTable=this.$di("vuiCreate","mainTable"),this._uBreadcrumb=this.$di("vuiCreate","breadcrumb",{maxShow:5}),this._uDownloadBtn=this.$di("vuiCreate","download"),this._uOfflineDownloadBtn=this.$di("vuiCreate","offlineDownload"),this._uCountInfo=this.$di("vuiCreate","countInfo")},m.init=function(){var a,b=this.getModel(),c=this._uTable,d=this._uBreadcrumb,f=this._uCountInfo,g=this._uDownloadBtn,i=this._uOfflineDownloadBtn;for(a in{DATA:1,DRILL:1,LINK_DRILL:1,SORT:1})b.attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.result."+a,this.$renderMain,this],["sync.result."+a,this.$handleDataLoaded,this],["sync.error."+a,this.$handleDataError,this],["sync.complete."+a,this.$syncEnable,this,a]);a="OFFLINE_DOWNLOAD",b.attach(["sync.preprocess."+a,this.$syncDisable,this,a],["sync.error."+a,this.$handleOfflineDownloadError,this],["sync.complete."+a,this.$syncEnable,this,a]),b.attach(["sync.preprocess.CHECK",this.$syncDisable,this,"CHECK"],["sync.result.CHECK",this.$handleRowAsync,this,!1],["sync.error.CHECK",this.$handleRowAsync,this,!0],["sync.complete.CHECK",this.$syncEnable,this,"CHECK"]),b.attach(["sync.preprocess.SELECT",this.$syncDisable,this,"SELECT"],["sync.result.SELECT",this.$handleRowAsync,this,!1],["sync.error.SELECT",this.$handleRowAsync,this,!0],["sync.complete.SELECT",this.$syncEnable,this,"SELECT"]),this._needMeasureDes&&1==this._needMeasureDes&&b.attach(["sync.result.MEASURE_DES",this.$setMeasureDes4Table,this]),b.init(),c.onexpand=e(this.$handleExpand,this),c.oncollapse=e(this.$handleCollapse,this),c.onsort=e(this.$handleSort,this),c.onrowclick=e(this.$handleRowClick,this),c.onrowselect=e(this.$handleRowCheck,this,"rowselect","SELECT"),c.onrowcheck=e(this.$handleRowCheck,this,"rowcheck","CHECK"),c.onrowuncheck=e(this.$handleRowCheck,this,"rowuncheck","CHECK"),c.oncelllinkdrill=e(this.$handleLinkDrill,this),c.oncelllinkbridge=e(this.$handleLinkBridge,this),d&&(d.onchange=e(this.$handleBreadcrumbChange,this)),g&&(g.onclick=e(this.$handleDownload,this)),i&&i.attach("confirm",this.$handleOfflineDownload,this),h([c,d,f,g,i],"init"),d&&d.hide(),this.$di("getEl").style.display="none"},m.dispose=function(){h([this._uTable,this._uBreadcrumb,this._uCountInfo,this._uDownloadBtn,this._uOfflineDownloadBtn],"dispose"),l.superClass.dispose.call(this)},m.sync=function(a){this.$sync(this.getModel(),"DATA",a||{},this.$di("getEvent"))},m.clear=function(){h([this._uTable,this._uBreadcrumb,this._uCountInfo],"setData")},m.$renderMain=function(a,b,c){this.$di("getEl").style.display="",h([this._uTable,this._uBreadcrumb,this._uCountInfo,this._uDownloadBtn,this._uOfflineDownloadBtn],"diShow");var d={diEvent:this.$diEvent(c)},e=ecui.ui.Scrollbar.prototype,f=this._uTable._uVScrollbar.getValue(),g=this._uTable._uHScrollbar.getValue();if(this._uTable.$di("setData",a.tableData,d),e.setValue.call(this._uTable._uVScrollbar,f),e.setValue.call(this._uTable._uHScrollbar,g),this._needMeasureDes&&1==this._needMeasureDes){for(var i=[],j=0;j<this._uTable._aColDefine.length;j++)this._uTable._aColDefine[j]&&this._uTable._aColDefine[j].uniqueName&&i.push("colUniqueNames="+this._uTable._aColDefine[j].uniqueName);this.$sync(this.getModel(),"MEASURE_DES",{colUniqueNamesArr:i},null,null,{ajaxOptions:{showWaiting:!1}})}this._uBreadcrumb&&(a.breadcrumbData.datasource&&a.breadcrumbData.datasource.length>0?(this._uBreadcrumb.show(),this._uBreadcrumb.$di("setData",a.breadcrumbData,d)):this._uBreadcrumb.hide()),this._uCountInfo&&this._uCountInfo.$di("setData",{args:{totalRecordCount:a.pageInfo.totalRecordCount,currRecordCount:a.pageInfo.currRecordCount}},d),this.$di("dispatchEvent",this.$diEvent("rendered",c))},m.resize=function(){this._uTable&&this._uTable.resize()},m.enable=function(){h([this._uTable,this._uBreadcrumb,this._uCountInfo,this._uDownloadBtn,this._uOfflineDownloadBtn],"enable"),l.superClass.enable.call(this)},m.disable=function(){h([this._uTable,this._uBreadcrumb,this._uCountInfo,this._uDownloadBtn,this._uOfflineDownloadBtn],"disable"),l.superClass.disable.call(this)},m.getDimTagsList=function(){return f([this,"getValue",this.$di("getId"),"table.rowChecked","dimTagsList"],[this,"attrArr","dimTagsList","value.uniqueName"])([{}])[0].dimTagsList},m.$handleDownload=function(){var a=this.$di("getCommonParamGetter"),c=b("OLAP_TABLE_DOWNLOAD")+"?"+a();g(c,null,!0),a.update()},m.$handleOfflineDownload=function(){var a=this._uOfflineDownloadBtn.getValue()||{};this.$sync(this.getModel(),"OFFLINE_DOWNLOAD",{email:a.email})},m.$handleBreadcrumbChange=function(a){this.$sync(this.getModel(),"LINK_DRILL",{action:"EXPAND",uniqueName:a.uniqName})},m.$handleLinkDrill=function(a,b){this.$sync(this.getModel(),"LINK_DRILL",{action:"EXPAND",uniqueName:a.uniqueName,lineUniqueName:(b||{}).uniqueName})},m.$handleLinkBridge=function(a,c){this.$di("linkBridge",a.linkBridge,b("OLAP_TABLE_LINK_BRIDGE"),this.$di("getCommonParamGetter")({colUniqName:a.uniqueName,rowUniqName:c.uniqueName,colDefineId:a.colDefineId},{excludes:["diAgent"]}))},m.$handleExpand=function(a,b){this.$sync(this.getModel(),"DRILL",{action:"EXPAND",uniqueName:a.uniqueName,lineUniqueName:(b||{}).uniqueName})},m.$handleCollapse=function(a,b){this.$sync(this.getModel(),"DRILL",{action:"COLLAPSE",uniqueName:a.uniqueName,lineUniqueName:(b||{}).uniqueName})},m.$handleRowClick=function(a){this.$di("dispatchEvent","rowclick",[{uniqueName:a.uniqueName}])},m.$handleRowCheck=function(a,b,c,d){"SUMMARY_CUST: [SUMMARY_NODE].[ALL]"==c.uniqueName||this.$sync(this.getModel(),b,{uniqueName:c.uniqueName},null,{eventName:a,callback:d})},m.$handleSort=function(a){this.$sync(this.getModel(),"SORT",a)},m.$setMeasureDes4Table=function(a){this._uTable.$setMeasureDes4Table(a)},m.$handleRowAsync=function(a,b,c,d){d.args.callback(b.selected),this.$di("dispatchEvent",d.args.eventName,[{uniqueName:d.args.param.uniqueName}])},m.$handleDataLoaded=function(a,b,c){var e,f=c.datasourceId,g=this.$di("getValue"),h=c.args.param;"DATA"==f?e=[g]:"LINK_DRILL"==f?e=[d({},h,["uniqueName"])]:"DRILL"==f?e=[d({},h,["uniqueName","lineUniqueName"])]:"SORT"==f&&(e=[d({},h,["uniqueName","currentSort"])]),this.$di("dispatchEvent",this.$diEvent("dataloaded."+f,c),e),f in{DATA:1,LINK_DRILL:1,SORT:1}&&this.$di("dispatchEvent",this.$diEvent("datachange",c),[g]),this.$di("dispatchEvent",this.$diEvent("dataloaded",c),[g])},m.$handleDataError=function(a,b,c){this.$di("getEl").style.display="",h([this._uTable,this._uBreadcrumb,this._uCountInfo,this._uDownloadBtn,this._uOfflineDownloadBtn],"diShow"),this.clear(),this.$di("dispatchEvent",this.$diEvent("rendered",c)),this.$di("dispatchEvent",this.$diEvent("dataerror",c))},m.$handleOfflineDownloadError=function(){i.alert(j.SAD_FACE+j.OFFLINE_DOWNLOAD_FAIL)}}(),$namespace("di.shared.ui"),function(){function a(a){var b=this.$di("getEl"),c=document.createElement("div");b.appendChild(c),this._bFolded=!0,this._bAutoDeaf=null==a.autoDeaf?!0:a.autoDeaf,this._bAutoComponentValueDisabled=null==a.autoComponentValueDisabled?!1:a.autoComponentValueDisabled,this._bAutoVUIValueDisabled=null==a.autoVUIValueDisabled?!0:a.autoVUIValueDisabled,this._oBodyDef=this.$di("getRef","vpartRef","body","DEF"),this._oCtrlBtnDef=this.$di("getRef","vpartRef","ctrlBtn","DEF");var d=null==a.defaultHide?!0:a.defaultHide;this.$createCtrlBtn(),this.$resetCtrlBtnText(),this.$ctrlBtnChange(d)}di.helper.Util;var b=xutil.object.inheritsObject;xutil.dom.q,xutil.object.assign,xutil.fn.bind,xutil.object.objKey;var c=di.shared.ui.InteractEntity,d=$namespace().FoldPanel=b(c,a),e=d.prototype;e.DEF={className:"di-fold-panel"},e.init=function(){this.$resetDisabled()},e.$createCtrlBtn=function(){this._oCtrlBtnDef.el.innerHTML=['<a href="#" class="di-fold-panel-ctrl-btn">','<span class="di-fold-panel-ctrl-btn-text">&nbsp;</span>',"</a>",'<span class="di-fold-panel-ctrl-down"></span>'].join("");var a=this._oCtrlBtnDef.el.firstChild,b=this;a.onclick=function(){return b._bDisabled||(b.$ctrlBtnChange(),b.$resetDisabled()),!1}},e.dispose=function(){this._oCtrlBtnDef=null,this._oBodyDef=null,d.superClass.dispose.call(this)},e.$resetDisabled=function(){var a,b=this.$di("getId");a=this._oBodyDef.$di("getRef","componentRef","inner","INS")||[];for(var c=0;c<a.length;c++)a[c]&&(this._bAutoDeaf&&a[c].$di("setDeaf",this._bFolded,b),this._bAutoComponentValueDisabled&&a[c].$di("setValueDisabled",this._bFolded,b));if(this._bAutoVUIValueDisabled){a=this._oBodyDef.$di("getRef","vuiRef","inner","INS")||[];for(var c=0;c<a.length;c++)a[c]&&a[c].$di("setValueDisabled",this._bFolded,b)}},e.resize=function(){},e.$resetCtrlBtnText=function(){var a=this._oCtrlBtnDef,b=a.$di("getOpt","dataOpt");a.el.firstChild.firstChild.innerHTML=this._bFolded?b.expandText:b.collapseText,a.el.lastChild.className=this._bFolded?"di-fold-panel-ctrl-down":"di-fold-panel-ctrl-up"},e.$ctrlBtnChange=function(a){var b=this._oBodyDef.el.style;this._bFolded=null==a?!this._bFolded:a,this.$resetCtrlBtnText(),b.display=this._bFolded?"none":"",this.$di("dispatchEvent","rendered")}}(),$namespace("di.shared.ui"),function(){function a(){}di.helper.Util;var b=xutil.object.inheritsObject;xutil.dom.q,xutil.fn.bind,xutil.object.objKey;var c=di.shared.ui.InteractEntity,d=$namespace().GeneralSnippet=b(c,a),e=d.prototype;e.dispose=function(){}}(),$namespace("di.shared.ui"),function(){function a(a){this._oOptions=c({},a)}di.helper.Util;var b=xutil.object.inheritsObject;xutil.dom.q;var c=xutil.object.assign;xutil.fn.bind,xutil.object.objKey;var d=xui.XView,e=$namespace().GeneralVContainer=b(d,a),f=e.prototype;f.dispose=function(){this.$di("disposeMainEl")}}(),$namespace("di.shared.ui"),function(){function a(a){this._oOptions=c({},a)}di.helper.Util;var b=xutil.object.inheritsObject;xutil.dom.q;var c=xutil.object.assign;xutil.fn.bind,xutil.object.objKey;var d=xui.XView,e=$namespace().GeneralVPart=b(d,a),f=e.prototype;f.dispose=function(){this.$di("disposeMainEl")}}(),$namespace("di.shared.ui"),function(){di.config.Dict;var a=di.helper.Util,b=di.helper.Dialog,c=xutil.object.inheritsObject;xutil.dom.addClass,a.ecuiDispose,xutil.object.extend,xutil.object.assign,xutil.dom.q,xutil.fn.bind,xutil.object.objKey,xutil.string.template,a.ecuiCreate,xutil.LinkedHashMap,xutil.uid.getIncreasedUID;var d=di.shared.ui.InteractEntity,e=$namespace().LiteOlapMetaConfig=c(d),f=e.prototype;f.DEF={exportHandler:{sync:{datasourceId:"DATA"},syncLiteOlapInds:{datasourceId:"LITEOLAP_INDS_DATA"},clear:{}},className:"olap-meta-config",model:{clzPath:"di.shared.model.OlapMetaConfigModel"}},f.$createModelInitOpt=function(a){return{reportType:a.reportType}},f.$createView=function(a){this._bNeedShowCalcInds=a.needShowCalcInds||!1;var b=this._oDatasourceId=a.datasourceId||{};b.DATA=b.DATA||"DATA",b.SELECT=b.SELECT||"SELECT",this._sSubmitMode=a.submitMode,this._uOlapMetaSelector=this.$di("vuiCreate","main")},f.init=function(){this.getModel().attach(["sync.preprocess.DATA",this.$syncDisable,this,"DATA"],["sync.result.DATA",this.$renderMain,this],["sync.error.DATA",this.$handleMetaError,this],["sync.complete.DATA",this.$syncEnable,this,"DATA"]),this.getModel().attach(["sync.preprocess.LITEOLAP_INDS_DATA",this.$syncDisable,this,"LITEOLAP_INDS_DATA"],["sync.result.LITEOLAP_INDS_DATA",this.$renderLiteOlapMain,this],["sync.error.LITEOLAP_INDS_DATA",this.$handleMetaError,this],["sync.complete.LITEOLAP_INDS_DATA",this.$syncEnable,this,"LITEOLAP_INDS_DATA"]),this.getModel().attach(["sync.preprocess.SELECT",this.$syncDisable,this,"SELECT"],["sync.result.SELECT",this.$handleSelected,this],["sync.error.SELECT",this.$handleSelectError,this],["sync.complete.SELECT",this.$syncEnable,this,"SELECT"]),this.getModel().attach(["sync.preprocess.LIST_SELECT",this.$syncDisable,this,"LIST_SELECT"],["sync.result.LIST_SELECT",this.$handleSelected,this],["sync.error.LIST_SELECT",this.$handleSelectError,this],["sync.complete.LIST_SELECT",this.$syncEnable,this,"LIST_SELECT"]),this._uOlapMetaSelector.$di("addEventListener","change",this.$handleChange,this),this._uOlapMetaSelector.$di("init"),this.getModel().init()},f.dispose=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.dispose(),this.getModel()&&this.getModel().dispose(),e.superClass.dispose.call(this)},f.sync=function(){var a=this._oDatasourceId.DATA;this.$sync(this.getModel(),a,{needShowCalcInds:this._bNeedShowCalcInds,inEditMode:!1},this.$di("getEvent"))},f.syncLiteOlapInds=function(){var a="LITEOLAP_INDS_DATA";this.$sync(this.getModel(),a,{needShowCalcInds:this._bNeedShowCalcInds,inEditMode:!1},this.$di("getEvent"))},f.clear=function(){},f.$renderMain=function(a,b,c){this.$di("getEl");var d="IMMEDIATE"==this._sSubmitMode,e=this.getModel();this._uOlapMetaSelector.$di("setData",{inddim:e.getIndDim(),selLineDataWrap:e.getSelLineWrap(),seriesCfg:e.getSeriesCfg(),model:e,rule:{forbidColEmpty:d,forbidRowEmpty:d}},{diEvent:this.$diEvent(c)}),this._uOlapMetaSelector.$di("updateData",this.getModel().getUpdateData())},f.$renderLiteOlapMain=function(a,b,c){this.$di("getEl");var d="IMMEDIATE"==this._sSubmitMode,e=this.getModel();this._uOlapMetaSelector.$di("setData",{indList:b.data.inds,selectedInds:b.data.currentInds,model:e,selLineName:"COLUMN",renderType:"liteOlap",rule:{forbidColEmpty:d,forbidRowEmpty:d}},{diEvent:this.$diEvent(c)}),this._uOlapMetaSelector.$di("updateData",this.getModel().getUpdateData()),this.$di("dispatchEvent","submit")},f.$handleSelected=function(){this._uOlapMetaSelector.$di("updateData",this._mModel.getUpdateData()),"IMMEDIATE"==this._sSubmitMode&&this.$di("dispatchEvent","submit")},f.$handleChange=function(){this._uOlapMetaSelector.$di("updateData",this._mModel.getUpdateData()),"IMMEDIATE"==this._sSubmitMode&&this.$di("dispatchEvent","submit")},f.enable=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.$di("enable"),e.superClass.enable.call(this)},f.disable=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.$di("disable"),e.superClass.disable.call(this)},f.$handleMetaError=function(){this.clear(),b.errorAlert()},f.$handleSelectError=function(){b.errorAlert()}}(),$namespace("di.shared.ui"),function(){function a(a){this._sReportType=a.reportType||"RTPL_OLAP_TABLE",this._fCommonParamGetter=a.commonParamGetter,this._mMetaConditionModel=new i({reportType:this._sReportType,commonParamGetter:this._fCommonParamGetter})}function b(a){var b=this._eMain=a.el,c="meta-condition",d=this._sReportType;e(b,c),b.innerHTML=n(w,{css:c,btns:"RTPL_OLAP_CHART"==d?n(y,{css:c}):""}),this._oSelLineWrap=new p,this._oSelLineIdWrap={},this._aDelSelLineBtn=[],"RTPL_OLAP_CHART"==d&&(this._uAddLineBtn=o(q,k(c+"-add-line-btn",b)[0],null,{primary:"ui-button-g"}))}di.config.Dict;var c=di.helper.Util,d=xutil.object.inheritsObject,e=xutil.dom.addClass,f=c.ecuiDispose;xutil.object.extend;var g,h,i,j,k=xutil.dom.q,l=xutil.fn.bind,m=xutil.object.objKey,n=xutil.string.template,o=c.ecuiCreate,p=xutil.LinkedHashMap,q=ecui.ui.Button,r=xutil.object.getByPath,s=xutil.uid.getIncreasedUID,t=xui.XView;$link(function(){g=r("ecui.ui.DroppableList"),h=r("ecui.ui.DraggableList"),i=di.shared.model.MetaConditionModel,j=di.shared.ui.DimSelectPanel});var u=$namespace().MetaCondition=d(t,function(c){a.call(this,c),b.call(this,c)}),v=u.prototype,w=['<div class="#{css}-src">','<div class="#{css}-ind">','<div class="#{css}-head-text">éæ©ææ ï¼</div>','<div class="#{css}-ind-line q-di-meta-ind"></div>',"</div>",'<div class="#{css}-dim">','<div class="#{css}-head-text">éæ©ç»´åº¦ï¼</div>','<div class="#{css}-dim-line q-di-meta-dim"></div>',"</div>","</div>",'<div class="#{css}-btns">',"#{btns}","</div>",'<div class="#{css}-tar q-di-meta-tar"></div>'].join(""),x=['<div class="#{css}-sel">','<div class="#{css}-head-text">#{txt}ï¼#{selLineName}ï¼ï¼</div>','<div class="#{css}-sel-line q-di-meta-sel-line"></div>',"#{delBtn}","</div>"].join(""),y=['<div class="#{css}-add-line-btn ui-button-g ui-button">å¢å ç³»åç»</div>'].join("");v.init=function(){var a=this;this._mMetaConditionModel.attach(["sync.preprocess.META_DATA",this.disable,this,"META_COND"],["sync.result.META_DATA",this.$renderMain,this],["sync.error.META_DATA",this.$handleMetaError,this],["sync.complete.META_DATA",this.enable,this,"META_COND"],["sync.preprocess.ADD_SERIES_GROUP",this.disable,this,"META_COND"],["sync.result.ADD_SERIES_GROUP",this.$renderMain,this],["sync.error.ADD_SERIES_GROUP",this.$handleMetaError,this],["sync.complete.ADD_SERIES_GROUP",this.enable,this,"META_COND"],["sync.preprocess.REMOVE_SERIES_GROUP",this.disable,this,"META_COND"],["sync.result.REMOVE_SERIES_GROUP",this.$renderMain,this],["sync.error.REMOVE_SERIES_GROUP",this.$handleMetaError,this],["sync.complete.REMOVE_SERIES_GROUP",this.enable,this,"META_COND"]),this._mMetaConditionModel.attach(["sync.preprocess.SELECT",this.disable,this,"META_COND"],["sync.result.SELECT",this.$refreshStatus,this],["sync.error.SELECT",this.$handleSelectError,this],["sync.complete.SELECT",this.enable,this,"META_COND"]),"RTPL_OLAP_CHART"==this._sReportType&&(this._uAddLineBtn.onclick=function(){a._mMetaConditionModel.sync("ADD_SERIES_GROUP")}),this._mMetaConditionModel.init()},v.dispose=function(){this.$disposeMeta(),this._uAddLineBtn&&this._uAddLineBtn.dispose(),u.superClass.dispose.call(this)},v.$disposeMeta=function(){var a=this._eMain;this._uIndSrc&&f(this._uIndSrc),this._uDimSrc&&f(this._uDimSrc),k("q-di-meta-ind",a)[0].innerHTML="",k("q-di-meta-dim",a)[0].innerHTML="",this._oSelLineWrap.foreach(function(a,b){f(b)}),this._oSelLineWrap.cleanWithoutDefaultAttr();for(var b,c=0;b=this._aDelSelLineBtn[c];c++)b.dispose();this._aDelSelLineBtn=[],this._oSelLineIdWrap={},k("q-di-meta-tar",a)[0].innerHTML=""},v.sync=function(){this._mMetaConditionModel.sync({datasourceId:"META_DATA"})},v.getModel=function(){return this._mMetaConditionModel},v.$renderMain=function(){var a=this,b=this._eMain;this.$disposeMeta();var c=["_DI_META_COND_IND"+s("DI_META_COND"),"_DI_META_COND_DIM"+s("DI_META_COND")],d=this._mMetaConditionModel.getIndDim(),e="RTPL_OLAP_TABLE"==this._sReportType,f=this._uIndSrc=o(h,k("q-di-meta-ind",b)[0],null,{id:c[0],disableSelected:e,clazz:"IND"});d.indList.foreach(function(a,b){f.addItem({value:b.uniqName,text:b.caption,clazz:b.clazz,fixed:b.fixed,align:b.align})});var g=this._uDimSrc=o(h,k("q-di-meta-dim",b)[0],null,{id:c[1],disableSelected:e,clazz:"DIM"});d.dimList.foreach(function(a,b){g.addItem({value:b.uniqName,text:b.caption,clazz:b.clazz,fixed:b.fixed,align:b.align})});var i=this._mMetaConditionModel.getSelLineWrap();i.foreach(function(b,d){a.$addSelLine(b,a.$getSelLineTitle(b),c.join(","),d)}),this._uIndSrc.onchange=l(this.$handleSelLineChange,this,this._uIndSrc),this._uDimSrc.onchange=l(this.$handleSelLineChange,this,this._uDimSrc),this._oSelLineWrap.foreach(function(b,c){c.onitemclick=l(a.$handleItemClick,a,b)}),this.$refreshStatus()},v.$getSelLineTitle=function(a){var b="";return b="RTPL_OLAP_TABLE"==this._sReportType?"ROW"==a?"è¡":"FILTER"==a?"è¿æ»¤":"å":"ROW"==a?"è½´":"FILTER"==a?"è¿æ»¤":"ç³»åç»"},v.$addSelLine=function(a,b,c,d){if(null!=a){var e=this,f=this._oSelLineWrap,h=this._oSelLineIdWrap,i="RTPL_OLAP_CHART"==this._sReportType&&0==a.indexOf("COLUMN"),j=document.createElement("div");
if(j.innerHTML=n(x,{css:"meta-condition",txt:b,selLineName:a,delBtn:i?'<span class="ui-button">å é¤</span>':""}),k("q-di-meta-tar",this._eMain)[0].appendChild(j=j.firstChild),i){var l=o(q,k("ui-button",j)[0],null,{primary:"ui-button"});l.onclick=function(){e._mMetaConditionModel.sync({datasourceId:"REMOVE_SERIES_GROUP",args:{selLineName:a}})},this._aDelSelLineBtn.push(l)}f.addLast(o(g,k("q-di-meta-sel-line",j)[0],null,{id:h[a]="_DI_META_COND_SEL"+s("DI_META_COND"),source:c,configBtn:!0}),a);for(var m in h)m!=a&&f.get(m).addTarget(h[a]),f.get(a).addTarget(h[m]);this._uIndSrc.addTarget(h[a]),this._uDimSrc.addTarget(h[a]),d&&d.foreach(function(b,c){f.get(a).addItem({value:c.uniqName,text:c.caption,clazz:c.clazz,fixed:c.fixed,align:c.align})})}},v.$refreshStatus=function(){var a=this._mMetaConditionModel.getStatusWrap();this._uIndSrc.setState({disable:a.indMetas.disabledMetaNames,selected:a.indMetas.selectedMetaNames}),this._uDimSrc.setState({disable:a.dimMetas.disabledMetaNames,selected:a.dimMetas.selectedMetaNames})},v.enable=function(a){if(m.remove(this,a),0==m.size(this)&&this._bDisabled){this._uIndSrc&&this._uIndSrc.enable(),this._uDimSrc&&this._uDimSrc.enable(),this._oSelLineWrap.foreach(function(a,b){b.enable()});for(var b,c=0;b=this._aDelSelLineBtn[c];c++)b.enable();this._uAddLineBtn&&this._uAddLineBtn.enable(),u.superClass.enable.call(this)}},v.disable=function(a){if(m.add(this,a),!this._bDisabled){this._uIndSrc&&this._uIndSrc.disable(),this._uDimSrc&&this._uDimSrc.disable(),this._oSelLineWrap.foreach(function(a,b){b.disable()});for(var b,c=0;b=this._aDelSelLineBtn[c];c++)b.disable();this._uAddLineBtn&&this._uAddLineBtn.disable()}u.superClass.disable.call(this)},v.$handleSelLineChange=function(){var a={};this._oSelLineWrap.foreach(function(b,c){a[b]=c.getValue()});var b=this._mMetaConditionModel.diffSelected(a);this._mMetaConditionModel.sync({datasourceId:"SELECT",args:{uniqNameList:a[name],changeWrap:b}})},v.$handleItemClick=function(a,b,c){var d=this._mMetaConditionModel.getMetaItem(c.value);d&&"DIM"==d.clazz&&j().open("EDIT",{uniqName:c.value,reportType:this._sReportType,selLineName:a,dimMode:d.isTimeDim?"TIME":"NORMAL",commonParamGetter:this._fCommonParamGetter})},v.$handleMetaError=function(){},v.$handleSelectError=function(){}}(),$namespace("di.shared.ui"),function(){di.config.Dict;var a=di.helper.Util,b=di.helper.Dialog,c=xutil.object.inheritsObject;xutil.dom.addClass,a.ecuiDispose,xutil.object.extend,xutil.object.assign,xutil.dom.q,xutil.fn.bind,xutil.object.objKey,xutil.string.template,a.ecuiCreate,xutil.LinkedHashMap,xutil.uid.getIncreasedUID;var d=di.shared.ui.InteractEntity,e=$namespace().OlapMetaConfig=c(d),f=e.prototype;f.DEF={exportHandler:{sync:{datasourceId:"DATA"},syncLiteOlapInds:{datasourceId:"LITEOLAP_INDS_DATA"},clear:{}},className:"olap-meta-config",model:{clzPath:"di.shared.model.OlapMetaConfigModel"}},f.$createModelInitOpt=function(a){return{reportType:a.reportType}},f.$createView=function(a){this._bNeedShowCalcInds=a.needShowCalcInds||!1;var b=this._oDatasourceId=a.datasourceId||{};b.DATA=b.DATA||"DATA",b.SELECT=b.SELECT||"SELECT",this._sSubmitMode=a.submitMode,this._uOlapMetaSelector=this.$di("vuiCreate","main")},f.init=function(){this.getModel().attach(["sync.preprocess.DATA",this.$syncDisable,this,"DATA"],["sync.result.DATA",this.$renderMain,this],["sync.error.DATA",this.$handleMetaError,this],["sync.complete.DATA",this.$syncEnable,this,"DATA"]),this.getModel().attach(["sync.preprocess.LITEOLAP_INDS_DATA",this.$syncDisable,this,"LITEOLAP_INDS_DATA"],["sync.result.LITEOLAP_INDS_DATA",this.$renderLiteOlapMain,this],["sync.error.LITEOLAP_INDS_DATA",this.$handleMetaError,this],["sync.complete.LITEOLAP_INDS_DATA",this.$syncEnable,this,"LITEOLAP_INDS_DATA"]),this.getModel().attach(["sync.preprocess.SELECT",this.$syncDisable,this,"SELECT"],["sync.result.SELECT",this.$handleSelected,this],["sync.error.SELECT",this.$handleSelectError,this],["sync.complete.SELECT",this.$syncEnable,this,"SELECT"]),this.getModel().attach(["sync.preprocess.LIST_SELECT",this.$syncDisable,this,"LIST_SELECT"],["sync.result.LIST_SELECT",this.$handleSelected,this],["sync.error.LIST_SELECT",this.$handleSelectError,this],["sync.complete.LIST_SELECT",this.$syncEnable,this,"LIST_SELECT"]),this._uOlapMetaSelector.$di("addEventListener","change",this.$handleChange,this),this._uOlapMetaSelector.$di("init"),this.getModel().init()},f.dispose=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.dispose(),this.getModel()&&this.getModel().dispose(),e.superClass.dispose.call(this)},f.sync=function(){var a=this._oDatasourceId.DATA;this.$sync(this.getModel(),a,{needShowCalcInds:this._bNeedShowCalcInds,inEditMode:!1},this.$di("getEvent"))},f.syncLiteOlapInds=function(){var a="LITEOLAP_INDS_DATA";this.$sync(this.getModel(),a,{needShowCalcInds:this._bNeedShowCalcInds,inEditMode:!1},this.$di("getEvent"))},f.clear=function(){},f.$renderMain=function(a,b,c){this.$di("getEl");var d="IMMEDIATE"==this._sSubmitMode;d=!0;var e=this.getModel();this._uOlapMetaSelector.$di("setData",{inddim:e.getIndDim(),selLineDataWrap:e.getSelLineWrap(),seriesCfg:e.getSeriesCfg(),model:e,rule:{forbidColEmpty:d,forbidRowEmpty:d}},{diEvent:this.$diEvent(c)}),this._uOlapMetaSelector.$di("updateData",this.getModel().getUpdateData())},f.$renderLiteOlapMain=function(a,b,c){this.$di("getEl");var d="IMMEDIATE"==this._sSubmitMode,e=this.getModel();this._uOlapMetaSelector.$di("setData",{indList:e.getLiteOlapIndList(),model:e,selLineName:"COLUMN",renderType:"liteOlap",rule:{forbidColEmpty:d,forbidRowEmpty:d}},{diEvent:this.$diEvent(c)}),this._uOlapMetaSelector.$di("updateData",this.getModel().getUpdateData())},f.$handleSelected=function(){this._uOlapMetaSelector.$di("updateData",this._mModel.getUpdateData()),"IMMEDIATE"==this._sSubmitMode?this.$di("dispatchEvent","submit"):this.sync()},f.$handleChange=function(a){var b=this._oDatasourceId.SELECT;this.$sync(this._mModel,b,null,null,"LIST_SELECT"==b?{selectedIndNames:a}:{changeWrap:this._mModel.diffSelected(a),needShowCalcInds:this._bNeedShowCalcInds})},f.enable=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.$di("enable"),e.superClass.enable.call(this)},f.disable=function(){this._uOlapMetaSelector&&this._uOlapMetaSelector.$di("disable"),e.superClass.disable.call(this)},f.$handleMetaError=function(){this.clear(),b.errorAlert()},f.$handleSelectError=function(){b.errorAlert()}}(),$namespace("di.console.shared.model"),function(){function a(){}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL;di.helper.Util;var c=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.extend,xutil.object.assign,baidu.json.parse,baidu.json.stringify,xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString,xutil.url.textParam,xutil.url.wrapArrayParam,xutil.LinkedHashMap;var d=xui.XDatasource,e=$namespace().ChartConfigModel=c(d,a),f=e.prototype;f.init=function(){},f.url=new d.Set({INIT:b.fn("OLAP_CHART_BASE_CONFIG_INIT"),SUBMIT:b.fn("OLAP_CHART_BASE_CONFIG_INIT")}),f.param=new d.Set({INIT:function(){return""}}),f.parse=new d.Set({INIT:function(){}})}(),$namespace("di.console.shared.ui"),function(){function a(){this.DATASOURCE_ID_MAPPING={INIT:"CHART_CONFIG_INIT",SUBMIT:"CHART_CONFIG_SUBMIT"}}di.config.URL,di.helper.Dialog,di.helper.Util;var b=di.config.Dict;di.config.Lang;var c=xutil.dom.q,d=xutil.object.inheritsObject,e=xutil.string.template;xui.XView,ecui.ui.Textarea,ecui.ui.Input,ecui.ui.Form,ecui.ui.Button,ecui.ui.IndTree,ecui.ui.IstCalendar;var f,g=di.shared.ui.BaseConfigPanel;$link(function(){f=di.console.shared.model.ChartConfigModel});var h=$namespace().ChartConfigPanel=d(g,a),i=h.prototype;i.PANEL_TITLE="å¾è®¾ç½®",i.$doDispose=function(){this.getContentEl().innerHTML=""},i.$doOpen=function(){},i.$doRender=function(a,c){var d="chart-config-panel",f=[],g=c.series||{},h=c.index4Selected||[],i=b.GRAPH_DEFS;this._data=c;var j=['<div data-series-group="#{serKey}">',"<span>ç³»åç»&nbsp;#{serKey}ï¼</span>","<span>ç±»å&nbsp;</span>",'<select class="#{css}-graph-type-sel">',"#{typeOpt}","</select>","<span>å·¦å³è½´&nbsp;</span>",'<select class="#{css}-graph-axis-sel">',"#{axisOpt}","</select>","</div>"].join(""),k=['<option value="#{value}" #{sel}>#{text}ï¼#{value}ï¼</option>'].join("");f.push("<div>");for(var l,m,n=0;l=h[n];n++)if(!(l.indexOf("COLUMN")<0)&&(m=g[l])){for(var o,p=[],q=0;o=i[q];q++)p.push(e(k,{text:i[q].text,value:i[q].name,sel:i[q].name==m.type?'selected="selected"':""}));var r=[e(k,{text:"å·¦è½´",value:"left",sel:"left"==m.yAxisName?'selected="selected"':""}),e(k,{text:"å³è½´",value:"right",sel:"right"==m.yAxisName?'selected="selected"':""})];f.push(e(j,{serKey:l,css:d,typeOpt:p.join(""),axisOpt:r.join("")}))}f.push("</div>"),a.innerHTML=f.join("")},i.$doGetSubmitArgs=function(){for(var a,b="chart-config-panel",d=this.getContentEl(),e=this._data,f=e.series||(e.series={}),g=e.yAxises||(e.yAxises={}),h=d.getElementsByTagName("DIV"),i=0;a=h[i];i++){var j=a.getAttribute("data-series-group");if(j){var k;k=c(b+"-graph-type-sel",a)[0],f[j].type=(k.options[k.selectedIndex]||{}).value,k=c(b+"-graph-axis-sel",a)[0],f[j].yAxisName=(k.options[k.selectedIndex]||{}).value}}return{series:f,yAxises:g}}}(),$namespace("di.console.shared.ui"),function(){di.config.Dict,di.helper.Util,di.config.Lang;var a=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass;var b=xutil.dom.q;xutil.dom.children;var c,d=xutil.fn.bind,e=ecui.$fastCreate,f=ecui.ui.PlFloatMenu,g=di.shared.ui.BaseConfigPanel;$link(function(){c=di.shared.model.CubeMetaModel});var h=$namespace().CubeConfigPanel=a(g,function(a){this._uParent=a.parent,this.DATASOURCE_ID_MAPPING={INIT:"INIT"}}),i=h.prototype;i.changeReportType=function(a){this._mModel.setReportType(a),this.DATASOURCE_ID_MAPPING.INIT={RTPL_OLAP_TABLE:"CUBE_INIT",RTPL_OLAP_CHART:"CUBE_INIT",RTPL_PLANE_TABLE:"DATASOURCE_INIT"}[a]},i.$doGetContentTPL=function(){return['<div class="menu-cube-config">','<div class="ui-menu q-menu"><label>&nbsp;</label></div>',"</div>"].join("")},i.$doGetModel=function(){return this._mModel},i.$doCreateView=function(a){this._mModel=new c(a),this._uMenu=e(f,b("q-menu",this.getContentEl())[0],null)},i.$doInit=function(){this._uMenu.onchange=d(function(a){this.notify("select",[a]),this.close()},this)},i.$doRender=function(){var a=this._mModel.getMenuData().menuTree;this._uMenu.setData(a.menuList),this._uMenu.select(a.selMenuId)}}(),$namespace("di.console.shared.ui"),function(){ecui.util;var a=ecui.ui,b=ecui.inherits,c=ecui.$fastCreate,d=ecui.dom.create,e=ecui.dom.setStyle;ecui.dom.getStyle,xutil.object.extend;var f=xutil.string.template,g=di.config.URL,h=a.Control,i=$namespace().GlobalMenu=b(h,"global-menu",null,function(a){a.innerHTML=f(k,{type:this.getType()}),this._eInner=a.firstChild,this._aItems=[],this._uCurrSel}),j=i.prototype;(j.Item=b(h,"global-menu-item",null,function(a,b){var c=b.data,d=b.parent,h=b.selMenu;e(a,"display","inline-block"),a.innerHTML=f(l,{type:this.getType(),text:c.menuName,url:g.getWebRoot()+"/"+c.menuUrl}),h.menuId==(this._sMenuId=c.menuId)&&(d._uCurrSel=this,this.alterClass("+selected"))})).prototype;var k='<div class="#{type}-items"></div>',l='<a href="#{url}" target="_blank"><div class="#{type}-ledge"></div><div class="#{type}-text">#{text}</div><div class="#{type}-redge"></div></a>';j.init=function(){this.$resetItems()},j.$dispose=function(){this._aCurrSel=null,this.$disposeItems(),i.superClass.$dispose.call(this)},j.$resetItems=function(){this._aCurrSel=null,this.$disposeItems();for(var a,b,e=this._mGlobalMenuManager.getMenuData(),f=this._mGlobalMenuManager.getSelected(),g=0;data=e[g];g++)this._eInner.appendChild(a=d("global-menu-item")),this._aItems.push(b=c(this.Item,a,this,{data:data,selMenu:f,parent:this}))},j.$disposeItems=function(){var a,b;for(a=0;b=this._aItems[a];a++)b.dispose();this._aItem=[],this._eInner.innerHTML=""},j.setGlobalMenuManager=function(a){this._mGlobalMenuManager=a}}(),$namespace("di.console.shared.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang;var b=di.config.URL,c=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend;var d=xutil.dom.q;xutil.dom.children;var e=xutil.fn.bind,f=xutil.string.trim;di.helper.Dialog.alert,di.helper.Dialog.confirm,xutil.string.template,xutil.uid.getUID,a.ecuiCreate,a.foreachDoOri,xutil.url.textParam;var g=xutil.url.replaceIntoParam;a.assert;var h=di.shared.ui.BaseConfigPanel,i=$namespace().PreviewConfigPanel=c(h),j=i.prototype;j.$doOpen=function(a,b){this._vtplKey=b.vtplKey,this._onconfirm=b.onconfirm},j.$doDispose=function(){this.getContentEl().innerHTML=""},j.$doRender=function(a){var b=['<span class="vtpl-preview-config-phase">','<input type="radio" name="vtpl-preview" value="dev" checked="checked" /><span>dev</span>','<input type="radio" name="vtpl-preview" value="pre" /><span>pre</span>','<input type="radio" name="vtpl-preview" value="release" /><span>release</span>',"</span>","<div>","å¦ä¸ä¸ºæ¥è¡¨URLï¼","</div>","<div>",'<textarea class="vtpl-preview-config-report-url"></textarea>',"</div>","<div>","å¦æè¦ä¼ å¥é¢å¤çåæ°ï¼è¯·å¨ä¸é¢æ·»å ï¼ä½¿ç¨â&âç¬¦å·é¾æ¥ï¼","</div>","<div>",'<textarea class="vtpl-preview-config-data"></textarea>',"</div>"];a.innerHTML=b.join("");for(var c,f=d("vtpl-preview-config-phase",a)[0].getElementsByTagName("INPUT"),g=0;c=f[g];g++)c.onclick=e(this.$urlAddPhase,this);this.$urlGen()},j.$urlGen=function(){var a=b("REPORT_PREVIEW"),c=d("vtpl-preview-config-report-url",this.getContentEl())[0];c.value=g(a,"reportTemplateId",this._vtplKey),this.$urlAddPhase()},j.$urlAddPhase=function(){for(var a,b=this.getContentEl(),c=d("vtpl-preview-config-phase",b)[0],e=d("vtpl-preview-config-report-url",b)[0],f=c.getElementsByTagName("INPUT"),h="dev",i=0;a=f[i];i++)a.checked&&(h=a.value);e.value=g(e.value,"phase",h)},j.$doGetSubmitArgs=function(){var a=this.getContentEl(),b=d("vtpl-preview-config-report-url",a)[0].value,c=d("vtpl-preview-config-data",a)[0].value;return b&&f(b)?{reportURL:b,data:c}:"URLä¸å¯ä¸ºç©º"},j.$doSubmitSuccess=function(a,b,c,d){this._onconfirm({reportURL:d.args.reportURL,data:d.args.data})}}(),$namespace("di.console.shared.ui"),function(){function a(){this._uPreviewConfig=new g({parent:this,panelTitle:"é¢è§è®¾ç½®"})}function b(a,b){var c=[],d="this.src='../asset/css/img/demo.jpg'";return b.foreach(function(a,b,f){var g=b.desc.split("||");c.push('<div class="report-release-block">'),c.push(' <img data-index="',e(a),'" class="report-release-img" onerror='+d+'   src="../report-img/mold-img/'+b.snippet.fileName+'.png"/>'),c.push(' <span data-index="',e(a),'">');for(var f=0;f<g.length;f++){var h=g[f];c.push("<li>"+h+"</li>")}c.push("</span>"),c.push("</div>")}),c.join("")}di.config.Dict,di.helper.Util,di.config.URL,di.helper.Dialog,di.config.Lang;var c=xutil.object.inheritsObject,d=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener,xutil.object.extend,xutil.object.objKey;var e=xutil.string.encodeHTML;xutil.uid.getUID,di.helper.Dialog.alert,xutil.dom.q,xutil.fn.bind,xutil.string.template,xutil.url.textParam;var f=di.shared.ui.PanelPage,g=di.console.shared.ui.PreviewConfigPanel,h=$namespace().ReportMoldListPage=c(f,function(b){var c=b.el;d(c,"report-release"),c.innerHTML=j,this._reportURL=b.reportURL,this._data=b.data,this._vtplModel=b.vtplModel,this._globalPanelPageManager=b.globalPanelPageManager,this._phase=b.phase,a.call(this,c,b)}),i=h.prototype,j=['<div class="report-release-list">',"</div>"].join("");i.init=function(){this._uPreviewConfig.init()},i.render=function(){function a(){var a=e.get(this.getAttribute("data-index"));a.vtplKey;var b=a.snippet.fileName;g._globalPanelPageManager.openByURI("di.console.editor.ui.VTplPanelPage?"+["pageId="+b,"pageTitle=æ°å»º [åºäºï¼"+b+"]","moldKey="+b,"act=CREATE#QUICK","forceCreate=true"].join("&"),{vtplModel:g._vtplModel,forceActive:!0})}var c,d=this._phase,e=this._vtplModel.getMolds(),f=this.getEl(),g=this;c=b(d,e),f.innerHTML=c;for(var h,i=f.getElementsByTagName("IMG"),j=0;h=i[j];j++){var k=e.get(h.getAttribute("data-index"));h.title=k.snippet.fileName,h.onclick=a}},i.dispose=function(){h.superClass.dispose.call(this)},i.$active=function(){},i.$inactive=function(){}}(),$namespace("di.console.shared.ui"),function(){function a(){this._mVTplModel=new l}function b(a){this._uScreenShotBtn=f(g,j("q-btn-screenshot",a)[0],null,{primary:"ui-button-g"})}function c(a){var b=a.perviewUrl,c=a.phantomjsServerUrl,d=a.imgName,f=a.bizKey,g=a.imgLocation,h=null;h=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),h.open("POST",c,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.onreadystatechange=function(){4==h.readyState};var i=["resultType=html","imgType=png","imgName="+d,"imgLocation="+g,"bizKey="+f,"url="+encodeURIComponent(b)].join("&");h.send(i),e("åå°å·²ç»å¨æå¾ï¼é¢è®¡30ç§ä¹åè½çæå¾ç")}di.config.Dict;var d=di.helper.Util;di.config.URL;var e=di.helper.Dialog.alert;di.helper.Dialog,di.config.Lang;var f=d.ecuiCreate,g=ecui.ui.Button,h=xutil.object.inheritsObject,i=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener,xutil.object.extend,xutil.object.objKey;var j=xutil.dom.q,k=xutil.fn.bind;xutil.string.template,xutil.url.textParam;var l,m=di.shared.ui.PanelPage;$link(function(){l=di.console.editor.model.VTplModel});var n=$namespace().ReportPreview=h(m,function(c){var d=c.el;i(d,"page-preview"),d.innerHTML=p,this._reportURL=c.reportURL,this._data=c.data,this.vtplKey=c.vtplKey,a.call(this,d,c),b.call(this,d,c)}),o=n.prototype,p=['<div><span class="q-btn-screenshot ui-button ui-button-g">é¢è§æå¾</span></div>','<div class="q-di-stub"></div>'].join("");o.init=function(){var a=new $DataInsight$(j("q-di-stub",this.getEl())[0],{widthMode:"ADAPT",heightMode:"ADAPT"});a.load({url:this._reportURL,data:this._data}),this._uScreenShotBtn.onclick=k(this.doScreenShot,this),this._mVTplModel.init()},o.doScreenShot=function(){var a=this._reportURL+this._data,b=this.vtplKey;this._mVTplModel.sync({datasourceId:"PAHNTOMJS_INFO",args:{perviewUrl:a,imgName:b},result:c})},o.dispose=function(){n.superClass.dispose.call(this)},o.$active=function(){},o.$inactive=function(){}}(),$namespace("di.console.shared.ui"),function(){function a(){this._uPreviewConfig=new h({parent:this,panelTitle:"é¢è§è®¾ç½®"})}function b(a,b,d){var e=[],g="this.src='../asset/css/img/demo.jpg'";return 0==d.size()?(e.push("<div"),e.push(" <span > ææ ç¬¦åæ¡ä»¶çæ°æ®ï¼</span>"),e.push("</div>")):d.foreach(function(b,d){e.push('<div class="report-release-block">'),e.push(' <img data-index="',f(b),'" class="report-release-img" onerror='+g+'   src="'+c.getWebRoot()+"/asset-d/"+a+"/imgs/"+d.snippet.fileName+'.png"/>'),e.push('	<span data-index="',f(b),'">'+d.vtplName+"</span>"),e.push("</div>")}),e.join("")}di.config.Dict,di.helper.Util;var c=di.config.URL;di.helper.Dialog,di.config.Lang;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener,xutil.object.extend,xutil.object.objKey;var f=xutil.string.encodeHTML;xutil.uid.getUID,di.helper.Dialog.alert,xutil.dom.q,xutil.fn.bind,xutil.string.template,xutil.url.textParam;var g=di.shared.ui.PanelPage,h=di.console.shared.ui.PreviewConfigPanel,i=$namespace().ReportReleasePage=d(g,function(b){var c=b.el;e(c,"report-release"),c.innerHTML=k,this._reportURL=b.reportURL,this._data=b.data,this._vtplModel=b.vtplModel,this._globalPanelPageManager=b.globalPanelPageManager,this._phase=b.phase,a.call(this,c,b)}),j=i.prototype,k=['<div class="report-release-list">',"</div>"].join("");j.init=function(){this._uPreviewConfig.init()},j.render=function(){function a(){var a=f.get(this.getAttribute("data-index")),b=a.vtplKey;h._uPreviewConfig.open("EDIT",{vtplKey:b,onconfirm:function(a){h._globalPanelPageManager.openByURI("di.console.editor.ui.VTplPanelPage?"+["pageId="+b,"pageTitle="+b,"vtplKey="+b,"act=PREVIEW#PREVIEW","phase="+e].join("&"),{vtplModel:h._vtplModel,forceActive:!0,extraOpt:{reportURL:a.reportURL,data:a.data,vtplKey:b}})}})}function c(){var a=f.get(this.getAttribute("data-index")),b=a.vtplKey;h._globalPanelPageManager.openByURI("di.console.editor.ui.VTplPanelPage?"+["pageId="+b,"pageTitle="+b,"vtplKey="+b,"act=EDIT#QUICK","phase="+e].join("&"),{vtplModel:h._vtplModel,forceActive:!0})}var d,e=this._phase,f=this._vtplModel.getVTpls(e),g=this.getEl(),h=this,i=this._vtplModel.getBizKey();d=b(i,e,f),g.innerHTML=d;for(var j,k=g.getElementsByTagName("IMG"),l=0;j=k[l];l++){var m=f.get(j.getAttribute("data-index"));j.title=m.vtplName,j.onclick="dev"==e?c:a}},j.dispose=function(){i.superClass.dispose.call(this)},j.$active=function(){},j.$inactive=function(){}}(),$namespace("di.console.editor.model"),function(){function a(a){this._sReportType=a.reportType||"RTPL_OLAP_TABLE",this._sSchemaName=a.schemaName,this._sCubeTreeNodeName=a.cubeTreeNodeName,this._fCommonParamGetter=(new e).getGetter({reportTemplateId:a.reportTemplateId})}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL;di.helper.Util;var c=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.extend,xutil.object.assign,baidu.json.parse,baidu.json.stringify,xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString;var d=xutil.url.textParam;xutil.url.wrapArrayParam,xutil.LinkedHashMap;var e,f=xui.XDatasource;$link(function(){e=di.shared.model.CommonParamFactory});var g=$namespace().OLAPEditorModel=c(f,a),h=g.prototype;h.init=function(){},h.url=new f.Set({INIT:b.fn("OLAP_REPORT_INIT"),SAVE:b.fn("OLAP_SAVE"),COL_CONFIG_GET:b.fn("META_CONDITION_COL_CONFIG_GET"),COL_CONFIG_SUBMIT:b.fn("META_CONDITION_COL_CONFIG_SUBMIT")}),h.param=new f.Set({INIT:function(){var a=[];return a.push("type="+d(this._sReportType)),a.push("schemaName="+d(this._sSchemaName)),a.push("treeNodeName="+d(this._sCubeTreeNodeName)),a.push("reportTemplateId="+d(this._fCommonParamGetter.getReportTemplateId())),a.join("&")},SAVE:function(a){var b=[];return b.push("reportTemplateName="+d(a.args.reportTemplateName),"reportTemplateId="+d(this._fCommonParamGetter.getReportTemplateId())),b.join("&")},COL_CONFIG_GET:function(){return""},COL_CONFIG_SUBMIT:function(){return""}}),h.result=new f.Set({INIT:function(a){this._fCommonParamGetter.update({reportTemplateId:a?a.reportTemplateId:""})},SAVE:function(a){this._fCommonParamGetter.update({reportTemplateId:a?a.reportTemplateId:""})},COL_CONFIG_GET:function(){},COL_CONFIG_SUBMIT:function(){}}),h.getCommonParamGetter=function(){return this._fCommonParamGetter}}(),$namespace("di.console.editor.model"),function(){function a(a){a=a||{},this._fCommonParamGetter=(new l).getGetter(),this._sDatasourceName=a.datasourceName,this._sReportTemplateId=a.reportTemplateId}function b(){return"reportTemplateId="+k(this._sReportTemplateId)}function c(){var a=[];return a.push("reportTemplateId="+k(this._sReportTemplateId)),a.push("columnJson="+k(j(this._oMappingConfig))),a.join("&")}function d(a){var b=a.datasourceName;b&&(this._sDatasourceName=b)}function e(a){var b=a.reportTemplateId;b&&(this._sReportTemplateId=b,this._fCommonParamGetter.update({reportTemplateId:b}))}function f(a){this._sReportTemplateId=a.reportTemplateId,this._oMappingConfig=a.columnJson||[]}function g(a){this._oMappingConfig=a.condJson||[],this._oColShow=a.columnJson||[]}di.helper.Formatter,di.config.Dict,di.config.Lang;var h=di.config.URL;di.helper.Util;var i=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.extend,xutil.object.assign,baidu.json.parse;var j=baidu.json.stringify;xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString;var k=xutil.url.textParam;xutil.url.wrapArrayParam,xutil.LinkedHashMap;var l,m=xui.XDatasource;$link(function(){l=di.shared.model.CommonParamFactory});var n=$namespace().PlaneEditorModel=i(m,a),o=n.prototype;o.url=new m.Set({INIT:h.fn("PLANE_TABLE_INIT"),SQL_SAVE:h.fn("PLANE_TABLE_SQL_SAVE"),COL_DATA:h.fn("PLANE_TABLE_COL_DATA"),COL_SAVE:h.fn("PLANE_TABLE_COL_SAVE"),COND_DATA:h.fn("PLANE_TABLE_COND_DATA"),COND_SAVE:h.fn("PLANE_TABLE_COND_SAVE"),PREVIEW_DATA:h.fn("PLANE_TABLE_PREVIEW_DATA")}),o.param=new m.Set({INIT:function(){return"reportTemplateId="+k(this._sReportTemplateId)},SQL_SAVE:function(a){var b=[];return b.push("sqlString="+k(a.args.sqlString)),b.push("reportTemplateName="+k(a.args.reportTemplateName)),b.push("reportTemplateId="+k(this._sReportTemplateId)),b.push("datasourceName="+k(this._sDatasourceName)),b.join("&")},COL_DATA:b,COL_SAVE:c,COND_DATA:b,COND_SAVE:c,PREVIEW_DATA:b}),o.result=new m.Set({INIT:d,SQL_SAVE:e,COL_DATA:f,COL_SAVE:e,COND_DATA:f,COND_SAVE:e,PREVIEW_DATA:g}),o.getMappingConfig=function(){return this._oMappingConfig},o.getColShow=function(){return this._oColShow},o.getCommonParamGetter=function(){return this._fCommonParamGetter}}(),$namespace("di.console.editor.model"),function(){function a(){}di.helper.Formatter,di.config.Dict,di.config.Lang;var b=di.config.URL;di.helper.Util;var c=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g,xutil.fn.bind,xutil.object.extend,xutil.object.assign,baidu.json.parse,baidu.json.stringify,xutil.lang.hasValue,xutil.date.stringToDate,xutil.date.dateToString,xutil.url.textParam,xutil.url.wrapArrayParam,xutil.LinkedHashMap;var d=xui.XDatasource,e=$namespace().PlaneTableEditorModel=c(d,a),f=e.prototype;f.init=function(){},f.url=new d.Set({SQL_SAVE:b("PLANE_TABLE_SQL_SAVE"),COL_DATA:b("PLANE_TABLE_COL_DATA"),COL_SAVE:b("PLANE_TABLE_COL_SAVE"),COND_DATA:b("PLANE_TABLE_COND_DATA"),COND_SAVE:b("PLANE_TABLE_COND_SAVE")}),f.param=new d.Set({SQL_SAVE:function(){}}),f.parse=new d.Set({SQL_SAVE:function(){}})}(),$namespace("di.console.editor.model"),function(){function a(){this._molds=new s,this._vtplMap={release:new s,pre:new s,dev:new s,all:new s}}function b(a){return a}di.helper.Formatter;var c=di.config.Dict;di.config.Lang;var d=di.config.URL,e=di.helper.Util,f=xutil.object.inheritsObject;xutil.dom.q,xutil.dom.g;var g=xutil.fn.bind;xutil.object.extend;var h=di.helper.Util.jsonStringify,i=xutil.object.assign,k=xutil.url.stringifyParam;baidu.json.parse;var l=e.assert,m=e.parseFileName,n=baidu.ajax.request;baidu.json.stringify,xutil.lang.hasValue;var o=xutil.uid.getUID;xutil.date.stringToDate,xutil.date.dateToString;var p=xutil.url.textParam;xutil.collection.travelTree,xutil.url.wrapArrayParam;var q,r,s=xutil.LinkedHashMap,t=xui.XDatasource;$link(function(){r=di.shared.model.GlobalModel,q=di.console.editor.model.VTpl});var u=$namespace().VTplModel=f(t,a),v=u.prototype;v.init=function(){},v.url=new t.Set({VTPL_LIST:d.fn("CONSOLE_VTPL_LIST"),SAVE_TPL:d.fn("CONSOLE_SAVE_TPL"),GET_COND:d.fn("CONSOLE_GET_COND"),EXIST_COND:d.fn("CONSOLE_EXIST_COND"),DS_LIST:d.fn("CONSOLE_DS_LIST"),TO_PRE:d.fn("CONSOLE_TO_PRE"),TO_RELEASE:d.fn("CONSOLE_TO_RELEASE"),REPORT_QUERY:d.fn("REPORT_QUERY"),MOLD_QUERY:d.fn("MOLD_QUERY"),PAHNTOMJS_INFO:d.fn("PAHNTOMJS_INFO")}),v.param=new t.Set({SAVE_TPL:function(a){var b=[],c=a.args.vtpl;return b.push("virtualTemplateName="+p(c.vtplName),"virtualTemplateId="+p(c.vtplKey),"doCreate="+("MOLD"==c.status)),l(!!c.snippet.content,"SNIPPET ä¸ºç©º"),l(!!c.depict.content,"DEPICT ä¸ºç©º"),b.push("condConf="+p(h(c.condSubmitGet())),"snippetContent="+p(c.snippet.content),"depictContent="+p(c.depict.content)),b.join("&")},GET_COND:function(a){return k(i({},a.args,["reportTemplateIdList","virtualTemplateId"]),!0).join("&")},EXIST_COND:function(a){return k(i({},a.args,["reportTemplateIdList","virtualTemplateId"]),!0).join("&")},DS_LIST:function(a){return"reportTemplateType="+p(a.args.reportTemplateType)},TO_PRE:function(a){return"reportTemplateIdList="+a.args.vtpl.vtplKey},TO_RELEASE:function(a){return"reportTemplateIdList="+a.args.vtpl.vtplKey},REPORT_QUERY:function(a){return k(i({},a.args,["reportName"]),!0).join("&")},MOLD_QUERY:function(a){return k(i({},a.args,["reportName"]),!0).join("&")},PAHNTOMJS_INFO:function(a){return k(i({},a.args,["perviewUrl","imgName"]),!0).join("&")}}),v.parse=new t.Set({VTPL_LIST:function(a){for(var b,c,d,e=a.vtplInfo||[],f=0;f<e.length;f++)(b=e[f])&&(d=b.id)&&(c=this._vtpls.get(d),c||(c=new q({vtplKey:d,vtplName:b.name||(b.name="æªå½åè§å¾æ¨¡ç"),snippet:{fileName:b.id,extName:"vm",fullName:b.id+".vm"},depict:{fileName:b.id,extName:"json",fullName:b.id+".json"}}),c.status="SAVED",this._vtpls.set(d,c)));return a},MOLD_LIST:function(a){for(var b,c,d=a.moldFiles||[],e=0;e<d.length;e++)(b=m(d[e])).fileName&&(c=this._molds.get(b.fileName)||new q,c[{vm:"snippet",json:"depict"}[b.extName]]=b,c.vtplKey="RTPL_VIRTUAL_ID",c.status="MOLD",this._molds.set(b.fileName,c));return a},PAHNTOMJS_INFO:function(a){return a},DS_LIST:function(a){for(dsList=this._reportTemplateList=a.reportTemplateList=a.reportTemplateList||[],j=0;dso=dsList[j];)"RTPL_VIRTUAL"==dso.reportTemplateType?dsList.splice(j,1):j++;return dsList.splice(0,0,{reportTemplateId:"RTPL_VIRTUAL_ID",reportTemplateType:"RTPL_VIRTUAL"}),a},REPORT_QUERY:function(a){this._vtplMap.dev.clean(),this._vtplMap.pre.clean(),this._vtplMap.release.clean();for(var b=a.releaseReportInfo,c=a.preReportInfo,d=a.savedReportInfo,e=[{list:b,status:"release"},{list:c,status:"pre"},{list:d,status:"dev"}],f=0;f<e.length;f++)for(var g,h,i,j=e[f].list,k=e[f].status,l=0;l<j.length;l++)(g=j[l])&&(i=g.id)&&(h=this._vtplMap[k].get(i),h||(h=new q({vtplKey:i,vtplName:g.name||(g.name="æªå½åè§å¾æ¨¡ç"),snippet:{fileName:g.id,extName:"vm",fullName:g.id+".vm"},depict:{fileName:g.id,extName:"json",fullName:g.id+".json"}}),h.status=k,this._vtplMap[k].set(i,h)));return a},MOLD_QUERY:function(a){this._molds.clean();for(var b,c,d=a.moldFiles||[],e=0;e<d.length;e++)(b=m(d[e].fileName)).fileName&&(c=this._molds.get(b.fileName)||new q,c[{vm:"snippet",json:"depict"}[b.extName]]=b,c.vtplKey="RTPL_VIRTUAL_ID",c.status="MOLD",c.desc=d[e].desc,this._molds.set(b.fileName,c));return a},SAVE_TPL:b,GET_COND:b,EXIST_COND:b,TO_PRE:b,TO_RELEASE:b}),v.fetchRemoteVTpl=function(a,b){function e(b){var e=[d.getWebRoot()];return"MOLD"==a.status?e.push(c.MOLD_PATH,b):e.push(c.VTPL_ROOT,r().getBizKey(),"dev",b),e.join("/")+"?__v__="+Math.random()}function f(c,d,e,f){k++,l[d]=f,2===k&&(a.contentSet(l.snippet,l.depict,!0),b())}function h(a,b){j.disable(),alert("è·åvtplå¤±è´¥ï¼url="+a+" status="+b.status)}var i,j=this,k=0,l={};n(i=e(a.snippet.fullName),{method:"GET",onsuccess:g(f,this,i,"snippet"),onfailure:g(h,this,i)}),n(i=e(a.depict.fullName),{method:"GET",onsuccess:g(f,this,i,"depict"),onfailure:g(h,this,i)})},v.getVTpls=function(a){return this._vtplMap[a]},v.getVTpl=function(a,b){return this._vtplMap[a].get(b)},v.getMolds=function(){return this._molds},v.getBizKey=function(){return r().getBizKey()},v.getMold=function(a){return this._molds.get(a)},v.getReportTemplateList=function(){return this._reportTemplateList},v.getVTplMenuData=function(){var a=[],b={menuList:a},c=[],d="MENU_ID_VTPL";return a.push({text:"æçæ¥è¡¨",value:d+"1",children:c}),this._vtpls.foreach(function(a,b){var d=a+o();c.push({text:b.vtplName,prompt:"[reportTemplateId]: "+b.vtplKey,floatTree:[{children:[{text:"å¿«éç¼è¾",url:"di.console.editor.ui.VTplPanelPage?"+["pageId="+d,"pageTitle="+a,"vtplKey="+a,"act=EDIT#QUICK"].join("&")},{text:"æºç ç¼è¾",url:"di.console.editor.ui.VTplPanelPage?"+["pageId="+d,"pageTitle="+a,"vtplKey="+a,"act=EDIT#CODE"].join("&")}]}]})}),b.selMenuId=d+"1",{menuTree:b}},v.getMoldMenuData=function(){var a=[],b={menuList:a},c=[],d="MENU_ID_MOLD";return a.push({text:"æ°å»ºæ¥è¡¨ï¼åºäºæ¨¡çï¼",value:d+"1",children:c}),this._molds.foreach(function(a,b,e){c.push({text:a,value:d+(1e4+e),floatTree:[{value:d+String(Math.random()),children:[{text:"æ°å»º",value:d+String(Math.random()),url:"di.console.editor.ui.VTplPanelPage?"+["pageTitle=æ°å»º [åºäºï¼"+a+"]","moldKey="+a,"act=CREATE#QUICK","forceCreate=true"].join("&")}]}]})}),b.selMenuId=d+"1",{menuTree:b}}}(),$namespace("di.console.editor.model"),function(){function a(a,c){var d={},e={},f=[];try{e.obj=j(c)}catch(g){f.push("JSONæ ¼å¼éè¯¯"+g)}var h=d.el=document.createElement("div"),i=b(a);return i?h.innerHTML=a.slice(i.start,i.end):(d.invalid=!0,f.push("SNIPPETæªè½è§£æ")),{snippet:d,depict:e,errorMsg:f}}function b(a){var b=a.indexOf(d.DOM_FLAG_BEGIN),c=a.indexOf(d.DOM_FLAG_END);return 0>b||0>c?null:{start:b+d.DOM_FLAG_BEGIN.length,end:c}
}function c(a){return $.htmlClean(a,{format:!0,allowedAttributes:[["data-o_o-di"],["id"],["class"],["style"],["data-toggle"],["data-target"],["data-parent"],["role"],["data-dismiss"],["aria-labelledby"],["aria-hidden"],["data-slide-to"],["data-slide"]]})}di.helper.Formatter;var d=di.config.Dict;di.config.Lang,di.config.URL;var e=di.helper.Util;xutil.object.inheritsObject;var f=xutil.dom.q;xutil.dom.g,xutil.fn.bind;var g=xutil.object.extend;xutil.object.assign;var h=xutil.object.clone;e.parseFileName,baidu.ajax.request;var i=baidu.json.stringify,j=baidu.json.parse,k=jsl.format.formatJson,l=jsl.parser.parse,m=xutil.dom.hasClass,n=xutil.object.getByPath,o=xutil.object.setByPath,p=xutil.lang.isString,q=xutil.lang.isArray,r=xutil.lang.isNumber,s=e.indexOf;xutil.lang.hasValue;var t=xutil.uid.getUID;xutil.date.stringToDate,xutil.date.dateToString,xutil.url.textParam,xutil.collection.travelTree,xutil.url.wrapArrayParam,e.assert;var u=$namespace().VTpl=function(a){g(this,a||{}),this.depict=this.depict||{},this.snippet=this.snippet||{},this.rtplCond=this.rtplCond||{}},v=u.prototype;v.genId=function(){for(var a=this.getEntityDefs(),b={},c=0;c<a.length;c++)b[a[c]]=1;var d;do d=(new Date).getTime()+"_"+t();while(d in b);return d},v.clone=function(){var a=new u;a.vtplKey=this.vtplKey,a.vtplName=this.vtplName,a.status=this.status,a.depict=h(this.depict),a.snippet=h(this.snippet),a.rtplCond=h(this.rtplCond);var b=this.snippet.el;return b&&(a.snippet.el=document.createElement("div"),a.snippet.el.innerHTML=b.innerHTML),a},v.contentSet=function(b,c,d){var e,f=[];try{c=k(c),l(c),e=a(b,c),f.push.apply(f,e.errorMsg)}catch(g){f.push("JSONè§£æéè¯¯ï¼\n"+g.message)}return(d||!f.length)&&(this.depict.content=c,this.snippet.content=b),f.length||(this.depict.obj=e.depict.obj,this.snippet.el=e.snippet.el),this.$fixDepict(),f},v.contentStringify=function(){var a,d,e=[],f=this.depict,g=this.snippet;try{a=k(i(f.obj));var h=b(g.content);if(h){var j=g.content.slice(0,h.start),l=g.content.slice(h.end);d=[j," \n ",c(g.el.innerHTML)," \n ",l].join("")}else e.push("æªæ¾å°DOM FLAG, SNIPPETæªè½ä¿å­")}catch(m){e.push("Stringifyæ¶JSONè§£æéè¯¯ï¼\n"+m.message)}return e.length||e.concat(this.contentSet(d,a)),e},v.replaceWith=function(a){for(var b in this)this.hasOwnProperty(b)&&(this[b]=void 0);g(this,a)},v.$fixDepict=function(){this.forEachEntity("COMPONENT",function(a){a.reportType||(a.reportTemplateId=void 0),"RTPL_VIRTUAL"==a.reportType&&(a.reportTemplateId="RTPL_VIRTUAL_ID")})},v.condClean=function(){var a,b,c,d=this.rtplCond,e={};this.forEachEntity("COMPONENT",function(a){var b;"RTPL_VIRTUAL"==a.reportType||"RTPL_VIRTUAL_ID"==a.reportTemplateId?b="RTPL_VIRTUAL_ID":a.reportTemplateId&&(b=a.reportTemplateId),e[b]||(e[b]=[]),e[b].push(a)});for(a in e)d[a]||(d[a]=[]);for(a in d)e[a]||delete d[a];for(a in d){var f,g=e[a],h={};for(b=0;f=g[b];b++){var i=this.getVUIRef(f.id,"input");for(c=0;c<i.length;c++){var j=this.findEntityById(i[c]);j&&j.name&&(h[j.name]=1)}}var k=d[a];for(b=0;b<k.length;)h.hasOwnProperty((k[b]||{}).name)?b++:k.splice(b,1)}},v.condGet=function(a,b){if(!a||!b)return null;for(var c,d=this.rtplCond[a]||[],e=0;e<d.length;e++)if((c=d[e])&&b==c.name)return c},v.condSubmitGet=function(){var a=h(this.rtplCond);if(!a)return{};var b,c=a.RTPL_VIRTUAL_ID;if(c)for(b in a){var d=a[b];d!=c&&d.push.apply(d,c)}return a},v.condAdd=function(a,b){if(this.condGet(a,b.name))return!1;var c=this.rtplCond[a];return c||(c=this.rtplCond[a]=[]),c.push(b),!0},v.findEntityByClzType=function(a){var b=[],c=this.getEntityDefs();if(c)for(var d,e=0;e<c.length;e++)(d=c[e])&&d.clzType==a&&b.push(d);return b},v.findEntityById=function(a){var b=this.getEntityDefs();if(b)for(var c,d=0;d<b.length;d++)if((c=b[d])&&c.id==a)return c},v.findCPNTByVUI=function(a){var b,c=this;return this.forEachEntity("COMPONENT",function(d){for(var e=c.getVUIRef(d.id),f=0;f<e.length;f++)e[f]==a&&(b=d)}),b},v.findCPNTByDom=function(a,b){var c=a.getAttribute(d.DI_ATTR);if(!c)return[];b=b||this.snippet.el;var e,f=this.findEntityById(c);return"VUI"==f.clzType?e=this.findCPNTByVUI(f.id):"COMPONENT"==f.clzType&&(e=f),e},v.findCPNTDoms=function(a,b){return this.findDomsByIds(this.getVUIRef(a).concat([a]),b)},v.findDomsByIds=function(a,b){var c=[];b=b||this.snippet.el;for(var e,f=b.getElementsByTagName("*"),g=0;e=f[g];g++)for(var h=e.getAttribute(d.DI_ATTR),i=0;i<a.length;i++)h==a[i]&&(c[i]=e);return c},v.forEachEntity=function(a,b){var c=this.getEntityDefs();if(c)for(var d,e=0;e<c.length;e++)!(d=c[e])||a&&d.clzType!=a||b(d)},v.rtplIdGet=function(a,b){for(var c,d,e={},f=this.getEntityDefs()||[],g=0;c=f[g];g++)(d=c.reportTemplateId)&&(!a||c.reportType&&"RTPL_VIRTUAL"!=c.reportType)&&(e[d]=1);if(b)return e;var h=[];for(var i in e)h.push(i);return h},v.innerHTML=function(a,b){var c;q(a)&&(c=a[1],a=a[0]);var e,g=this.snippet.el;if(!g)return null;if(a){for(var h,i=g.getElementsByTagName("*"),j=0;h=i[j];j++)if(h.getAttribute(d.DI_ATTR)==a){e=h;break}if(!e)return null;c&&!m(e,c)&&(e=f(c,e)[0])}else e=g;return e?(b&&(e.innerHTML=b),e.innerHTML):null},v.getEntityDefs=function(){return(this.depict.obj||{}).entityDefs||[]},v.addEntityDef=function(a){var b=this.depict.obj;b&&a&&b.entityDefs.push(a)},v.removeEntityDef=function(a){for(var b,c=this.getEntityDefs(),d=0;d<c.length;)(b=c[d])&&(b.id===a?c.splice(d,1):d++)},v.removeVUIRef=function(a,b){var c=this.findEntityById(a);if(c)for(var d=n("vuiRef.input",c)||[],e=0;e<d.length;)d[e]===b?d.splice(e,1):e++},v.removeVUIRefAll=function(a){var b=this;this.forEachEntity(null,function(c){b.removeVUIRef(c.id,a)})},v.addVUIRef=function(a,b){var c=this.findEntityById(a);if(c){var d=n("vuiRef.input",c);d||o("vuiRef.input",d=[]),s(d,b)<0&&d.push(b)}},v.getVUIRef=function(a,b){var c=this.findEntityById(a);if(c){if(b)return n("vuiRef."+b,c)||[];var d=[],e=function(a){if(p(a)||r(a))return d.push(a),void 0;for(var b in a)e(a[b])};return e(c.vuiRef),d}return[]},v.statusUpdate=function(a){a&&(this.status=a)}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){var c=String(null==b.v?" - ":b.v),d=c;return c=h(c,0,q),c.length<d.length?c+="...":d=null,{value:i(c),prompt:d&&i(d)}}function b(a){return a!==Object(a)&&(a={v:a}),a}function c(a){if(a!==Object(a))return!1;for(var b in a)return!1;return!0}var d=di.config.Dict,e=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var f=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend,xutil.object.objKey;var g=xutil.dom.q;xutil.dom.children;var h=xutil.string.textSubstr,i=xutil.string.encodeHTML,j=xutil.fn.bind;xutil.string.trim,xutil.string.template,e.preInit,xutil.string.htmlText,xutil.url.stringifyParam,e.cmptCreate4Console,e.cmptSync4Console,e.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage;var k=e.strToBoolean;ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var l,m,n=di.shared.ui.BaseConfigPanel;$link(function(){l=di.shared.model.DIFactory,m=di.shared.model.CommonParamFactory});var o=$namespace().ColConfigPanel=f(n,function(a){this._mModel=a.model,this._mDITableModel=a.diTableModel,this.DATASOURCE_ID_MAPPING={}}),p=o.prototype,q=30;p.$doDispose=function(){this.getContentEl().innerHTML=""},p.$doOpen=function(a,b){this._reportTemplateId=b.reportTemplateId},p.$doRender=function(a,b){function e(a){var b=d.findClzDef("DI_FORM","COMPONENT");a.push('<select class="',p,'-clz-key-sel">');for(var c,e,f,g=0;c=b.vuiRefCandidate.input[g];g++)f=d.findClzDef(c,"VUI"),f.editorDisable||(e=x.clzKey==c?e=' selected="selected" ':" ",a.push('<option value="',c,'" ',e,">",f.caption,"</option>"));a.push("</select>")}function f(a){a.push('<select class="',p,'-param-name-sel">');for(var b,c,d=0;b=y[d];d++)c=x.name==b.name?c=' selected="selected" ':" ",a.push('<option value="',b.name,'" ',c,">",b.caption,"ï¼",b.name,"ï¼</option>");a.push("</select>")}function h(a){a.push('<select class="',p,'-level-sel">',"</select>")}function i(a){a.push("<span>æ¯å¦è®¾ä¸ºå¿ä¼ æ¡ä»¶ï¼</span>");var b={"true":"","false":""};b[String(!!z.required)]=' selected="selected" ',a.push('<select class="',p,'-required-sel">','<option value="true" ',b["true"],">æ¯</option>",'<option value="false" ',b["false"],">å¦</option>","</select>")}function k(a){a.push('<select class="',p,'-handler-sel">',"</select>")}a.innerHTML="";var l,m,n,o,p="cond-config-panel",q=(this._mDITableModel.getData()||{}).tableData||{},r=q.colFields||[],s=q.colDefine||[],t=[];for(t.push('<table cellpadding="0" cellspacing="0" width="100%" class="',p,"-table ",'ui-table"><thead>'),l=0;n=r[l];l++){for(t.push("<tr>"),t.push("<th>&nbsp;</th>"),m=0;m<n.length;m++)c(o=n[m])||this.$renderHCell(t,l==r.length-1?s[m]:null,o,m,l);t.push("</tr>")}t.push("</thead><tbody>"),t.push("</tbody></table>"),a.innerHTML=t.join("");var u=this._entityId,v=this._isCreate,w=this._vtplFork,x=v?{id:u,clzType:"VUI"}:this._vtplFork.findEntityById(u),y=(b.templateDims||{})[this._tplKey]||[],z=w.condGet(this._tplKey,x.name)||{},t=[],a=this.getContentEl();this._condEl,t.push("<div>"),t.push("<span>éæ©æ§ä»¶ï¼</span>"),e(t),t.push("<span>éæ©æå¯¹åºçåå°åæ°åï¼</span>"),f(t),t.push("<span>éæ©æå¯¹åºçç»´åº¦å±çº§ï¼</span>"),h(t),t.push("</div>"),t.push("<div>"),t.push('<span title="å¯ä¸å¡«">fetchURL: </span>','<input class="',p+'-fetch-url" value="',z.fetchURL||"",'" />'),t.push('<span title="å¯ä¸å¡«">é»è®¤å¼: </span>','<input class="',p+'-default-value" value="',z.defaultValue||"",'" />'),i(t),k(t),t.push("</div>"),a.innerHTML=t.join(""),this._clzKeySel=g(p+"-clz-key-sel",a)[0],this._handlerSel=g(p+"-handler-sel",a)[0],this._paramNameSel=g(p+"-param-name-sel",a)[0],this._levelSel=g(p+"-level-sel",a)[0];var A=j(function(a,b){for(var c,d,e=this._clzKeySel,f=this._handlerSel,g=(e.options[e.selectedIndex]||{}).value,h=g?b.findClzDef(g,"VUI").rtplParamHandler:[],i=[],j=0;c=h[j];j++)d=c==a.handler?' selected="selected" ':"",i.push('<option value="',c,'" ',d,">",c,"</option>");f.innerHTML=i.join("")},this,z,d);this._clzKeySel.onchange=A;var B=j(function(a){for(var b,c,d=this._paramNameSel,e=this._levelSel,f=(d.options[d.selectedIndex]||{}).value,g=[],h=0;b=y[h];h++)if(b.name==f&&b.levels&&b.levels.length)for(var i=0;i<b.levels.length;i++){var j=b.levels[i];c=j==a.level?' selected="selected" ':"",g.push('<option value="',j,'" ',c,">",j,"</option>")}e.innerHTML=g.join("")},this,z,d);this._paramNameSel.onchange=B,A(),B()},p.$renderHCell=function(a,c,d,e,f){var g,h=this.getType(),i=[h+"-hcell"],j=[],k=[],l=[];d=b(d),l.push(d.colspan?' colspan="'+d.colspan+'" ':""),l.push(d.rowspan?' rowspan="'+d.rowspan+'" ':""),c&&c.width&&j.push("width:"+c.width+"px;"),k.push('data-cell-pos="'+e+"-"+f+'"'),g=this.$renderCellInner("HCELL",null,d,k,i,j),a.push("<th ",l.join(" ")," ",k.join(" ")," ",' class="',i.join(" "),'" style="',j.join(" "),'">',g,"</th>")},p.$renderCellInner=function(b,c,d,e){this.getType();var f=a(b,d),g=f.prompt;return f=f.value,g&&e.push('title="'+g+'"'),f},p.$doGetInitArgs=function(){return"RTPL_VIRTUAL"==this._reportType?{virtualTemplateId:"RTPL_VIRTUAL_ID",reportTemplateIdList:this._vtplFork.rtplIdGet(!0)}:{reportTemplateIdList:[this._tplKey]}},p.$doGetSubmitArgs=function(){var a,b="cond-config-panel",c=this._cpntId,d=this._entityId,e=this._vtplFork,f=this._tplKey,h=this._isCreate,i=this.getEl();a=g(b+"-param-name-sel",i)[0];var j=(a.options[a.selectedIndex]||{}).value;a=g(b+"-clz-key-sel",i)[0];var l=(a.options[a.selectedIndex]||{}).value,m=g(b+"-fetch-url",i)[0].value,n=g(b+"-default-value",i)[0].value;a=g(b+"-required-sel",i)[0];var o=k((a.options[a.selectedIndex]||{}).value);a=g(b+"-handler-sel",i)[0];var p=(a.options[a.selectedIndex]||{}).value;a=g(b+"-level-sel",i)[0];var q,r=(a.options[a.selectedIndex]||{}).value;h?(e.addEntityDef(q={id:d,clzType:"VUI"}),e.addVUIRef(c,d)):q=e.findEntityById(d),q.name=j,q.clzKey=l;var s;return j&&!(s=e.condGet(f,j))&&e.condAdd(f,s={}),s&&(s.name=j,s.fetchURL=m,s.defaultValue=n,s.required=o,s.handler=p,s.level=r),{hide:"HIDDEN_INPUT"==q.clzKey}},p.getType=function(){return"ui-table"}}(),$namespace("di.console.editor.ui"),function(){function a(a){if(!a)return"";try{return l(a)}catch(b){return arguments.callee.errorMsg=b.message,""}}function b(a){if(!a)return void 0;try{return a=k(a),o(a)?a:!1}catch(b){return arguments.callee.errorMsg=b.message,!1}}function c(a){if(!a)return"";try{return m(l(a))}catch(b){return arguments.callee.errorMsg=b.message,""}}function d(a){if(!a)return void 0;try{return a=m(a),n(a),k(a)}catch(b){return arguments.callee.errorMsg=b.message,!1}}var e=di.config.Dict,f=di.helper.Util;di.helper.Dialog;var g=di.config.Lang;di.config.Ajax;var h=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend,xutil.object.objKey;var i=xutil.dom.q;xutil.dom.children;var j=xutil.string.encodeHTML,k=baidu.json.parse,l=baidu.json.stringify,m=jsl.format.formatJson,n=jsl.parser.parse;xutil.fn.bind,xutil.string.trim,xutil.string.template,f.preInit;var o=xutil.lang.isArray;xutil.string.htmlText,xutil.url.stringifyParam,f.cmptCreate4Console,f.cmptSync4Console,f.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage;var p=f.strToBoolean;ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var q,r,s=di.shared.ui.BaseConfigPanel;$link(function(){q=di.shared.model.DIFactory,r=di.shared.model.CommonParamFactory});var t=$namespace().CondConfigPanel=h(s,function(){this.DATASOURCE_ID_MAPPING={INIT:"GET_COND"}}),u=t.prototype;u.$doDispose=function(){this._vtplFork=null,this._condEl=null,this._optSetEl=null,this._clzKeySel=null,this._handlerSel=null,this._paramNameSel=null,this._levelSel=null,this.getContentEl().innerHTML=""},u.$doOpen=function(a,b){this._cpntId=b.cpntId,this._entityId=b.entityId,this._reportType=b.reportType,this._reportTemplateId=b.reportTemplateId,this._vtplFork=b.vtplFork,this._isCreate=b.isCreate,this._condEl=b.condEl,this._tplKey="RTPL_VIRTUAL"==this._reportType?"RTPL_VIRTUAL_ID":this._reportTemplateId},u.$doRender=function(b,d){function f(a){var b=e.findClzDef("DI_FORM","COMPONENT");a.push('<span class="vtpl-quick-text-label">éæ©æ§ä»¶ï¼</span>'),a.push('<select class="',q,'-clz-key-sel">');for(var c,d,f,g=0;c=b.vuiRefCandidate.input[g];g++)f=e.findClzDef(c,"VUI"),f.editorDisable||(d=v.clzKey==c?d=' selected="selected" ':" ",a.push('<option value="',c,'" ',d,">",f.caption,"</option>"));a.push("</select>")}function h(a){a.push('<span class="vtpl-quick-text-label">éæ©æå¯¹åºçåå°åæ°åï¼</span>'),a.push('<select class="',q,'-param-name-sel">');for(var b,c,d=0;b=w[d];d++)c=v.name==b.name?c=' selected="selected" ':" ",a.push('<option value="',b.name,'" ',c,">",b.caption,"ï¼",b.name,"ï¼</option>");a.push("</select>")}function k(a){a.push('<span class="vtpl-quick-text-label">æ¯å¦è®¾ä¸ºå¿ä¼ æ¡ä»¶ï¼</span>');var b={"true":"","false":""};b[String(!!x.required)]=' selected="selected" ',a.push('<select class="',q,'-required-sel">','<option value="true" ',b["true"],">æ¯</option>",'<option value="false" ',b["false"],">å¦</option>","</select>")}function l(a){a.push('<span class="vtpl-quick-text-label">éæ©åæ°å¤çå¨ï¼</span>'),a.push('<select class="',q,'-handler-sel">',"</select>")}function m(a,b,c){for(var d,f,g=c?e.findClzDef(c,"VUI").rtplParamHandler:[],h=[],i=0;d=g[i];i++)f=d==b.handler?' selected="selected" ':"",h.push('<option value="',d,'" ',f,">",d,"</option>");a.innerHTML=h.join("")}function n(a,b,c){if("ECUI_INPUT_TREE"==c){var d=b.cfgOpt||{};a.push('<span class="vtpl-quick-text-label">è®¾ç½®æ°æ®çè·åæ¶æºï¼</span>');var e={"true":"","false":""};e[String(!!d.async)]=' selected="selected" ',a.push('<select class="',q,'-async-sel">','<option value="false" ',e["false"],">åå§å è½½æ¶è·åå¨é¨æ°æ®</option>",'<option value="true" ',e["true"],">åå§å è½½ä¸è·åå¨é¨æ°æ®ï¼ç¹å»å±å¼æ¶å¼æ­¥è·åæ°æ®</option>","</select>")}}function o(b,c,d){if("RANGE_POP_CALENDAR"==d||"DAY_POP_CALENDAR"==d){var e=c.dataOpt||{};b.push("<div>",'<span class="vtpl-quick-text-label">è®¾ç½®é»è®¤æ¶é´ï¼</span>','<input type="input" value="',j(a(e.defaultTime)),'" class="',q,'-ist-cal-default"/>','<span class="vtpl-quick-text-label">ï¼è¯·è¾å¥æ¶é´è¡¨è¾¾å¼ï¼</span>',"</div>","<div>",'<span class="vtpl-quick-text-label">è®¾ç½®å¯éæ¶é´èå´ï¼</span>','<input type="input" value="',j(a(e.range)),'" class="',q,'-ist-cal-range"/>','<span class="vtpl-quick-text-label">ï¼è¯·è¾å¥æ¶é´è¡¨è¾¾å¼ï¼</span>',"</div>",g.TIME_DESC)}}function p(a,b,d){if("X_CALENDAR"==d){var e=b.dataSetOpt||{};a.push('<div class="',q,'-x-cal-set">','<span class="vtpl-quick-text-label">è®¾ç½®åå§ååæ°ï¼</span>','<textarea class="',q,'-x-cal-opt"/>',j(c(e)),"</textarea>","</div>",g.X_CALENDAR_DESC)}}var q="cond-config-panel",r=this,s=this._entityId,t=this._isCreate,u=this._vtplFork,v=t?{id:s,clzType:"VUI"}:this._vtplFork.findEntityById(s),w=(d.templateDims||{})[this._tplKey]||[],x=u.condGet(this._tplKey,v.name)||{},y=[];y.push("<div>"),f(y),h(y),y.push("</div>"),y.push("<div>"),y.push('<span class="vtpl-quick-text-label" title="ä¸å¡«åä¼åé»è®¤è®¾ç½®">fetchURL: </span>','<input placeholder="å¯ä¸å¡«" class="',q+'-fetch-url" value="',x.fetchURL||"",'" />'),y.push('<span class="vtpl-quick-text-label" title="ä¸å¡«åä¼åé»è®¤è®¾ç½®">é»è®¤å¼: </span>','<input placeholder="å¯ä¸å¡«" class="',q+'-default-value" value="',x.defaultValue||"",'" />'),k(y),y.push("<br />"),l(y),y.push("</div>"),y.push('<div class="',q,'-opt-set"></div>'),b.innerHTML=y.join(""),this._clzKeySel=i(q+"-clz-key-sel",b)[0],this._handlerSel=i(q+"-handler-sel",b)[0],this._paramNameSel=i(q+"-param-name-sel",b)[0],this._levelSel=i(q+"-level-sel",b)[0],this._optSetEl=i(q+"-opt-set",b)[0];var z=function(){var a=r._clzKeySel,b=(a.options[a.selectedIndex]||{}).value;m(r._handlerSel,x,b);var c=[];c.push("<div>"),n(c,v,b),o(c,v,b),p(c,v,b),c.push("</div>"),r._optSetEl.innerHTML=c.join(""),r.center()};this._clzKeySel.onchange=z,z(),b=null,z=null},u.$doGetInitArgs=function(){return"RTPL_VIRTUAL"==this._reportType?{virtualTemplateId:"RTPL_VIRTUAL_ID",reportTemplateIdList:this._vtplFork.rtplIdGet(!0)}:{reportTemplateIdList:[this._tplKey]}},u.$doGetSubmitArgs=function(){function a(){var a,c,e,h,j,k,l;if("ECUI_INPUT_TREE"==q&&(a=a||{},(k=i(g+"-async-sel",n)[0])&&(a.async=p((k.options[k.selectedIndex]||{}).value))),"ECUI_SUGGEST"==q&&(a=a||{},a.async=!0),"RANGE_POP_CALENDAR"==q||"DAY_POP_CALENDAR"==q){if(c=c||{},k=i(g+"-ist-cal-default",n)[0]){if((l=b(k.value))===!1)return"æ¶é´æ ¼å¼éè¯¯";c.defaultTime=l||void 0}if(k=i(g+"-ist-cal-range",n)[0]){if((l=b(k.value))===!1)return"æ¶é´æ ¼å¼éè¯¯";c.range=l||void 0}}if("X_CALENDAR"==q&&(h=h||{},k=i(g+"-x-cal-opt",n)[0])){if((l=d(k.value))===!1)return"åå§ååæ°æ ¼å¼éè¯¯";h=l||void 0}f.cfgOpt=a,f.dataOpt=c,f.dataInitOpt=e,f.dataSetOpt=h,f.valueGetOpt=j}var c,e,f,g="cond-config-panel",h=this._cpntId,j=this._entityId,k=this._vtplFork,l=this._tplKey,m=this._isCreate,n=this.getEl();m?(k.addEntityDef(f={id:j,clzType:"VUI"}),k.addVUIRef(h,j)):f=k.findEntityById(j),c=i(g+"-param-name-sel",n)[0];var o=(c.options[c.selectedIndex]||{}).value;c=i(g+"-clz-key-sel",n)[0];var q=(c.options[c.selectedIndex]||{}).value,r=i(g+"-fetch-url",n)[0].value,s=i(g+"-default-value",n)[0].value;c=i(g+"-required-sel",n)[0];var t=p((c.options[c.selectedIndex]||{}).value);c=i(g+"-handler-sel",n)[0];var u=(c.options[c.selectedIndex]||{}).value;if(e=a())return e;f.name=o,f.clzKey=q;var v;return o&&!(v=k.condGet(l,o))&&k.condAdd(l,v={}),v&&(v.name=o,v.fetchURL=r,v.defaultValue=s,v.required=t,v.handler=u),{hide:"HIDDEN_INPUT"==f.clzKey}}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText,xutil.fn.bind,xutil.string.trim;var d=xutil.string.template;a.preInit,xutil.url.stringifyParam,a.cmptCreate4Console,a.cmptSync4Console,a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var e,f,g=di.shared.ui.BaseConfigPanel;$link(function(){e=di.shared.model.DIFactory,f=di.shared.model.CommonParamFactory});var h=$namespace().DataFormatPanel=b(g,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"GET_TEMPLATE_INFO",SUBMIT:"DATA_FORMAT_SET"}}),i=h.prototype;i.$doDispose=function(){this.getContentEl().innerHTML=""},i.$doOpen=function(){},i.$doRender=function(a,b){function e(b){if(b)for(var e=c("data-format-config",a)[0],f=0;f<b.length;f++){var h=b[f],i=document.createElement("div"),j=['<div class="data-format-config-item">',"<label>#{MeasureName}</label>",'<select class="measure-format"  name="#{uniqueName}">','<option value="I,III.DD">ååä½,ä¸¤ä½å°æ°</option>','<option value="I,III">ååä½æ´æ°</option>','<option value="I.DD%">ä¸¤ä½å°æ°ç¾åæ¯</option>','<option value="HH:mm:ss">æ¶é´æ ¼å¼</option>','<option value="Då¤© HH:mm:ss">æ¶é´æ ¼å¼(å¸¦å¤©)</option>',"</select>","</div>"].join("");j=d(j,{MeasureName:h.name,uniqueName:h.uniqueName}),i.innerHTML=j,h.format||(h.format=g),c("measure-format",i)[0].value=h.format,e.appendChild(i)}}function f(){var b=c("data_format_select",a)[0],d=c("measure-format",a);if(d)for(var e=0;e<d.length;e++)d[e].value=b.value}a.innerHTML="";var g=b.defaultFormat||"I,III.DD",h=['<div class="data-format-config">',"<div>","<label>é»è®¤æ°æ®æ ¼å¼:</label>",'<select class="data_format_select">','<option value="I,III.DD">ååä½,ä¸¤ä½å°æ°</option>','<option value="I,III">ååä½æ´æ°</option>','<option value="III">æ´æ°</option>','<option value="I.DD%">ä¸¤ä½å°æ°ç¾åæ¯</option>','<option value="HH:mm:ss">æ¶é´æ ¼å¼</option>',"</select>","</div>",'<div><label class="data-format-config-charactor">ææ ä¿¡æ¯:</label></div>',"</div>","<div>å»ºè®®è®¾ç½®å®æ¨¡æ¿çå¯éææ åç»´åº¦ä»¥ååè¿è¡æ°æ®æ ¼å¼è®¾ç½®</div>"].join("");a.innerHTML=h,c("data_format_select",a)[0].value=g,c("data_format_select",a)[0].onchange=f,f(),e(b.measures)},i.$doGetSubmitArgs=function(){var a=this.getContentEl(),b=c("data_format_select",a)[0].value,d=c("measure-format",a),e={};if(d)for(var f=0;f<d.length;f++){var g=d[f];if(g.value!=b){var h=e[g.value];h||(h=[],e[g.value]=h),h.push(g.name)}}return{formatDto:{defaultFormat:b,measureFormatMap:e}}},i.$doGetInitArgs=function(){return{key:"DATA_FORMAT"}}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText,xutil.fn.bind,xutil.string.trim,xutil.string.template,a.preInit,xutil.url.stringifyParam,a.cmptCreate4Console,a.cmptSync4Console,a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var d,e,f=di.shared.ui.BaseConfigPanel;$link(function(){d=di.shared.model.DIFactory,e=di.shared.model.CommonParamFactory});var g=$namespace().DefaultDataFormatPanel=b(f,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"GET_TEMPLATE_INFO",SUBMIT:"DEFAULT_DATA_FORMAT_SUBMIT"}}),h=g.prototype;h.$doDispose=function(){this.getContentEl().innerHTML=""},h.$doOpen=function(){},h.$doRender=function(a,b){a.innerHTML="";var d=b.format||"I,III.DD",e=["<label>é»è®¤æ°æ®æ ¼å¼:</label>",'<select class="data_format_select">','<option value="I,III.DD">ååä½,ä¸¤ä½å°æ°</option>','<option value="I,III">ååä½æ´æ°</option>','<option value="I.DD%">ä¸¤ä½å°æ°ç¾åæ¯</option>',"</select>","<div></div>","<div></div>"].join("");a.innerHTML=e,c("data_format_select",a)[0].value=d},h.$doGetSubmitArgs=function(){var a=this.getContentEl(),b=c("data_format_select",a)[0].value;return{format:b}},h.$doGetInitArgs=function(){return{key:"DEFAULT_DATA_KEY"}}}(),$namespace("di.console.editor.ui"),function(){function a(a){a=a||[];for(var b={},c=0;c<a.length;c++)b[a[c]]=1;return b}di.config.Dict;var b=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var c=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend,xutil.object.objKey;var d=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML;var e=xutil.string.htmlText;xutil.fn.bind,xutil.string.trim;var f=xutil.string.template;b.preInit,xutil.url.stringifyParam,b.cmptCreate4Console,b.cmptSync4Console,b.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,b.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var g,h,i=di.shared.ui.BaseConfigPanel;$link(function(){g=di.shared.model.DIFactory,h=di.shared.model.CommonParamFactory});var j=$namespace().MetaCandidateConfigPanel=c(i,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"CANDIDATE_INIT",SUBMIT:"CANDIDATE_SUBMIT"}}),k=j.prototype;k.$doDispose=function(){this.getContentEl().innerHTML=""},k.$doOpen=function(){},k.$doRender=function(b,c){b.innerHTML="";var d,g,h="meta-candidate",i=c.metaData||{},j=a(c.validMeasureName),k=a(c.validDimensionNames),l=["<div>",'<div class="#{css}-line-label">è¯·å¾éè¦ä½ä¸ºåéé¡¹çææ ï¼</div>','<div class="#{css}-btns">','<input class="#{css}-ind-all-sel" type="button" value="å¨é" />','<input class="#{css}-ind-revert-sel" type="button" value="åé" />',"</div>",'<div class="#{css}-inds">#{inds}</div>','<div class="#{css}-line-label #{css}-sep">è¯·å¾éè¦ä½ä¸ºåéé¡¹çç»´åº¦ï¼</div>','<div class="#{css}-btns">','<input class="#{css}-dim-all-sel" type="button" value="å¨é" />','<input class="#{css}-dim-revert-sel" type="button" value="åé" />',"</div>",'<div class="#{css}-dims">#{dims}</div>',"</div>"].join(""),m=['<span class="#{css}-item">','<input type="checkbox" #{checked} value="#{value}"/>','<span class="#{css}-text-label">#{name}</span>',"</span>"].join(""),n=[],o=[];for(d=0;g=(i.inds||[])[d];d++)n.push(f(m,{css:h,name:e(g.caption),value:e(g.uniqName),checked:j[g.uniqName]?' checked="checked" ':""}));for(d=0;g=(i.dims||[])[d];d++)o.push(f(m,{css:h,name:e(g.caption),value:e(g.uniqName),checked:k[g.uniqName]?' checked="checked" ':""}));b.innerHTML=f(l,{css:h,inds:n.join(""),dims:o.join("")}),this.$bindEvent()},k.$bindEvent=function(){function a(a,b){return function(){for(var c,e=d(b,a.getContentEl())[0],f=e.getElementsByTagName("INPUT"),g=0;c=f[g];g++)c.checked=!0}}function b(a,b){return function(){for(var c,e=d(b,a.getContentEl())[0],f=e.getElementsByTagName("INPUT"),g=0;c=f[g];g++)c.checked=c.checked?!1:!0}}var c="meta-candidate",e=this.getContentEl();d(c+"-ind-all-sel",e)[0].onclick=a(this,c+"-inds"),d(c+"-ind-revert-sel",e)[0].onclick=b(this,c+"-inds"),d(c+"-dim-all-sel",e)[0].onclick=a(this,c+"-dims"),d(c+"-dim-revert-sel",e)[0].onclick=b(this,c+"-dims")},k.$doGetSubmitArgs=function(){function a(a,b){for(var e,f=d(a,c)[0].getElementsByTagName("INPUT"),g=0;e=f[g];g++)e.checked&&b.push(e.value)}var b="meta-candidate",c=this.getContentEl(),e=[],f=[];return a(b+"-inds",e),a(b+"-dims",f),{validMeasureName:e,validDimensionNames:f}}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText,xutil.fn.bind,xutil.string.trim;var d=xutil.string.template;a.preInit,xutil.url.stringifyParam,a.cmptCreate4Console,a.cmptSync4Console,a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var e,f,g=di.shared.ui.BaseConfigPanel;$link(function(){e=di.shared.model.DIFactory,f=di.shared.model.CommonParamFactory});var h=$namespace().MetaDimShowConfigPanel=b(g,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"DIMSHOW_CONFIG_INIT",SUBMIT:"DIMSHOW_CONFIG_SUBMIT"}}),i=h.prototype;i.$doDispose=function(){this.getContentEl().innerHTML=""},i.$doOpen=function(){},i.$doRender=function(a,b){a.innerHTML="";var c="meta-candidate",e=b.childrenShowConfig||{},f=b.fatherShowConfig||{},g=b.childrenType,h=b.fatherType,i=["<div>",'<div class="#{css}-dimshow-label">è¯·éæ©æ¯ä¸ä¸ªè¡è¡¨å¤´çå±å¼æ¹å¼ï¼</div>',"<div>#{dimShowConfigShow}</div>","</div>"].join(""),j=['<option class="#{css}-showTypeItem" value="#{value}" #{selected}>#{name}',"</option>"].join(""),k=['<span class="#{css}-item">',"<p>è¡çç¬¬#{index}ä¸ªè¡¨å¤´: </p>",'<span>æ¯å¦åå«éä¸­èç¹æ¬èº«<select class="#{css}-dimShowFatherSelect" name="fatherShow" >',"#{fatherShow}","</select></span>",'<span>æ¯å¦å±ç¤ºå­èç¹<select class="#{css}-dimShowChildrenSelect" name="childrenShow" >',"#{childrenShow}","</select></span>","</span>"].join(""),l=[];for(var m in e){var n=[],o=[];for(var p in g){var q,r=g[p];q=r==e[m]?"selected":"";var s;s="SINGLE_NODE"==r?"ä¸å±ç¤ºå­©å­èç¹":"å±ç¤ºå­©å­èç¹",o.push(d(j,{css:c,value:r,name:s,selected:q}))}for(var p in h){var q,r=h[p];q=r==f[m]?"selected":"";var s;s="INCLUDE"==r?"åå«éä¸­èç¹æ¬èº«":"ä¸åå«éä¸­èç¹",n.push(d(j,{css:c,value:r,name:s,selected:q}))}l.push(d(k,{css:c,index:parseInt(m)+1,fatherShow:n,childrenShow:o}))}a.innerHTML=d(i,{css:c,dimShowConfigShow:l.join("")}),this.$bindEvent()},i.$bindEvent=function(){},i.$doGetSubmitArgs=function(){function a(a,b){for(var e,f=c(a,d),g=0;e=f[g];g++)b.push(e.value)}var b="meta-candidate",d=this.getContentEl(),e=[],f=[];return a(b+"-dimShowChildrenSelect",f),a(b+"-dimShowFatherSelect",e),{fatherShowConfig:e,childrenShowConfig:f}}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText,xutil.fn.bind,xutil.string.trim;var d=xutil.string.template;a.preInit,xutil.url.stringifyParam,a.cmptCreate4Console,a.cmptSync4Console,a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var e,f,g=di.shared.ui.BaseConfigPanel;$link(function(){e=di.shared.model.DIFactory,f=di.shared.model.CommonParamFactory});var h=$namespace().MetaRowHeadConfigPanel=b(g,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"ROWHEAD_CONFIG_INIT",SUBMIT:"ROWHEAD_CONFIG_SUBMIT"}}),i=h.prototype;i.$doDispose=function(){this.getContentEl().innerHTML=""},i.$doOpen=function(){},i.$doRender=function(a,b){a.innerHTML="";var c="meta-candidate",e=b.drillTypeConfig||{},f=b.candicates,g=["<div>",'<div class="#{css}-rowhead-label">è¯·éæ©æ¯ä¸ä¸ªè¡è¡¨å¤´çä¸é»æ¹å¼ï¼</div>',"<div>#{drillTypeConfig}</div>","</div>"].join(""),h=['<option class="#{css}-drillTypeItem" value="#{value}" #{selected}>#{name}',"</option>"].join(""),i=['<span class="#{css}-item">','<p>è¡çç¬¬#{index}ä¸ªè¡¨å¤´<select class="#{css}-drillTypeSelect" name="drillTypes">',"#{drillTypes}","</select></p>","</span>"].join(""),j=[];for(var k in e){var l=[];for(var m in f){var n,o=f[m];n=o==e[k]?"selected":"";var p;p="LINK"==o?"é¾æ¥ä¸é»":"PLUS_MINUS"==o?"å åå·å±å¼":"ä¸ä¸é»",l.push(d(h,{css:c,value:o,name:p,selected:n}))}j.push(d(i,{css:c,index:parseInt(k)+1,drillTypes:l.join("")}))}a.innerHTML=d(g,{css:c,drillTypeConfig:j.join("")}),this.$bindEvent()},i.$bindEvent=function(){},i.$doGetSubmitArgs=function(){function a(a,b){for(var e,f=c(a,d),g=0;e=f[g];g++)b.push(e.value)}var b="meta-candidate",d=this.getContentEl(),e=[];return a(b+"-drillTypeSelect",e),{drillTypeCfg:e}}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._mPanelPageManager=new o({adapter:p}),this._mVTplModel=b.vtplModel}function b(a){this._uQueryBtn=l(q,h("q-btn-query",a)[0],null,{primary:"ui-button-g"}),this._uNameInput=l(r,h("q-mold-name",a)[0]),this._uMainContainer=i(t,h("q-main",this.getEl())[0],null,{primary:"ui-tab"})}di.config.Dict;var c=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.URL;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener;var f=xutil.object.extend,g=xutil.object.objKey;xutil.object.getByPath,xutil.url.parseParam;var h=xutil.dom.q;xutil.dom.children;var i=ecui.$fastCreate;xutil.object.assign;var j=xutil.fn.bind;xutil.string.trim,di.helper.Dialog.alert,di.helper.Dialog.confirm,xutil.string.template;var k=xutil.uid.getUID,l=c.ecuiCreate,m=c.foreachDoOri;baidu.ajax.request;var n=di.shared.ui.PanelPage;xutil.url.textParam,baidu.json.parse,xutil.url.replaceIntoParam;
var o,p,q=ecui.ui.Button,r=ecui.ui.Input,s=c.assert,t=ecui.ui.TabContainer;di.shared.ui.BaseConfigPanel;var u,v,w,x;$link(function(){GLOBAL_MODEL=di.shared.model.GlobalModel,u=di.shared.model.DIFactory,v=di.shared.model.CommonParamFactory,o=di.shared.model.PanelPageManager,p=di.shared.model.PanelPageTabAdapter,w=di.console.shared.ui.CubeConfigPanel,x=di.console.shared.ui.PreviewConfigPanel});var y=$namespace().MoldListPanelPage=d(n,function(c){var d=c.el;e(d,"vtpl-panel-page"),d.innerHTML=A,a.call(this,d,c),b.call(this,d,c),this._globalPanelPageManager=c.panelPageManager}),z=y.prototype,A=['<div class="vtpl-panel-page-btns">',"<span>æ¨¡æ¿åç§°ï¼</span>",'<input class="vtpl-name-input q-mold-name"/>','<span class="q-btn-query">æ¥è¯¢</span>',"</div>",'<div class="q-main"></div>'].join("");z.init=function(){var a=this;this._mPanelPageManager.inject(this._uMainContainer),this._mPanelPageManager.attach(["page.active",this.$pageActiveHandler,this]),this._uQueryBtn.onclick=j(this.doQuery,this),this._mPanelPageManager.init(),this._mVTplModel.attach(["sync.result.MOLD_QUERY",this.$renderTab,this]);var b=a.openTab({editorType:"all"});a._mPanelPageManager.select(b.getPageId()),this.doQuery()},z.$active=function(){},z.$renderTab=function(){this._mPanelPageManager.forEachPage(function(a,b){b.render()})},z.openTab=function(a){function b(){}var c=a.editorType,d=f({},a),e=this._mPanelPageManager;this._vtpl,f(d,{pageId:"moldlist_"+k(),pageClz:"di.console.shared.ui.ReportMoldListPage",pageTitle:{all:"å¨é¨æ¨¡æ¿"}[c],phase:c,vtplModel:this._mVTplModel,panelPageManager:e,globalPanelPageManager:this._globalPanelPageManager,vtplPanelPage:this}),s(d.pageId,"reportTempalteId is null");var g=e.openByURI(d.pageClz,d,b);return g.attach("rtpl.created",this.doCreated,this),g},z.doCreated=function(){this._mPanelPageManager.forEachPage(function(a,b){b.doCreated&&b.doCreated()})},z.doQuery=function(){var a=this._uNameInput.getValue();this._mVTplModel.sync({datasourceId:"MOLD_QUERY",args:{reportName:a}})},z.enable=function(a){g.remove(this,a),0===g.size(this)&&this._bDisabled&&(this._mPanelPageManager.forEachPage(function(b,c){c.enable(a)}),m([this._uQueryBtn],"enable",a),y.superClass.enable.call(this))},z.disable=function(a){g.add(this,a),this._bDisabled||(this._mPanelPageManager.forEachPage(function(b,c){c.disable(a)}),m([this._uQueryBtn],"disable",a)),y.superClass.disable.call(this)},z.dispose=function(){this._mPanelPageManager.dispose(),m([this._uQueryBtn],"dispose"),y.superClass.dispose.call(this)},z.$inactive=function(){},z.$pageActiveHandler=function(){}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._mPanelPageManager=new o({adapter:p}),this._mVTplModel=b.vtplModel}function b(a){this._uQueryBtn=l(q,h("q-btn-query",a)[0],null,{primary:"ui-button-g"}),this._uNameInput=l(r,h("q-report-name",a)[0]),this._uMainContainer=i(t,h("q-main",this.getEl())[0],null,{primary:"ui-tab"})}di.config.Dict;var c=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.URL;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener;var f=xutil.object.extend,g=xutil.object.objKey;xutil.object.getByPath,xutil.url.parseParam;var h=xutil.dom.q;xutil.dom.children;var i=ecui.$fastCreate;xutil.object.assign;var j=xutil.fn.bind;xutil.string.trim,di.helper.Dialog.alert,di.helper.Dialog.confirm,xutil.string.template;var k=xutil.uid.getUID,l=c.ecuiCreate,m=c.foreachDoOri;baidu.ajax.request;var n=di.shared.ui.PanelPage;xutil.url.textParam,baidu.json.parse,xutil.url.replaceIntoParam;var o,p,q=ecui.ui.Button,r=ecui.ui.Input,s=c.assert,t=ecui.ui.TabContainer;di.shared.ui.BaseConfigPanel;var u,v,w,x;$link(function(){GLOBAL_MODEL=di.shared.model.GlobalModel,u=di.shared.model.DIFactory,v=di.shared.model.CommonParamFactory,o=di.shared.model.PanelPageManager,p=di.shared.model.PanelPageTabAdapter,w=di.console.shared.ui.CubeConfigPanel,x=di.console.shared.ui.PreviewConfigPanel});var y=$namespace().MyViewPanelPage=d(n,function(c){var d=c.el;e(d,"vtpl-panel-page"),d.innerHTML=A,a.call(this,d,c),b.call(this,d,c),this._globalPanelPageManager=c.panelPageManager}),z=y.prototype,A=['<div class="vtpl-panel-page-btns">',"<span>æ¥è¡¨åç§°(ææ¥è¡¨idï¼æ¥è¡¨idå¿é¡»ä¸ºå¨æ°å­ï¼å¦PERSISTENT^_^virtualdatasource^_^^_^1234567ä¸­ç1234567)ï¼</span>",'<input class="vtpl-name-input q-report-name"/>','<span class="q-btn-query">æ¥è¯¢</span>',"</div>",'<div class="q-main"></div>'].join("");z.init=function(){var a=this;this._mPanelPageManager.inject(this._uMainContainer),this._mPanelPageManager.attach(["page.active",this.$pageActiveHandler,this]),this._uQueryBtn.onclick=j(this.doQuery,this),this._mPanelPageManager.init(),this._mVTplModel.attach(["sync.result.REPORT_QUERY",this.$renderTab,this]);var b=a.openTab({editorType:"dev"});a.openTab({editorType:"pre"}),a.openTab({editorType:"release"}),a._mPanelPageManager.select(b.getPageId())},z.$active=function(){this.doQuery()},z.$renderTab=function(){this._mPanelPageManager.forEachPage(function(a,b){b.render()})},z.openTab=function(a){function b(){}var c=a.editorType,d=f({},a),e=this._mPanelPageManager;this._vtpl,f(d,{pageId:"myview_"+k(),pageClz:"di.console.shared.ui.ReportReleasePage",pageTitle:{release:"å·²åå¸",pre:"é¢åå¸",dev:"å·²ä¿å­"}[c],phase:c,vtplModel:this._mVTplModel,panelPageManager:e,globalPanelPageManager:this._globalPanelPageManager,vtplPanelPage:this}),s(d.pageId,"reportTempalteId is null");var g=e.openByURI(d.pageClz,d,b);return g.attach("rtpl.created",this.doCreated,this),g},z.doCreated=function(){this._mPanelPageManager.forEachPage(function(a,b){b.doCreated&&b.doCreated()})},z.doQuery=function(){var a=this._uNameInput.getValue();this._mVTplModel.sync({datasourceId:"REPORT_QUERY",args:{reportName:a}})},z.enable=function(a){g.remove(this,a),0===g.size(this)&&this._bDisabled&&(this._mPanelPageManager.forEachPage(function(b,c){c.enable(a)}),m([this._uQueryBtn],"enable",a),y.superClass.enable.call(this))},z.disable=function(a){g.add(this,a),this._bDisabled||(this._mPanelPageManager.forEachPage(function(b,c){c.disable(a)}),m([this._uQueryBtn],"disable",a)),y.superClass.disable.call(this)},z.dispose=function(){this._mPanelPageManager.dispose(),m([this._uQueryBtn],"dispose"),y.superClass.dispose.call(this)},z.$inactive=function(){},z.$pageActiveHandler=function(){}}(),$namespace("di.console.editor.ui"),function(){function a(a,b,c){function d(){var a="snpt-CONSOLE.cpnt-CONSOLE-table-"+l(),b="snpt-CONSOLE.vu-CONSOLE-breadcrumb-"+l(),c="snpt-CONSOLE.vu-CONSOLE-table-"+l();g.innerHTML=['<div class="q-di-table-area di-table-area">','<div class="q-di-breadcrumb"></div>','<div class="q-di-table pivot-table"></div>',"</div>"].join("");var d=m(g.firstChild);f=[{id:a,clzType:"COMPONENT",clzKey:"DI_TABLE",el:g,vuiRef:{mainTable:c,breadcrumb:b}},{id:b,clzType:"VUI",clzKey:"BREADCRUMB",el:d[0],dataOpt:{maxShow:6}},{id:c,clzType:"VUI",clzKey:"OLAP_TABLE",el:d[1],dataOpt:{rowHCellCut:30,hCellCut:30,cCellCut:30,vScroll:!0,rowCheckMode:"CHECK"}}]}function e(){var a="snpt-CONSOLE.cpnt-CONSOLE-chart-"+l(),b="snpt-CONSOLE.vu-CONSOLE-chart-"+l();g.innerHTML='<div class="q-di-chart"></div>',f=[{id:a,clzType:"COMPONENT",clzKey:"DI_CHART",el:g,vuiRef:{mainChart:b}},{id:b,clzType:"VUI",clzKey:"H_CHART",el:g.firstChild,dataOpt:{height:300,legend:{xMode:"pl"}}}]}var f,g=j("q-di-data",b)[0];return"RTPL_OLAP_TABLE"==a?d():"RTPL_OLAP_CHART"==a&&e(),q(A(),f,c)}function b(a,b){this._sReportType=b.reportType||"RTPL_OLAP_TABLE",this._mOLAPEditorModel=new s({reportType:this._sReportType,schemaName:b.schemaName,cubeTreeNodeName:b.cubeTreeNodeName,reportTemplateId:b.reportTemplateId}),this._sStatus=b.reportTemplateId?"EXIST":"NEW"}function c(b){function c(a){var c=j("q-di-operation",b)[0],d=document.createElement("div");return d.innerHTML='<div class="ui-button-g ui-button">'+a+"</div>",c.appendChild(d.firstChild),p(D,c.lastChild,null,{primary:"ui-button-g"})}var d=this._mOLAPEditorModel.getCommonParamGetter();this._uNameInput=p(F,j("olap-editor-name",b)[0].lastChild),this._uMetaCondition=new r({el:j("q-di-meta-condition",b)[0],reportType:this._sReportType,commonParamGetter:d}),this._mMetaConditionModel=this._uMetaCondition.getModel(),this._uDefaultDataPanel=new z({parent:this,model:this._mMetaConditionModel,cssName:"default-data-format",panelTitle:"æ°æ®æ ¼å¼è®¾ç½®"}),this._uCandidatePanel=new w({parent:this,model:this._mMetaConditionModel,cssName:"meta-candidate",panelTitle:"åéé¡¹è®¾ç½®"}),this._uExtendParamPanel=new C({parent:this,model:this._mMetaConditionModel,cssName:"query-extend-param",panelTitle:"æ¥è¯¢åæ°è®¾ç½®"}),e||(this._uRowHeadPanel=new x({parent:this,model:this._mMetaConditionModel,cssName:"meta-candidate",panelTitle:"è¡è¡¨å¤´å±æ§"})),this._uDimShowPanel=new y({parent:this,model:this._mMetaConditionModel,cssName:"meta-candidate",panelTitle:"è¡ï¼è½´ï¼ç»´åº¦å±ç¤ºå±æ§"});var e="RTPL_OLAP_CHART"==this._sReportType;e&&(this._uChartCfgPanel=new v({parent:this,model:this._mMetaConditionModel,cssName:"meta-chart-cfg",panelTitle:"å¾è®¾ç½®"})),this._uDataMergePanel=new B({parent:this,model:this._mMetaConditionModel,cssName:"report-data-merge-config",panelTitle:"æ¥è¡¨æ°æ®åå¹¶è®¾ç½®"}),this._uQueryBtn=c("æ¥è¯¢"),this._uSaveBtn=c("ä¿å­"),this._uCandidateBtn=c("åéé¡¹è®¾ç½®"),e&&(this._uChartCfgBtn=c("å¾è®¾ç½®")),e||(this._uRowHeadCfgBtn=c("è¡å¤´ä¸é»å±æ§")),this._uDimShowCfgBtn=c("è¡ï¼è½´ï¼ç»´åº¦å±ç¤ºå±æ§"),this._uDefaultDataFormatBtn=c("æ°æ®æ ¼å¼è®¾ç½®"),this._uDataMergeBtn=c("æ°æ®åå¹¶æ¹å¼è®¾ç½®"),this._uDIData=a(this._sReportType,b,d),this._mDIDataModel=this._uDIData.getModel()}di.config.Dict;var d=di.helper.Util,e=di.helper.Dialog,f=di.config.Lang,g=xutil.object.inheritsObject,h=xutil.dom.addClass;xutil.dom.removeClass,xutil.object.extend;var i=xutil.object.objKey,j=xutil.dom.q,k=xutil.fn.bind,l=xutil.uid.getUID,m=xutil.dom.children,n=xutil.string.template;d.preInit;var o=d.foreachDoOri;xutil.url.stringifyParam;var p=d.ecuiCreate,q=d.cmptCreate4Console;d.cmptSync4Console,xutil.url.textParam;var r,s,t,u,v,w,x,y,z,v,A,B,C,D=ecui.ui.Button,E=di.shared.ui.PanelPage,F=ecui.ui.Input;$link(function(){A=di.shared.model.DIFactory,r=di.shared.ui.MetaCondition,s=di.console.editor.model.OLAPEditorModel,w=di.console.editor.ui.MetaCandidateConfigPanel,x=di.console.editor.ui.MetaRowHeadConfigPanel,y=di.console.editor.ui.MetaDimShowConfigPanel,v=di.console.shared.ui.ChartConfigPanel,t=di.shared.ui.DITable,u=di.shared.ui.DIChart,z=di.console.editor.ui.DataFormatPanel,B=di.console.editor.ui.ReportDataMergeConfigPanel,C=di.console.editor.ui.QueryParamFix});var G=$namespace().OLAPEditor=g(E,function(a){var d=a.el,e="olap-editor";h(d,e),d.innerHTML=n(I,{css:e}),b.call(this,d,a),c.call(this,d,a)}),H=G.prototype,I=['<div class="#{css}-name">',"<span>æ°æ®éåï¼</span>","<span></span>","</div>",'<div class="#{css}-meta-condition q-di-meta-condition">',"</div>",'<div class="#{css}-data">','<div class="#{css}-operation q-di-operation">',"</div>",'<div class="#{css}-data q-di-data">',"</div>","</div>"].join("");H.init=function(){this._mOLAPEditorModel.attach(["sync.preprocess.INIT",this.disable,this,"OLAP_EDIROT"],["sync.complete.INIT",this.enable,this,"OLAP_EDIROT"],["sync.result.INIT",this.$handleInit,this]),this._mMetaConditionModel.attach(["sync.preprocess.META_DATA",this.disable,this,"OLAP_EDIROT"],["sync.complete.META_DATA",this.enable,this,"OLAP_EDIROT"],["sync.error.META_DATA",this.$handleFatalError,this]),this._mOLAPEditorModel.attach(["sync.preprocess.SAVE",this.disable,this,"OLAP_EDIROT"],["sync.complete.SAVE",this.enable,this,"OLAP_EDIROT"],["sync.result.SAVE",this.$handleSaved,this,"OLAP_EDIROT"]),this._uQueryBtn.onclick=k(this.$handleQuery,this),this._uSaveBtn.onclick=k(this.$handleSave,this),this._uCandidateBtn.onclick=k(this.$handleCandidateConf,this);var a="RTPL_OLAP_CHART"==this._sReportType;a||(this._uRowHeadCfgBtn.onclick=k(this.$handleRowHeadConf,this)),this._uDimShowCfgBtn.onclick=k(this.$handleDimShowConf,this),this._uChartCfgBtn&&(this._uChartCfgBtn.onclick=k(this.$handleChartCfg,this)),this._uDefaultDataFormatBtn.onclick=k(this.$handleSetDefaultDataFormat,this),this._uDataMergeBtn.onclick=k(this.$hadleDataMergeSet,this),this._mDIDataModel.attach(["sync.preprocess.DATA",this.disable,this,"OLAP_EDIROT"],["sync.complete.DATA",this.enable,this,"OLAP_EDIROT"]),this._uCandidatePanel&&this._uCandidatePanel.init(),this._uChartCfgPanel&&this._uChartCfgPanel.init(),this._uRowHeadPanel&&this._uRowHeadPanel.init(),this._uDimShowPanel&&this._uDimShowPanel.init(),this._uDefaultDataPanel&&this._uDefaultDataPanel.init(),this._uDataMergePanel&&this._uDataMergePanel.init(),this._uExtendParamPanel&&this._uExtendParamPanel.init(),this._uMetaCondition.init(),this._uDIData.init(),this._mOLAPEditorModel.sync({datasourceId:"INIT"})},H.dispose=function(){o([this._uNameInput,this._uMetaCondition,this._uCandidatePanel,this._uChartCfgPanel,this._uDefaultDataPanel,this._uDefaultDataFormatBtn,this._uDataMergeBtn,this._uDataMergePanel,this._uRowHeadPanel,this._uDimShowPanel,this._uRowHeadCfgBtn,this._uDimShowCfgBtn,this._uExtendParamPanel],"dispose"),this._uDIData&&this._uDIData.$di("dispose"),G.superClass.dispose.call(this)},H.$active=function(){},H.$inactive=function(){},H.enable=function(a){i.remove(this,a),0==i.size(this)&&this._bDisabled&&(o([this._uDIData,this._uQueryBtn,this._uSaveBtn,this._uCandidateBtn,this._uMetaCondition,this._uChartCfgBtn,this._uRowHeadCfgBtn,this._uDimShowCfgBtn,this._uDataMergeBtn,this._uDefaultDataFormatBtn],"enable",a),G.superClass.enable.call(this))},H.disable=function(a){i.add(this,a),this._bDisabled||o([this._uDIData,this._uQueryBtn,this._uSaveBtn,this._uCandidateBtn,this._uMetaCondition,this._uChartCfgBtn,this._uRowHeadCfgBtn,this._uDimShowCfgBtn,this._uDefaultDataPanel,this._uDataMergePanel,this._uDataMergeBtn,this._uDefaultDataFormatBtn],"disable",a),G.superClass.disable.call(this)},H.$handleInit=function(a){this._uNameInput.setValue(a.reportTemplateName||""),this._uMetaCondition.sync()},H.$handleFatalError=function(a){this.disable(),1001==a?e.alert(f.SAD_FACE+f.PARAM_ERROR):e.alert(f.SAD_FACE+f.FATAL_DATA_ERROR)},H.$handleQuery=function(){this._uExtendParamPanel.open("EDIT",{data:this._uDIData})},H.$handleSave=function(){var a=this._uNameInput.getValue();this._mOLAPEditorModel.sync({datasourceId:"SAVE",args:{reportTemplateName:a}})},H.$handleCandidateConf=function(){this._uCandidatePanel.open("EDIT")},H.$handleRowHeadConf=function(){this._uRowHeadPanel.open("EDIT")},H.$handleDimShowConf=function(){this._uDimShowPanel.open("EDIT")},H.$handleChartCfg=function(){this._uChartCfgPanel.open("EDIT")},H.$handleSaved=function(){"NEW"==this._sStatus&&this.notify("rtpl.created"),this._sStatus="EXIST",this.notify("rtpl.saved")},H.$handleSetDefaultDataFormat=function(){this._uDefaultDataPanel.open("EDIT")},H.$hadleDataMergeSet=function(){this._uDataMergePanel.open("EDIT")}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){function c(){var a="snpt-CONSOLE.cpnt-CONSOLE-plane-table-"+q(),b="snpt-CONSOLE.vu-CONSOLE-plane-table-"+q(),c="snpt-CONSOLE.vu-CONSOLE-pager-"+q(),f="snpt-CONSOLE.vu-CONSOLE-download-"+q(),g="snpt-CONSOLE.vu-CONSOLE-downloadExcel-"+q();e.innerHTML=['<div class="q-di-table-area di-table-area">','<div class="q-di-download"></div>','<div class="q-di-downloadExcel"></div>','<div class="q-di-table plane-table"></div>','<div class="q-di-pager"></div>',"</div>"].join(""),d=[{id:a,clzType:"COMPONENT",clzKey:"DI_PLANE_TABLE",el:e,vuiRef:{mainTable:b,pager:c,download:f,downloadExcel:g}},{id:c,clzType:"VUI",clzKey:"ECUI_PAGER",el:l("q-di-pager",e)[0]},{id:f,clzType:"VUI",clzKey:"H_BUTTON",el:l("q-di-download",e)[0],dataOpt:{skin:"ui-download-btn",text:"CSVä¸è½½"}},{id:g,clzType:"VUI",clzKey:"H_BUTTON",el:l("q-di-downloadExcel",e)[0],dataOpt:{skin:"ui-download-btn",text:"Excelä¸è½½"}},{id:b,clzType:"VUI",clzKey:"ECUI_SLOW_PLANE_TABLE",el:l("q-di-table",e)[0],dataOpt:{rowHCellCut:30,hCellCut:30,cCellCut:30,vScroll:!1,rowCheckMode:"SELECT"}}]}var d,e=l("q-di-data",a)[0];return c(),s(B(),d,b)}function b(a,b){this._mModel=new A(b),this._mModel.ajaxOptions={defaultFailureHandler:n(this.$defaultFailureHandler,this)},this._sStatus=b.reportTemplateId?"EXIST":"NEW"}function c(b){function c(a,b,c){return{dsMapping:{INIT:a,SUBMIT:b},configType:c,model:d,parent:e}}var d=this._mModel,e=this,f="plane-editor";this._uNameInput=u(D,l(f+"-name",b)[0].lastChild),this._uSqlInput=CodeMirror(l(f+"-sql-input",b)[0],{theme:"rubyblue",mode:"text/x-mysql",lineNumbers:!0,matchBrackets:!0,indentUnit:4,smartIndent:!1}),this._uSqlActual=CodeMirror(l(f+"-sql-actual",b)[0],{theme:"rubyblue",mode:"text/x-mysql",lineNumbers:!0,matchBrackets:!0,indentUnit:4,smartIndent:!1});var g=m(l(f+"-btns",b)[0]);this._uSqlSaveBtn=u(z,g[0],null,{primary:"ui-button-g"}),this._uColBtn=u(z,g[1],null,{primary:"ui-button"}),this._uCondBtn=u(z,g[2],null,{primary:"ui-button"}),this._uPreviewBtn=u(z,g[3],null,{primary:"ui-button"}),this._uColConfig=new H(c("COL_DATA","COL_SAVE","col")),this._uCondConfig=new H(c("COND_DATA","COND_SAVE","cond")),this._uPreviewConfig=new H(c("PREVIEW_DATA",void 0,"preview")),this.$switchConfigBtns("disable"),this._uDIData=a(b,d.getCommonParamGetter()),this._mDIDataModel=this._uDIData.getModel()}function d(a){return null==a?"":o(String(a))}di.config.Dict;var e=di.helper.Util,f=di.helper.Dialog,g=di.config.Lang,h=di.config.Ajax,i=xutil.object.inheritsObject,j=xutil.dom.addClass;xutil.dom.removeClass,xutil.object.extend;var k=xutil.object.objKey,l=xutil.dom.q,m=xutil.dom.children,n=xutil.fn.bind,o=xutil.string.trim,p=xutil.string.template;e.preInit;var q=xutil.uid.getUID,r=xutil.string.htmlText;xutil.url.stringifyParam;var s=e.cmptCreate4Console,t=e.cmptSync4Console,u=e.ecuiCreate;ecui.$fastCreate;var v=xutil.lang.isString,w=e.foreachDoOri,x=di.shared.ui.PanelPage;ecui.ui.Control;var y=di.helper.Dialog.alert,z=ecui.ui.Button;ecui.ui.Select;var A,B,C,D=ecui.ui.Input,E=di.shared.ui.BaseConfigPanel;$link(function(){B=di.shared.model.DIFactory,A=di.console.editor.model.PlaneEditorModel,C=di.shared.model.CommonParamFactory});var F=$namespace().PlaneEditor=i(x,function(a){var d=a.el,e="plane-editor";j(d,e),d.innerHTML=p(J,{css:e}),b.call(this,d,a),c.call(this,d,a)}),G=F.prototype,H=i(E,function(a){this.DATASOURCE_ID_MAPPING=a.dsMapping,this._sConfigType=a.configType}),I=H.prototype,J=['<div class="#{css}-sql">','<div class="#{css}-name">',"<span>æ°æ®éåï¼</span>","<span></span>","</div>",'<div class="#{css}-desc">è¯·è¾å¥SQLï¼ä¾å¦ï¼selec {a.col1}, {b.col2} from table1, table2 where [a.col1=:col1 ] and [b.col2 =:cols2 ]ï¼</div>','<div class="#{css}-sql-input"></div>','<div class="#{css}-btns">','<span class="ui-button">ä¿å­</span>','<span class="ui-button">è®¾ç½®å</span>','<span class="ui-button">è®¾ç½®æ å°</span>','<span class="ui-button">é¢è§</span>',"</div>","<div>",'<div class="#{css}-label-line">çå®æ§è¡çSQLï¼</div>','<div class="#{css}-sql-actual"></div>',"</div>",'<div class="#{css}-preview">','<div class="#{css}-data q-di-data"></div>',"</div>"].join("");G.init=function(){function a(){d.$switchConfigBtns("enable"),"NEW"==d._sStatus&&d.notify("rtpl.created"),d._sStatus="EXIST",d.notify("rtpl.saved")}function b(a){d._uSqlInput.setValue(a.sqlString||""),d._uNameInput.setValue(a.reportTemplateName||"")}function c(){d.disable()}this._mModel.attach(["sync.preprocess.SQL_SAVE",this.disable,this,"PLANE_EDITOR"],["sync.complete.SQL_SAVE",this.enable,this,"PLANE_EDITOR"],["sync.result.SQL_SAVE",a,this],["sync.result.INIT",b,this],["sync.error.INIT",c,this]),this._mDIDataModel.attach(["sync.preprocess.DATA",this.disable,this,"PLANE_EDIROT"],["sync.complete.DATA",this.enable,this,"PLANE_EDIROT"]);var d=this;this._uSqlSaveBtn.onclick=function(){var a=d._uSqlInput.getValue(),b=d._uNameInput.getValue();(a=o(a))&&d._mModel.sync({datasourceId:"SQL_SAVE",args:{sqlString:a,reportTemplateName:b}})},this._uColBtn.onclick=function(){d._uColConfig.open()},this._uCondBtn.onclick=function(){d._uCondConfig.open()},this._uPreviewBtn.onclick=function(){d._uPreviewConfig.open()},this._uSqlInput.on("change",function(){d.$switchConfigBtns("disable")}),this._uDIData.$di("addEventListener","outputexecinfo",function(a){this._uSqlActual.setValue(a.data.actualSql),a.data.exception&&f.alert(g.SAD_FACE+"SQLè§£ææ§è¡åºéï¼åå å¦ä¸ï¼<br>"+a.data.exception)},this),w([this._uColBtn,this._uCondBtn,this._uPreviewBtn,this._uColConfig,this._uCondConfig,this._uPreviewConfig],"init"),this._uDIData.$di("init"),this._mModel.sync({datasourceId:"INIT"})},G.dispose=function(){w([this._uNameInput,this._uSqlSaveBtn,this._uColBtn,this._uCondBtn,this._uPreviewBtn,this._uColConfig,this._uCondConfig,this._uPreviewConfig],"dispose"),this._uDIData.$di("dispose"),F.superClass.dispose.call(this)},G.$active=function(){},G.$inactive=function(){},G.enable=function(a){k.remove(this,a),0===k.size(this)&&this._bDisabled&&(this._uSqlSaveBtn.enable(),this.$switchConfigBtns("enable"),F.superClass.enable.call(this))},G.disable=function(a){k.add(this,a),this._bDisabled||(this._uSqlSaveBtn.disable(),this.$switchConfigBtns("disable")),F.superClass.disable.call(this)},G.$handleFatalError=function(a){this.disable(),1001==a?f.alert(g.SAD_FACE+g.PARAM_ERROR):f.alert(g.SAD_FACE+g.FATAL_DATA_ERROR)},G.$switchConfigBtns=function(a){this._uColBtn[a](),this._uCondBtn[a](),this._uPreviewBtn[a]()},G.$defaultFailureHandler=function(a){a==h.ERROR_RTPL_ID?y(g.SAD_FACE+g.ERROR_RTPL_ID):y(g.SAD_FACE+g.ERROR)},I.$doSubmit=function(){if("preview"==this._sConfigType){var a=this._uParent,b={},c=this.$doGetSubmitArgs();if(v(c))return y(c),void 0;for(var d,e=a._mModel.getMappingConfig(),f=0;d=e[f];f++)b[d.paramKey]=d.paramValue;b.showColumns=c.showColumns,t(B(),a._uDIData,b)}else H.superClass.$doSubmit.apply(this,arguments);this.close()},I.$doRender=function(){function a(){h.push("è¯·éæ©è¦æ¾ç¤ºçå");var a="&nbsp;&nbsp;";h.push('<div style="margin-bottom:10px;" class="'+j+'-col-show-sel">');for(var b,c=0;b=g[c];c++)b.paramKey&&h.push("<div>"+r(b.sqlKey)+a+r(b.paramKey)+a+r(b.showName)+'<input data-col-show-sel="'+r(b.paramKey)+'" type="checkbox" /></div>');h.push("</div>")}function b(a){var b={"":"",NONE:""};return b[a.orderby]=' selected="selected" ',['<select class="',j,'-orderby">','<option value="" ',b[""],">ä¸æåº</option>",'<option value="NONE" ',b.NONE,">æåº</option>","</select>"].join("")}function c(a){var b={"true":"","false":""};return b[String(!!a.isDefaultShow)]=' selected="selected" ',['<select class="',j,'-default-show">','<option value="true" ',b["true"],">é»è®¤æ¾ç¤º</option>",'<option value="false" ',b["false"],">é»è®¤ä¸æ¾ç¤º</option>","</select>"].join("")}var d,e,f=this._mModel.getMappingConfig()||[],g=this._mModel.getColShow()||[];this._sConfigType;var h=[],i="plane-editor",j="q-plane-editor",k={col:function(){h.push("<th>sqlKey</th>"),h.push("<th>paramKey</th>"),h.push("<th>æ¾ç¤ºå</th>"),h.push("<th>æ ¼å¼ï¼å¦I,III.DD%ï¼</th>"),h.push("<th>æåºæ¹å¼</th>"),h.push("<th>æ¯å¦é»è®¤æ¾ç¤º</th>")},cond:function(){h.push("<th>sqlKey</th>"),h.push("<th>paramKey</th>")},preview:function(){h.push("<th>sqlKey</th>"),h.push("<th>paramKey</th>"),h.push("<th>è¾å¥å¼</th>")}},l={col:function(a){h.push('<td class="',j,'-sql-key" data-sql-key="'+a.sqlKey+'">',r(a.sqlKey),"</td>"),h.push('<td><input class="',j,'-param-key" type="input" value="',r(a.paramKey),'"/></td>'),h.push('<td><input class="',j,'-show-name" type="input" value="',r(a.showName),'"/></td>'),h.push('<td><input class="',j,'-format" type="input" value="',r(a.format),'"/></td>'),h.push("<td>",b(a),"</td>"),h.push("<td>",c(a),"</td>")},cond:function(a){h.push('<td class="',j,'-sql-key" data-sql-key="'+a.sqlKey+'">',r(a.sqlKey),"</td>"),h.push('<td><input class="',j,'-param-key" type="input" value="',r(a.paramKey),'"/></td>')},preview:function(a){h.push('<td class="',j,'-sql-key" data-sql-key="'+a.sqlKey+'">',r(a.sqlKey),"</td>"),h.push('<td class="',j,'-param-key">',r(a.paramKey),"</td>"),h.push('<td><input class="',j,'-param-value" type="input" /></td>')}};for("preview"==this._sConfigType&&(a(),h.push("<div>è¯·è¾å¥æ å°å¼</div>")),h.push('<table cellspacing="0"><thead><tr>'),k[this._sConfigType](),h.push("<tr></thead>"),h.push('<tbody class="',i,'-mapping-tbody">'),d=0;e=f[d];d++)h.push("<tr>"),l[this._sConfigType](e),h.push("</tr>");h.push("</tbody></table>"),this.getContentEl().innerHTML=h.join("")},I.$doGetSubmitArgs=function(){var a,b,c,e,f,g=this._mModel.getMappingConfig()||[],h="q-plane-editor",i={},j="paramKeyä¸å¯å«æåè§éå·",k="paramKeyä¸å¯ä¸ºç©º",m={col:function(a,b){var c,e=d(l(h+"-param-key",a)[0].value);return e.indexOf(",")>=0?j:e?(b.paramKey=e,b.showName=d(l(h+"-show-name",a)[0].value),b.format=d(l(h+"-format",a)[0].value),c=l(h+"-orderby",a)[0],b.orderby=c.options[c.selectedIndex].value,c=l(h+"-default-show",a)[0],b.isDefaultShow=c.options[c.selectedIndex].value,void 0):k},cond:function(a,b){var c=d(l(h+"-param-key",a)[0].value);return c.indexOf(",")>=0?(b.paramKey=null,j):c?(b.paramKey=c,void 0):k},preview:function(a,b){b.paramValue=d(l(h+"-param-value",a)[0].value)}},n=l("plane-editor-mapping-tbody",this.getContentEl())[0].getElementsByTagName("tr");for(a=0;c=n[a];a++){var o=l(h+"-sql-key",c)[0].getAttribute("data-sql-key");for(b=0;e=g[b];b++)if(e.sqlKey==o&&v(f=m[this._sConfigType](c,e)))return f}if("preview"==this._sConfigType){i.showColumns=[];var p=l(h+"-col-show-sel",this.getContentEl())[0],q=p.getElementsByTagName("input");for(a=0,e;e=q[a];a++)e.checked&&i.showColumns.push(e.getAttribute("data-col-show-sel"));i.showColumns=i.showColumns.join(",")}return i}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText,xutil.fn.bind,xutil.string.trim,xutil.string.template,a.preInit,xutil.url.stringifyParam;var d=xutil.url.parseParam;a.cmptCreate4Console;var e=a.cmptSync4Console;a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var f,g,h=di.shared.ui.BaseConfigPanel;$link(function(){f=di.shared.model.DIFactory,g=di.shared.model.CommonParamFactory});var i=$namespace().QueryParamFix=b(h),j=i.prototype;j.$doDispose=function(){this.getContentEl().innerHTML=""},j.$doOpen=function(a,b){this._uDIData=b.data},j.$doRender=function(a){a.innerHTML="";var b=["<span>æ¥è¡¨æ¥è¯¢åæ°ï¼<span>","<div>",'<textarea class="query-extend-param"></textarea>',"</div>","<div>","å¤ä¸ªåæ°ä¹é´ç¨&è¿æ¥ï¼å¦æåæ°param1åparam2,å¯¹åºçå¼åå«æ¯ param1V å param2Vï¼<br>","è¿æä¸ªæ°ç»ç±»åçåæ°paramArrayå¼ä¸ºparamArrayV1ãparamArrayV2,é£ä¹æ¼æ¥æçåæ°å¦ä¸ï¼<br>",'<font color="red">param1</font>=','<font color="green">param1v</font>','<font color="blue">&amp;</font>','<font color="red">param2</font>=','<font color="green">param2v</font>','<font color="blue">&amp;</font>','<font color="red">paramArray</font>=','<font color="green">paramArrayV1</font>','<font color="blue">&amp;</font>','<font color="red">paramArray</font>=','<font color="green">paramArrayV2</font>',"</div>"].join("");a.innerHTML=b},j.$doSubmit=function(){var a=this.$doGetSubmitArgs();this.$handleSubmitSuccess(null,null,null),e(f(),this._uDIData,a)},j.$doGetSubmitArgs=function(){var a=this.getContentEl(),b=c("query-extend-param",a)[0].value;return d(b)}}(),$namespace("di.console.editor.ui"),function(){di.config.Dict;var a=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.Ajax;var b=xutil.object.inheritsObject;xutil.dom.addClass,xutil.object.extend,xutil.object.objKey;var c=xutil.dom.q;xutil.dom.children,xutil.string.textSubstr,xutil.string.encodeHTML,xutil.string.htmlText;var d=xutil.fn.bind;xutil.string.trim,xutil.string.template,a.preInit,xutil.url.stringifyParam,a.cmptCreate4Console,a.cmptSync4Console,a.ecuiCreate,ecui.$fastCreate,xutil.lang.isString,di.shared.ui.PanelPage,a.strToBoolean,ecui.ui.Control,di.helper.Dialog.alert,ecui.ui.Button;var e,f,g=di.shared.ui.BaseConfigPanel;$link(function(){e=di.shared.model.DIFactory,f=di.shared.model.CommonParamFactory});var h=$namespace().ReportDataMergeConfigPanel=b(g,function(a){this._mModel=a.model,this.DATASOURCE_ID_MAPPING={INIT:"GET_TEMPLATE_INFO",SUBMIT:"REPORT_ROWMERGE_KEY_SUBMIT"}}),i=h.prototype;i.$doDispose=function(){this.getContentEl().innerHTML=""},i.$doOpen=function(){},i.$doRender=function(a,b){a.innerHTML="";var d=b.type||"SIMPLE",e=["   <div>","       <label>æ¥è¡¨æ°æ®åå¹¶æ¹å¼:</label>",'       <select class="merge_type">','           <option value="SIMPLE">ä¸åå¹¶</option>','           <option value="ROWMERGE">è¡åå¹¶</option>','           <option value="COLUMNMERGE">ååå¹¶</option>',"       </select>",'<span class="row-merge-span">',"       <label>è¡åå¹¶çç»´åº¦:</label>",'       <select class="row_merge_key">',"       </select>","</span>","   </div>","   <ul>","       <li>è¡¨æ ¼æ°æ®åå¹¶è¯´æ:</li>","           <li>1.ä¸åå¹¶:ç´æ¥æ ¹æ®è®¾ç½®çæ¡ä»¶æ¥è¯¢å¤ç»´è¡¨å¹¶å±ç°</li>","           <li>2.è¡åå¹¶:æ ¹æ®å¶å®ç»´åº¦,å°æ¥è¯¢åºæ¥çæ°æ®æç§è¡è¿è¡åå¹¶,","                       è¯¥æ¹æ¡éç¨äºæ å½¢ç»æç»´åº¦,ä½æ¯æ å½¢çç»æå´éæ¶ååæèæ æ³ææä¸ä¸ªæ </li>","           <li>3.ååå¹¶:æ¥æºäºä¸åæ¨¡åçæ°æ®åå¹¶æä¸å¼ æ¥è¡¨å±ç¤º</li>","   </ul>","</div>"].join("");a.innerHTML=e,c("merge_type",a)[0].value=d;var f=c("row-merge-span",a)[0],g=c("row_merge_key",a)[0];b.dimList&&(g.innerHTML="",b.dimList.foreach(function(a,b){g.add(new Option(b.caption,b.name))})),"ROWMERGE"==d?(f.style.display="",g.value=b.rmKey):f.style.display="none",this.$bindEvent()},i.$bindEvent=function(){function a(){f.style.display="ROWMERGE"==this.value?"":"none"}var b=this.getContentEl(),e=c("merge_type",b)[0],f=c("row-merge-span",b)[0];e.onchange=d(a,e)},i.$doGetSubmitArgs=function(){var a=this.getContentEl(),b=c("merge_type",a)[0].value,d=[];if(d.push("pivottableModelBuilderStyle,"+b),"ROWMERGE"==b){var e=c("row_merge_key",a)[0].value;d.push("pivottableModelBuilderStyleRMKey,"+e)}return{updateTemplateProperty:d}},i.$doGetInitArgs=function(){return{key:"DATA_MERGE_TYPE"}}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._vtplPanelPage=b.vtplPanelPage,this._mVTplModel=b.vtplModel,f(this,this._vtplPanelPage.vtplMgrGet(this))}function b(a){this._uSaveBtn=k(m,h("q-btn-save",a)[0],null,{primary:"ui-button-g"}),this._uNameInput=k(n,h("q-vtpl-name",a)[0]);var b={theme:"rubyblue",lineNumbers:!0,matchBrackets:!0,indentUnit:4,lineWrapping:!1,height:700,smartIndent:!1},c=f({snippet:"htmlmixed"},b),d=f({snippet:"javascript"},b),e=this._eps={snippet:{},depict:{}};e.snippet.el=h("vtpl-code-snippet",a)[0],e.snippet.el.appendChild(document.createElement("div")),e.snippet.input=CodeMirror(e.snippet.el.firstChild,c),e.depict.el=h("vtpl-code-depict",a)[0],e.depict.el.appendChild(document.createElement("div")),e.depict.input=CodeMirror(e.depict.el.firstChild,d);for(var g,i=["snippet","depict"],l=j(h("vtpl-quick-btn-phase",a)[0]),o=this,p=0;g=l[p];p++)g.onclick=function(a){return function(){return o.$changeEditPhase(a)?(this.getElementsByTagName("input")[0].checked=!0,void 0):!1}}(i[p])}di.config.Dict;var c=di.helper.Util;di.helper.Dialog,di.config.Lang;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass;var f=xutil.object.extend,g=xutil.object.objKey,h=xutil.dom.q,i=xutil.fn.bind,j=xutil.dom.children;xutil.string.template,c.preInit,xutil.url.stringifyParam;var k=c.ecuiCreate;c.cmptCreate4Console,c.cmptSync4Console,xutil.url.textParam;var l,m=ecui.ui.Button,n=ecui.ui.Input,o=di.shared.ui.PanelPage;$link(function(){l=di.shared.model.DIFactory});var p=$namespace().VTplCodeEditor=d(o,function(c){var d=c.el;e(d,"vtpl-code-editor"),d.innerHTML=r,a.call(this,d,c),b.call(this,d,c)}),q=p.prototype,r=['<div class="vtpl-panel-page-btns">',"<span>æ¥è¡¨åï¼</span>",'<input class="vtpl-name-input q-vtpl-name"/>','<span class="q-btn-save">ä¿å­</span>',"</div>",'<div class="vtpl-quick-btn-phase">','<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-code" checked="checked" />è§å¾å¸å±æä»¶',"</span>",'<span class="vtpl-quick-btn-phase-item" style="margin-left:10px;">','<input type="radio" name="di-editor-code" />è§å¾å®ä¹æä»¶',"</span>","</div>",'<div class="vtpl-code">','<div class="vtpl-code-snippet"></div>','<div class="vtpl-code-depict"></div>',"</div>"].join("");q.doRefreshFork=function(a){var b=this._vtplFork=a;this._eps.snippet.input.$__setValue(b.snippet.content),this._eps.depict.input.$__setValue(b.depict.content),this._uNameInput.setValue(b.vtplName||""),!this._currEPKey&&this.$changeEditPhase("snippet")
},q.init=function(){function a(a){var b=function(){return b.notUserEvent?void 0:a([].slice.call(arguments))};return b}function b(a){var b=this.$__changeFn;b.notUserEvent=!0;var c=this.setValue(a);return b.notUserEvent=!1,c}var c=this.bindEditFn(new Function,this),d=this._eps,e=d.snippet.input,f=d.depict.input,g=this._vtplPanelPage;e.$__setValue=b,f.$__setValue=b,this._uSaveBtn.onclick=i(g.doSave,g,this),this._uNameInput.onchange=this.bindEditFn(new Function,this),this._eps.snippet.input.on("change",e.$__changeFn=a(c)),this._eps.depict.input.on("change",f.$__changeFn=a(c))},q.dispose=function(){this._uSaveBtn&&this._uSaveBtn.dispose(),this._uNameInput&&this._uNameInput.dispose(),this._eps=null,p.superClass.dispose.call(this)},q.$active=function(){},q.$inactive=function(){},q.enable=function(a){if(g.remove(this,a),0==g.size(this)&&this._bDisabled){var b=this.getEl();h("vtpl-code-depict",b)[0].getElementsByTagName("TEXTAREA")[0].disabled=!1,h("vtpl-code-snippet",b)[0].getElementsByTagName("TEXTAREA")[0].disabled=!1,this._uSaveBtn&&this._uSaveBtn.enable(a),p.superClass.enable.call(this)}},q.disable=function(a){if(g.add(this,a),!this._bDisabled){var b=this.getEl();h("vtpl-code-depict",b)[0].getElementsByTagName("TEXTAREA")[0].disabled=!0,h("vtpl-code-snippet",b)[0].getElementsByTagName("TEXTAREA")[0].disabled=!0,this._uSaveBtn&&this._uSaveBtn.disable(a)}p.superClass.disable.call(this)},q.doStartEdit=function(){},q.doSave=function(){var a=this._vtplFork;a.vtplName=this._uNameInput.getValue();var b=a.contentSet(this._eps.snippet.input.getValue(),this._eps.depict.input.getValue());return{vtplFork:a,errorMsg:b}},q.$changeEditPhase=function(a){var b=this._currEPKey;if(!b||b!=a){for(var c in this._eps)this._eps[c].el.style.display=c==a?"":"none";this._currEPKey=a}return!0}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._vtpl=b.vtpl,this._mVTplModel=b.vtplModel}function b(a){function b(){var b=g("q-vtpl-gui-btn-phase",a)[0];b.innerHTML=['<input type="radio" name="di-editor-phase" checked="checked" />æ°æ®æºè®¾å®&nbsp;&nbsp;','<input type="radio" name="di-editor-phase" />æ¥è¯¢æ¡ä»¶è®¾å®&nbsp;&nbsp;'].join("");for(var c,d=["EP_DS","EP_COND"],e=i(b),f=0;c=e[f];f++)c.onclick=h(this.$changeEditPhase,this,d[f])}this._eSnippet=g("vtpl-gui-snippet",a)[0],b.call(this),this._eps={EP_DS:{el:g("vtpl-gui-ep-ds",a)[0]},EP_COND:{el:g("vtpl-gui-ep-cond",a)[0]}},this.$changeEditPhase("EP_DS"),this.$preview()}di.config.Dict;var c=di.helper.Util;di.helper.Dialog,di.config.Lang;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass,xutil.object.extend;var f=xutil.object.objKey,g=xutil.dom.q,h=xutil.fn.bind,i=xutil.dom.children;xutil.string.template,c.preInit,xutil.url.stringifyParam,c.ecuiCreate,c.cmptCreate4Console,c.cmptSync4Console,xutil.url.textParam,ecui.ui.Button;var j,k=di.shared.ui.PanelPage;$link(function(){j=di.shared.model.DIFactory});var l=$namespace().VTplGuiEditor=d(k,function(c){var d=c.el;e(d,"vtpl-gui-editor"),d.innerHTML=n,a.call(this,d,c),b.call(this,d,c)}),m=l.prototype,n=['<div class="">','<div class="vtpl-gui-btn">','<span class="q-vtpl-gui-btn-phase"></span>',"</div>",'<div class="vtpl-gui-snippet"></div>','<div class="vtpl-gui-ep">','<div class="vtpl-gui-ep-ds">dsdsds</div>','<div class="vtpl-gui-ep-cond">condcond</div>',"</div>","</div>"].join("");m.init=function(){},m.dispose=function(){this._eSnippet=null,l.superClass.dispose.call(this)},m.$active=function(){},m.$inactive=function(){},m.enable=function(a){f.remove(this,a),0==f.size(this)&&this._bDisabled&&l.superClass.enable.call(this)},m.disable=function(a){f.add(this,a),!this._bDisabled,l.superClass.disable.call(this)},m.$initSnippet=function(){this._vtpl.snippet.content;var a=this._eSnippet;return this.$checkEditable()?void 0:(a.innerHTML="å¸å±æ¨¡çä¸å¯ç¼è¾",this.disable(),void 0)},m.$checkEditable=function(){var a=this._vtpl.snippet.content;return a.indexOf(DOM_FLAG_BEGIN)>=0&&a.indexOf(DOM_FLAG_END)>=0?!0:!1},m.$preview=function(){},m.$changeEditPhase=function(a){var b=this._currEPKey;if(!b||b!=a){for(var c in this._eps)this._eps[c].el.style.display=c==a?"":"none";this._currEPKey=a}},m.$handleFatalError=function(){this.disable()}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._mPanelPageManager=new s({adapter:t}),this._mVTplModel=b.vtplModel}function b(a){this._uPreBtn=p(u,j("q-btn-pre",a)[0],null,{primary:"ui-button-g"}),this._uReleaseBtn=p(u,j("q-btn-release",a)[0],null,{primary:"ui-button-g"}),this._uPreviewBtn=p(u,j("q-btn-preview",a)[0],null,{primary:"ui-button-g"}),this._uMainContainer=k(w,j("q-main",this.getEl())[0],null,{primary:"ui-tab"}),this._uPreviewConfig=new A({parent:this,panelTitle:"é¢è§è®¾ç½®"}),this._uCubeConfigPanel=new z({parent:this})}di.config.Dict;var c=di.helper.Util;di.helper.Dialog;var d=di.config.Lang;di.config.URL;var e=xutil.object.inheritsObject,f=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener;var g=xutil.object.extend,h=xutil.object.objKey;xutil.object.getByPath;var i=xutil.url.parseParam,j=xutil.dom.q;xutil.dom.children;var k=ecui.$fastCreate;xutil.object.assign;var l=xutil.fn.bind;xutil.string.trim;var m=di.helper.Dialog.alert,n=di.helper.Dialog.confirm;xutil.string.template;var o=xutil.uid.getUID,p=c.ecuiCreate,q=c.foreachDoOri;baidu.ajax.request;var r=di.shared.ui.PanelPage;xutil.url.textParam,baidu.json.parse,xutil.url.replaceIntoParam;var s,t,u=ecui.ui.Button,v=c.assert,w=ecui.ui.TabContainer;di.shared.ui.BaseConfigPanel;var x,y,z,A;$link(function(){GLOBAL_MODEL=di.shared.model.GlobalModel,x=di.shared.model.DIFactory,y=di.shared.model.CommonParamFactory,s=di.shared.model.PanelPageManager,t=di.shared.model.PanelPageTabAdapter,z=di.console.shared.ui.CubeConfigPanel,A=di.console.shared.ui.PreviewConfigPanel});var B=$namespace().VTplPanelPage=e(r,function(c){var d=c.el;f(d,"vtpl-panel-page"),d.innerHTML=D,a.call(this,d,c),b.call(this,d,c)}),C=B.prototype,D=['<div class="vtpl-panel-page-btns">','<span class="q-btn-pre">é¢åå¸</span>','<span class="q-btn-release">æ­£å¼åå¸</span>','<span class="q-btn-preview">é¢è§</span>',"</div>",'<div class="q-main"></div>'].join("");C.init=function(){g(this,this.vtplMgrGet(this)),this._mPanelPageManager.inject(this._uMainContainer),this._mPanelPageManager.attach(["page.active",this.$pageActiveHandler,this]),this._uCubeConfigPanel.attach("select",this.$openEditor,this),this._uPreviewBtn.onclick=l(this.doPreview,this),this._uPreBtn.onclick=l(this.doPre,this),this._uReleaseBtn.onclick=l(this.doRelease,this),this._mPanelPageManager.init(),this._uCubeConfigPanel.init(),this._uPreviewConfig.init()},C.dispose=function(){this._mPanelPageManager.dispose(),q([this._uPreviewBtn,this._uPreBtn,this._uReleaseBtn,this._uPreviewConfig],"dispose"),B.superClass.dispose.call(this)},C.$active=function(a){function b(){if("CREATE"==i||"EDIT"==i){var b=d.openTab({editorType:"QUICK"});d.openTab({editorType:"CODE"}),d._mPanelPageManager.select(b.getPageId()),d.$getSecondConditionConfig()}else d.openTab(g({editorType:j},a.extraOpt))}var c=this._mVTplModel,d=this,e=a.act,f=a.phase;if(e){e=e.split("#");var h,i=e[0],j=e[1];"EDIT"==i||"VIEW"==i||"PREVIEW"==i?h=this._vtpl=c.getVTpl(f,a.vtplKey):"CREATE"==i&&(h=this._vtpl=c.getMold(a.moldKey)),"PREVIEW"==i||this._vtplGot?b():(this._mVTplModel.fetchRemoteVTpl(this._vtpl,b),this._vtplGot=!0)}},C.$inactive=function(){},C.enable=function(a){h.remove(this,a),0===h.size(this)&&this._bDisabled&&(this._mPanelPageManager.forEachPage(function(b,c){c.enable(a)}),q([this._uPreviewBtn,this._uPreBtn,this._uReleaseBtn],"enable",a),B.superClass.enable.call(this))},C.disable=function(a){h.add(this,a),this._bDisabled||(this._mPanelPageManager.forEachPage(function(b,c){c.disable(a)}),q([this._uPreviewBtn,this._uPreBtn,this._uReleaseBtn],"disable",a)),B.superClass.disable.call(this)},C.$pageActiveHandler=function(){},C.openCubeConfigPanel=function(a){this._uCubeConfigPanel.changeReportType(a),this._uCubeConfigPanel.open()},C.openTab=function(a){function b(a){a.doRefreshFork&&a.doRefreshFork(h.clone())}var c=a.editorType,d=a.reportTemplateId,e=g({},a),f=this._mPanelPageManager,h=this._vtpl;g(e,{pageId:{CODE:c,QUICK:c,RTPL_OLAP_TABLE:d||c+o(),RTPL_OLAP_CHART:d||c+o(),RTPL_PLANE_TABLE:d||c+o(),PREVIEW:d||c+o()}[c],pageClz:{CODE:"di.console.editor.ui.VTplCodeEditor",QUICK:"di.console.editor.ui.VTplQuickEditor",RTPL_OLAP_TABLE:"di.console.editor.ui.OLAPEditor",RTPL_OLAP_CHART:"di.console.editor.ui.OLAPEditor",RTPL_PLANE_TABLE:"di.console.editor.ui.PlaneEditor",PREVIEW:"di.console.shared.ui.ReportPreview"}[c],pageTitle:{CODE:"æºç ç¼è¾(è¯·æç¨)",QUICK:"å¿«éç¼è¾",RTPL_OLAP_TABLE:"æ°æ®éç¼è¾ï¼å¤ç»´éè§è¡¨ï¼",RTPL_OLAP_CHART:"æ°æ®éç¼è¾ï¼å¾ï¼",RTPL_PLANE_TABLE:"æ°æ®éç¼è¾ï¼å¹³é¢è¡¨ï¼",PREVIEW:"é¢è§"}[c],reportType:c,vtplModel:this._mVTplModel,panelPageManager:f,vtplPanelPage:this}),v(e.pageId,"reportTempalteId is null");var i=f.openByURI(e.pageClz,e,b);return i.attach("rtpl.created",this.doCreated,this),i},C.$openEditor=function(a){var b=a.menuUrl.split("?");this.openTab(i(b[1]))},C.doCreated=function(){this._mPanelPageManager.forEachPage(function(a,b){b.doCreated&&b.doCreated()})},C.doSave=function(a){function b(){try{var b=a.doSave();if(b.errorMsg.length)return m(d.SAD_FACE+b.errorMsg.join(" | ")),void 0;var h=g._mVTplModel._oSecondConditionConfig;if(h){var j,k=xutil.lang.isArray,l=b.vtplFork.rtplCond;for(j in l)k(l[j])&&(b.vtplFork.rtplCond[j]=h[j])}g.disable("VTPL_PANEL_PAGE#DO_SAVE"),i.sync({datasourceId:"SAVE_TPL",args:{vtpl:b.vtplFork},result:c,error:e,complete:f})}catch(n){m(d.SOME_ERROR+" info: "+n.message)}}function c(a,b,c){h.replaceWith(c.args.vtpl),h.statusUpdate("SAVED"),a.virtualTemplateId&&(h.vtplKey=a.virtualTemplateId),j.forEachPage(function(a,b){j.mark(b.getPageId(),!1),b.doRefreshFork&&b.doRefreshFork(h.clone()),b.$__editing=!1}),m(d.SMILE_FACE+d.SAVE_SUCCESS)}function e(a){m(d.SAD_FACE+d.SAVE_FAIL+" ï¼ä¿¡æ¯ç ï¼"+a+"ï¼")}function f(){g.enable("VTPL_PANEL_PAGE#DO_SAVE")}var g=this,h=this._vtpl,i=this._mVTplModel,j=this._mPanelPageManager,k=this.$getOtherEditing(a);k.length?n(d.OTHER_EDITING(k),b):b()},C.doPre=function(){var a=this._vtpl;return"MOLD"==a.status?(m(d.NEED_CREATE),void 0):(this._mVTplModel.sync({datasourceId:"TO_PRE",args:{vtpl:a},result:function(){m(d.SMILE_FACE+d.OPT_SUCCESS)}}),void 0)},C.doRelease=function(){var a=this._vtpl;return"MOLD"==a.status?(m(d.NEED_CREATE),void 0):(this._mVTplModel.sync({datasourceId:"TO_RELEASE",args:{vtpl:a},result:function(){m(d.SMILE_FACE+d.OPT_SUCCESS)}}),void 0)},C.doPreview=function(){var a=this,b=this._vtpl;return"MOLD"==b.status?(m("æ°æ¥è¡¨å°æªä¿å­ï¼è¯·åä¿å­åPreview"),void 0):(this._uPreviewConfig.open("EDIT",{vtplKey:b.vtplKey,onconfirm:function(c){a.openTab({editorType:"PREVIEW",reportURL:c.reportURL,data:c.data,vtplKey:b.vtplKey})}}),void 0)},C.vtplMgrGet=function(a){function b(a){e.mark(a.getPageId(),!0),a.$__editing=!0,a.doStartEdit&&a.doStartEdit()}var c=this,e=this._mPanelPageManager;return{bindEditFn:function(e,f,g){return g=Array.prototype.slice.call(arguments,2),function(){try{b(a),e.apply(f||this,Array.prototype.concat.call(g,arguments))}catch(h){throw c.disable(),m(d.SOME_ERROR+" \n"+(h.message||"")),h}}}}},C.$getOtherEditing=function(a){var b=[];return this._mPanelPageManager.forEachPage(function(c,d){a!=d&&d.$__editing&&b.push(d.getPageTitle())}),b},C.$getSecondConditionConfig=function(){var a=this,b=this._vtpl;this._mVTplModel.sync({datasourceId:"EXIST_COND",args:{reportTemplateIdList:b.rtplIdGet(!0),virtualTemplateId:b.vtplKey},result:function(b){a._mVTplModel._oSecondConditionConfig=b.templateDims||{}},error:function(){m("ç¬¬äºæ­¥æ¥è¯¢æ¡ä»¶è·åå¤±è´¥ï¼è¯·å·æ°é¡µé¢éè¯ï¼")}})}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._def=b.def,this.bindEditFn=b.bindEditFn,this._vtplPanelPage=b.vtplPanelPage,this._mVTplModel=b.vtplModel,this._mPanelPageManager=b.panelPageManager,this._vtplFork=b.vtplFork}function b(a){this._uAddLineBtn=q(u,i("vtpl-quick-editor-cond-add-line",a)[0],null,{primary:"ui-button-g"}),this._eLayout=i("vtpl-quick-editor-cond-layout",a)[0],this.$createFloater(),this._uCondConfigPanel=new t({model:this._mVTplModel,parent:this})}var c=di.config.Dict,d=di.helper.Util;di.helper.Dialog,di.config.Lang;var e=xutil.object.inheritsObject,f=xutil.dom.addClass,g=xutil.dom.removeClass;xutil.dom.remove,xutil.object.extend;var h=xutil.object.objKey,i=xutil.dom.q,j=xutil.fn.bind;baidu.json.parse,xutil.uid.getUID,xutil.string.encodeHTML;var k=xutil.dom.children,l=d.foreachDoOri;xutil.string.template,xutil.dom.getParent;var m=ecui.dom.getPosition,n=d.addConsoleCSS,o=d.clearConsoleCSS;d.preInit;var p=d.forEachCSSFlag;xutil.url.stringifyParam;var q=d.ecuiCreate;ecui.util.getView;var r=baidu.on;d.cmptCreate4Console,d.cmptSync4Console,xutil.url.textParam;var s,t,u=ecui.ui.Button,v=xui.XView;$link(function(){s=di.shared.model.DIFactory,t=di.console.editor.ui.CondConfigPanel});var w=$namespace().VTplQuickEditorCond=e(v,function(c){var d=c.el;f(d,"vtpl-quick-editor-cond"),d.innerHTML=y,a.call(this,d,c),b.call(this,d,c)}),x=w.prototype,y=['<div class="vtpl-quick-editor-cond-btns">','<span class="vtpl-quick-editor-cond-add-line">æ·»å ä¸è¡</span>',"</div>",'<div class="vtpl-quick-editor-cond-layout">',"</div>"].join("");x.init=function(){this._uAddLineBtn.onclick=this.bindEditFn(this.$addLine,this),this._uAddTextBtn.onclick=this.bindEditFn(function(){this.$addTextItem(this._lineFloater.trigger),this.$showFloater(!1)},this),this._uAddVUIBtn.onclick=this.bindEditFn(function(){this.$addVUIItem(this._lineFloater.trigger),this.$showFloater(!1)},this),this._uRemoveLineBtn.onclick=this.bindEditFn(function(){this.$removeLine(this._lineFloater.trigger),this.$showFloater(!1)},this),this._eLayout.onclick=this.bindEditFn(new Function),this._uCondConfigPanel.init(),this.$resetLayout()},x.dispose=function(){this._eLayout=null,l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn,this._uCondConfigPanel],"dispose"),this._lineFloater&&(document.body.removeChild(this._lineFloater),this._lineFloater=null),w.superClass.dispose.call(this)},x.$active=function(){},x.$inactive=function(){},x.enable=function(a){h.remove(this,a),0==h.size(this)&&this._bDisabled&&(l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn],"enable"),w.superClass.enable.call(this))},x.disable=function(a){h.add(this,a),this._bDisabled||l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn],"disable"),w.superClass.disable.call(this)},x.doSave=function(){var a=o(this._eLayout.innerHTML);this._vtplFork.innerHTML(this._def.id,a)},x.$resetLayout=function(){var a,b=this,d=this._vtplFork,e=this._def,f=this._eLayout,g=d.innerHTML(e.id);if(null==g)return this.disable(),f.innerHTML="æªå®ä¹æ¡ä»¶ç¼è¾åºåï¼ä¸å¯ç¼è¾æ¡ä»¶",void 0;f.innerHTML=g,n(f),p(this._eLayout,"di-o_o-line",function(a){b.$bindShowFloater(a,!0)});for(var h,j=i("di-o_o-item",this._eLayout),a=0;h=j[a];a++)h.getAttribute(c.DI_ATTR)&&this.$initVUIItem(h)},x.$addTextItem=function(a){var b=document.createElement("div");b.innerHTML="è¯·è¾å¥ææ¬",f(b,"di-o_o-item c-di-o_o-item"),b.setAttribute("contentEditable",!0),a.appendChild(b)},x.$addVUIItem=function(a){function b(b,g,h){var i=document.createElement("div");f(i,"di-o_o-item c-di-o_o-item c-di-o_o-cond-vui"),i.setAttribute(c.DI_ATTR,e),h.args.hide&&f(i,"di-o_o-hide c-di-o_o-hide"),a.appendChild(i),d.$initVUIItem(i)}var d=this,e=this._def.id+"-vu-"+this._vtplFork.genId();this.$openCondConfig(e,null,!0,b)},x.$initVUIItem=function(a){var b=this;a.onclick=function(){var a=this.getAttribute(c.DI_ATTR);b.$openCondConfig(a,this,!1,j(b.$refreshVUIItem,b,this))},this.$refreshVUIItem(a)},x.$refreshVUIItem=function(){},x.$openCondConfig=function(a,b,c,d){this._uCondConfigPanel.attachOnce("submit.close",d,this),this._uCondConfigPanel.open("EDIT",{cpntId:this._def.id,entityId:a,reportType:this._def.reportType,vtplFork:this._vtplFork,reportTemplateId:this._def.reportTemplateId,isCreate:c,condEl:b})},x.$addLine=function(){var a=document.createElement("div");f(a,"di-o_o-line c-di-o_o-line"),this._eLayout.appendChild(a),this.$bindShowFloater(a,!0)},x.$removeLine=function(a){if(a){for(var b,d,e=this._vtplFork,f=a.getElementsByTagName("*"),g=0;b=f[g];g++)(d=b.getAttribute(c.DI_ATTR))&&(e.removeVUIRefAll(d),e.removeEntityDef(d));this._eLayout.removeChild(a)}},x.$createFloater=function(){if(!this._lineFloater){var a=this._lineFloater=document.createElement("div");f(a,"console-floater"),document.body.appendChild(a),a.innerHTML=["<div>æ·»å ææ¬</div>","<div>æ·»å è¾å¥æ§ä»¶</div>","<div>å é¤æ¬è¡</div>"].join("");var b=k(a),c={primary:"ui-button-g"};this._uAddTextBtn=q(u,b[0],null,c),this._uAddVUIBtn=q(u,b[1],null,c),this._uRemoveLineBtn=q(u,b[2],null,c),a.style.display="none",this.$bindShowFloater(a)}},x.$bindShowFloater=function(a,b){var c=this,d=this._lineFloater;r(a,"mouseenter",function(){if(d){d.needShow=!0;var e=d.trigger;b&&(e&&g(e,"c-di-o_o-line-hover"),e=d.trigger=a,f(a,"c-di-o_o-line-hover")),c.$showFloater(!0);var h=m(e),i=d.style;i.left=h.left+e.offsetWidth-d.offsetWidth+"px",i.top=h.top+2-d.offsetHeight+"px"}}),r(a,"mouseleave",function(){d&&(d.needShow=!1,setTimeout(function(){d&&!d.needShow&&(g(d.trigger,"c-di-o_o-line-hover"),c.$showFloater(!1))},800))})},x.$showFloater=function(a){var b=this._lineFloater;if(b){var c=b.style;a&&"none"==c.display?(c.display="",c.position="absolute"):a||""!=c.display||(c.display="none")}}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._vtplPanelPage=b.vtplPanelPage,this._mVTplModel=b.vtplModel,this._mPanelPageManager=b.panelPageManager,r(this,this._vtplPanelPage.vtplMgrGet(this))}function b(a){function b(){for(var b,c=l("vtpl-quick-btn-phase",a)[0],d=["EP_DS","EP_COND","EP_AUTH"],e=q(c),f=this,g=0;b=e[g];g++)b.onclick=function(a){return function(){return f.$changeEditPhase(a)?(this.getElementsByTagName("input")[0].checked=!0,void 0):!1}}(d[g])}this._eSnippet=l("vtpl-quick-snippet",a)[0],this._eDS=l("vtpl-quick-ep-ds-list",this.getEl())[0],this._uSaveBtn=t(w,l("q-btn-save",a)[0],null,{primary:"ui-button-g"}),this._uNameInput=t(x,l("q-vtpl-name",a)[0]),b.call(this),this._eps={EP_DS:{el:l("vtpl-quick-ep-ds",a)[0]},EP_COND:{el:l("vtpl-quick-ep-cond",a)[0]},EP_AUTH:{el:l("vtpl-quick-ep-auth",a)[0]}},this._eCond=l("vtpl-quick-ep-cond-area",this.getEl())[0],this._uRefreshBtn=t(w,l("vtpl-quick-ep-ds-refresh",a)[0],null,{primary:"ui-button-g"}),this._uOlapTableBtn=t(w,l("q-btn-olap-table",a)[0],null,{primary:"ui-button-g"}),this._uOlapChartBtn=t(w,l("q-btn-olap-chart",a)[0],null,{primary:"ui-button-g"}),this._uPlaneTableBtn=t(w,l("q-btn-plane-table",a)[0],null,{primary:"ui-button-g"})}function c(a,b){return a.push("<div>","<span>",n(b.id),"</span>&nbsp;&nbsp;&nbsp;&nbsp;"),y.create(a,{attr:{"data-cmpt-id":n(b.id)},datasource:dsList,textAttr:function(a){var b=a.reportTemplateId,c=a.reportTemplateName,d="";return d="RTPL_VIRTUAL_ID"==b?"RTPL_VIRTUAL_ID":"è¯·éæ©"==b?"è¯·éæ©":null==c?"æªå½åæ°æ®é("+b+")":c+"("+b+")"},valueAttr:"reportTemplateId",extraAttr:"reportTemplateType",first:{reportTemplateId:g.NO_SEL},selected:function(a){return a.reportTemplateId==b.reportTemplateId},filter:function(a){return d.hasReportTemplateType(b.clzKey,a.reportTemplateType)}}),a.push('<input type="button" value="ç¼è¾æ­¤æ°æ®é"/>'),a.push("</div>"),a}var d=di.config.Dict,e=di.helper.Util,f=di.helper.Dialog,g=di.config.Lang,h=xutil.object.inheritsObject,i=xutil.dom.addClass;xutil.dom.removeClass;var j=xutil.object.objKey,k=di.helper.Dialog.alert,l=xutil.dom.q,m=xutil.fn.bind;baidu.json.parse;var n=xutil.string.encodeHTML,o=xutil.string.trim,p=xutil.dom.getParent,q=xutil.dom.children,r=xutil.object.extend,s=e.foreachDoOri;xutil.string.template,e.preInit,xutil.url.stringifyParam;var t=e.ecuiCreate;e.cmptCreate4Console,e.cmptSync4Console,xutil.url.textParam;var u,v,w=ecui.ui.Button,x=ecui.ui.Input,y=e.select,z=di.shared.ui.PanelPage;$link(function(){u=di.shared.model.DIFactory,v=di.console.editor.ui.VTplQuickEditorCond});var A=$namespace().VTplQuickEditor=h(z,function(c){var d=c.el;i(d,"vtpl-quick-editor"),d.innerHTML=C,a.call(this,d,c),b.call(this,d,c)}),B=A.prototype,C=['<div class="vtpl-panel-page-btns">',"<span>æ¥è¡¨åï¼</span>",'<input class="vtpl-name-input q-vtpl-name"/>','<span class="q-btn-save">ä¿å­</span>',"</div>",'<div class="vtpl-quick-btn-phase">','<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" checked="checked" />',"<span>ç¬¬ä¸æ­¥ï¼æ°æ®éè®¾å®</span>","</span>","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" />',"<span>ç¬¬äºæ­¥ï¼æ¥è¯¢æ¡ä»¶è®¾å®</span>","</span>","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" />',"<span>ç¬¬ä¸æ­¥ï¼æéè®¾å®</span>","</span>","</div>",'<div class="vtpl-quick-snippet"></div>','<div class="vtpl-quick-ep">','<div class="vtpl-quick-ep-ds">','<div class="vtpl-quick-ep-ds-line1">è¯·éæ©æ°æ®éï¼</div>','<div class="vtpl-quick-ep-ds-line2">',"<span>å¦ææ²¡ææ³è¦çæ°æ®éï¼è¯·ï¼</span>",'<span class="q-btn-olap-table">åå»ºå¤ç»´éè§è¡¨æ°æ®é</span>','<span class="q-btn-plane-table">åå»ºå¹³é¢è¡¨æ°æ®é</span>','<span class="q-btn-olap-chart">åå»ºå¾æ°æ®é</span>',"</div>",'<div><span class="vtpl-quick-ep-ds-refresh">å·æ°</span></div>','<div class="vtpl-quick-ep-ds-list"></div>',"</div>",'<div class="vtpl-quick-ep-cond">','<div class="vtpl-quick-ep-cond-area"></div>',"</div>",'<div class="vtpl-quick-ep-auth">','<div class="vtpl-quick-ep-auth-area"></div>',"</div>","</div>"].join("");B.doRefreshFork=function(a){var b=this._vtplFork=a;return this._uNameInput.setValue(b.vtplName||""),b.snippet.invalid?(k("snippetæ ¼å¼æ ¡éªå¤±è´¥ï¼ç¦æ­¢ç¼è¾"),this.disable(),void 0):(this.$refreshPanelDS(),this.$refreshPanelCond(),this.$refreshPanelAuth(),!this._currEPKey&&this.$changeEditPhase("EP_DS"),void 0)},B.init=function(){var a=this._vtplPanelPage;this._uSaveBtn.onclick=m(a.doSave,a,this),this._uNameInput.onchange=this.bindEditFn(new Function,this),this._uRefreshBtn.onclick=m(this.$refreshPanelDS,this),this._uOlapTableBtn.onclick=function(){a.openCubeConfigPanel("RTPL_OLAP_TABLE")},this._uOlapChartBtn.onclick=function(){a.openCubeConfigPanel("RTPL_OLAP_CHART")},this._uPlaneTableBtn.onclick=function(){a.openCubeConfigPanel("RTPL_PLANE_TABLE")},this._eDS.onclick=function(){var b=event.target||event.srcElement;if("INPUT"==b.tagName){var c=p(b).getElementsByTagName("SELECT")[0],d=y.getSelected(c),e=d.reportTemplateType;if(d.reportTemplateId==g.NO_SEL)return;if("RTPL_VIRTUAL"==e)return k("æ­¤æ¨¡æ¿ä¸å¯ç¼è¾"),!1;a.openTab({editorType:e,reportTemplateId:d.reportTemplateId})}}},B.dispose=function(){this._eSnippet=null,this._eDS=null,this._eCond=null,this._eps=null,s([this._uSaveBtn,this._uRefreshBtn,this._uOlapTableBtn,this._uOlapChartBtn,this._uPlaneTableBtn,this._uNameInput],"dispose",!0),A.superClass.dispose.call(this)},B.$active=function(){},B.$inactive=function(){},B.enable=function(a){j.remove(this,a),0==j.size(this)&&this._bDisabled&&(s([this._uSaveBtn,this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn],"enable",a),this.$enablePanelCond(),A.superClass.enable.call(this))},B.disable=function(a){j.add(this,a),this._bDisabled||(s([this._uSaveBtn,this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn],"disable",a),this.$disablePanelCond()),A.superClass.disable.call(this)},B.$refreshPanelDS=function(){this._mVTplModel.sync({datasourceId:"DS_LIST",preprocess:m(this.disable,this,"QUICK_EDIROT"),complete:m(this.enable,this,"QUICK_EDIROT"),result:m(this.$renderDSList,this)})},B.$renderDSList=function(){dsList=this._mVTplModel.getReportTemplateList().slice();for(var a,b=[],d=this._vtplFork.findEntityByClzType("COMPONENT"),e=0;a=d[e];e++)a.needDsSelect&&"true"==a.needDsSelect||(b=c(b,a));this._eDS.innerHTML=b.join("");for(var f,h=this._eDS.getElementsByTagName("SELECT"),i=0;f=h[i];i++)f.onchange=this.bindEditFn(function(a){var b=this.getAttribute("data-cmpt-id"),c=a._vtplFork.findEntityById(b),d=y.getSelected(this);d.reportTemplateId!=g.NO_SEL?(c.reportTemplateId=d.reportTemplateId,c.reportType=d.reportTemplateType):(c.reportTemplateId=void 0,c.reportType=void 0)},null,this)},B.doStartEdit=function(){},B.doSave=function(){document.getElementsByTagName("SELECT",this._eDS);var a,b,c=this._vtplFork;for(a in this._condMap)this._condMap[a].doSave();return this.$saveAuth(),c.condClean(),c.vtplName=this._uNameInput.getValue(),b=c.contentStringify(),{vtplFork:c,errorMsg:b}},B.doCreated=function(){this.$refreshPanelDS()},B.$checkAllDSLinked=function(){var a=!0;return this._vtplFork.forEachEntity("COMPONENT",function(b){b.reportTemplateId||(a=!1)}),a},B.$changeEditPhase=function(a){var b=this._currEPKey;if("EP_DS"==b&&!this.$checkAllDSLinked())return f.alert(g.NEED_DS_ALL_LINKED),!1;if("EP_AUTH"==b&&this.$saveAuth(),!b||b!=a){for(var c in this._eps)this._eps[c].el.style.display=c==a?"":"none";this._currEPKey=a,"EP_COND"==a&&this.$startCondPhase(),"EP_AUTH"==a&&this.$refreshPanelAuth()}return!0},B.$startCondPhase=function(){delete this._mVTplModel._oSecondConditionConfig;var a=this,b=this._vtplFork;this.$disablePanelCond(),this._mVTplModel.sync({datasourceId:"EXIST_COND",args:{reportTemplateIdList:b.rtplIdGet(!0),virtualTemplateId:b.vtplKey},result:function(c){var d=b.rtplCond,e=b.rtplCond=c.templateDims||{};for(var f in d)e[f]&&d[f]&&(e[f]=d[f]);a.$enablePanelCond()},error:function(b){a.$disablePanelCond(),k("è·åæ¡ä»¶è®¾ç½®å¤±è´¥ï¼status="+b)}})},B.$enablePanelCond=function(){var a=this._condMap;for(var b in a)a[b].enable("QUICK_EDITOR")},B.$disablePanelCond=function(){var a=this._condMap;for(var b in a)a[b].disable("QUICK_EDITOR")},B.$disposePanelCond=function(){var a=this._condMap;for(var b in a)a[b].dispose();this._condMap={},this._eCond.innerHTML=""},B.$refreshPanelCond=function(){this.$disposePanelCond();var a,b=this._eCond,c=this._condMap;c||(c=this._condMap={});var d={vtplFork:this._vtplFork,bindEditFn:this.bindEditFn,vtplPanelPage:this._vtplPanelPage,vtplModel:this._mVTplModel,panelPageManager:this._mPanelPageManager};this._vtplFork.forEachEntity("COMPONENT",function(e){"DI_FORM"==e.clzKey&&(a=document.createElement("div"),b.appendChild(a),c[e.id]=new v(r({el:a,def:e},d)))});for(var e in this._condMap)this._condMap[e].init()},B.$refreshPanelAuth=function(){this._vtplFork.findEntityByClzType("VUI");var a=[];a.push("<div>"),a.push("<span>å¦ææ²¡æåè½æéæ§å¶éæ±ï¼å¯å¿½ç¥æ­¤æ­¥ã</span>"),this._vtplFork.forEachEntity("VUI",function(b){a.push("<div>","<span>æ§ä»¶â",n(b.id),"âå¯¹åºçæéå³é®å­ï¼funcAuthï¼ä¸ºï¼</span>",'<input type="input" data-def-id="',n(b.id),'" value="',n(b.funcAuth||""),'" />',"</div>")}),a.push("</div>"),this._eps.EP_AUTH.el.innerHTML=a.join("")},B.$saveAuth=function(){for(var a,b,c,d,e=this._eps.EP_AUTH.el.getElementsByTagName("INPUT"),f=0;a=e[f];f++)(b=a.getAttribute("data-def-id"))&&(c=this._vtplFork.findEntityById(b))&&((d=o(a.value))?c.funcAuth=d:delete c.funcAuth)},B.$handleFatalError=function(){this.disable()}}(),$namespace("di.console.editor.ui"),function(){function a(a){var b=this._editor=a.editor;b._vtplPanelPage;var c=this._el=a.el;c.innerHTML=l,this._eAuthList=e("vtpl-quick-ep-auth-area",b.getEl())[0]}di.config.Dict;var b=di.helper.Util;di.helper.Dialog,di.config.Lang;var c=xutil.object.inheritsObject;xutil.dom.addClass,xutil.dom.removeClass;var d=xutil.object.objKey;di.helper.Dialog.alert;var e=xutil.dom.q;xutil.fn.bind,baidu.json.parse;var f=xutil.string.encodeHTML,g=xutil.string.trim;xutil.dom.getParent,xutil.dom.children,xutil.object.extend,b.foreachDoOri,xutil.string.template,b.preInit,xutil.url.stringifyParam,b.ecuiCreate,b.cmptCreate4Console,b.cmptSync4Console,xutil.url.textParam,ecui.ui.Button,ecui.ui.Input,b.select;var h,i=xui.XView;$link(function(){h=di.shared.model.DIFactory});var j=$namespace().VTplSoQuickEditorAuth=c(i,a),k=j.prototype,l=['<div class="vtpl-quick-ep-auth-area"></div>'].join("");k.dispose=function(){this._eAuthList.innerHTML="",this._eAuthList=null,j.superClass.dispose.call(this)},k.enable=function(a){d.remove(this,a),0==d.size(this)&&this._bDisabled&&j.superClass.enable.call(this)},k.disable=function(a){d.add(this,a),!this._bDisabled,j.superClass.disable.call(this)},k.active=function(){return this._el.style.display=""},k.inactive=function(){return this._el.style.display="none"},k.refreshPanelAuth=function(){var a=this._editor._vtplFork;a.findEntityByClzType("VUI");var b=[];b.push("<div>"),b.push("<span>å¦ææ²¡æåè½æéæ§å¶éæ±ï¼å¯å¿½ç¥æ­¤æ­¥ã</span>"),a.forEachEntity("VUI",function(a){b.push("<div>","<span>æ§ä»¶â",f(a.id),"âå¯¹åºçæéå³é®å­ï¼funcAuthï¼ä¸ºï¼</span>",'<input type="input" data-def-id="',f(a.id),'" value="',f(a.funcAuth||""),'" />',"</div>")}),b.push("</div>"),this._eAuthList.innerHTML=b.join("")},k.saveAuth=function(){for(var a,b,c,d,e=this._eAuthList.getElementsByTagName("INPUT"),f=0;a=e[f];f++)(b=a.getAttribute("data-def-id"))&&(c=this._editor._vtplFork.findEntityById(b))&&((d=g(a.value))?c.funcAuth=d:delete c.funcAuth)}}(),$namespace("di.console.editor.ui"),function(){function a(a){var b=this._editor=a.editor,c=b._vtplPanelPage,e=this._el=a.el;e.innerHTML=w,this._eDS=j("vtpl-quick-ep-ds-list",e)[0],this._uRefreshBtn=p(q,j("vtpl-quick-ep-ds-refresh",e)[0],null,{primary:"ui-button-g"}),this._uOlapTableBtn=p(q,j("q-btn-olap-table",e)[0],null,{primary:"ui-button-g"}),this._uOlapChartBtn=p(q,j("q-btn-olap-chart",e)[0],null,{primary:"ui-button-g"}),this._uPlaneTableBtn=p(q,j("q-btn-plane-table",e)[0],null,{primary:"ui-button-g"}),this._uRefreshBtn.onclick=k(this.refreshPanelDS,this),this._uOlapTableBtn.onclick=function(){c.openCubeConfigPanel("RTPL_OLAP_TABLE")},this._uOlapChartBtn.onclick=function(){c.openCubeConfigPanel("RTPL_OLAP_CHART")},this._uPlaneTableBtn.onclick=function(){c.openCubeConfigPanel("RTPL_PLANE_TABLE")},this._eDS.onclick=function(){var a=event.target||event.srcElement;if("INPUT"==a.tagName){var b=m(a).getElementsByTagName("SELECT")[0],e=s.getSelected(b),f=e.reportTemplateType;if(e.reportTemplateId==d.NO_SEL)return;if("RTPL_VIRTUAL"==f)return i("æ­¤æ¨¡æ¿ä¸å¯ç¼è¾"),!1;c.openTab({editorType:f,reportTemplateId:e.reportTemplateId})}}}var b=di.config.Dict,c=di.helper.Util;di.helper.Dialog;var d=di.config.Lang,e=xutil.object.inheritsObject,f=xutil.dom.addClass,g=xutil.dom.removeClass,h=xutil.object.objKey,i=di.helper.Dialog.alert,j=xutil.dom.q,k=xutil.fn.bind;baidu.json.parse;var l=xutil.string.encodeHTML;xutil.string.trim;var m=xutil.dom.getParent;xutil.dom.children,xutil.object.extend;var n=c.foreachDoOri;xutil.string.template,c.preInit;var o=baidu.on;xutil.url.stringifyParam;var p=c.ecuiCreate;c.cmptCreate4Console,c.cmptSync4Console,xutil.url.textParam;var q=ecui.ui.Button;ecui.ui.Input;var r,s=c.select,t=xui.XView;$link(function(){r=di.shared.model.DIFactory});var u=$namespace().VTplSoQuickEditorDS=e(t,a),v=u.prototype,w=['<div class="vtpl-quick-ep-ds-line1">è¯·éæ©æ°æ®éï¼</div>','<div class="vtpl-quick-ep-ds-line2">',"<span>å¦ææ²¡ææ³è¦çæ°æ®éï¼è¯·ï¼</span>",'<span class="q-btn-olap-table">åå»ºå¤ç»´éè§è¡¨æ°æ®é</span>','<span class="q-btn-plane-table">åå»ºå¹³é¢è¡¨æ°æ®é</span>','<span class="q-btn-olap-chart">åå»ºå¾æ°æ®é</span>',"</div>",'<div><span class="vtpl-quick-ep-ds-refresh">å·æ°</span></div>','<div class="vtpl-quick-ep-ds-list"></div>'].join("");v.dispose=function(){this._eDS=null,n([this._uRefreshBtn,this._uOlapTableBtn,this._uOlapChartBtn,this._uPlaneTableBtn],"dispose",!0),u.superClass.dispose.call(this)},v.enable=function(a){h.remove(this,a),0==h.size(this)&&this._bDisabled&&(n([this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn],"enable",a),u.superClass.enable.call(this))},v.disable=function(a){h.add(this,a),this._bDisabled||n([this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn],"disable",a),u.superClass.disable.call(this)},v.active=function(){return this._el.style.display=""},v.inactive=function(){return this._el.style.display="none"},v.refreshPanelDS=function(){this._editor._mVTplModel.sync({datasourceId:"DS_LIST",preprocess:k(this.disable,this,"QUICK_EDIROT_DS"),complete:k(this.enable,this,"QUICK_EDIROT_DS"),result:k(this.$renderDSList,this)})},v.$renderDSList=function(){var a=this._editor;dsList=a._mVTplModel.getReportTemplateList().slice();for(var c,e=[],f=a._vtplFork.findEntityByClzType("COMPONENT"),g=0;c=f[g];g++)e.push('<div class="vtpl-quick-ep-ds-item" data-cpnt-id="',c.id,'">',"<span>",l(c.id),"</span>&nbsp;&nbsp;&nbsp;&nbsp;"),s.create(e,{attr:{"data-cpnt-id":l(c.id)},datasource:dsList,textAttr:"reportTemplateId",valueAttr:"reportTemplateId",extraAttr:"reportTemplateType",first:{reportTemplateId:d.NO_SEL},selected:function(a){return a.reportTemplateId==c.reportTemplateId
},filter:function(a){return b.hasReportTemplateType(c.clzKey,a.reportTemplateType)}}),e.push('<input type="button" value="ç¼è¾æ­¤æ°æ®é"/>'),e.push("</div>");this._eDS.innerHTML=e.join(""),this.$bindHover();for(var h,i=this._eDS.getElementsByTagName("SELECT"),j=0;h=i[j];j++)h.onchange=a.bindEditFn(function(a){var b=this.getAttribute("data-cpnt-id"),c=a._vtplFork.findEntityById(b),e=s.getSelected(this);e.reportTemplateId!=d.NO_SEL?(c.reportTemplateId=e.reportTemplateId,c.reportType=e.reportTemplateType):(c.reportTemplateId=void 0,c.reportType=void 0)},null,a)},v.checkAllDSLinked=function(){var a=!0;return this._editor._vtplFork.forEachEntity("COMPONENT",function(b){b.reportTemplateId||(a=!1)}),a},v.$bindHover=function(){for(var a,b=this._editor._layout,c=j("vtpl-quick-ep-ds-item",this._el),d=0;a=c[d];d++)o(a,"mouseenter",function(a){f(a.target,"vtpl-quick-ep-ds-item-hover"),b&&b.highlightCPNT(this.getAttribute("data-cpnt-id"),!0)}),o(a,"mouseleave",function(a){g(a.target,"vtpl-quick-ep-ds-item-hover"),b&&b.highlightCPNT(this.getAttribute("data-cpnt-id"),!1)})},v.highlight=function(a,b){for(var c,d=j("vtpl-quick-ep-ds-item",this._el),e=0;c=d[e];e++)g(c,"vtpl-quick-ep-ds-item-hover"),a&&b&&c.getAttribute("data-cpnt-id")==a&&f(c,"vtpl-quick-ep-ds-item-hover")}}(),$namespace("di.console.editor.ui"),function(){function a(a){this._editor=a.editor;var b=this._el=a.el;this.$createFloater(),this._uCondConfigPanel=new u({model:this._mVTplModel,parent:this}),this.$initFloater(),b.onclick=this._editor.bindEditFn(new Function),this._uCondConfigPanel.init()}var b=di.config.Dict,c=di.helper.Util;di.helper.Dialog,di.config.Lang;var d=xutil.object.inheritsObject,e=xutil.dom.addClass,f=xutil.dom.removeClass,g=xutil.dom.hasClass;xutil.dom.remove,xutil.object.extend;var h=xutil.object.objKey,i=xutil.dom.q,j=xutil.fn.bind;baidu.json.parse,xutil.uid.getUID,xutil.string.encodeHTML;var k=xutil.dom.children,l=c.foreachDoOri;xutil.string.template,xutil.dom.getParent;var m=ecui.dom.getPosition,n=c.addConsoleCSS,o=c.clearConsoleCSS,p=c.domData;c.preInit,c.forEachCSSFlag;var q=c.forEachDom;xutil.url.stringifyParam;var r=c.ecuiCreate;ecui.util.getView;var s=baidu.on;c.cmptCreate4Console,c.cmptSync4Console,xutil.url.textParam;var t,u,v=ecui.ui.Button,w=xui.XView;$link(function(){t=di.shared.model.DIFactory,u=di.console.editor.ui.CondConfigPanel});var x=$namespace().VTplSoQuickEditorLayout=d(w,a),y=x.prototype;y.dispose=function(){l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn,this._uCondConfigPanel],"dispose"),this._lineFloater&&(document.body.removeChild(this._lineFloater),this._lineFloater=null),x.superClass.dispose.call(this)},y.$active=function(){},y.$inactive=function(){},y.enable=function(a){h.remove(this,a),0==h.size(this)&&this._bDisabled&&(l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn],"enable"),x.superClass.enable.call(this))},y.disable=function(a){h.add(this,a),this._bDisabled||l([this._uAddLineBtn,this._uAddVUIBtn,this._uAddTextBtn,this._uRemoveLineBtn],"disable"),x.superClass.disable.call(this)},y.active=function(){},y.inactive=function(){},y.doSave=function(){var a=o(this.el.innerHTML);this._editor._vtplFork.innerHTML(this._def.id,a)},y.changeEditPhase=function(a){this._currEPKey&&this._currEPKey==a||(this.$inactiveFloater(null,!0),this.$highlightCPNT(null,!1),this._currEPKey=a)},y.resetLayout=function(){var a=this,c=this._editor._vtplFork,d=this._el,e=c.innerHTML();if(null==e)return this.disable(),d.innerHTML="æªå®ä¹å¯ç¼è¾åºåï¼ä¸å¯ç¼è¾",void 0;d.innerHTML=e,n(d),q(d,function(c){(g(c,"di-o_o-line")||c.getAttribute(b.DI_ATTR))&&a.$bindHover(c)});for(var f,h=i("di-o_o-item",d),j=0;f=h[j];j++)f.getAttribute(b.DI_ATTR)&&this.$initVUIItem(f)},y.$addTextItem=function(a){var b=document.createElement("div");b.innerHTML="è¯·è¾å¥ææ¬",e(b,"di-o_o-item c-di-o_o-item"),b.setAttribute("contentEditable",!0),a.appendChild(b)},y.$addVUIItem=function(a){function c(c,g,h){var i=document.createElement("div");e(i,"di-o_o-item c-di-o_o-item c-di-o_o-cond-vui"),i.setAttribute(b.DI_ATTR,f),h.args.hide&&e(i,"di-o_o-hide c-di-o_o-hide"),a.appendChild(i),d.$initVUIItem(i)}var d=this,f=this._def.id+"-vu-"+this._vtplFork.genId();this.$openCondConfig(f,null,!0,c)},y.$initVUIItem=function(a){var c=this;a.onclick=function(){var a=this.getAttribute(b.DI_ATTR);c.$openCondConfig(a,this,!1,j(c.$refreshVUIItem,c,this))},this.$refreshVUIItem(a)},y.$refreshVUIItem=function(){},y.$openCondConfig=function(a,b,c,d){this._uCondConfigPanel.attachOnce("submit.close",d,this),this._uCondConfigPanel.open("EDIT",{cpntId:this._def.id,entityId:a,reportType:this._def.reportType,vtplFork:this._vtplFork,reportTemplateId:this._def.reportTemplateId,isCreate:c,condEl:b})},y.$addLine=function(){var a=document.createElement("div");e(a,"di-o_o-line c-di-o_o-line"),this.el.appendChild(a),this.$bindHover(a)},y.$removeLine=function(a){if(a){for(var c,d,e=this._vtplFork,f=a.getElementsByTagName("*"),g=0;c=f[g];g++)(d=c.getAttribute(b.DI_ATTR))&&(e.removeVUIRefAll(d),e.removeEntityDef(d));this.el.removeChild(a)}},y.$bindHover=function(a){var b=this;p(a,"boundHover")||(p(a,"boundHover",!0),s(a,"mouseenter",function(){var c=b._currEPKey;"EP_DS"==c?p(a,"isFloater")||b.$highlightCPNT(a,!0):"EP_DETAIL"==c&&b.$activeFloater(a)}),s(a,"mouseleave",function(){var c=b._currEPKey;"EP_DS"==c?!p(a,"isFloater")&&b.$highlightCPNT(a,!1):"EP_DETAIL"==c&&b.$inactiveFloater(a,!1)}))},y.$highlightCPNT=function(a,b){var c,d=this._editor._vtplFork;b&&(c=(d.findCPNTByDom(a,this._el)||{}).id),this.highlightCPNT(c,b);var e=this._editor._ds;e&&e.highlight(c,b)},y.highlightCPNT=function(a,c){for(var d=this._el.getElementsByTagName("*"),e=this._editor._vtplFork,f=0;f<d.length;f++)d[f].getAttribute(b.DI_ATTR)&&this.$removeHoverStyle(d[f]);if(a&&c)for(var g=e.findCPNTDoms(a,this._el),f=0;f<g.length;f++)this.$addHoverStyle(g[f])},y.$addHoverStyle=function(a){a&&e(a,"c-di-o_o-hover")},y.$removeHoverStyle=function(a){a&&f(a,"c-di-o_o-hover")},y.$belongTo=function(){},y.$createFloater=function(){if(!this._lineFloater){var a=this._lineFloater=document.createElement("div");e(a,"console-floater"),document.body.appendChild(a),a.innerHTML=["<div>æ·»å ææ¬</div>","<div>æ·»å è¾å¥æ§ä»¶</div>","<div>å é¤æ¬è¡</div>"].join("");var b=k(a),c={primary:"ui-button-g"};this._uAddTextBtn=r(v,b[0],null,c),this._uAddVUIBtn=r(v,b[1],null,c),this._uRemoveLineBtn=r(v,b[2],null,c),a.style.display="none",p(a,"isFloater",!0),this.$bindHover(a)}},y.$initFloater=function(){var a=this._editor;this._uAddTextBtn.onclick=a.bindEditFn(function(){this.$addTextItem(this._lineFloater.trigger),this.$showFloater(!1)},this),this._uAddVUIBtn.onclick=a.bindEditFn(function(){this.$addVUIItem(this._lineFloater.trigger),this.$showFloater(!1)},this),this._uRemoveLineBtn.onclick=a.bindEditFn(function(){this.$removeLine(this._lineFloater.trigger),this.$showFloater(!1)},this)},y.$activeFloater=function(a){var b=this._lineFloater;if(b&&(g(a,"di-o_o-line")||p(a,"isFloater"))){b.needShow=!0;var c=b.trigger;p(a,"isFloater")||(this.$removeHoverStyle(c),c=b.trigger=a,this.$addHoverStyle(c)),this.$showFloater(!0);var d=m(c),e=b.style;e.left=d.left+c.offsetWidth-b.offsetWidth+"px",e.top=d.top+2-b.offsetHeight+"px"}},y.$inactiveFloater=function(a,b){function c(){e.trigger&&d.$removeHoverStyle(e.trigger),d.$showFloater(!1)}var d=this,e=this._lineFloater;e&&(!a||g(a,"di-o_o-line")||p(a,"isFloater"))&&(e.needShow=!1,b?c():setTimeout(function(){e&&!e.needShow&&c()},600))},y.$showFloater=function(a){var b=this._lineFloater;if(b){var c=b.style;a&&"none"==c.display?(c.display="",c.position="absolute"):a||""!=c.display||(c.display="none")}}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._vtplPanelPage=b.vtplPanelPage,this._mVTplModel=b.vtplModel,this._mPanelPageManager=b.panelPageManager,m(this,this._vtplPanelPage.vtplMgrGet(this))}function b(a){this._uSaveBtn=o(p,j("q-btn-save",a)[0],null,{primary:"ui-button-g"}),this._uSaveBtn.disable("SELF_START_EDIT"),this._uNameInput=o(q,j("q-vtpl-name",a)[0]),this._layout=new s({editor:this,el:j("vtpl-quick-ep-layout",a)[0]}),this._ds=new t({editor:this,el:j("vtpl-quick-ep-ds",a)[0]}),this._auth=new u({editor:this,el:j("vtpl-quick-ep-auth",a)[0]}),this.$resetEditPhaseRadio()}di.config.Dict;var c=di.helper.Util,d=di.helper.Dialog,e=di.config.Lang,f=xutil.object.inheritsObject,g=xutil.dom.addClass;xutil.dom.removeClass;var h=xutil.object.objKey,i=di.helper.Dialog.alert,j=xutil.dom.q,k=xutil.fn.bind;baidu.json.parse,xutil.string.encodeHTML,xutil.string.trim,xutil.dom.getParent;var l=xutil.dom.children,m=xutil.object.extend,n=c.foreachDoOri;xutil.string.template,c.preInit,xutil.url.stringifyParam;var o=c.ecuiCreate;c.cmptCreate4Console,c.cmptSync4Console,xutil.url.textParam;var p=ecui.ui.Button,q=ecui.ui.Input;c.select;var r,s,t,u,v=di.shared.ui.PanelPage;$link(function(){r=di.shared.model.DIFactory,s=di.console.editor.ui.VTplSoQuickEditorLayout,t=di.console.editor.ui.VTplSoQuickEditorDS,u=di.console.editor.ui.VTplSoQuickEditorAuth});var w=$namespace().VTplSoQuickEditor=f(v,function(c){var d=c.el;g(d,"vtpl-quick-editor"),d.innerHTML=y,a.call(this,d,c),b.call(this,d,c)}),x=w.prototype,y=['<div class="vtpl-panel-page-btns">',"<span>æ¥è¡¨åï¼</span>",'<input class="vtpl-name-input q-vtpl-name"/>','<span class="q-btn-save">ä¿å­</span>',"</div>",'<div class="vtpl-quick-btn-phase">','<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" checked="checked" />',"<span>ç¬¬ä¸æ­¥ï¼æ°æ®éè®¾å®</span>","</span>","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" />',"<span>ç¬¬äºæ­¥ï¼æ¥è¯¢æ¡ä»¶è®¾å®</span>","</span>","&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<span class="vtpl-quick-btn-phase-item">','<input type="radio" name="di-editor-phase" />',"<span>ç¬¬ä¸æ­¥ï¼æéè®¾å®</span>","</span>","</div>",'<div class="vtpl-quick-snippet"></div>','<div class="vtpl-quick-ep">','<div class="vtpl-quick-ep-ds" style="display:none">',"</div>",'<div class="vtpl-quick-ep-auth" style="display:none">',"</div>",'<div class="vtpl-quick-ep-layout">',"</div>","</div>"].join(""),z=["EP_DS","EP_DETAIL","EP_AUTH"];x.init=function(){var a=this._vtplPanelPage;this._uSaveBtn.onclick=k(a.doSave,a,this),this._uNameInput.onchange=this.bindEditFn(new Function,this)},x.doRefreshFork=function(a){var b=this._vtplFork=a;return this._uNameInput.setValue(b.vtplName||""),b.snippet.invalid?(i("snippetæ ¼å¼æ ¡éªå¤±è´¥ï¼ç¦æ­¢ç¼è¾"),this.disable("VTPL_INVALID"),void 0):(this._layout.resetLayout(),this._ds.refreshPanelDS(),this._auth.refreshPanelAuth(),!this._currEPKey&&this.$changeEditPhase("EP_DS"),void 0)},x.dispose=function(){n([this._uSaveBtn,this._uRefreshBtn,this._uOlapTableBtn,this._uOlapChartBtn,this._uPlaneTableBtn,this._uNameInput,this._ds,this._layout],"dispose",!0),w.superClass.dispose.call(this)},x.$active=function(){},x.$inactive=function(){},x.enable=function(a){h.remove(this,a),0==h.size(this)&&this._bDisabled&&(n([this._uSaveBtn,this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn,this._layout,this._ds,this._auth],"enable",a),w.superClass.enable.call(this))},x.disable=function(a){h.add(this,a),this._bDisabled||n([this._uSaveBtn,this._uRefreshBtn,this._uPlaneTableBtn,this._uOlapChartBtn,this._uOlapTableBtn,this._layout,this._ds,this._auth],"disable",a),w.superClass.disable.call(this)},x.doStartEdit=function(){this._uSaveBtn.enable("SELF_START_EDIT")},x.doSave=function(){var a=this._vtplFork;this._layout.doSave(),this._auth.saveAuth(),a.condClean(),a.vtplName=this._uNameInput.getValue();var b=a.contentStringify();return{vtplFork:a,errorMsg:b}},x.doCreated=function(){this._ds.refreshPanelDS()},x.$syncCond=function(a){var b=this,c=this._vtplFork,d="VTPL_SO_QUICK_EDITOR";this._mVTplModel.sync({datasourceId:"EXIST_COND",args:{reportTemplateIdList:c.rtplIdGet(!0),virtualTemplateId:c.vtplKey},preprocess:function(){b.disable(d)},result:function(e){var f=c.rtplCond,g=c.rtplCond=e.templateDims||{};for(var h in f)g[h]&&f[h]&&(g[h]=f[h]);b.enable(d),a.call(b)},error:function(c){b.disable(d),i("è·åæ¡ä»¶è®¾ç½®å¤±è´¥ï¼status="+c),a.call(b)}})},x.$changeEditPhase=function(a){function b(){f._layout.changeEditPhase(a),"EP_DS"==a?(f._ds.active(),f._auth.inactive()):"EP_AUTH"==a?(f._ds.inactive(),f._auth.active()):"EP_DETAIL"==a&&(f._ds.inactive(),f._auth.inactive())}var c=this._currEPKey,f=this;return"EP_DS"!=c||this._ds.checkAllDSLinked()?("EP_AUTH"==c&&this._auth.saveAuth(),c&&c==a||(this._currEPKey=a,"EP_DS"==a?b():"EP_AUTH"==a?(this._auth.refreshPanelAuth(),b()):"EP_DETAIL"==a&&this.$syncCond(b)),!0):(d.alert(e.NEED_DS_ALL_LINKED),!1)},x.$resetEditPhaseRadio=function(){for(var a,b=j("vtpl-quick-btn-phase",this.getEl())[0],c=l(b),d=this,e=0;a=c[e];e++)a.onclick=function(a){return function(){return d.$changeEditPhase(a)?(this.getElementsByTagName("input")[0].checked=!0,void 0):!1}}(z[e])},x.$handleFatalError=function(){this.disable()}}(),$namespace("di.console.editor.ui"),function(){function a(a,b){this._mPanelPageManager=new k({adapter:l}),this._mVTplModel=b.vtplModel}function b(){this._uMainContainer=h(p,g("q-main",this.getEl())[0],null,{primary:"ui-tab"}),this._uCubeConfigPanel=new o({parent:this})}di.config.Dict;var c=di.helper.Util;di.helper.Dialog,di.config.Lang,di.config.URL;var d=xutil.object.inheritsObject,e=xutil.dom.addClass;xutil.dom.removeClass,ecui.addEventListener,xutil.object.extend;var f=xutil.object.objKey;xutil.object.getByPath,xutil.url.parseParam;var g=xutil.dom.q;xutil.dom.children;var h=ecui.$fastCreate;xutil.fn.bind,xutil.string.trim,xutil.string.template;var i=xutil.uid.getUID;c.ecuiCreate,baidu.ajax.request;var j=di.shared.ui.PanelPage;xutil.url.textParam,baidu.json.parse,ecui.ui.Button;var k,l,m,n,o,p=ecui.ui.TabContainer;$link(function(){GLOBAL_MODEL=di.shared.model.GlobalModel,m=di.shared.model.DIFactory,n=di.shared.model.CommonParamFactory,k=di.shared.model.PanelPageManager,l=di.shared.model.PanelPageTabAdapter,o=di.console.shared.ui.CubeConfigPanel});var q=$namespace().CmdPage=d(j,function(c){var d=c.el;e(d,"cmd-page"),d.innerHTML=s,a.call(this,d,c),b.call(this,d,c)}),r=q.prototype,s=['<div class="cmd-page-btns"></div>','<div class="q-main"></div>'].join("");r.init=function(){var a=this;this._mPanelPageManager.inject(this._uMainContainer),this._mPanelPageManager.attach("page.active",this.$pageActiveHandler,this),this._uCubeConfigPanel.attach("select",this.$openEditor,this),this._mPanelPageManager.init(),this._uCubeConfigPanel.init();var b=document.createElement("div"),c=g("cmd-page-btns",this.getEl())[0];b.innerHTML='<input type="button" value="åå»ºå¤ç»´éè§è¡¨æ°æ®é" />',b=b.firstChild,c.appendChild(b),b.onclick=function(){a.openCubeConfigPanel("RTPL_OLAP_TABLE")},b.innerHTML='<input type="button" value="åå»ºå¤ç»´å¾æ°æ®é" />',b=b.firstChild,c.appendChild(b),b.onclick=function(){a.openCubeConfigPanel("RTPL_OLAP_CHART")},b.innerHTML='<input type="button" value="åå»ºå¹³é¢è¡¨æ°æ®é" />',b=b.firstChild,c.appendChild(b),b.onclick=function(){var b=g("q-cmd-page-rtpl-input",c)[0].value;if(b){var d="RTPL_PLANE_TABLE";a._mPanelPageManager.openByURI("di.console.editor.ui.PlaneEditor?"+["reportTemplateId="+b,"reportType="+d,"pageId="+d+"_"+b+"_"+i(),"pageTitle=[å¹³é¢è¡¨] "+d+"_"+b,"act=EDIT"].join("&"))}else a.openCubeConfigPanel("RTPL_PLANE_TABLE")},b.innerHTML='<input type="button" value="tmp snippet code" />',b=b.firstChild,c.appendChild(b),b.onclick=function(){a.$openEditor({menuId:Math.random(),menuUrl:"di.console.editor.ui.SnippetCodeEditor?"+["pageTitle=[Code]"].join("&")})},b.innerHTML='<input class="q-cmd-page-rtpl-input" type="input" />',c.appendChild(b.firstChild)},r.dispose=function(){this._mPanelPageManager.dispose(),q.superClass.dispose.call(this)},r.$active=function(){},r.$inactive=function(){},r.enable=function(a){f.remove(this,a),0===f.size(this)&&this._bDisabled&&q.superClass.enable.call(this)},r.disable=function(a){f.add(this,a),!this._bDisabled,q.superClass.disable.call(this)},r.$pageActiveHandler=function(){},r.openCubeConfigPanel=function(a){this._uCubeConfigPanel.changeReportType(a),this._uCubeConfigPanel.open()},r.$openEditor=function(a){this._mPanelPageManager.openByURI(a.menuUrl,{vtplModel:this._mVTplModel})}}(),$namespace("di.console.mgr.ui"),function(){function a(){}function b(){}var c=ecui.inherits,d=new Function;ecui.dom.addClass,ecui.dom.removeClass,ecui.addEventListener,xutil.object.extend,xutil.dom.q,xutil.fn.bind;var e=xutil.string.template,f=di.helper.Util.preInit;di.helper.Util.ecuiCreate;var g=di.shared.ui.PanelPage;ecui.ui.Control,ecui.ui.Select,ecui.ui.RadioContainer,di.config.Dict;var h;$link(function(){h=di.shared.model.PanelPageManager});var i=$namespace().ReportListPage=c(g,"report-list-page",function(a,b){f(this,a,b),a.innerHTML=e(k)},function(c,d){a(c,d),b(c,d)}),j=i.prototype,k=['<div class="olap-condition">',"æ¥è¡¨åè¡¨","</div>",'<div class="olap-table">',"è¡¨æ ¼","</div>"].join("");j.$setSize=d,j.init=function(){},j.$active=function(){},j.$inactive=function(){},j.$dispose=function(){i.superClass.$dispose.call(this)}}(),$namespace("di.console.frame.ui"),function(){function a(){this._mPanelPageManager=new n({adapter:o}),this._mVTplModel=new p}function b(a){this._uMyViewMenu=g(k,f("q-menu-myview",a)[0],null),this._uCreateByMoldMenu=g(k,f("q-menu-createbymold",a)[0],null),this._uMgrMenu=g(k,f("q-menu-mgr",a)[0],null),this._diMgrMenu=g(k,f("q-menu-dimgr",a)[0],null),this._uMainContainer=g(l,f("q-main",a)[0],null,{primary:"ui-tab"})}var c=xutil.object.inheritsObject;di.console.shared.ui.MenuMainPage,di.config.Dict,di.config.URL;var d,e,f=xutil.dom.q;ecui.util.preInit;var g=ecui.$fastCreate,h=xutil.string.template;xutil.url.parseParam,xutil.lang.isString,xutil.object.getByPath;var i=xutil.fn.bind,j=xui.XView,k=ecui.ui.PlFloatMenu,l=ecui.ui.TabContainer;di.config.Dict,di.config.URL;var m,n,o,p;$link(function(){var a=di.shared;d=a.model.CubeMetaModel,e=a.model.GlobalModel,n=a.model.PanelPageManager,o=a.model.PanelPageTabAdapter,m=a.model.MenuPageManager,p=di.console.editor.model.VTplModel});var q=$namespace().ConsoleFrame=c(j,function(c){var d=c.el;d.innerHTML=h(s),a.call(this,d,c),b.call(this,d,c)}),r=q.prototype,s=['<div class="main-left">','<div class="menu-mgr menu-sep">','<div class="ui-menu q-menu-myview"><label>&nbsp;</label></div>',"</div>",'<div class="menu-mgr menu-sep">','<div class="ui-menu q-menu-createbymold"><label>&nbsp;</label></div>',"</div>",'<div class="menu-mgr menu-sep">','<div class="ui-menu q-menu-mgr"><label>&nbsp;</label></div>',"</div>",'<div class="menu-mgr menu-sep">','<div class="ui-menu q-menu-dimgr"><label>&nbsp;</label></div>',"</div>","</div>",'<div class="main-right">','<div class="ui-tab q-main"></div>',"</div>",'<div class="clear"></div>'].join("");r.init=function(){this._mPanelPageManager.inject(this._uMainContainer),this._uMyViewMenu.onchange=i(this.$menuChangeHandler,this),this._uCreateByMoldMenu.onchange=i(this.$menuChangeHandler,this),this._uMgrMenu.onchange=i(this.$menuChangeHandler,this),this._diMgrMenu.onchange=i(this.$openDataSourcePage,this),this._mPanelPageManager.attach("page.active",this.$pageActiveHandler,this),this.$renderDiMgrList(),this.$renderCreateByMold(),this.$renderMgrList(),this.$renderMyViewList(),this._mPanelPageManager.init(),this._mVTplModel.init()},r.dispose=function(){this._mPanelPageManager.dispose(),q.superClass.dispose.call(this)},r.$openDataSourcePage=function(){window.open("manage/showdatasource.action")},r.$menuChangeHandler=function(a){this._mPanelPageManager.openByURI(a.menuUrl,{vtplModel:this._mVTplModel,forceActive:!0})},r.$pageActiveHandler=function(a){a.indexOf("MENU_ID_MGR")>-1?(this._uMgrMenu.select(a),this._uMyViewMenu.select(null),this._uCreateByMoldMenu.select(null),this._diMgrMenu.select(null)):a.indexOf("MENU_ID_MYVIEW")>-1?(this._uMgrMenu.select(null),this._uMyViewMenu.select(a),this._uCreateByMoldMenu.select(null),this._diMgrMenu.select(null)):a.indexOf("MENU_ID_CREATEBYMOLD")>-1?(this._uMgrMenu.select(null),this._uMyViewMenu.select(null),this._uCreateByMoldMenu.select(a),this._diMgrMenu.select(null)):a.indexOf("MENU_ID_DIMGR")>-1?(this._uMgrMenu.select(null),this._uMyViewMenu.select(null),this._uCreateByMoldMenu.select(a),this._diMgrMenu.select(null)):(this._uMgrMenu.select(null),this._uMyViewMenu.select(null),this._uCreateByMoldMenu.select(null),this._diMgrMenu.select(null))},r.$renderVTplList=function(){},r.$renderDiMgrList=function(){var a=this.getVTplMenuData().menuTree;this._diMgrMenu.setData(a.menuList),this._diMgrMenu.select(a.selMenuId)},r.getVTplMenuData=function(){var a=[],b={menuList:a},c=[],d="MENU_ID_DIMGR";a.push({text:"å·¥ä½å°ç®¡ç",value:d+"1",children:c});for(var e=0;1>e;e++)c.push({text:"æ°æ®æº",prompt:"æ°æ®æºç¸å³èµæº",floatTree:[{value:d+String(Math.random()),children:[{text:"ç®¡ç",value:d+String(Math.random())}]}]});return b.selMenuId=d+"1",{menuTree:b}},r.$renderMoldList=function(){},r.$renderMgrList=function(){var a="MENU_ID_MGR",b=a+1,c=[];c.push({text:"æ§å¶å°",value:b,url:"di.console.editor.ui.CmdPage?pageId="+b+"&pageTitle="+"æ§å¶å°"}),this._uMgrMenu.setData(c),this._uMgrMenu.select(b)},r.$renderCreateByMold=function(){var a="MENU_ID_CREATEBYMOLD",b=a+1,c=[];c.push({text:"åå»ºæ¥è¡¨(åºäºæ¨¡æ¿)",value:b,url:"di.console.editor.ui.MoldListPanelPage?pageId="+b+"&pageTitle="+"æ¨¡æ¿åè¡¨"}),this._uCreateByMoldMenu.setData(c),this._uCreateByMoldMenu.select(b)},r.$renderMyViewList=function(){var a="MENU_ID_MYVIEW",b=a,c=[],d="di.console.editor.ui.MyViewPanelPage?pageId="+b+"&pageTitle="+"æçæ¥è¡¨è§å¾"+"&act="+"EDIT#QUICK";c.push({text:"æçæ¥è¡¨",value:b,url:d}),this._uMyViewMenu.setData(c),this._uMyViewMenu.select(b),this._mPanelPageManager.openByURI(d,{vtplModel:this._mVTplModel,forceActive:!0})}}(),$namespace("di.console.frame.ui"),function(){function a(){return l.ieVersion<8||l.firefoxVersion<10||l.chromeVersion<10?(q=!1,document.body.innerHTML=['<div style="color: #0DA823; font-size:16px; font-weight: 2px; text-align: center; margin-top: 50px">',n.SAD_FACE,'<span style="border:1px #17E734 solid; padding: 5px 10px;">å¯¹ä¸èµ·ï¼æ­¤æµè§å¨çæ¬è¿ä½æä¸è¢«æ¯æï¼è¯·ä½¿ç¨ç°ä»£æµè§å¨ãï¼ie8+, chrome10+, firefox10+ç­ï¼</span>',"</div>"].join(""),void 0):void 0}function b(a){q&&(k.setWebRoot(a.webRoot),i(a),j().installClz())}function c(a){if(q){var b;a=a||{},m("q-global-main")[0].appendChild(b=document.createElement("div")),this._uGlobalMenu=g(h,m("q-global-menu")[0],null),a.pageClass&&(this._uMainContainer=new(e(a.pageClass,$getNamespaceBase()))({el:b}))}}var d=xutil.object.inheritsObject,e=xutil.object.getByPath,f=xui.XView,g=di.helper.Util.ecuiCreate;di.config.Dict;var h,i,j,k=di.config.URL,l=xutil.dom,m=l.q,n=di.config.Lang;$link(function(){h=di.console.shared.ui.GlobalMenu,i=di.shared.model.GlobalModel,j=di.shared.model.DIFactory});var o=$namespace().MainPage=d(f,function(d){a(),b.call(this,d),c.call(this,d)}),p=o.prototype,q=!0;f.$domReady=ecui.dom.ready,p.init=function(){if(q){o.superClass.init.call(this);var a=i().getGlobalMenuManager();this._uGlobalMenu.setGlobalMenuManager(a),a.setGlobalMenu(this._uGlobalMenu),this._uGlobalMenu.init(),this._uMainContainer&&this._uMainContainer.init()}},p.dispose=function(){i().dispose(),o.superClass.$dispose.call(this)}}(),xui.XProject.doLink(),xui.XProject.doEnd();